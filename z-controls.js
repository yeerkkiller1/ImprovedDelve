Uize=(function(){'use strict';var a_$=function(){},a__,a_a='string',a_b='object',a_c='number',a_d='boolean',a_e='function',a_f=Function,a_g=Array,a_h=false,a_i=true,a_j=null,a_k={},a_l=Object.prototype.toString,
a_m,a_n,a_o,a_p,a_q,a_r,a_s,a_t,a_u,a_v,a_w,a_x,a_y,a_z=0,a_A=[],a_B,a_C= !!(a_g.indexOf&&a_g.lastIndexOf),a_D={'\n':'n','\r':'r','\t':'t'};function a_E(a_F){return(a_F.replace(/([\^\$\|\{\}\[\]\(\)\?\.\*\+\\])/g,'\\$1')
.replace(/[\n\r\t]/g,function(a_G){return'\\'+a_D[a_G]}));}function a_H(a_I){return a_I.length==1&&a_v(a_I[0])?a_I[0]:a_I;}function a_J(a_K){return(a_s(a_K)?a_K:a_K?{constructor:a__,toLocaleString:a__,toString:a__,valueOf:a__}
:{});}function a_L(a_M,a_N,a_O){var a_P= !a_O;if(a_P)a_O=a_M[0];if(!a_P||a_t(a_O)){var a_Q=a_M[+a_P],a_R=a_M.length;a_t(a_Q)&&a_N(a_O,a_Q);if(a_R>a_P+1){for(var a_S= +a_P;++a_S<a_R;)a_t(a_Q=a_M[a_S])&&a_N(a_O,a_Q)
;}}return a_O;}function a_T(a_O,a_Q){for(var a_U in a_Q)a_O[a_U]=a_Q[a_U];return a_O;}function a_V(a_O,a_Q){var a_W,a_X;for(var a_U in a_Q)(a_u(a_X=a_Q[a_U])&&a_u(a_W=a_O[a_U]))?a_V(a_W,a_X):(a_O[a_U]=a_X)
;}a_T(a_$,{capFirstChar:function(a_Y){return a_Y.charAt(0).toUpperCase()+a_Y.slice(1);},clone:a_n=function(a_Z){if(a_Z==a__)return a_Z;var a_0=typeof a_Z;if(a_0==a_a||a_0==a_c||a_0==a_d||a_x(a_Z))return a_Z
;var a_1=a_Z.constructor;if(a_1==Date||a_1==String||a_1==Number||a_1==Boolean){return new a_1(a_Z.valueOf())}else if(a_1==RegExp){return new RegExp(a_Z.source,(a_Z.global?'g':'')+(a_Z.ignoreCase?'i':'')+(a_Z.multiline?'m':'')
);}var a_2=a_1==Object,a_3= !a_2&&a_v(a_Z);if(a_2||a_3){var a_4,a_5,a_6=a_2?{}:[];if(a_3)a_6.length=a_Z.length;for(var a_U in a_Z)a_6[a_U]=(a_5=typeof(a_4=a_Z[a_U]))==a_a||a_5==a_c||a_5==a_d||a_4==a__
?a_4:a_n(a_4);return a_6;}return a_Z;},constrain:a_o=function(a_Z,a_7,a_8){return(a_7<a_8?(a_Z<a_7?a_7:a_Z>a_8?a_8:a_Z):(a_Z<a_8?a_8:a_Z>a_7?a_7:a_Z));},inRange:function(a_Z,a_7,a_8){return a_Z==a_o(a_Z,a_7,a_8);
},copyInto:function(){return a_L(arguments,a_T);},copy:function(){return a_L(arguments,a_T,{});},mergeInto:function(){return a_L(arguments,a_V);},merge:function(){return a_L(arguments,a_V,{});},forEach:a_p=function(a_Q,a_9,a_$_,a___){
if(a_Q){var a_a_=a_s(a_Q),a_b_=a_a_&&a_v(a_Q);if(!a_b_||a_Q.length){if(typeof a_9==a_a)a_9=a_f('value,key,source',a_9);if(a_a_){if(a_b_||a_$.isArguments(a_Q)){var a_c_=a_A.forEach;if(a_c_&& !(a_b_&&a___)){
a_c_.call(a_Q,a_9,a_$_);}else{for(var a_d_= -1,a_e_=a_Q.length;++a_d_<a_e_;)(a___||a_d_ in a_Q)&&a_9.call(a_$_,a_Q[a_d_],a_d_,a_Q);}}else{for(var a_d_ in a_Q)a_9.call(a_$_,a_Q[a_d_],a_d_,a_Q);}}else if(typeof a_Q==a_c){
for(var a_d_= -1;++a_d_<a_Q;)a_9.call(a_$_,a_d_,a_d_,a_Q);}}}},resolveTransformer:a_q=function(a_f_){var a_g_=typeof a_f_;return(a_f_==a__?a_$.returnX:a_g_==a_e?a_f_:a_g_=='string'?a_f('value,key','return '+a_f_)
:a_g_=='object'?(a_$.isRegExp(a_f_)?function(a_Z){return a_f_.test(a_Z+'')}:a_v(a_f_)?function(a_Z){return a_f_[+a_Z]}:function(a_Z){return a_f_.hasOwnProperty(a_Z)?a_f_[a_Z]:a_Z}):function(){return a_f_}
);},resolveMatcher:function(a_h_){return a_h_==a__?a_$.returnTrue:a_q(a_h_);},map:function(a_Q,a_i_,a_O){if(typeof a_Q==a_c){a_Q=new a_g(a_Q);if(typeof a_O!=a_b)a_O=a_Q;}a_i_=a_q(a_i_);if(typeof a_O!=a_b)
a_O=a_O===a_h?a_Q:a_v(a_Q)?[]:{};a_p(a_Q,function(a_Z,a_j_){var a_k_=a_i_.call(a_Q,a_Z,a_j_);if(a_O)a_O[a_j_]=a_k_;},0,a_i);return a_O;},applyAll:function(a_$_,a_l_,a_I){a_I||(a_I=a_A);for(var a_m_= -1,a_n_=a_l_.length;++a_m_<a_n_;)
a_l_[a_m_].apply(a_$_,a_I);},callOn:function(a_O,a_o_,a_I){var a_p_=a_m(a_o_),a_q_= !a_p_&&a_x(a_o_);a_I||(a_I=a_A);function a_r_(a_O){if(a_O!=a__)a_u(a_O)||a_v(a_O)?a_p(a_O,a_r_,0,a_i):a_q_||(a_p_&&a_x(a_O[a_o_]))
?(a_q_?a_o_:a_O[a_o_]).apply(a_O,a_I):0;}if(a_p_||a_q_)a_r_(a_O);},defaultNully:function(a_Z,a_s_){return a_Z!=a__?a_Z:a_s_;},indexIn:function(a_Q,a_Z,a_t_,a_u_){var a_v_=a_w(a_Q),a_6= -1;if(a_v_||a_s(a_Q)){
var a_w_=a_v_?a_Q:a_r(a_Q);if((a_u_=a_u_!==a_h)&&a_C){a_6=a_g[a_t_?'lastIndexOf':'indexOf'](a_w_,a_Z);}else{for(var a_x_=a_w_.length,a_d_=a_t_?a_x_: -1,a_y_=a_t_? -1:1;--a_x_>=0;){var a_z_=a_w_[a_d_+=a_y_];
if(a_u_?a_z_===a_Z:a_z_==a_Z){a_6=a_d_;break;}}}if(!a_v_&&a_6> -1)a_6=a_$.keys(a_Q)[a_6];}return a_6;},keys:function(a_A_){var a_6=[];if(!a_m(a_A_))for(var a_j_ in a_A_)a_6.push(a_j_);return a_6;},totalKeys:function(a_A_){
var a_6=0;if(!a_m(a_A_))for(var a_j_ in a_A_)a_6++;return a_6;},values:a_r=function(a_A_){if(a_v(a_A_))return a_A_;var a_6=[];if(!a_m(a_A_))for(var a_j_ in a_A_)a_6.push(a_A_[a_j_]);return a_6;},meldKeysValues:function(a_B_,a_r){
var a_6={};for(var a_C_= -1,a_D_=Math.min(a_B_.length,a_r.length);++a_C_<a_D_;)a_6[a_B_[a_C_]]=a_r[a_C_];return a_6;},min:function(a_A_){return Math.min.apply(0,a_r(a_A_));},max:function(a_A_){return Math.max.apply(0,a_r(a_A_));
},reverseLookup:function(a_A_,a_K){var a_E_=a_J(a_K);if(!a_m(a_A_))for(var a_j_ in a_A_)a_E_[a_A_[a_j_]+'']=a_j_;return a_E_;},lookup:function(a_r,a_F_,a_K){var a_E_=a_J(a_K);if(arguments.length==1)a_F_=a_i;
if(a_r!=a__){for(var a_G_= -1,a_H_=a_r.length;++a_G_<a_H_;)a_E_[a_r[a_G_]]=a_F_;}return a_E_;},isObject:a_s=function(a_Z){return!!a_Z&&typeof a_Z==a_b;},canExtend:a_t=function(a_Z){var a_0=typeof a_Z;
return!!a_Z&&(a_0==a_b||a_0==a_e);},isPlainObject:a_u=function(a_Z){var a_I_=a_Z&&a_Z.constructor;return!!(a_I_&&(a_I_==Object||(typeof a_I_.prototype.hasOwnProperty==a_e&&a_I_.prototype.hasOwnProperty('hasOwnProperty')
)));},isArray:a_v=function(a_Z){return a_Z instanceof a_g||(!!a_Z&&a_x(a_Z.splice));},isList:a_w=function(a_Z){return a_s(a_Z)&&typeof a_Z.length==a_c;},isArguments:function(a_Z){return(a_w(a_Z)&&(a_l.call(a_Z)=='[object Arguments]'||
typeof a_Z.callee==a_e));},isFunction:a_x=function(a_Z){var a_1=a_Z&&a_Z.constructor;return!!(a_1&&a_1==a_1.constructor);},isNumber:function(a_Z){return typeof a_Z==a_c&&a_Z===a_Z;},isString:a_m=function(a_Z){
return typeof a_Z==a_a;},isBoolean:function(a_Z){return typeof a_Z==a_d;},isNully:function(a_Z){return a_Z==a__;},isPrimitive:a_y=function(a_Z){return a_Z!=a__&& !(a_Z instanceof a_Z.constructor);},isRegExp:function(a_Z){
return a_l.call(a_Z)=='[object RegExp]';},isIn:function(a_Q,a_Z,a_u_){return a_$.indexIn(a_Q,a_Z,a_h,a_u_)!== -1;},isEmpty:function(a_A_){if(a_s(a_A_)&&a_s(a_A_=a_A_.valueOf())){if(a_v(a_A_))return!a_A_.length;
for(var a_j_ in a_A_)return a_h;return a_i;}return!a_A_;},isNaN:function(a_Z){return a_Z!==a_Z;},isSameAs:function(a_Z,a_J_){return a_Z===a_J_||(a_Z!==a_Z&&a_J_!==a_J_);},emptyOut:function(a_Q){if(a_s(a_Q)){
if(a_v(a_Q)){a_Q.length=0;}else{for(var a_U in a_Q)delete a_Q[a_U];}}return a_Q;},recordMatches:function(a_K_,a_L_){if(!a_K_)return!a_L_;if(a_x(a_L_))return a_L_(a_K_);for(var a_U in a_L_){if(a_K_[a_U]!==a_L_[a_U])return a_h;
}return a_i;},toNumber:function(a_Z,a_M_){if(typeof a_Z==a_c){if(a_Z==a_Z)return a_Z;}else{if(a_x(a_Z))a_Z=a_Z();if(a_s(a_Z))a_Z=a_Z.valueOf();}return((a_Z=a_Z==a__||a_Z===''||a_Z!==a_Z|| !a_y(a_Z)?NaN
: +a_Z)!=a_Z&&arguments.length>1?a_M_:a_Z);},copyList:function(a_N_){return a_A.slice.call(a_N_);},push:function(a_O_,a_P_){a_A.push.apply(a_O_,a_v(a_P_)?a_P_:a_$.copyList(a_P_));return a_O_;},findRecordNo:function(a_Q_,a_L_,a_R_){
for(var a_S_= -1,a_T_=a_Q_?a_Q_.length:0;++a_S_<a_T_;)if(a_$.recordMatches(a_Q_[a_S_],a_L_))return a_S_;return a_o(a_$.toNumber(a_R_,-1),-1,a_T_-1);},findRecord:function(a_Q_,a_L_,a_R_){var a_S_=a_$.findRecordNo(a_Q_,a_L_,a_R_);
return a_S_> -1?a_Q_[a_S_]:null;},getClass:function(a_U_){return(a_U_==a__?a__:typeof a_U_==a_e?a_U_:a_U_.constructor);},getGuid:function(){return'uizeGuid'+a_z++;},global:a_f('return (function () {return this}) ()'
),eval:a_f('\'use strict\'; return eval (arguments [0])'),laxEval:a_f('return eval (arguments [0])'),quarantine:function(a_V_){var a_W_=(a_V_+='').slice(a_V_.indexOf('(')+1,a_V_.indexOf(')')),a_X_=a_V_.slice(a_V_.indexOf('{')+1,a_V_.lastIndexOf('}'))
;return a_W_?a_f(a_W_,a_X_):a_f(a_X_);},isInstance:function(a_Z){return!!(typeof a_Z==a_b&&a_Z&&a_Z.constructor.subclass);},nop:a_f(),returnFalse:a_f('return false'),returnTrue:a_f('return true'),returnX:a_f(
'x','return x'),package:function(a_Y_){return a_T(function(){},a_Y_);},pairUp:function(a_Z_){var a_6={},a_I=a_H(arguments),a_0_=a_I.length;if(a_0_<3){a_6[a_I[0]]=a_I[1];}else{for(var a_1_= -2;(a_1_+=2)<a_0_;)
a_6[a_I[a_1_]]=a_I[a_1_+1];}return a_6;},escapeRegExpLiteral:a_E,substituteInto:function(a_Q,a_2_,a_3_){if(!(a_Q=a_Q==a__?'':a_Q+'')||a_2_==a__)return a_Q;if(a_y(a_2_))a_2_=[a_2_];var a_4_=(a_3_||'[#KEY]').split('KEY'),
a_5_=[];for(var a_6_ in a_2_)a_5_.push(a_E(a_6_));return a_Q.replace(new RegExp(a_E(a_4_[0])+'('+a_5_.join('|')+')'+a_E(a_4_[1]),'g'),function(a_7_,a_6_){return a_2_[a_6_]+''});},noNew:function(a_1){
var a_8_;function a_9_(){if(a_8_){a_8_=a_h;return this;}else{var m=this;if(m==a__||m.constructor!=a_9_){a_8_=a_i;m=new a_9_;}a_1.apply(m,arguments);return m;}}return a_9_;},now:a_f('return '+(Date.now?'Date.now()':'+new Date')
),since:function(a_$a){return Uize.now()-a_$a;}});var a__a=function(){var m=this;m.a_aa={};m.a_ba={};m.a_ca={};},a_da=a__a.prototype;a_da.done=function(a_ea,a_6){var m=this,a_ca=m.a_ca[a_ea];m.a_aa[a_ea]=a_k;
m.a_ba[a_ea]=a_6;if(a_ca){delete m.a_ca[a_ea];for(var a_fa= -1,a_ga=a_ca.length;++a_fa<a_ga;)a_ca[a_fa](a_6);}};a_da.once=function(a_ha,a_ia){var m=this;if(a_w(a_ha)&&a_ha.length<2)a_ha=a_ha[0];if(a_ha==a__){
a_ia();}else if(a_w(a_ha)){var a_ja=[],a_ka=a_ha.length,a_la=0;a_p(a_ha,function(a_ea,a_ma){m.once(a_ea,function(a_6){a_ja[a_ma]=a_6;(++a_la==a_ka)&&a_ia.apply(0,a_ja);});});}else{m.a_aa[a_ha]==a_k?a_ia(m.a_ba[a_ha])
:(m.a_ca[a_ha]||(m.a_ca[a_ha]=[])).push(a_ia);}};var a_na='[#modulePath]',a_oa={},a_pa={},a_qa={},a_ra=new a__a(),a_sa=[],a_ta,a_ua,a_va;function a_wa(a_xa){return a_xa.replace(/\.([^\.]+)/g,function(a_L_,a_ya){return'[\''+a_ya+'\']'}
);}a_T(a_$,{getModuleByName:a_ua=function(a_xa){var a_za;return(typeof a_xa==a_a?(a_oa[a_xa]||(a_xa=='*'&&a_oa)||((a_za=a_f('try {return '+a_wa(a_xa)+'} catch (e) {}')())&&(a_oa[a_xa]=a_za))):a_xa);},
resolveModuleDefinition:a_va=function(a_Aa){if(a_m(a_Aa))a_Aa={name:a_Aa};var a_Ba=a_Aa.name=a_Aa.name||'',a_Ca=a_Aa.host=a_Ba.substr(0,a_Ba.lastIndexOf('.')),a_Da=a_Aa.superclass||a_Ca,a_Ea=a_Aa.required
;a_Ea=a_Aa.required=a_m(a_Ea)?a_Ea.split(','):a_Ea||[];a_Ca&&a_Ea.push(a_Ca);a_Da!=a_Ca&&a_Ea.push(a_Da);return a_Aa;},require:function(a_Fa,a_Ga){if(typeof a_Fa==a_a)a_Fa=[a_Fa];a_Ga&&a_ra.once(a_Fa,a_Ga);
a_p(a_Fa,function(a_za){if(a_qa[a_za]!=a_k){a_qa[a_za]=a_k;a_$.moduleLoader(a_za,function(a_Ha){a_Ha&&a_$.laxEval(a_Ha)})}});},getPathToLibrary:function(a_Ia,a_Ja){if(typeof document!='undefined'&&document.getElementsByTagName
){for(var a_Ka= -1,a_La=document.getElementsByTagName('SCRIPT'),a_Ma=a_La.length,a_Na,a_Oa;++a_Ka<a_Ma;){if((a_Oa=(a_Na=a_La[a_Ka].src).indexOf(a_Ia))> -1)return(a_Ja?a_Na.replace(a_Ia,a_Ja):a_Na.slice(0,a_Na.lastIndexOf('/',a_Oa)+1)
);}}return'';},module:function(a_Aa){var a_Ba=(a_Aa=a_va(a_Aa)).name;if(!a_Ba||a_pa[a_Ba]!=a_k){a_pa[a_Ba]=a_qa[a_Ba]=a_k;var a_Ea=a_Aa.required;a_$.require(a_Ea,function(){var a_za,a_Pa=a_Aa.builder
;if(a_Pa){for(var a_Qa=a_Ea.length,a_Ra={};--a_Qa>=0;){var a_Sa=a_Ea[a_Qa];a_Ra[a_Sa]=a_oa[a_Sa];}a_za=a_Pa(a_oa[a_Aa.superclass||a_Aa.host||''],a_Ra);}if(a_Ba){a_za=a_oa[a_Ba]=a_za||function(){};(a_f(a_wa(a_Ba)+'=arguments[0]'))(a_za);
var a_Ta=a_Ba.lastIndexOf('.');if(a_Ta> -1)(a_ua(a_Ba.slice(0,a_Ta)).nonInheritableStatics||{})[a_Ba.slice(a_Ta+1)]=1;}if(a_x(a_za)){a_za.moduleName=a_Ba;a_za.pathToResources=a_za==a_$?a_$.getPathToLibrary('Uize.js')
:a_$.moduleUrlTemplate.replace(a_na,a_$.modulePathResolver(a_Ba).replace(/\./g,'_')+'/');}a_ra.done(a_Ba,a_za);});}},moduleLoader:function(a_Ua,a_Ga){var a_Va=document.createElement('script');a_Va.async=true;
a_Va.type='text/javascript';a_Va.src=a_$.moduleUrlResolver(a_Ua);(a_B||(a_B=document.getElementsByTagName('HEAD')[0])).appendChild(a_Va);},modulePathResolver:function(a_xa){var a_Wa=a_xa.match(a_ta);
return(a_Wa?a_Wa[1].replace(/\./g,'_')+a_Wa[2].replace(/\./g,'/'):a_xa);},addFolderOrgNamespaces:function(){a_ta=new RegExp('^('+a_$.map(a_$.push(a_sa,a_H(arguments)),a_E).join('|')+')(\\..+|$)');},moduleUrlResolver:function(a_xa){
return a_$.moduleUrlTemplate.replace(a_na,a_$.modulePathResolver(a_xa)+'.js');}});a_$.moduleUrlTemplate=a_$.getPathToLibrary('Uize.js',a_na);a_$.addFolderOrgNamespaces('Uize');a_$.module({name:'Uize',builder:function(){return a_$}});
return a_$;})();
Uize.module('Uize.Event');
Uize.module({name:'Uize.Event.Bus',builder:function(){var c_$=Uize.isFunction,c__=Uize.isObject,c_a={};return Uize.mergeInto(function(){},{prototype:{fire:function(c_b){var m=this,c_c=m.c_c;if(c_c){if(typeof c_b!='object')c_b={name:c_b};
var c_d=c_c[c_b.name],c_e=c_c['*'];if(c_d||c_e){var c_f=c_e&&c_d?c_e.concat(c_d):c_e||c_d,c_g=c_f.length;if(c_g==1){c_f[0].c_h(c_b);}else if(c_g==2){var c_i=c_f[0].c_h,c_j=c_f[1].c_h;c_i(c_b);c_j(c_b);
}else{if(!c_e|| !c_d)c_f=c_f.concat();for(var c_k= -1;++c_k<c_g;)c_f[c_k].c_h(c_b);}}}},wire:function(c_l,c_h){var m=this,c_c=m.c_c||(m.c_c={});if(c__(c_l)){for(var c_m in c_l)m.wire(c_m,c_l[c_m]);}else{
m.wireUnwireWrapper(c_l,function(c_m){(c_c[c_m]||(c_c[c_m]=[])).push({c_m:c_m,c_h:c_$(c_h)?c_h:typeof c_h=='string'?Function(c_h):function(c_b){c_h.fire(c_b)},c_n:c_h});});}},unwire:function(c_l,c_h){
var m=this,c_c=m.c_c;if(c_c){if(c__(c_l)){for(var c_m in c_l)m.unwire(c_m,c_l[c_m]);}else{m.wireUnwireWrapper(c_l,function(c_m){var c_o=c_c[c_m];if(c_o){if(c_h){for(var c_k=c_o.length;--c_k>=0;)c_o[c_k].c_n==c_h&&
c_o.splice(c_k,1);}(c_h&&c_o.length)||delete c_c[c_m];}});}}},hasHandlers:function(c_m){return!!(this.c_c||c_a)[c_m];},wireUnwireWrapper:function(c_m,c_p){c_p(c_m)}}});}});
Uize.module('Uize.Dom');
Uize.module({name:'Uize.Dom.Basics',required:'Uize.Event.Bus',builder:function(){'use strict';var c_$,c__=null,c_a=true,c_b=false,c_c='string',c_d='object',c_e=Uize,c_f=c_e.copyInto,c_g=c_e.returnFalse,
c_h,c_i,c_j,c_k,c_l,c_m,c_n,c_o,c_p=typeof navigator!='undefined',c_q=c_p?navigator:{userAgent:'',appName:''},c_r=c_q.userAgent.toLowerCase(),c_s=c_q.appName=='Microsoft Internet Explorer',c_t= +(c_s&&(c_r.match(/MSIE\s*(\d+)/i)||[0,0])[1]),
c_u=c_r.indexOf('gecko')> -1,c_v=c_r.indexOf('opera')> -1,c_w=c_u||c_v,c_x={clientX:0,clientY:0,pageX:0,pageY:0},c_y=c_s&&ActiveXObject,c_z={},c_A={},c_B=0,c_C=c_s&&c_t<7,c_D='table-',c_E=c_D+'row',c_F=c_D+'cell',
c_G=c_f({SPAN:'inline',THEAD:c_D+'header-group',TFOOT:c_D+'footer-group',LI:'list-item'},c_s&&typeof DOMImplementation=='undefined'?c__:{TABLE:'table',TR:c_E,TH:c_F,TD:c_F,TBODY:c_E+'-group',COLGROUP:c_D+'column-group',
COL:c_D+'column',CAPTION:c_D+'caption'}),c_H={borderColor:['border','Color'],borderWidth:['border','Width'],padding:1,margin:1},c_I={TABLE:c_a,THEAD:c_a,TFOOT:c_a,TBODY:c_a,TR:c_a,COL:c_a,COLGRPUP:c_a,
FRAMESET:c_a,HEAD:c_a,HTML:c_a,STYLE:c_a,TITLE:c_a},c_J={};function c_K(c_L){var c_M=document.getElementById(c_L);return(!c_s||(c_M&&c_M.id==c_L))?c_M:c__;}function c_N(c_O){c_x.clientX=c_O.clientX;c_x.clientY=c_O.clientY;
c_x.pageX=c_O.pageX;c_x.pageY=c_O.pageY;}function c_P(c_Q){var c_R=c_e.Dom.VirtualEvent;return(c_R&&c_Q.charCodeAt(c_Q.length-1)==41?c_R.resolve(c_Q):c_Q.charCodeAt(0)==111&&c_Q.charCodeAt(1)==110?c_Q.slice(2)
:c_Q);}var c_S=c_e.package({c_z:c_z,c_N:c_N,display:function(c_T,c_U){c_U=c_U===c_$|| !!c_U;c_i(c_T,function(c_V){c_V.style.display=c_U?(c_G[c_V.tagName]||'block'):'none';});},find:function(c_W){if(typeof c_W!=c_d|| !c_W||
typeof c_W.length=='number'||c_j(c_W))return c_W;var c_X=document,c_Y=c_e.isPrimitive,c_Z=[],c_0=c_f({},c_W),c_1='root'in c_0?c_h(c_0.root):c_X;delete c_0.root;if(c_1){var c_2=c_0.tagName;if('id'in c_0&&c_Y(c_0.id)){
var c_V=c_K(c_0.id);c_V&&c_Z.push(c_V);delete c_0.id;}else if('name'in c_0&&c_Y(c_0.name)){c_Z=c_X.getElementsByName(c_0.name);delete c_0.name;}else{var c_3=c_Y(c_2);c_3&&delete c_0.tagName;c_Z=c_1.getElementsByTagName(c_2&&c_3?c_2:'*');
c_1=c__;}if(c_1==c_X)c_1=c__;if(!c_2||c_2=='*')delete c_0.tagName;}var c_4=c_Z.length;for(var c_5 in c_0)break;if(!c_4||(c_5==c_$&& !c_1))return c_Z;var c_6=[],c_7;for(var c_8= -1;++c_8<c_4;){var c_V=c_Z[c_8];
if(c_7=c_1?c_l(c_V,c_1):c_a){for(var c_9 in c_0){var c_$_=c_V[c_9],c___=c_0[c_9],c_a_=c_e.isFunction;if(!(c_Y(c___)?c_$_==c___:(c___ instanceof RegExp?c___.test(c_$_||''):(c_a_(c___)?c___.call(c_V,c_$_):c_a)
))){c_7=c_b;break;}}}c_7&&c_6.push(c_V);}return c_6;},getById:c_h=function(c_V,c_b_,c_c_){if(typeof c_V!=c_c)return c_V;var c_M=c_c_?c_c_[c_V]:c_$;if(c_M===c_$){var c_d_=c_k(c_b_,c_V);(c_M=c_K(c_d_))||
((c_M=document.getElementsByName(c_d_)).length<2&&(c_M=c_M[0]||c__));if(c_c_)c_c_[c_V]=c_M;}return c_M;},getStyle:c_m=function(c_V,c_e_){var c_f_=typeof c_e_==c_c,c_g_=c_f_?'':{};if(c_V=c_h(c_V)){if(c_f_){
var c_h_=c_s&&c_e_=='opacity',c_i_=document.defaultView,c_j_=c_i_&&c_i_.getComputedStyle(c_V,'');if(c_h_)c_e_='filter';if(c_j_){if(!(c_g_=c_j_[c_e_])){var c_k_=c_H[c_e_];if(c_k_){var c_l_=c_k_[0]||c_e_,
c_m_=c_k_[1]||'',c_n_=c_j_[c_l_+'Top'+c_m_],c_o_=c_j_[c_l_+'Right'+c_m_],c_p_=c_j_[c_l_+'Bottom'+c_m_],c_q_=c_j_[c_l_+'Left'+c_m_];c_g_=c_n_==c_o_&&c_o_==c_p_&&c_p_==c_q_?c_q_:c_n_+' '+c_o_+' '+c_p_+' '+c_q_
;}}}else{var c_r_=c_V.currentStyle;c_g_=c_r_?c_r_.getAttribute(c_e_):c_V.style[c_e_];}if(c_h_){var c_s_=(c_g_||'').match(/alpha\s*\(\s*opacity\s*=([^\)]*)\)/i);c_g_=c_s_?c_s_[1]/100:1;}}else{for(c_e_ in c_e_)
c_g_[c_e_]=c_m(c_V,c_e_);}}return c_g_;},getValue:function(c_V){var c_g_;if(c_V=c_h(c_V)){if(c_j(c_V)){var c_t_=c_V.tagName;if(c_t_=='TEXTAREA'){c_g_=c_V.value;}else if(c_t_=='INPUT'){c_g_=c_V.type=='checkbox'?c_V.checked:c_V.value;
}else if(c_t_=='SELECT'){if(c_V.multiple){c_g_=[];c_e.forEach(c_V.options,function(c_u_){c_u_.selected&&c_g_.push(c_u_.value)});}else{c_g_=c_V.value;}}else if(c_t_=='IMG'){c_g_=c_V.src;}else{c_g_=c_V.innerHTML.replace(/<br\/?>/gi,'\n').replace(/&nbsp;/g,' ');
}}else{c_g_=(c_e.findRecord(c_V,{tagName:'INPUT',type:'radio',checked:c_a})||{}).value;}}return c_g_;},injectHtml:function(c_T,c_v_,c_w_){var c_x_,c_y_,c_z_,c_A_,c_B_,c_C_,c_D_=c_e.isList(c_v_)||(c_j(c_v_)&&(c_v_=[c_v_]))
;((c_x_=c_w_=='inner replace')||(c_y_=c_w_=='outer replace')||(c_z_=c_w_=='inner top')||(c_A_=c_w_=='outer top')||(c_B_=c_w_=='outer bottom')||(c_C_=c_a));c_D_||(c_v_+='');c_i(c_T,function(c_V){var c_E_=c_V.childNodes;
function c_F_(c_G_){return c_G_&&/<script/i.test(c_G_)}function c_H_(){return c_F_(c_v_)}if((c_x_||(!c_E_.length&&(c_z_||c_C_)))&& !c_j&& !c_H_()){c_V.innerHTML=c_v_;}else if(c_y_&&c_s&& !c_j&& !c_H_()){
c_V.outerHTML=c_v_;}else{var c_I_=[];if(c_x_)if(c_s&&c_I[c_V.tagName]){var c_J_=c_V.cloneNode();c_V.replaceNode(c_J_);c_V=c_J_;}else c_V.innerHTML='';if(c_D_){for(var c_8= -1,c_K_=c_v_.length;++c_8<c_K_;){
var c_L_=c_v_[c_8];if(c_L_){if(c_L_.parentNode)c_L_=c_L_.cloneNode(c_a);c_I_.push(c_L_);}}}else{if(c_y&&c_I[c_V.tagName]){var c_M_=new c_y('Microsoft.XMLDOM');c_M_.async=c_b;c_M_.loadXML('<foo>'+c_v_.replace(/&/g,'&amp;')+'</foo>');
var c_N_=c_M_.documentElement.childNodes,c_O_=function(c_P_){var c_Q_;switch(c_P_.nodeType){case 1:c_Q_=document.createElement(c_P_.tagName);for(var c_R_=c_P_.attributes,c_S_=c_R_.length;--c_S_>=0;){
var c_T_=c_R_[c_S_];c_Q_.setAttribute(c_T_.nodeName,c_T_.nodeValue);}if(c_Q_.tagName=='SCRIPT')c_Q_.text=c_P_.text;else{for(var c_U_= -1,c_V_=c_P_.childNodes,c_W_=c_V_.length,c_X_;++c_U_<c_W_;)(c_X_=c_O_(c_V_[c_U_]))
&&c_Q_.appendChild(c_X_);}break;case 3:c_Q_=document.createTextNode(c_P_.nodeValue);break;case 8:c_Q_=document.createComment(c_P_.nodeValue);break;}return c_Q_;};for(var c_8= -1;++c_8<c_N_.length;)c_I_.push(
c_O_(c_N_[c_8]));c_D_=c_a;}else{var c_Y_=document.createElement(c_V.tagName);c_Y_.innerHTML='<i>e</i>'+c_v_;c_I_=c_Y_.childNodes;}}var c_Z_=c_z_?c_E_[0]:c_B_?c_V.nextSibling:c_V,c_0_=c_V.parentNode,c_1_= +!c_D_,
c_2_=function(c_V){if(c_V.tagName=='SCRIPT'){var c_3_=document.createElement('script');if(c_V.id)c_3_.id=c_V.id;if(c_V.type)c_3_.type=c_V.type;c_3_.text=c_V.text;if(c_V.src)c_3_.src=c_V.src;c_V.parentNode.replaceChild(c_3_,c_V);
}else if(c_F_(c_V.innerHTML)){c_e.forEach(c_V.childNodes,c_2_);}};while(c_I_.length>c_1_){var c_4_=c_D_?c_I_.shift():c_I_[c_1_];if(c_C_||c_x_){c_V.appendChild(c_4_);}else if(c_z_){c_Z_?c_V.insertBefore(c_4_,c_Z_)
:c_V.appendChild(c_4_);}else if(c_A_||c_y_){c_0_.insertBefore(c_4_,c_Z_);}else if(c_B_){c_Z_?c_0_.insertBefore(c_4_,c_Z_):c_0_.appendChild(c_4_);}c_D_||c_2_(c_4_);}c_y_&&c_0_.removeChild(c_V);}});},isOnNodeTree:c_l=function(c_V,c_5_){
c_V=c_h(c_V);c_5_=c_h(c_5_);while(c_V){if(c_V==c_5_)return c_a;c_V=c_V.parentNode;}return c_b;},isNode:c_j=function(c_V){return!!(c_V&&typeof c_V==c_d&&(c_V.nodeType||c_V.getAttribute||c_V.documentElement||c_V.self==c_V)
);},joinIdPrefixAndNodeId:c_k=function(c_b_,c_L){return(c_b_||'')+(c_b_&&c_L?'-':'')+c_L;},doForAll:c_i=function(c_T,c_6_,c_b_,c_c_){if(typeof c_T==c_c)c_T=c_h(c_T,c_b_,c_c_);if(c_T!=c_$){if(c_j(c_T)){
c_6_(c_T);}else{var c_7_=typeof c_T;if((c_7_==c_d||c_7_=='function')&&typeof c_T.length=='number'){for(var c_8_= -1,c_9_=c_T.length;++c_8_<c_9_;)c_i(c_T[c_8_],c_6_,c_b_,c_c_);}else if(c_7_==c_d){for(var c_$a in c_T)
c_i(c_T[c_$a],c_6_,c_b_,c_c_);}}}},remove:function(c_T){c_i(c_T,function(c_V){c_V.parentNode.removeChild(c_V)});},setClipRect:function(c_T,c_n_,c_o_,c_p_,c_q_){var c__a='rect('+c_n_+'px, '+c_o_+'px, '+c_p_+'px, '+c_q_+'px)';
c_i(c_T,function(c_V){c_V.style.clip=c__a});},setInnerHtml:function(c_T,c_G_){c_G_+='';c_i(c_T,function(c_V){c_V.innerHTML=c_G_});},setOpacity:function(c_T,c_aa){c_J.opacity=c_aa;c_n(c_T,c_J);},setProperties:function(c_T,c_W){
c_i(c_T,function(c_V){c_f(c_V,c_W)});},setStyle:c_n=function(c_T,c_W){c_i(c_T,function(c_V){var c_ba=c_V.style,c_ca;if(c_s&&'opacity'in c_W)c_ba.filter=(c_ca=Math.round((c_W.opacity+''||'#')*100))<100
?'alpha(opacity='+c_ca+')':'';for(var c_e_ in c_W)c_ba[c_e_]=(typeof(c_ca=c_W[c_e_])==c_d&&c_ca?(c_ca=c_ca.valueOf()):c_ca)!=c_$?(typeof c_ca=='number'&&c_e_!='opacity'&&c_e_!='zIndex'?Math.round(c_ca)+'px'
:c_ca+''):'';});},setValue:function(c_T,c_g_){c_g_+='';c_i(c_T,function(c_V){var c_t_=c_V.tagName,c_da=c_V.readOnly;if(c_da)c_V.readOnly=c_b;if(c_t_=='TEXTAREA'){c_V.value=c_g_;}else if(c_t_=='INPUT'){
var c_ea=c_V.type;if(c_ea=='checkbox'){c_V.checked=c_g_=='true';}else if(c_ea=='radio'){c_V.checked=c_V.value==c_g_;}else{c_V.value=c_g_}}else if(c_t_=='SELECT'){if(!c_g_){c_V.selectedIndex= -1;}else{
var c_fa=c_V.options;if(c_V.multiple&&(c_g_=='*'||c_g_.indexOf(',')> -1)){var c_ga=c_g_!='*'?c_e.lookup(c_g_.split(',')):c_$;for(var c_ha=c_fa.length,c_u_;--c_ha>=0;)(c_u_=c_fa[c_ha]).selected= !c_ga||c_ga[c_u_.value]
;}else{c_V.selectedIndex=c_e.findRecordNo(c_fa,{value:c_g_},c_V.selectedIndex);}}}else if(c_t_=='IMG'){if(c_g_)c_V.src=c_g_;}else{c_t_=='PRE'&&c_s?(c_V.innerText=c_g_):(c_V.innerHTML=c_g_.replace(/</g,'&lt;').replace(/\n/g,'<br/>'))
;}if(c_da)c_V.readOnly=c_da;});},show:function(c_T,c_ia){c_n(c_T,{visibility:c_ia||c_ia===c_$?'inherit':'hidden'});},unwire:c_o=function(c_T,c_ja,c_ka,c_la){if(typeof c_ja==c_d&&c_ja&& !c_ja.virtualDomEvent
){for(var c_Q in c_ja)c_o(c_T,c_Q,c_ja[c_Q],c_ka);}else{c_S.unwireEventsByOwnerId(c_la,c_T!==c_$||c_ja!=c_$||c_ka!=c_$?{node:c_T,eventName:c_ja,handler:c_ka}:c_$);}},unwireEventsByOwnerId:function(c_ma,c_na){
var c_oa=c_A[c_ma=c_ma||''];if(c_oa){var c_pa=function(c_qa){if(c_qa!==c__){var c_ra=c_na&&c_na.eventName,c_sa=c_na&&c_na.handler,c_ta=c_qa||c_ra||c_sa;if(c_ra&&c_ra.charCodeAt)c_ra=c_P(c_ra);for(var c_ua=c_oa.length;--c_ua>=0;){
var c_va=c_oa[c_ua],c_wa=c_z[c_va],c_V=c_wa.c_V,c_Q=c_wa.c_Q;if(!c_ta||((!c_qa||c_qa==(c_wa.c_xa||c_V))&&(!c_ra||c_ra==c_Q)&&(!c_sa||c_sa==c_wa.c_ya))){c_ta&&c_oa.splice(c_ua,1);if(c_wa.c_za){c_S.unwireEventsByOwnerId(c_wa.c_za)
}else{try{c_V==window&&c_C?c_Aa.unwire(c_Q,c_wa.c_Ba):c_s?c_V.detachEvent('on'+c_Q,c_wa.c_Ba):c_V.removeEventListener(c_Q,c_wa.c_Ba,c_b);}catch(c_Ca){}}delete c_z[c_va];}}(c_ta&&c_oa.length)||delete c_A[c_ma];
}};c_na&&c_na.node!==c_$?c_i(c_na.node,c_pa):c_pa();}},wire:(function(){var c_Da=c_e.quarantine,c_Ea=c_Da(function(c_va){return(function(c_O){var c_wa=window.Uize&&Uize.Dom.Basics.c_z[c_va];return c_wa&&c_wa.c_ya.call(c_wa.c_V,c_O.windowEvent);
});}),c_Fa=c_Da(function(c_va){return(function(c_O){var c_wa=window.Uize&&Uize.Dom.Basics.c_z[c_va];return c_wa&&c_wa.c_ya.call(c_wa.c_V,c_O||window.event);});}),c_Ga={click:c_Fa,mouseover:c_Da(function(c_va){
return(function(c_O){var c_Ha=Uize.Dom.Basics,c_wa=window.Uize&&c_Ha.c_z[c_va],c_Ia=(c_O||(c_O=window.event)).fromElement||c_O.relatedTarget;if(c_wa){if(c_Ia){try{if(!c_Ia.Uize_Widget_Drag_shield&& !c_Ha.isOnNodeTree(c_Ia,c_wa.c_V)
)c_Ia=null;}catch(c_Ca){c_Ia=null;}}if(!c_Ia){c_Ha.c_N(c_O);return c_wa.c_ya.call(c_wa.c_V,c_O);}}});}),mouseout:c_Da(function(c_va){return(function(c_O){var c_Ha=Uize.Dom.Basics,c_wa=window.Uize&&c_Ha.c_z[c_va],
c_Ja=(c_O||(c_O=window.event)).toElement||c_O.relatedTarget;if(c_wa){if(c_Ja){try{if(!c_Ja.Uize_Widget_Drag_shield&& !c_Ha.isOnNodeTree(c_Ja,c_wa.c_V))c_Ja=null;}catch(c_Ca){c_Ja=null;}}if(!c_Ja)return c_wa.c_ya.call(c_wa.c_V,c_O)
;}});}),mousedown:c_Fa,mouseup:c_Fa};return function(c_T,c_Q,c_ya,c_ma){if(!c_Q)return;if(c_ma==c_$)c_ma='';var c_Ka;if(c_Q.charCodeAt)c_Q=c_P(c_Q);if(typeof c_Q==c_d&& !(c_Ka= !!c_Q.virtualDomEvent)){
c_ma=arguments[2]||'';for(var c_O in c_Q)c_S.wire(c_T,c_O,c_Q[c_O],c_ma);return;}c_i(c_T,function(c_V){var c_t_=c_V.tagName,c_La=c_V==window&&c_C;(c_A[c_ma]||(c_A[c_ma]=[])).push(c_B);var c_Ba=(c_Ka?c_g
:c_La?c_Ea:c_Ga[c_Q]||c_Fa)(c_B);var c_wa=c_z[c_B++]={c_V:c_V,c_Q:c_Q,c_ya:c_ya,c_Ba:c_Ba};if(c_w&&c_t_=='BODY'&&c_Q=='scroll'){c_wa.c_xa=c_V;c_V=c_wa.c_V=document;}if(c_Ba){var c_Ma='on'+c_Q;c_La?c_Aa.wire(c_Q,c_Ba)
:c_V.attachEvent?c_V.attachEvent(c_Ma,c_Ba):c_V.addEventListener(c_Q,c_Ba,c_b);if(c_t_=='A'&&(c_Q=='mousedown'||c_Q=='click'||c_Q=='touchstart')&& !c_V[c_Ma])c_V[c_Ma]=c_g;}else if(c_Ka){c_Q.wire(c_V,c_ya,c_wa.c_za=c_e.getGuid());
}});}})(),ieMajorVersion:c_t,isIe:c_s,isSafari:c_r.indexOf('applewebkit')> -1,isMozilla:c_u,mousePos:c_x});if(c_p){c_S.wire(document.documentElement,'mousemove',c_N);if(c_C){var c_Aa=new c_e.Event.Bus,
c_Na=setTimeout(function(){c_Aa.fire('load')},15000);c_e.forEach(['focus','blur','load','beforeunload','unload','resize','scroll','hashchange'],function(c_Oa){var c_Pa='on'+c_Oa,c_Qa=window[c_Pa]||c_g
;window[c_Pa]=function(c_O){c_Oa=='load'&&clearTimeout(c_Na);c_Qa.call(window,c_O||(c_O=window.event));c_Aa.fire({name:c_Oa,windowEvent:c_O});};});}}return c_S;}});
Uize.module({name:'Uize.Dom.Util',required:'Uize.Dom.Basics',builder:function(){'use strict';var c_$=Uize.Dom.Basics,c__,c_a,c_b=c_$.isIe&&c_$.ieMajorVersion<9;return Uize.package({getEffectiveBgColor:function(c_c){
var c_d='';c_c=c_$.getById(c_c);while((!c_d||c_d=='transparent'||c_d=='none')&&c_c){c_d=c_$.getStyle(c_c,'backgroundColor');c_c=c_c.parentNode;}return c_d;},getOpacityProperties:c__=function(c_e){return(
c_$.isIe?{filter:'alpha(opacity='+Math.round(c_e*100)+')'}:{opacity:c_e+''});},getOpacityStr:function(c_e){return c_a(c__(c_e));},showClickable:function(c_f,c_g){c_$.setStyle(c_f,{cursor:c_g||c_g===undefined
?(c_b?'hand':'pointer'):'default'});},showInLayoutFlow:function(c_f,c_h){c_h=c_h!==c_i;c_j(c_f,{position:c_h?'static':'absolute',visibility:c_h?'inherit':c_k});},stylePropertiesAsStr:c_a=function(c_l){
var c_m=[];for(var c_n in c_l)c_m.push(c_n,':',c_l[c_n],'; ');return c_m.join('');}});}});
Uize.module({name:'Uize.Dom.Pos',required:'Uize.Dom.Basics',builder:function(){'use strict';var c_$,c__=Uize,c_a=Math,c_b=Uize.Dom.Basics,c_c,c_d,c_e,c_f,c_g,c_h,c_i,c_j=c_b.getStyle,c_k=c_b.doForAll,c_l=c_b.getById,
c_m=c_b.isNode,c_n=c_b.isIe,c_o=c_b.setStyle,c_p=['left','top','width','height'];return c__.package({getDocumentScrollElement:c_h=function(){return document[c_b.isSafari?'body':'documentElement']},doRectanglesOverlap:c_i=function(
c_q,c_r,c_s,c_t,c_u,c_v,c_w,c_x){return(c_s-1+ +c_q>=c_u&&c_w-1+ +c_u>=c_q&&c_t-1+ +c_r>=c_v&&c_x-1+ +c_v>=c_r);},getCoords:c_c=function(c_y){var c_z=0,c_A=0,c_B=0,c_C=0,c_D=true,c_E=100,c_F=c_h(),c_G=c_e(window)
;function c_H(){c_z+=c_F.scrollLeft;c_A+=c_F.scrollTop;}if(c_y==window){c_H();c_B=c_G.width;c_C=c_G.height;}else if(c_m(c_y=c_l(c_y))){c_B=c_y.offsetWidth;c_C=c_y.offsetHeight;if(!(c_B&&c_C)&&c_y.tagName=='DIV'){
for(var c_I=c_y.childNodes,c_J=c_I.length;--c_J>=0;){if(c_I[c_J].nodeName.charAt(0)!='#'){var c_K=c_c(c_I[c_J]);if(c_K.width||c_K.height){c_B=c_a.max(c_B,c_K.right-c_z+1);c_C=c_a.max(c_C,c_K.bottom-c_A+1);
}}}}if(c_y.tagName=='A'&&c_y.childNodes.length==1&&c_y.childNodes[0].tagName=='IMG')c_y=c_y.childNodes[0];var c_L=function(c_y){return c_j(c_y,'display')=='none'||c_j(c_y,'visibility')=='hidden';},c_M=c_D= !c_L(c_y),
c_N=c_y,c_O=c_y,c_P=c_G.width,c_Q=c_G.height,c_R=c_F.scrollLeft,c_S=c_F.scrollTop,c_T=c_R+c_P,c_U=c_S+c_Q;while(c_O.parentNode&&typeof c_O.parentNode!='unknown'){var c_V=c_O.offsetLeft||0,c_W=c_O.offsetTop||0,
c_X=c_O.offsetWidth,c_Y=c_O.offsetHeight;if(c_D&&c_L(c_O))c_D=false;if(c_O==c_N){c_z+=c_V+(parseInt(c_j(c_O,'borderLeftWidth'))||0);c_A+=c_W+(parseInt(c_j(c_O,'borderTopWidth'))||0);c_N=c_O.offsetParent;
c_j(c_O,'position')=='fixed'&&c_H();}if(c_O!=c_y&&c_O!=document.body&&c_O!=document.documentElement&&(c_O.scrollWidth>c_X||c_O.scrollHeight>c_Y)){c_z-=c_O.scrollLeft;c_A-=c_O.scrollTop;if(c_n){c_z+=c_O.clientLeft;
c_A+=c_O.clientTop;}if(c_D)c_D=c_i(c_z,c_A,c_B,c_C,c_V,c_W,c_X,c_Y);}var c_Z=c_O.style,c_0=c_Z.transform||c_Z.webkitTransform;if(c_0){var c_1=c_0.toLowerCase().replace(/ /g,'').match(/(translate[a-z0-9]*)\((-?[0-9a-z\.]+),?(-?[0-9a-z\.]+)?.*?\)/);
if(c_1!==null)switch(c_1[1]){case'translate':case'translate3d':c_z+=parseInt(c_1[2]);c_A+=parseInt(c_1[3]);break;case'translatex':c_z+=parseInt(c_1[2]);break;case'translatey':c_A+=parseInt(c_1[2]);break;
}}c_O=c_O.parentNode;}if(c_D)c_D=c_i(c_z,c_A,c_B,c_C,c_R,c_S,c_P,c_Q);c_E=c_D?((c_a.min(c_z+c_B,c_T)-c_a.min(c_a.max(c_z,c_R),c_T))*(c_a.min(c_A+c_C,c_U)-c_a.min(c_a.max(c_A,c_S),c_U)))/(c_B*c_C)*100:
0;}return{x:c_z,y:c_A,width:c_B,height:c_C,area:c_B*c_C,left:c_z,top:c_A,right:c_z+c_B-1,bottom:c_A+c_C-1,seen:c_D,percentSeen:c_E};},getDimensions:c_e=function(c_y){if(c_y==window){var c_F=document.documentElement;
return{width:c_F.clientWidth||window.innerWidth||c_F.offsetWidth,height:c_F.clientHeight||window.innerHeight||c_F.offsetHeight};}else if(c_y=c_l(c_y)){return{width:c_y.offsetWidth||parseInt(c_j(c_y,'width'))||0,
height:c_y.offsetHeight||parseInt(c_j(c_y,'height'))||0};}else{return{width:0,height:0};}},setCoords:c_d=function(c_2,c_3){c_o(c_2,c__.isArray(c_3)?c__.meldKeysValues(c_p,c_3):c_3);},centerInWindow:function(c_2){
var c_4=c_c(window);c_k(c_2,function(c_y){var c_5=c_e(c_y);c_d(c_y,{left:c_4.x+((c_4.width-c_5.width)>>1),top:c_4.y+((c_4.height-c_5.height)>>1)});});},getEventAbsPos:c_g=function(c_6){var c_7=(c_6||(c_6=c_b.mousePos)).targetTouches;
if(c_7&&c_7.length)c_6=c_7[0];if(c_6.pageX!=c_$){return{left:c_6.pageX,top:c_6.pageY};}else{var c_F=c_h();return{left:c_6.clientX+c_F.scrollLeft,top:c_6.clientY+c_F.scrollTop};}},setAbsPos:c_f=function(c_2,c_8,c_9){
c_9=typeof c_9=='number'?{x:c_9,y:c_9}:(c_9||{x:0,y:0});var c_F=c_h(),c_$_=c_e(window);c_k(c_2,function(c_y){function c___(c_a_,c_b_,c_c_,c_d_){var c_e_=c_8[c_a_],c_f_=c_9[c_d_],c_g_=c_e_-c_F[c_b_],c_h_=c_f_+c_5[c_c_]
;return(c_e_+(c_g_+c_h_>c_$_[c_c_]?c_a.max(-c_h_,-c_g_):c_f_));}var c_5=c_e(c_y);c_o(c_y,{left:c___('left','scrollLeft','width','x'),top:c___('top','scrollTop','height','y'),right:'auto',bottom:'auto'
});});},setAbsPosAdjacentTo:function(c_2,c_i_,c_j_){c_i_=c_l(c_i_);var c_k_=c_c(c_i_),c_l_=c_k_.width/2,c_m_=c_k_.height/2,c_n_=c_j_=='x'? -1:1;if(!c_l_&& !c_m_)c_k_=c_g();c_k(c_2,function(c_y){c_f(c_y,
{left:c_k_.left+c_l_,top:c_k_.top+c_m_},{x:-c_l_*c_n_,y:c_m_*c_n_});});}});}});
Uize.module('Uize.Oop');
Uize.module({name:'Uize.Oop.mTreeInheritance',builder:function(){'use strict';var c_$,c__=Uize;return function(c_a){c_a.staticMethods({treeInheritedStateProperties:function(c_b){var c_a=this;c__.forEach(
c_b,function(c_c,c_d){var c_e=c_c.name||c_d,c_f=c_e+'Inherited',c_g=c_c.value;function c_h(){var m=this,c_i=m[c_d];if(c_i=='inherit'||c_i===c_$)c_i=m.parent?m.parent[c_f]:c_g;if(c_i===c_$)c_i=c_g;if(c_i!=m[c_f])
m.set(c_f,c_i);}c_a.stateProperties(c__.pairUp(c_d,{name:c_e,onChange:c_h,value:'inherit'},c_f,{onChange:function(){c__.callOn(this.children,c_h)},value:c_g}));})}});c_a.instanceMethods({getProvider:function(c_j){
var m=this,c_i;while(((c_i=m.get(c_j))==='inherit'||c_i===c_$)&&(m=m.parent));return m;},getInherited:function(c_j){var c_k=this.getProvider(c_j);return c_k&&c_k.get(c_j);},setInherited:function(c_b){
var c_k;for(var c_l in c_b){if(c_k=this.getProvider(c_l))c_k.set(c_l,c_b[c_l]);}},callInherited:function(c_j){var m=this;return(function(){var c_k=m.getProvider(c_j);if(c_k){var c_m=c_k.get(c_j);if(c__.isFunction(c_m))
return c_m.apply(c_k,arguments);}});}});};}});
Uize.module('Uize.Util');
Uize.module({name:'Uize.Util.Dependencies',builder:function(){'use strict';var c_$={};function c__(c_a){return(!c_a?[]:typeof c_a=='string'?c_a.split(','):c_a);}return Uize.package({resolveDependenciesList:c__,
traceDependencies:function(c_b,c_c,c_d){var c_e=Uize.lookup(c__(c_d),c_$),c_f=[];function c_g(c_a){Uize.forEach(c_a.sort(),function(c_h){if(c_e[c_h]!=c_$){c_e[c_h]=c_$;c_g(c_c(c_h));c_f.push(c_h);}});
}c_g(c__(c_b));return c_f;}});}});
Uize.module({name:'Uize.Class',required:['Uize.Util.Dependencies','Uize.Event.Bus'],builder:function(){'use strict';var b_$='string',b__=Function,b_a=Uize,b_b=b_a.copyInto,b_c=b_a.forEach,b_d=b_a.map,b_e=b_a.lookup,
b_f=b_a.getClass,b_g=b_a.isArray,b_h=b_a.isFunction,b_i=b_a.isInstance,b_j=b_a.isObject,b_k=b_a.Util.Dependencies.traceDependencies,b_l=b_a.applyAll,b_m=Uize.Event.Bus,b_n=[],b_o={},b_p=1,b_q=2,b_r={}
;function b_s(b_t,b_u,b_v){function b_w(){return this[b_x(this,'value')];}var b_y=b_a.noNew(function(){var b_z=arguments;b_l(this,b_A,b_z);b_l(this,b_B,b_z);}),b_C=b_y.prototype;var b_D=b_t.nonInheritableStatics||b_o,
b_E=b_a.clone;for(var b_F in b_t)if(!b_D[b_F]&&b_F!='prototype')b_y[b_F]=b_E(b_t[b_F]);b_b(b_C,b_t.prototype);b_C.valueOf=b_w;b_C.Class=b_y;b_y.nonInheritableStatics={b_G:1,nonInheritableStatics:1,valueOf:0};
b_y.superclass=b_t;b_y.valueOf=b_w;var b_A=b_y.b_A=(b_t.b_A||b_n).concat(),b_B=b_y.b_B=(b_t.b_B||b_n).concat();b_u&&b_A.push(b_u);b_v&&b_B.push(b_v);b_y.b_H||(b_y.b_H={});b_y.b_I||(b_y.b_I={});return b_y;
}var b_t=b_s(function(){},function(){var m=this;(m.b_J=new b_m).wireUnwireWrapper=function(b_K,b_L){if(b_K.charCodeAt(0)==67&& !b_K.indexOf('Changed.')){var b_M=b_K.slice(8),b_N=b_O(m,b_M);if(b_N&&b_M!=b_N.b_P)
b_K='Changed.'+(b_M=b_N.b_P);b_L(b_K);(m.b_Q||(m.b_Q={}))[b_M]=this.hasHandlers(b_K);}else{b_L(b_K);}};m.instanceId=b_a.getGuid();},function(b_R){b_R||(b_R=b_o);var b_S={},b_T=this.Class.b_T,b_F,b_U;
for(b_F in b_T){if(b_F in b_R)b_S[b_F]=b_R[b_F];else if((b_U=b_T[b_F])!==undefined)b_S[b_F]=b_U;}for(b_F in b_R)b_F in b_S||(b_S[b_F]=b_R[b_F]);this.set(b_S);});b_t.instanceMethods=b_t.instanceProperties=function(b_V){
b_b(this.prototype,b_V);};b_t.staticMethods=b_t.staticProperties=function(b_W){b_b(this,b_W);};b_t.dualContextMethods=b_t.dualContextProperties=function(b_X){b_b(this,b_X);b_b(this.prototype,b_X);};b_t.declare=function(b_Y){
for(var b_Z in b_Y)this[b_Z](b_Y[b_Z]);return this;};b_t.mixins=function(b_0){var m=this,b_1=m.b_1||(m.b_1=[]);function b_2(b_0){if(!b_a.isIn(b_1,b_0)){b_1.push(b_0);b_h(b_0)?b_0(m):b_g(b_0)?b_c(b_0,b_2)
:m.declare(b_0);}}b_2(b_0);};function b_O(m,b_3){var b_t=b_f(m);return(b_t.b_I[b_3]||b_t.b_H[b_3]);}function b_x(m,b_3){var b_N=b_O(m,b_3);return b_N?b_N.b_4:b_3;}function b_5(b_6){var b_7=b_6+'',b_8=b_r[b_7]
;function b_9(b_$_){return(b_$_.replace(/\s+/g,'').replace('/**/','').split(','));}if(!b_8){var b___,b_a_;if(b_h(b_6)){b___=b_9((b_6+'').match(/\(([^\)]*)\)/)[1]);b_a_=b_6;}else{if(typeof b_6=='string'){
var b_b_=b_6.indexOf(':');if(b_b_> -1){b_a_=b__(b___=b_9(b_6.slice(0,b_b_)),'return '+b_6.slice(b_b_+1));}else{b_6=b_9(b_6);}}if(b_g(b_6)){b___=[];if(b_6.length){var b_c_=[],b_d_=[];b_c(b_6,function(b_e_,b_f_){
var b_g_=b_e_.charCodeAt(0)==33,b_h_='a'+b_f_;b___.push(b_g_?b_e_.slice(1):b_e_);b_c_.push(b_h_);b_d_.push((b_g_?'!':'')+b_h_);});b_a_=b__(b_c_,'return '+b_d_.join(' && '));}else{b_a_=b_a.returnTrue;
}}}b_8=b_r[b_7]={b___:b___,b_i_:b__('return ['+b_d(b___,'"this.get(\'" + value + "\')"').join(',')+']'),b_a_:b_a_,b_j_:b_d(b___,'"Changed." + value')};}return b_8;}function b_k_(m,b_6,b_l_,b_m_){var b_n_=b_m_==b_p,
b_o_=b_m_==b_q,b_6=b_5(b_6),b_i_=b_6.b_i_,b_a_=b_6.b_a_,b_p_=true,b_q_,b_r_;function b_s_(){var b_t_=b_i_.call(m),b_u_=b_a_.apply(m,b_t_);if(b_n_||b_o_)b_u_= !!b_u_;if(b_p_||b_u_!==b_q_){b_p_=false;b_n_&&b_u_&&b_r_&&m.unwire(b_r_);
b_n_||b_o_?b_u_&&(b_n_|| !b_u_!= !b_q_)&&b_l_.apply(0,b_t_):b_l_.call(0,b_u_,b_t_);b_q_=b_u_;}}b_s_();b_n_&&b_q_?(b_r_={}):m.wire(b_r_=b_e(b_6.b_j_,b_s_));return b_r_;}return b_t.declare({instanceMethods:{
onChange:function(b_6,b_l_){return b_k_(this,b_6,b_l_);},once:function(b_v_,b_l_){return b_k_(this,b_v_,b_l_,b_p);},whenever:function(b_v_,b_l_){return b_k_(this,b_v_,b_l_,b_q);},is:function(b_F){return!!this[b_x(this,b_F)];
},isMet:function(b_v_){var b_6=b_5(b_v_);return b_6.b_a_.apply(this,b_6.b_i_.call(this));},met:function(b_w_){this.set(b_w_,true);},unmet:function(b_w_){this.set(b_w_,false);},kill:function(){var b_x_=this.instanceId;
b_a.eval('if(typeof '+b_x_+'!=\'undefined\')'+b_x_+'=null');}},staticMethods:{subclass:function(b_y_,b_z_){return(arguments.length==1&& !b_h(b_y_)?b_s(this).declare(b_y_):b_s(this,b_y_,b_z_));},alphastructor:function(b_u){
this.b_A.push(b_u);},omegastructor:function(b_v){this.b_B.push(b_v);},stateProperties:function(b_A_){var m=this,b_H=m.b_H,b_I=m.b_I,b_B_;for(var b_C_ in b_A_){var b_D_=b_A_[b_C_],b_E_=b_j(b_D_),b_M=(b_E_?b_D_.name:b_D_)||
b_C_,b_F_=b_M,b_N=b_I[b_C_]||b_H[b_C_];if(!b_N){b_N=b_H[b_C_]={b_4:b_C_};if(b_M.indexOf('|')> -1){var b_G_=b_M.split('|');b_F_=b_G_[0];b_e(b_G_,b_N,b_I);}else{b_I[b_M]=b_N;}b_N.b_P=b_F_;}if(b_E_){var b_H_=b_D_.onChange;
if(b_H_){var b_I_=b_N.b_k_;b_N.b_k_=b_I_?[].concat(b_I_,b_H_):b_H_;}if(b_D_.conformer)b_N.b_J_=b_D_.conformer;if(b_D_.derived){b_B_=true;var b_6=b_5(b_D_.derived);b_6.b_K_=b__('o','return '+b_d(b_6.b___,"'\"' + value + '\" in o'").join(' || ')
);b_N.b_6=b_6;}if('value'in b_D_)m[b_C_]=b_D_.value;}}var b_T=m.b_T=m.get();if(b_B_){for(var b_L_=function(b_F){return(b_I[b_F]||b_o).b_6;},b_M_=m.b_M_=[],b_R=b_k(b_a.keys(b_T),function(b_F){var b_6=b_L_(b_F);
return b_6?b_6.b___:b_n;}),b_N_=b_R.length,b_M,b_O_= -1;++b_O_<b_N_;){b_L_(b_M=b_R[b_O_])&&b_M_.push(b_M);}}},doMy:function(b_P_,b_Q_,b_z){return this.prototype[b_Q_].apply(b_P_,b_z||b_n);},singleton:function(b_R_,b_R){
var m=this,b_G=m.b_G||(m.b_G={}),b_S_=b_G[b_R_||(b_R_='')];b_S_?b_R&&b_S_.set(b_R):(b_S_=b_G[b_R_]=m(b_R));return b_S_;}},dualContextMethods:{get:function(b_F){if(typeof b_F==b_$){return this[b_x(this,b_F)];
}else{var m=this,b_T_={};if(!b_F){var b_t=b_f(m),b_H=b_t.b_H;for(var b_C_ in b_H)b_T_[b_H[b_C_].b_P]=m[b_C_];if(b_i(m)){var b_U_=m.b_U_;if(b_U_)for(b_F in b_U_)b_T_[b_F]=m[b_F];}}else if(b_g(b_F)){for(
var b_V_= -1,b_W_=b_F.length;++b_V_<b_W_;){var b_X_=b_F[b_V_];b_T_[b_X_]=m[b_x(m,b_X_)];}}else{for(var b_X_ in b_F)b_T_[b_X_]=m[b_x(m,b_X_)];}return b_T_;}},set:function(b_R){var m=this,b_z=arguments,
b_Y_=b_z.length;if(b_Y_>1)b_R=b_Y_>2||typeof b_R==b_$?b_a.pairUp.apply(0,b_z):b_e(b_R,b_z[1]);var b_Z_=b_i(m),b_t=b_Z_?m.Class:m,b_I=b_t.b_I,b_H=b_t.b_H,b_N,b_0_,b_1_={},b_2_,b_3_,b_Q=b_Z_&&m.b_Q,b_4_=b_Q&&b_Q['*'],
b_5_,b_6_,b_C_,b_M,b_7_,b_8_,b_9_,b_M_=b_t.b_M_||b_n,b_$a=[],b_3;for(b_3 in b_R){b_N=b_I[b_3]||b_H[b_3];if(!b_N|| !b_N.b_6)b_$a.push(b_3);}for(var b_O_= -1,b__a=b_$a.length,b_aa=b__a+(b_Z_&&b_M_.length)
;++b_O_<b_aa;){var b_ba=b_O_>=b__a;b_3=b_ba?b_M_[b_O_-b__a]:b_$a[b_O_];b_N=b_I[b_3]||b_H[b_3];if(b_ba){var b_ca=b_N.b_6;if(b_ca.b_K_(b_1_)){b_8_=b_ca.b_a_.apply(m,b_ca.b_i_.call(m));}else{continue;}}else{
b_8_=b_R[b_3];}if(b_N){b_C_=b_N.b_4;b_M=b_N.b_P;}else{b_C_=b_M=b_3;b_N=b_Z_?{}:{value:b_8_};b_Z_?((m.b_U_||(m.b_U_={}))[b_3]=true):((b_7_||(b_7_={}))[b_3]=b_N);}if(b_Z_)(b_9_||(b_9_={}))[b_M]=b_N.b_J_
?(b_8_=b_N.b_J_.call(m,b_8_,m[b_C_])):b_8_;if(b_8_!==m[b_C_]){if(b_Z_){b_1_[b_M]=b_1_[b_C_]=1;b_4_&&((b_5_||(b_5_={}))[b_M]=b_8_);b_Q&&b_Q[b_M]&&(b_6_||(b_6_=[])).push(b_M,b_8_);var b_da=function(b_3_){
if(b_h(b_3_)){if(!b_0_){b_0_=[];b_2_=m.instanceId+'_handlerAlreadyAdded';}if(!b_3_[b_2_]){b_3_[b_2_]=1;b_0_.push(b_3_);}}else if(typeof b_3_==b_$){b_da(m[b_3_]);}else if(b_g(b_3_)){b_c(b_3_,b_da);}};
b_N.b_k_&&b_da(b_N.b_k_);}m[b_C_]=b_8_;}}b_7_&&b_t.stateProperties(b_7_);if(b_Z_){if(b_0_){for(var b_ea= -1,b_fa=b_0_.length;++b_ea<b_fa;){delete(b_3_=b_0_[b_ea])[b_2_];b_3_.call(m,b_9_);}}b_5_&&m.fire({name:'Changed.*',properties:b_5_})
;if(b_6_){for(var b_ga= -1,b_ha=b_6_.length/2;++b_ga<b_ha;)m.fire({name:'Changed.'+b_6_[b_ga*2],newValue:b_6_[b_ga*2+1]});}}else{b_t.b_T=m.get();}},toggle:function(b_ia){var b_ja= !this.get(b_ia);this.set(b_ia,b_ja);
return b_ja;},wire:function(){var b_J=this.b_J||(this.b_J=new b_m);b_J.wire.apply(b_J,arguments);},fire:function(b_ka){var m=this;if(typeof b_ka!='object')b_ka={name:b_ka};b_ka.source||(b_ka.source=m);
m.b_J&&m.b_J.fire(b_ka);b_ka.bubble&&m.parent&&b_i(m)&&m.parent.fire(b_ka);return b_ka;},unwire:function(){var b_J=this.b_J;b_J&&b_J.unwire.apply(b_J,arguments);}}});}});
Uize.module({name:'Uize.Widget',superclass:'Uize.Class',required:['Uize.Dom.Basics','Uize.Oop.mTreeInheritance'],builder:function(c_$){'use strict';var c__=null,c_a=true,c_b=false,c_c='string',c_d=Uize,
c_e=c_d.copyInto,c_f=c_d.isFunction,c_g='concatenated',c_h,c_i=c_d.Dom.Basics,c_j=c_i.doForAll,c_k=c_d.callOn,c_l=c_d.substituteInto,c_m=c_i.isNode,c_n=c_i.getById;function c_o(c_p,c_q){var c_r,c_s;(
c_p&&(c_r=window[c_s='$'+c_p])&&typeof c_r=='object'&&(!c_q||c_p!=c_q.c_p))?(window[c_s]=c_h):(c_r=c_h);return c_r;}function c_t(c_u,c_v,c_w,c_x){return((!c_x||c_x==c_g)&&c_u!=c_h?(c_u+(c_w!==''?'_':'')+c_w)
:(c_x=='same as parent'?c_u:c_v));}function c_y(m){var c_z=c_o(m.c_p,m.parent);c_z&&m.set(c_z);}function c_A(m){return m.c_B||m.getNode('shell')||m.getNode();}function c_C(m,c_D,c_E,c_F){var c_G='show'+c_d.capFirstChar(c_D);
m.getProvider(c_G)?m.callInherited(c_G)(c_E):setTimeout(function(){var c_H=c_F();(c_E.callback||(c_H?c_E.yesHandler:c_E.noHandler)||c_d.nop)(c_H);},0);}return c_$.subclass({mixins:c_d.Oop.mTreeInheritance,
alphastructor:function(c_r){var m=this;if(c_r){var c_z=c_o(c_r.idPrefix,c_r.parent);c_z&&c_e(c_r,c_z);delete c_r.widgetClass;}m.c_I={};m.children=m.c_J={};m.addedChildren=m.c_K=new c_d.Class;},instanceMethods:c_e(
c_d.map({displayNode:1,getNodeStyle:1,getNodeValue:1,injectNodeHtml:1,setNodeClipRect:1,setNodeInnerHtml:1,setNodeOpacity:1,setNodeProperties:1,setNodeStyle:1,setNodeValue:1,showNode:1},function(c_L,c_M){
return Function('arguments.length'+'?(arguments[0]=this.getNode(arguments[0]))'+':(arguments[arguments.length++]=this.getNode());'+'return Uize.Dom.Basics.'+c_M.replace('Node','')+'.apply(0,arguments)'
);}),{showInform:c_h,showConfirm:c_h,confirm:function(c_E){c_C(this,'confirm',c_E,function(){return confirm(c_E.message)});},inform:function(c_E){c_C(this,'inform',c_E,function(){alert(c_E.message);return c_a}
);},ajax:function(c_N,c_O){this.callInherited('performAjax')(c_N,c_f(c_O)?{callback:c_O}:c_O||{});},localize:function(c_P,c_Q,c_R){var c_S,c_T=this;while(!(c_S=c_T.c_U?c_T.c_U[c_P]:c_h)&&(c_T=c_T.parent)
);return(c_f(c_S)?c_S.call(this,c_Q):c_l(c_S,c_Q,c_R||'{KEY}'));},getHtml:function(c_V){var m=this,c_W=m.c_W;if(c_W){if(c_W===c_a){var c_X=c_A(m);c_W=m.c_W=c_d.Template&&c_X?{process:c_d.Template.compile(
(c_i.find({root:c_X,tagName:'SCRIPT',type:'text/jst'})[0]||c_X).innerHTML,{openerToken:'[%',closerToken:'%]'})}:c_h;if(!c_W)return;}m.c_p||m.set({c_p:m.instanceId});var c_Y=c_e({pathToResources:c_d.pathToResources,
blankGif:m.Class.getBlankImageUrl()},c_V||m.get()),c_Z;c_W=typeof c_W!=c_c&&c_f(c_W.process)?c_W.process.call(m,c_Y):c_f(c_W)?typeof(c_Z=c_W(c_Y))==='string'?c_l(c_Z,c_Y):c_Z:c_l(c_W,c_Y);}return c_W;
},buildHtml:function(c_V){var m=this,c_W=m.getHtml(c_V);if(c_W!=c_h){var c_X=c_A(m);c_i.injectHtml(c_X||document.body,c_W,m.c_0||(c_X?'inner replace':'inner bottom'));m.c_1=c__;m.set({c_2:c_a});}},nodeId:function(c_3){
return c_i.joinIdPrefixAndNodeId(this.c_p,c_3||'');},getNode:function(c_4){if(c_4==c__){if(c_4===c__)return c__;c_4='';}var m=this;if(m.c_5&&typeof c_4==c_c){var c_6=m.c_5[c_4];if(c_6!==c_h)c_4=c_6;}
if(typeof c_4==c_c){return c_n(c_4,m.c_p,m.c_1||(m.c_1={}));}else if(c_m(c_4)){return c_4;}else{var c_7=c__;c_j(c_4,function(c_8){(c_7||(c_7=[])).push(c_8)},m.c_p,m.c_1||(m.c_1={}));return c_7;}},flushNodeCache:function(c_9){
if(this.c_1)c_9==c_h?(this.c_1=c__):delete this.c_1[c_9];},globalizeNode:function(c_$_){var m=this,c___=document.body;c_j(m.getNode(c_$_),function(c_8){if(c_8.parentNode!=c___){(m.c_a_||(m.c_a_=[])).push(c_8);
c_i.setStyle(c_8,{position:'absolute',left:-10000,top:-10000});c___.appendChild(c_8);}});},removeNode:function(c_$_){c_i.remove(this.getNode(c_$_));this.flushNodeCache(c_$_);},wireNode:function(c_$_,c_b_,c_c_){
var m=this;arguments.length==3?c_i.wire(m.getNode(c_$_),c_b_,c_c_,m.instanceId):c_i.wire(m.getNode(c_$_),c_b_,m.instanceId);},unwireNode:function(c_$_,c_b_,c_c_){if(c_$_!==c_h)c_$_=this.getNode(c_$_)
;arguments.length==2&&typeof c_b_=='object'&&c_b_&& !c_b_.virtualDomEvent?c_i.unwire(c_$_,c_b_,this.instanceId):c_i.unwire(c_$_,c_b_,c_c_,this.instanceId);},unwireNodeEventsByMatch:function(c_$_,c_d_){
this.unwireNode(c_$_,(c_d_||(c_d_={})).eventName,c_d_.handler);},addChild:function(c_w,c_e_,c_r){c_r||(c_r={});var m=this,c_p=m.c_p,c_f_=c_d.isInstance(c_e_)?c_e_:c__,c_v='idPrefix'in c_r?c_r.idPrefix:c_r.node,
c_g_=c_r.idPrefixConstruction;c_r.parent=m;if(c_w==c_h)c_w=c_r.name;if(c_f_){if(c_w==c_h)c_w=c_f_.c_h_;if(c_v==c_h)c_v=c_f_.c_p;if(!c_g_)c_g_=c_f_.c_x;}c_r.idPrefix=c_t(c_p,c_v,c_r.name=c_w,c_r.idPrefixConstruction=
c_g_||(c_v==c_h?c_g:'explicit'));var c_I=m.c_I,c_i_=c_I[c_w];if(c_i_){c_e(c_r,c_i_);delete c_I[c_w];}c_f_&&c_f_.set(c_r);c_f_=m.c_J[c_w]=c_f_||new c_e_(c_r);m.c_K.met(c_w);return c_f_;},addChildren:function(c_J,c_j_){
for(var c_w in c_J){var c_k_=c_d.copy(c_J[c_w],c_j_),c_l_=c_k_.widgetClass;delete c_k_.widgetClass;this.addChild(c_w,c_l_,c_k_);}},removeChild:function(c_m_){var m=this,c_J=m.c_J,c_w=typeof c_m_==c_c||c_d.isNumber(c_m_)
?c_m_:c_m_.c_h_,c_f_=c_J[c_w];if(c_f_){c_f_.unwireUi();delete c_f_.parent;delete c_J[c_w];m.c_K.unmet(c_w);}},childId:function(c_w){return c_t(this.c_p,this.c_p,c_w,this.c_x);},kill:function(){c_k(this.c_J,'kill');
c_$.doMy(this,'kill');},insertOrWireUi:function(){this.c_2?this.wireUi():this.insertUi();},insertUi:function(){this.buildHtml();this.wireUi();},removeUi:function(){var m=this;m.unwireUi();m.removeNode();
c_i.remove(m.c_a_);m.c_a_=c_h;c_k(m.c_J,'removeUi');m.set({c_2:c_b});},updateUi:function(){},wireUi:function(){var m=this;if(!m.isWired){c_y(m);m.set({wired:c_a});c_k(m.c_J,'insertOrWireUi');m.updateUi();
}},unwireUi:function(){var m=this;if(m.isWired){m.c_1=c__;m.unwireNode();c_k(m.c_J,'unwireUi');m.set({wired:c_b});}}}),stateProperties:{c_2:{name:'built',value:c_a},c_J:{name:'children',conformer:function(c_n_){
if(c_n_){var c_J=this.c_J,c_I=this.c_I;for(var c_w in c_n_){var c_k_=c_n_[c_w];c_J[c_w]?c_J[c_w].set(c_k_):c_I[c_w]=c_k_;}}return this.c_J;}},c_B:'container',c_W:'html',c_p:{name:'idPrefix|node',conformer:function(c_p){
return c_m(c_p)?(c_p.id||(c_p.id=c_d.getGuid())):c_p;},onChange:function(){var m=this,c_p=m.c_p;m.c_1=c__;if(c_p!=c_h){c_y(m);var c_J=m.c_J,c_f_;for(var c_w in c_J)(c_f_=c_J[c_w]).set({c_p:c_t(c_p,c_f_.c_p,c_w,c_f_.c_x)
});if(m.isWired){m.set({wired:c_b});m.wireUi();}}}},c_x:'idPrefixConstruction',c_0:'insertionMode',c_U:'localized',c_h_:'name',c_5:'nodeMap',isWired:{name:'wired',value:c_b}},treeInheritedStateProperties:{
c_o_:{name:'busy',value:c_b},c_p_:{name:'enabled',value:c_a}},staticMethods:{getBlankImageUrl:function(){return c_d.pathToResources+'Uize/blank.gif';},spawn:function(c_r,c_q){var m=this,c_q_=[],c_r_,
c_s_=c_q&&c_q.c_p?c_q.c_p+'_':'',c_t_=c_s_.length;c_j(c_i.find(c_r.idPrefix),function(c_8){c_r.idPrefix=c_8;c_q?(c_r_=c_q.addChild(c_8.id.slice(0,c_t_)==c_s_?c_8.id.slice(c_t_):'generatedChildName'+c_d.getGuid(),
m,c_r)):(c_r_=new m(c_r)).insertOrWireUi();c_q_.push(c_r_);});return c_q_;}}});}});
Uize.module({name:'Uize.Widget.Button',required:['Uize.Dom.Util','Uize.Dom.Pos','Uize.Dom.Basics'],builder:function(d_$){'use strict';var d__,d_a=true,d_b=false,d_c,d_d,d_e={},d_f={grayed:16,'':8,over:4,
active:2,playing:1},d_g='(Grayed|Over|Active|Playing)',d_h=new RegExp(d_g),d_i=new RegExp('(?:(?:(\\S+)\\s+\\1'+d_g+'))','g'),d_j=new RegExp('\\S*'+d_g+'\\b','g'),d_k=/\b(disabled|over|active|playing)\b/,
d_l={},d_m={mouseover:['over','Over'],mouseout:['','Out'],mousedown:['down','Down'],mouseup:['over','Up'],click:['over','Click'],dblclick:['over','Double Click']};function d_n(m,d_o){return!!(m.get('enabledInherited')&& !m.get('busyInherited')&&
(d_o|| !m.d_p||m.d_q||m.d_r));}function d_s(){var m=this;m.d_t!=d__&&m.isWired&&m.setNodeInnerHtml('text',m.d_t);}function d_u(){var m=this;if(m.isWired){var d_v=m.d_v,d_w=m.get('enabledInherited'),d_x=m.get('busyInherited'),
d_y=(!d_w?16:0)|(!m.d_z||d_x?8:0)|(m==d_d?4:0)|(m.d_z=='down'||m.d_p?2:0)|(m.d_A?1:0),d_B=m.d_C[d_y];if(d_B==d__){for(var d_D= -1,d_E=m.d_E,d_F=d_E.length;++d_D<d_F;){var d_G=d_E[d_D];if(d_y&d_f[d_G]){
d_B=d_G;break;}}m.d_C[d_y]=d_B;}if(m.d_H=='classes'){var d_I=d_v.className,d_J='';if(m.d_K=='disambiguated'){var d_L=m.d_L;if(d_L==d__){var d_M=d_I.match(d_i);if(d_M){d_L=d_M[d_M.length-1].split(' ',2)[0];
}else{d_M=d_I.replace(d_j,'').match(/(\S+)\s*$/);if(d_M)d_L=d_M[d_M.length-1];}if(m.d_L=d_L=d_L||'')m.d_N=d_l[d_L]||(d_l[d_L]=new RegExp(d_L+'(\\s+'+d_L+d_g+')?'));}var d_O=d_B?' '+d_L+Uize.capFirstChar(d_B)
:'';d_J=d_L?d_I.replace(m.d_N,d_L+d_O):d_I.replace(d_h,'')+d_O;}else{var d_P=d_B=='grayed'?'disabled':d_B;d_J=d_k.test(d_I)?d_I.replace(d_k,d_P):d_I+(d_P?' ':'')+d_P;}if(d_J!=d_I)d_v.className=d_J;}else if(m.d_H=='frames'){
m.d_Q.style.top='-'+(m.d_R.d_S[d_B]*m.d_T.height)+'px';}if(m.d_U&&Uize.Tooltip){var d_V=m.d_z=='over'&&d_w&& !m.d_p;d_V!=m.d_W&&Uize.Tooltip.showTooltip(m.d_U,m.d_W=d_V);}m.get('busyInherited')?m.setNodeStyle(d_v,{cursor:'wait'})
:Uize.Dom.Util.showClickable(d_v,d_n(m));m.setNodeProperties(d_v,{disabled:!d_w});}}function d_X(d_Y){var m=this;if(m.isWired){var d_Z=d_Y.type,d_0=d_Z=='click';if(!m.d_1){m.d_1=d_a;var d_2=function(d_Y){d_X.call(m,d_Y)};
m.wireNode(m.d_v,{mouseout:d_2,mousedown:d_2,mouseup:d_2,dblclick:d_2});}if(d_0)d_Y.cancelBubble=d_a;if(d_n(m,d_Z=='dblclick')){var d_3=d_m[d_Z];m.set({d_z:d_3[0]});m.fire({name:d_3[1],domEvent:d_Y});
if(d_0){m.d_4&&m.d_4(d_Y);(m.d_p?m.d_q:m.d_5)&&m.toggle('selected');}}}}return d_c=d_$.subclass({omegastructor:function(){var m=this;function d_6(){if(m.isWired){d_n(m)||m.set({d_z:''});d_u.call(m);}
}m.wire({'Changed.busyInherited':d_6,'Changed.enabledInherited':d_6});},instanceProperties:{d_W:d_b},instanceMethods:{setStateAndFireEvent:d_X,updateUi:function(){if(this.isWired){d_u.call(this);d_s.call(this);
}},wireUi:function(){var m=this;if(!m.isWired){m.d_Q=d__;var d_v=m.d_v=m.getNode();if(d_v){var d_7=d_v.childNodes;if(d_7.length&&(d_7.length>1||d_7[0].nodeType!=3)&&(m.d_Q=m.getNode('frames'))){m.d_H='frames';
m.d_T=Uize.Dom.Pos.getDimensions(m.d_Q.parentNode);}if(m.d_8&&d_v.tagName=='A'&& !d_v.onclick)d_v.onclick=Uize.returnTrue;var d_2=function(d_Y){d_X.call(m,d_Y)};m.wireNode(d_v,{mouseover:d_2,click:d_2
});m.d_t==d__&&m.set({d_t:m.getNodeValue('text')});d_$.doMy(m,'wireUi');}}}},staticMethods:{addChildButton:function(d_9,d_$_){var m=this,d___;function d_a_(){d___.wire('Click',function(d_b_){if(d_$_)
typeof d_$_=='string'?m.fire(d_$_):d_$_(d_b_);m.fire(d_b_);});}if(m==d_c){d___=new d_c({idPrefix:d_9,name:d_9,d_8:d_a});d_a_();(window[d___.instanceId]=d___).wireUi();}else{d___=m.children[d_9];if(!d___){
d___=m.addChild(d_9,d_c);d_a_();}}return d___;}},stateProperties:{d_4:'action',d_r:{name:'allowClickWhenSelected',onChange:d_u},d_5:'clickToSelect',d_q:{name:'clickToDeselect',onChange:d_u},d_K:{name:'classNamingForStates',
value:'disambiguated'},d_R:{name:'frameOrder',onChange:function(){var d_R=this.d_R;d_R.d_S||(d_R.d_S=Uize.reverseLookup(d_R));},value:['grayed','','over','active','playing']},d_8:{name:'followLink',value:d_b
},d_H:{name:'mode',value:'classes'},d_A:{name:'playing',onChange:d_u,value:d_b},d_p:{name:'selected',onChange:d_u,value:d_b},d_z:{name:'state',onChange:function(){var m=this;if(!m.d_z){if(d_d==m)d_d=d__
;}else if(m.d_z=='over'){d_d&&d_d!=m&&d_d.set({d_z:''});d_d=m;}m.isWired&&d_u.call(m);},value:''},d_E:{name:'statePrecedence',onChange:function(){var m=this,d_c_=m.d_E.d_d_||(m.d_E.d_d_=m.d_E.join(','))
;m.d_C=d_e[d_c_]||(d_e[d_c_]={});m.isWired&&d_u.call(m);},value:['playing','active','grayed','over','']},d_t:{name:'text',onChange:d_s},d_U:'tooltip'}});}});
Uize.module({name:'Uize.Dom.Text',required:'Uize.Dom.Basics',builder:function(){'use strict';var c_$=Uize,c__=c_$.Dom.Basics.getById;return c_$.package({getText:function(c_a){var c_b='';if(c_a=c__(c_a)){
var c_c=function(c_a){if(typeof c_a.innerText=='string'){c_b+=c_a.innerText.replace(/\r|\n|\r\n/g,'');}else if(typeof c_a.textContent=='string'){c_b+=c_a.textContent;}else{if(c_a.nodeType==3)c_b+=c_a.data;
c_a.childNodes&&c_$.forEach(c_a.childNodes,c_c);}};c_c(c_a);}return c_b;}});}});
Uize.module({name:'Uize.Node',required:['Uize.Dom.Basics','Uize.Dom.Pos','Uize.Dom.Text','Uize.Dom.Util'],builder:function(){'use strict';var b_$,b__=Uize,b_a=b__.Dom,b_b=b_a.Basics;return b__.package(
b__.copyInto({showClickable:b_a.Util.showClickable},b_b,b_a.Pos,b_a.Text));}});
Uize.module({name:'Uize.Dom.Event',builder:function(){'use strict';function c_$(){this.returnValue=false;}function c__(){this.cancelBubble=true;}var c_a=Uize.copyInto(function(c_b){return c_b||event},{
abort:function(c_b){c_a.preventDefault(c_b=c_a(c_b));c_a.stopPropagation(c_b);},charCode:function(c_b){c_b=c_a(c_b);if(c_b.ctrlKey||c_b.altKey||c_b.which<1)return 0;return'charCode'in c_b?c_b.charCode:c_a.keyCode(c_b);
},fix:function(c_b){c_b=c_a(c_b);for(var c_c in{target:1,relatedTarget:1,charCode:1,keyCode:1})c_c in c_b||(c_b[c_c]=c_a[c_c](c_b));c_b.preventDefault||(c_b.preventDefault=c_$);c_b.stopPropagation||(c_b.stopPropagation=c__);
return c_b;},keyCode:function(c_b){return'which'in(c_b=c_a(c_b))?c_b.which:c_b.keyCode;},preventDefault:function(c_b){(c_b=c_a(c_b)).preventDefault?c_b.preventDefault():c_$.call(c_b);},relatedTarget:function(c_b){
return('relatedTarget'in(c_b=c_a(c_b))?c_b.relatedTarget:(c_b.type=='mouseout'?c_b.toElement:c_b.fromElement));},stopPropagation:function(c_b){(c_b=c_a(c_b)).stopPropagation?c_b.stopPropagation():c__.call(c_b);
},target:function(c_b){return(c_b=c_a(c_b)).target||c_b.srcElement;}});Uize.map({Backspace:8,Delete:46,Insert:45,Enter:13,Escape:27,Space:32,Tab:9,PageUp:33,PageDown:34,End:35,Home:36,LeftArrow:37,RightArrow:39,UpArrow:38,DownArrow:40
},function(c_d,c_e){c_a['isKey'+c_e]=function(c_b){return c_a.keyCode(c_b)==c_d};});return c_a;}});
Uize.module({name:'Uize.Dom.Classes',required:'Uize.Dom.Basics',builder:function(){'use strict';var c_$=Uize.Dom.Basics,c__=c_$.isNode,c_a=c_$.getById,c_b=c_$.doForAll,c_c,c_d,c_e={},c_f=[''];function c_g(c_h){
var c_i=c_h+'',c_j=c_e[c_i];if(!c_j&&c_i){(c_h=c_i.split(',')).length==1&&c_h.unshift('');var c_k='\\b(?:'+c_h.join('|').replace(/\|{2,}/g,'|').replace(/^\||\|$/g,'')+')\\b',c_l={'':-1},c_m=c_h.length
;for(var c_n=c_m;--c_n> -1;)c_l[c_h[c_n]]=c_m>2?c_n: !!c_n;c_j=c_e[c_i]={c_h:c_h,c_o:new RegExp(c_k),c_p:new RegExp('(\\s*)'+c_k+'(\\s*)'),c_l:c_l};}return c_j;}function c_q(c_r,c_h){var c_j=c_g(c_h);
if(c_j){c_h=c_j.c_h;c_b(c_r,function(c_s){c_d(c_s,c_h,(c_c(c_s,c_h)+1)%c_h.length);});}}return Uize.package({getState:c_c=function(c_s,c_h){var c_t= -1;if(c__(c_s=c_a(c_s))){var c_j=c_g(c_h);if(c_j)c_t=c_j.c_l[
(c_s.className.match(c_j.c_o)||c_f)[0]];}return c_t;},hasClass:function(c_s,c_u){return c_c(c_s,c_u)==1;},setState:c_d=function(c_r,c_h,c_v){var c_j=c_g(c_h);if(!c_j)return;var c_w=(c_h=c_j.c_h)[+c_v]||'',
c_x;c_b(c_r,function(c_s){if((c_x=c_s.className)!=c_w){if(c_x){c_s.className=c_w?(c_x.replace(c_j.c_o,function(){return c_w+(c_w='')})+(c_w&&(' '+c_w))):(c_x.replace(c_j.c_p,function(c_y,c_z,c_A){return c_z&&c_A;
}));}else{c_s.className=c_w;}}});},removeState:function(c_r,c_h){c_d(c_r,c_h,-1);},addClass:function(c_r,c_u){c_d(c_r,c_u,1);},removeClass:function(c_r,c_u){c_d(c_r,c_u,0);},toggleClass:c_q,toggleState:c_q
});}});
Uize.module({name:'Uize.Widget.FormElementWarning',required:'Uize.Dom.Classes',builder:function(d_$){'use strict';function d__(m){m.isWired&&Uize.Dom.Classes.setState(m.getNode(),['',m.d_a],m.d_b);}function d_c(m){m.isWired&&m.setNodeInnerHtml('text',m.getMessage())}
function d_d(m){m.isWired&&m.displayNode('',m.d_e)}return d_$.subclass({instanceMethods:{getMessage:function(){var d_f=this.d_f;return Uize.isFunction(d_f)?d_f():d_f;},updateUi:function(){var m=this;
if(m.isWired){d_c(m);d_d(m);d__(m);d_$.doMy(m,'updateUi');}},wireUi:function(){var m=this;if(!m.isWired){var d_g=function(d_b){m.set({d_b:d_b})};m.wireNode('',{mouseover:function(){d_g(true)},mouseout:function(){d_g(false)}
});m.d_f==null&&m.set({d_f:m.getNodeValue('text')});d_$.doMy(m,'wireUi');}}},stateProperties:{d_a:'cssClassFocused',d_b:{name:'focused',onChange:function(){d__(this)},value:false},d_f:{name:'message',
onChange:function(){d_c(this)}},d_e:{name:'shown',onChange:function(){d_d(this)},value:false}}});}});
Uize.module({name:'Uize.Widget.FormElement',required:['Uize.Node','Uize.Dom.Event','Uize.Dom.Classes','Uize.Widget.FormElementWarning'],builder:function(d_$){'use strict';var d__=true,d_a=false,d_b=null,
d_c,d_d=Uize,d_e=d_d.Node,d_f=d_d.Dom.Event,d_g='checkWarningShown',d_h='never',d_i='tentativeValueChanged',d_j='valueChanged',d_k='validated',d_l='finished',d_m='validatedAfterFirstFinish';function d_n(m){return m.getNode('input')}
function d_o(m){var d_p=m.parent,d_q;if(d_p&&d_p.parent){d_q=d_p.parent;if(!d_q.isForm)d_q=d_b;}return d_q;}function d_r(m){if(m.isWired){var d_s=m.get('enabledInherited')&& !m.get('busyInherited');m.setNodeProperties(d_n(m),{disabled:!d_s});
}}function d_t(m){if(m.isWired){var d_u=d_n(m),d_v=m.d_v;d_v!=m.getNodeValue(d_u)&&m.setNodeValue(d_u,d_v===d_c?'':d_v);}}function d_w(){var m=this,d_x=m.d_x,d_y=m.d_y;if(m.isWired){m.d_z&&m.d_z.set(
d_d.copyInto({shown:d_x},d_y?{message:d_y}:d_b));Uize.Dom.Classes.setState([d_n(m),m.getNode('label'),m.getNode('shell')],m.d_A,d_x);}}return d_$.subclass({omegastructor:function(){var m=this,d_z=m.d_z=m.addChild(
'warning',m.d_B||d_d.Widget.FormElementWarning),d_C=function(){d_r(m)};m.wire({'Changed.busyInherited':d_C,'Changed.enabledInherited':d_C});m.d_D=d__;m.d_E= -1;},instanceMethods:{fireOkOnEnter:d_d.returnTrue,
checkIsEmpty:function(){return this.d_v==d_b||this.d_v===''},checkWarningShown:function(){var m=this,d_F=m.d_F,d_q=d_o(m),d_G=m.d_x;m.set({d_x:m.d_H&&m.d_I==d_a&&(d_q?d_q.get('warningShown'):(m.d_J&&(
d_F==d_k||(d_F==d_l&&(m.d_K||d_G))||(d_F==d_m&&(m.d_L||d_G)))))});},getMoreValidators:d_c,getRootNode:function(){return this.getNode()||this.getNode('input')},restore:function(){this.set({d_L:d_a,d_M:'inherit',
d_v:this.d_N});},updateUi:function(){var m=this;if(m.isWired){d_r(m);d_t(m);d_w.call(m);d_$.doMy(m,'updateUi');}},valueConformer:function(d_v){return d_d.isFunction(this.d_O)?this.d_O(d_v):d_v;},validate:function(){
var m=this;if(m.d_D){var d_P=m.d_P,d_Q=(d_d.isArray(d_P)?d_P:(d_P!=d_b?[d_P]:d_b)),d_R=m.getMoreValidators?m.getMoreValidators():d_b;if(d_R)d_Q=d_Q?d_Q.concat(d_R):d_R;var d_S=function(d_I){m.set({d_I:d_I})};
if(d_Q!=d_b){var d_v=m.d_T==d_i?m.d_U:m.d_v,d_V=d_Q.length,d_W= -1,d_X=function(){if(++d_W<d_V){var d_Y=function(d_I,d_Z){if(d_I==d_a){m.set({d_y:d_Z||m.d_0});d_S(d_a);}else d_X();},d_1=d_Q[d_W],d_2=d_1.func||(d_d.isFunction(d_1)?d_1:d_b),
d_I=d_2?d_2.call(m,d_v,d_Y):(d_1 instanceof RegExp?d_1.test(d_v):d_v==d_1);if(d_I!=d_b)d_Y(d_I,d_1.msg);}else d_S(d__);};d_X();}else d_S(d__);}},wireUi:function(){var m=this;if(!m.isWired){var d_u=d_n(m);
if(d_u){m.d_3=d_u.type;m.d_4=d_u.name;var d_5=function(d_6,d_7){m.fire({name:d_6,domEvent:d_7})},d_8=function(d_9){d_5('Click',d_9)},d_$_=function(d_9){d_5('Key Up',d_9)},d___=function(d_a_){m.set({d_v:m.getNodeValue(d_u)});
!d_a_&&m.d_M!=d__&&m.set({d_M:d__});},d_b_={blur:function(){d___();m.set({d_c_:d_a});},focus:function(){m.set({d_c_:d__})},click:function(d_9){d___();d_8(d_9);},keydown:function(d_9){m.d_E=d_9.keyCode;
d_5('Key Down',d_9);d_f.isKeyEnter(d_9)&&m.d_3!='textarea'&&d_f.abort(d_9);}};switch(m.d_3){case'checkbox':break;case'radio':m.set({nodeMap:d_d.copyInto(m.get('nodeMap')||{},{input:d_e.find({tagName:'INPUT',
type:'radio',name:m.d_4})})});d_u=d_n(m);break;case'select-one':case'select-multiple':d_b_.change=d___;d_b_.keyup=function(d_9){d___();d_$_(d_9);};d_b_.click=d_8;break;default:d_b_.keyup=function(d_9){
if(m.d_3!='textarea'&&m.d_E==d_9.keyCode&&d_f.isKeyEnter(d_9)){d___();m.fireOkOnEnter()&&d_5('Ok',d_9);}else if(d_f.isKeyEscape(d_9)){d_t(m);d_5('Cancel',d_9);d_u.blur();}else{m.set({d_U:m.getNodeValue(d_u),
d_K:d_a});}d_$_(d_9);};d_b_.click=d_8;break;}m.wireNode(d_u,d_b_);m.d_v===d_c?d___(d__):d_t(m);}m.validate();d_$.doMy(m,'wireUi');}}},stateProperties:{d_4:'elementName',d_A:{name:'errorClassName',value:'error'
},d_c_:{name:'focused',onChange:function(){var m=this,d_z=m.children.warning,d_c_=m.d_c_;d_z&&d_z.set({focused:d_c_});if(m.isWired){var d_u=d_n(m);if(d_c_&&d_u&&document.activeElement!=d_u){setTimeout(
function(){try{(d_e.isNode(d_u)?d_u:d_u[0]).focus();}catch(d_d_){}},50);m.setNodeValue('input',m.d_v);}}},value:d_a},d_e_:{name:'isEmpty',value:d__},d_M:{name:'isDirty',onChange:function(){var m=this,
d_q=d_o(m),d_M=m.d_M=='inherit'?(d_q?d_q.get('isDirtyInherited'):d_a):m.d_M;m.set({d_J:d_M});},value:'inherit'},d_J:{name:'isDirtyInherited',onChange:d_g,value:d_a},d_K:{name:'isFinished',onChange:function(){
var m=this;if(m.d_K&&m.d_D){m.d_T==d_l&&m.validate();m.d_L||m.set({d_L:d__});}m.checkWarningShown();},value:d__},d_I:{name:'isValid',onChange:d_g,value:d_a},d_U:{name:'tentativeValue',onChange:function(){
var d_f_=d_o(this);if(d_f_){d_f_.set({isSubmitting:false});}this.d_T==d_i&&this.validate();},value:d_b},d_3:'type',d_T:{name:'validateWhen',value:d_i},d_P:{name:'validator',onChange:'validate',value:d_b
},d_v:{name:'value',conformer:function(d_v){var m=this;d_v=m.d_3=='checkbox'?d_v==d__:d_v;return m.valueConformer(d_v);},onChange:function(){var m=this;if(!m.isWired)m.d_N=m.d_v;m.set({d_U:m.d_v,d_K:d__,
d_e_:m.checkIsEmpty()});m.d_T==d_j&&m.validate();d_t(m);}},d_O:'valueConformer',d_g_:{name:'warningAllowed',onChange:function(){var m=this,d_q=d_o(m),d_g_=m.d_g_=='inherit'?(d_q?d_q.get('warningAllowedInherited'):d__)
:m.d_g_;m.set({d_H:d_g_});},value:'inherit'},d_H:{name:'warningAllowedInherited',onChange:d_g,value:d_a},d_y:{name:'warningMessage',onChange:[function(){var m=this;if(!m.isWired)m.d_0=m.d_y;},d_w]},d_x:{
name:'warningShown',onChange:d_w,value:d_a},d_F:{name:'warningShownWhen',onChange:d_g,value:d_k},d_B:'warningWidgetClass',d_L:{onChange:d_g,value:d_a}}});}});
Uize.module({name:'Uize.Widget.FormElement.Text',builder:function(e_$){'use strict';var e__,e_a=typeof document!='undefined'&&'placeholder'in document.createElement('input');function e_b(){var m=this;m.e_c=[
function(e_d){var e_e=e_d+'',e_f=e_d!=null?e_e.length:0;return e_f>=m.e_g&&e_f<=m.e_h;}];}function e_i(){this.isWired&&e_a&&this.setNodeProperties('input',{placeholder:this.e_j});}return e_$.subclass({
omegastructor:function(){var m=this;m.wire('Changed.focused',function(e_k){if(m.isWired){var e_l=e_k.newValue,e_j=m.e_j,e_d=m.valueOf();if(e_j&& !e_a){var e_m;if(e_l&&e_d==e_j)e_m='';else if(!e_l&& !e_d)
e_m=e_j;e_m!=e__&&m.setNodeValue('input',e_m);}e_l&&e_d&&m.setCaretPosition(e_d.length);}});e_b.call(m);},instanceMethods:{checkIsEmpty:function(){return e_$.doMy(this,'checkIsEmpty')||this.valueOf()==this.e_j;
},getCaretPosition:function(){var m=this,e_n= -1;if(m.isWired&&m.get('focused')){var e_o=m.getNode('input');if('selectionStart'in e_o)e_n=e_o.selectionStart;else if(e_o.createTextRange){var e_p=e_o.createTextRange();
e_p.moveStart('character',-m.get('tentativeValue').length);e_n=e_p.text.length;}}return e_n;},select:function(e_q,e_r){var m=this;if(m.isWired){var e_o=m.getNode('input'),e_d=m.valueOf();m.set('focused',true);
if(e_d){if(e_q==e__)e_o.select();else{e_r=e_r==e__?e_d.length:e_r;if(e_o.setSelectionRange)try{e_o.setSelectionRange(e_q,e_r);}catch(e_s){}else if(e_o.createTextRange){var e_t=e_o.createTextRange();e_t.collapse(true);
e_t.moveEnd('character',e_r);e_t.moveStart('character',e_q);e_t.select();}}}}},setCaretPosition:function(e_u){this.select(e_u,e_u)},getMoreValidators:function(){return this.e_c},updateUi:function(){if(this.isWired){
e_i.call(this);e_$.doMy(this,'updateUi');}},wireUi:function(){var m=this;if(!m.isWired){var e_j=m.e_j,e_o=m.getNode('input');if(e_j){if(e_a)m.setNodeProperties(e_o,{placeholder:e_j});else m.set('value',e_j);
}e_$.doMy(m,'wireUi');}}},stateProperties:{e_j:{name:'placeholder|defaultValue',onChange:e_i,value:''},e_g:{name:'minLength',onChange:e_b,value:0},e_h:{name:'maxLength',onChange:e_b,value:32767}}});}
});
Uize.module({name:'Uize.Node.Classes',required:'Uize.Dom.Classes',builder:function(){return Uize.Dom.Classes}});
Uize.module('Zazzle');
Uize.module({name:'Zazzle.FormElementWarning',superclass:'Uize.Widget.FormElementWarning',required:'Uize.Node.Classes',builder:function(e_$){'use strict';var e__=e_$.subclass(),e_a=e__.prototype,e_b={Info:0,
Warning:1,Error:2};e_a.e_c=function(){var m=this;m.isWired&&Uize.Node.Classes.setState(m.getNode(),[m.e_d,m.e_e,m.e_f],e_b[m.e_g]);};e_a.updateUi=function(){var m=this;if(m.isWired){m.e_c();e_$.doMy(m,'updateUi');
}};e_a.wireUi=function(){var m=this;if(!m.isWired){var e_h=m.getNode('icon'),e_i=false;e_h&&m.wire('Changed.shown',function(){if(m.get('shown')&& !e_i){e_i=true;m.callInherited('wireTooltip')({widget:m,
node:e_h,message:function(){return m.getMessage()},direction:m.e_j,propertyName:'focused',evalFunc:function(e_k){return e_k&&m.get('shown')}});}});e_$.doMy(m,'wireUi');}};e__.stateProperties({e_g:{name:'alert',
onChange:e_a.e_c,value:'Warning'},e_f:'cssClassAlertError',e_d:'cssClassAlertInfo',e_e:'cssClassAlertWarning',e_j:'messageDirection'});return e__;}});
Uize.module({name:'Uize.Data',builder:function(){'use strict';var b_$='string',b__=true,b_a=false,b_b=null,b_c,b_d=Infinity,b_e=Uize.totalKeys;var b_f,b_g={};return b_f=Uize.package({getColumn:function(b_h,b_i,b_j){
var b_k=[];if(b_h){var b_l=b_j?{}:b_b;for(var b_m= -1,b_n=b_h.length;++b_m<b_n;){var b_o=b_h[b_m][b_i];if(!b_j||(!b_l[b_o]&&(b_l[b_o]=1)))b_k.push(b_o);}}return b_k;},findRecords:function(b_p,b_q){var b_r=[];
if(b_p){for(var b_s= -1,b_t=b_p.length,b_u;++b_s<b_t;)Uize.recordMatches(b_u=b_p[b_s],b_q)&&b_r.push(b_u);}return b_r;},filter:function(b_v,b_w){var b_k={};if(b_v&&b_w){for(var b_x= -1,b_y=b_w.length;
++b_x<b_y;){var b_z=b_w[b_x];if(b_z in b_v)b_k[b_z]=b_v[b_z];}}return b_k;},identical:function(b_A,b_B,b_C){if(!b_C)b_C=b_g;var b_D=b_C.equality,b_E=b_D=='loose',b_F= !b_E&&b_D=='type',b_G= !b_E&& !b_F&&b_D=='tree',
b_H= !b_E&& !b_F&& !b_G,b_I=b_C.allowConjoined!==b_a;function b_J(b_A,b_B){var b_K,b_L=typeof b_A,b_M=b_L=='object',b_N=b_M&&b_A,b_O=b_L==typeof b_B;function b_P(){if(b_K=b_e(b_A)==b_e(b_B)){for(var b_z in b_A){
if(!(b_z in b_B)|| !b_J(b_A[b_z],b_B[b_z])){b_K=b_a;break;}}}}if(b_O&&b_N&&b_B){var b_Q=b_A.constructor;if(b_A==b_B){b_K=b_I;}else if(b_K=b_Q==b_B.constructor){if(b_Q==Date||b_Q==String||b_Q==Number||
b_Q==Boolean||b_Q==RegExp){b_K=b_A+''==b_B+'';}else{if(typeof b_A.splice=='function'&&typeof b_B.splice=='function'){if(b_K=b_A.length==b_B.length){for(var b_R=b_A.length;--b_R>=0;){if(!b_J(b_A[b_R],b_B[b_R])){
b_K=b_a;break;}}if(b_K){var b_S=b_A.splice(0,b_d),b_T=b_B.splice(0,b_d);b_P();Uize.push(b_A,b_S);Uize.push(b_B,b_T);}}}else{b_P();}}}}else{b_K=b_G? !b_N&& !(typeof b_B=='object'&&b_B):((b_E?b_A==b_B:(
b_O&&(b_H?b_A===b_B:(!b_M|| !b_A== !b_B))))||(b_O&&b_L=='number'&&b_A!=b_A&&b_B!=b_B));}return b_K;}return b_J(b_A,b_B);},conjoined:function(b_A,b_B){function b_U(b_v){var b_V=[];function b_W(b_v){if(typeof b_v=='object'){
if(!Uize.isIn(b_V,b_v)){b_V.push(b_v);for(var b_z in b_v)b_W(b_v[b_z]);}}}b_W(b_v);return b_V;}var b_X=b_a,b_Y=b_U(b_A),b_Z=b_Y.length,b_0=b_U(b_B);for(var b_1= -1;++b_1<b_Z&& !b_X;)b_X=Uize.isIn(b_0,b_Y[b_1])
;return b_X;},clones:function(b_A,b_B){return(b_f.identical(b_A,b_B,{allowConjoined:b_a})&& !b_f.conjoined(b_A,b_B));},intersection:function(b_A,b_B){var b_k={};if(b_A&&b_B){for(var b_z in b_A){var b_2=b_A[b_z];
if(b_B[b_z]===b_2)b_k[b_z]=b_2;}}return b_k;}});}});
Uize.module({name:'Uize.Data.NameValueRecords',builder:function(){'use strict';var c_$,c__=Uize.defaultNully;return Uize.package({fromHash:function(c_a,c_b,c_c){var c_d=[];if(Uize.isObject(c_a)){var c_e=typeof c_b=='number'&&typeof c_c=='number',
c_f;c_b=c__(c_b,'name');c_c=c__(c_c,'value');for(var c_g in c_a){c_d.push(c_f=c_e?[]:{});c_f[c_b]=c_g;c_f[c_c]=c_a[c_g];}}return c_d;},toHash:function(c_h,c_b,c_c){var c_d={},c_i=Uize.isArray(c_h)&&c_h.length
;if(c_i){var c_e=Uize.isArray(c_h[0]);c_b=c__(c_b,c_e?0:'name');c_c=c__(c_c,c_e?1:'value');for(var c_j= -1,c_f,c_g;++c_j<c_i;){c_g=(c_f=c_h[c_j])[c_b];if(c_g!=c_$)c_d[c_g]=c_f[c_c];}}return c_d;}});}
});
Uize.module('Uize.Str');
Uize.module({name:'Uize.Str.CharClass',builder:function(){'use strict';var c_$=true,c__=false,c_a={};function c_b(m,c_c,c_d,c_e,c_f){var c_g=m.c_g,c_h=c_c.length;if(c_h){c_f=c_f!=undefined?c_f: -c_e*Infinity;
var c_i=c_e==1?c_h: -1;if((c_f-c_i)*c_e<0){if(c_h==1){return(c_g[c_c]==c_a)==c_d?0: -1;}else{for(var c_j=c_e==1?Math.max(c_f,0)-1:Math.min(c_f,c_h-1)+1;(c_j+=c_e)!=c_i;)if((c_g[c_c.charAt(c_j)]==c_a)==c_d)
return c_j;}}}return-1;}return Uize.copyInto(Uize.noNew(function(c_k){this.setChars(c_k)}),{prototype:{setChars:function(c_k){this.c_g=c_k?Uize.lookup(Uize.map(c_k,function(c_l){return typeof c_l=='string'?c_l:String.fromCharCode(+c_l)}
),c_a):{};},isClassChars:function(c_c){return!!c_c&&c_b(this,c_c,c__,-1)== -1;},isNonClassChars:function(c_c){return!!c_c&&c_b(this,c_c,c_$,-1)== -1;},hasClassChars:function(c_c){return!!c_c&&c_b(this,c_c,c_$,-1)> -1;
},hasNonClassChars:function(c_c){return!!c_c&&c_b(this,c_c,c__,-1)> -1;},indexOfClassChar:function(c_c,c_f){return c_b(this,c_c,c_$,1,c_f);},lastIndexOfClassChar:function(c_c,c_f){return c_b(this,c_c,c_$,-1,c_f);
},indexOfNonClassChar:function(c_c,c_f){return c_b(this,c_c,c__,1,c_f);},lastIndexOfNonClassChar:function(c_c,c_f){return c_b(this,c_c,c__,-1,c_f);}}});}});
Uize.module({name:'Uize.Str.Whitespace',required:'Uize.Str.CharClass',builder:function(){'use strict';var c_$=Uize.Str.CharClass([9,10,11,12,13,32,160,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,
8202,8203,8232,8233,12288]);return Uize.package(Uize.map({isWhitespace:'isClassChars',isNonWhitespace:'isNonClassChars',hasWhitespace:'hasClassChars',hasNonWhitespace:'hasNonClassChars',indexOfWhitespace:'indexOfClassChar',
lastIndexOfWhitespace:'lastIndexOfClassChar',indexOfNonWhitespace:'indexOfNonClassChar',lastIndexOfNonWhitespace:'lastIndexOfNonClassChar'},function(c__){var c_a=c_$[c__];return function(){return c_a.apply(c_$,arguments)};
}));}});
Uize.module({name:'Uize.Str.Trim',required:'Uize.Str.Whitespace',builder:function(){'use strict';var c_$=Uize.Str.Whitespace,c__=c_$.isWhitespace,c_a=c_$.indexOfNonWhitespace,c_b=c_$.lastIndexOfNonWhitespace,
c_c;return Uize.package({hasPadding:function(c_d){var c_e=c_d.length;return!!(c_e&&(c__(c_d.charAt(0))||c__(c_d.charAt(c_e-1))));},trim:c_c=function(c_d,c_f){if(!c_d)return c_d;var c_e=c_d.length,c_g=c_f!=1?(c_a(c_d)+1||c_e+1)-1:0,
c_h=c_f!= -1?c_b(c_d)+1:c_e;return c_g>0||c_h<c_e?c_d.slice(c_g,c_h):c_d;},trimLeft:function(c_d){return c_c(c_d,-1);},trimRight:function(c_d){return c_c(c_d,1);}});}});
Uize.module({name:'Uize.Web',required:['Uize.Dom.Basics','Uize.Dom.Classes','Uize.Dom.Pos','Uize.Dom.Text'],builder:function(){'use strict';var b_$=true,b__=false,b_a=null,b_b,b_c=Uize,b_d=b_c.Dom,b_e=b_d.Basics,
b_f=b_d.Classes,b_g=b_d.Pos,b_h=b_c.isString,b_i=b_c.isArray,b_j=b_c.isList,b_k=b_c.isFunction,b_l=b_c.isPlainObject,b_m=b_c.isBoolean,b_n=b_e.getStyle,b_o=b_e.setStyle,b_p=b_e.isNode,b_q=b_c.global(),
b_r=b_q.document,b_s={width:{marginRight:1,marginLeft:1},height:{marginTop:1,marginBottom:1}},b_t=['webkit','ms','moz','o'],b_u=b_t.length,b_v=0,b_w=0,b_x=function(b_y,b_z,b_A){var b_B=b_y;if(b_y){var
 b_C=b_A,b_D=function(b_E){if(b_k(b_E)){var b_F=b_C||'_handlerWrapper';return(b_E[b_F]||(b_E[b_F]=function(b_G){var b_H=this;b_c.require('Uize.Dom.Event',function(b_I){b_I.fix(b_G);b_J(b_G.target,b_C)
&&b_E.call(b_H,b_G);});}));}else if(b_m(b_E))return b_E?b_c.returnTrue:b_c.returnFalse;};if(b_h(b_y))b_B=b_c.pairUp(b_y,b_D(b_z));else if(b_i(b_y))b_B=b_c.lookup(b_y,b_D(b_z));else{b_C=b_z;var b_K={};
for(var b_L in b_B)b_K[b_L]=b_D(b_B[b_L]);b_B=b_K;}}return b_B;},b_M=function(b_N){return b_e.getById(b_N)},b_O=function(b_H,b_P){var b_Q=b_g.getDimensions(b_H);if(b_P){for(var b_R in b_s){var b_S=b_s[b_R],
b_T=b_n(b_H,b_S);for(var b_U in b_S){var b_V=b_T[b_U];b_Q[b_R]+=(b_V=='auto'?0:parseInt(b_V,10));}}}return b_Q;},b_W=function(b_H){return b_H.b_X||(b_H.b_X=b_c.getGuid())},b_Y=function(b_H,b_C){var b_Z=b_H,
b_0;while(b_Z=b_Z.offsetParent){if(b_J(b_Z,b_C)){b_0=b_Z;break;}}return b_0;},b_1=function(b_2,b_H,b_3){var b_4;b_H=b_H||b_r;if(b_H){var b_5=b_6(b_2),b_7= -1;for(;++b_7<b_u+1;){var b_8=b_5[b_7];if(b_8 in b_H){
b_4=b_3?b_8:b_H[b_8];break;}}}return b_4;},b_6=function(b_2){var b_5=[b_2],b_9=b_c.capFirstChar(b_2),b_$_= -1;for(;++b_$_<b_u;)b_5.push(b_t[b_$_]+b_9);return b_5;},b___=function(b_a_,b_b_){var b_c_;if(b_a_){
b_c_={};for(var b_2 in b_a_){var b_d_=b_e_(b_2,b_b_);if(b_d_)b_c_[b_d_]=b_a_[b_2];}}return b_c_;},b_f_=function(){return b_g_.b_h_=b_g_.b_h_||b_r.createElement('DIV')},b_J=function(b_H,b_C){b_H=b_M(b_H);
return(b_C===b_b||(b_h(b_C)&&b_g_.matches(b_H,b_C))||(b_p(b_C)&&b_H==b_C)||(b_i_(b_C)&&b_c.isIn(b_C.b_j_,b_H))||(b_i(b_C)&&b_c.isIn(b_C,b_H)));},b_i_=function(b_k_){return b_c.getClass(b_k_)==b_g_},b_l_=function(b_k_,b_m_){
var b_j_;if(b_k_&&b_h(b_k_))b_j_=b_g_.selectCss(b_k_,b_l_(b_m_)[0]);else if(b_p(b_k_))b_j_=[b_k_];else if(b_i_(b_k_))b_j_=b_k_.element();else if(b_j(b_k_)){var b_n_={};b_j_=[];for(var b_o_= -1;++b_o_<b_k_.length;){
var b_H=b_k_[b_o_];if(b_p(b_H)){var b_p_=b_W(b_H);if(!b_n_[b_p_]){b_j_.push(b_H);b_n_[b_p_]=b_$;}}}}else b_j_=[];return b_j_;},b_e_=function(b_2,b_q_){var b_e_=b_g_.b_r_[b_2];if(b_e_==b_b)b_e_=b_1(b_2,
(b_M(b_q_)||b_f_()).style,b_$);return b_g_.b_r_[b_2]=b_e_;};var b_g_=Uize.noNew(function(b_C,b_m_){var m=this,b_j_=m.b_j_=b_l_(b_C,b_m_),b_s_=m.length=b_j_.length,b_o_= -1;m.supportsTouch=b_g_.supportsTouch;
for(;++b_o_<b_s_;)m[b_o_]=b_j_[b_o_];m.atEndOfConstructor(b_j_);}),b_t_=b_g_.prototype;if(b_q&& !b_q.U)b_q.U=b_g_;b_g_.b_h_=b_b;b_g_.b_r_={};b_g_.supportsTouch='ontouchstart'in b_q;b_g_.getPrefixedProperty=b_1;
b_g_.matches=function(b_N,b_C){var b_H=b_M(b_N),b_u_=b__;if(b_H){var b_v_=b_H.matches||b_H.msMatchesSelector||b_H.mozMatchesSelector||b_H.webkitMatchesSelector||b_H.oMatchesSelector;if(b_v_)b_u_=b_v_.call(b_H,b_C);
}return b_u_;};b_g_.selectCss=function(b_C,b_w_){var b_x_=b_w_?b_M(b_w_):b_r,b_y_=b_x_.querySelectorAll&&b_x_.querySelectorAll(b_C);if(b_y_){var b_z_=[];for(var b_o_= -1,b_A_=b_y_.length;++b_o_<b_A_;)
b_z_[b_o_]=b_y_[b_o_];b_y_=b_z_;}return b_y_||[];};b_g_.supportsCss=b_e_;b_g_.getNodeUid=b_W;b_g_.isMatch=b_J;b_g_.isWeb=b_i_;b_g_.select=b_l_;b_t_.b_B_=function(b_C_){var m=this,b_D_=b_e.display;m.b_E_(
function(){var b_H=this,b_F_=b_C_,b_G_=b_n(b_H,'display'),b_H_=b_G_=='none';if(b_F_==b_a)b_F_=b_H_;if(b_H_==b_F_){if(!b_F_){b_H.b_B_=b_G_;b_D_(b_H,b__);}else{var b_I_=b_H.b_B_||'';b_o(b_H,{display:b_I_});
!b_I_&&b_n(b_H,'display')=='none'&&b_D_(b_H);b_H.b_B_=b_b;}}});return m;};b_t_.b_J_=function(b_K_,b_y,b_z,b_A){b_e[b_K_](this.b_j_,b_x(b_y,b_z,b_A));return this;};b_t_.atEndOfConstructor=b_c.nop;b_t_.handleGetAction=b_t_.b_L_=function(b_M_,b_N_){
var b_j_=this.b_j_,b_4=b_a;if(b_N_)b_4=b_c.map(b_j_,b_M_);else if(b_j_.length)b_4=b_M_(b_j_[0],0);return b_4;};b_t_.handleGetOrSetAction=b_t_.b_O_=function(b_M_,b_P_,b_Q_){return(b_P_==b_b||b_m(b_P_)
?this.b_L_(b_M_,b_P_):this.b_R_(b_P_,b_Q_));};b_t_.handleSetAction=b_t_.b_R_=function(b_S_,b_Q_){var m=this,b_j_=m.b_j_;if(b_k(b_S_)){for(var b_o_= -1,b_s_=b_j_.length;++b_o_<b_s_;){var b_H=b_j_[b_o_];
b_Q_(b_H,b_S_.call(b_H,b_o_,b_H));}}else m.b_E_(function(){b_Q_(this,b_S_)});return m;};var b_T_=function(b_K_,b_M_,b_Q_){b_t_[b_K_]=function(b_y,b_z){var b_U_=b_l(b_y),b_V_=b_i(b_y)?b_c.lookup(b_y):b_y
;return this.b_O_(function(b_H){return b_M_(b_H,b_V_)},b_U_?b_y:b_z,function(b_H,b_W_){b_Q_(b_H,b_U_?b_y:b_c.pairUp(b_y,b_W_));});};},b_X_=function(b_Y_){var b_Z_=function(b_H,b_0_){var b_1_=b_h(b_0_),
b_W_=b_1_?'':{};if(b_H){if(b_1_)b_W_=b_Y_(b_H,b_0_);else{for(var b_2_ in b_0_)b_W_[b_2_]=b_Z_(b_H,b_2_);}}return b_W_;};return b_Z_;};b_t_.each=b_t_.b_E_=function(b_3_){b_k(b_3_)&&b_c.forEach(this.b_j_,
function(b_H,b_o_){b_3_.call(b_H,b_o_,b_H)});return this;};b_t_.element=function(b_7){var b_j_=this.b_j_;return b_7!=b_b?b_j_[b_7]:b_j_.concat();};b_t_.getPrefixedProperty=function(b_2,b_N_){return this.b_L_(
function(b_H){return b_1(b_2,b_H)},b_N_);};b_t_.splice=b_c.nop;var b_4_=function(b_K_){b_t_[b_K_]=function(b_5_){return this.b_R_(b_5_,function(b_H,b_6_){b_f[b_K_](b_H,b_6_)});};},b_7_=function(b_K_,b_8_){
b_t_[b_K_]=function(){b_f[b_8_].apply(0,[this.b_j_].concat(Array.prototype.slice.call(arguments)));return this;};};b_4_('addClass');b_t_.getClassState=function(b_9_,b_N_){return this.b_L_(function(b_H){return b_f.getState(b_H,b_9_)},
b_N_);};b_t_.hasClass=function(b_$a){var m=this,b_j_=m.b_j_,b_s_=b_j_.length,b_o_= -1;for(;++b_o_<b_s_;)if(b_f.hasClass(b_j_[b_o_],b_$a))return b_$;return b__;};b_4_('removeClass');b_7_('removeClassState','removeState');
b_7_('setClassState','setState');b_4_('toggleClass');b_7_('toggleClassState','toggleState');b_t_.domReady=function(b_E){b_e.wire(b_r,'DOMContentLoaded',b_E);return this;};b_t_.hover=function(b__a,b_aa){
return this.mouseover(b__a).mouseout(b_aa||b__a);};b_t_.trigger=function(b_L){var m=this;if(b_L){var b_G;if(b_r.createEvent){b_G=b_r.createEvent('HTMLEvents');b_G.initEvent(b_L,b_$,b_$);}else{b_G=b_r.createEventObject();
b_G.eventType=b_L;}m.b_E_(function(){var b_H=this;b_r.dispatchEvent?b_H.dispatchEvent(b_G):b_H.fireEvent('on'+b_G.eventType,b_G);});}return m;};b_t_.unwire=function(b_y,b_z,b_A){return this.b_J_('unwire',b_y,b_z,b_A);
};b_t_.wire=function(b_y,b_z,b_A){return this.b_J_('wire',b_y,b_z,b_A);};b_t_.wireOnce=function(b_y,b_z,b_A){var m=this,b_B=b_x(b_y,b_z,b_A),b_ba=function(b_H,b_L,b_E){var b_ca=function(b_G){b_e.unwire(b_H,b_L,b_ca);
b_E(b_G);};b_e.wire(b_H,b_L,b_ca);};b_c.forEach(b_B,function(b_E,b_L){b_E&&m.b_E_(function(){b_ba(this,b_L,b_E)});});return m;};var b_da=function(b_K_,b_ea){b_t_[b_K_]=function(b_E,b_fa){return this.wire(b_ea||b_K_,b_E,b_fa)};
},b_ga=function(b_L,b_E,b_A,b_ha){var b_ia=0,b_ja=b_c.isNumber(b_A);return b_k(b_E)?this.wire(b_L,b_ja?function(b_G){if(!b_ia){b_ia=setTimeout(function(){b_ia=0;b_E(b_G);},b_A);}}:b_E,b_ja?b_ha:b_A):this.trigger(b_L)
;},b_ka=function(b_L){b_t_[b_L]=function(b_E,b_z,b_A){return b_ga.call(this,b_L,b_E,b_z,b_A);};};b_ka('blur');b_ka('change');b_ka('click');b_ka('dblclick');b_da('error');b_ka('focus');b_ka('keydown');
b_ka('keypress');b_ka('keyup');b_da('load');b_ka('mousedown');b_ka('mousemove');b_ka('mouseout');b_ka('mouseover');b_ka('mouseup');b_t_.resize=function(b_E,b_la){var m=this;return b_ga.call(m,'resize',
b_k(b_E)&&m.length>0&&m[0]==b_q&&b_e.isIe&&b_e.ieMajorVersion<9?function(b_G){var b_Q=m.dimensions();if(b_Q.width!=b_v||b_Q.height!=b_w){b_v=b_Q.width;b_w=b_Q.height;b_E(b_G);}}:b_E,b_la);};b_ka('scroll');
b_ka('select');b_ka('submit');b_ka('touchcancel');b_ka('touchend');b_ka('touchleave');b_ka('touchmove');b_ka('touchstart');b_da('transitionend',['transitionend','webkitTransitionEnd','oTransitionEnd','otransitionend']);
b_da('unload');var b_ma='ModClick',b_na='Remain',b_oa=function(b_pa){b_c.forEach(b_pa,function(b_qa,b_L){b_t_[b_L]=function(b_E,b_ra){var m=this;b_c.require('Uize.Dom.VirtualEvents.'+b_qa,function(b_sa){
b_e.wire(m.b_j_,b_sa[b_L](b_ra),b_E);});return m;};});};b_oa({altClick:b_ma,ctrlAltClick:b_ma,ctrlClick:b_ma,keyRemainDown:b_na,keyRemainUp:b_na,mouseRemainDown:b_na,mouseRemainOut:b_na,mouseRemainOver:b_na,
mouseRemainUp:b_na,mouseRest:b_na,remainBlurred:b_na,remainFocused:b_na,shiftAltClick:b_ma,shiftClick:b_ma,shiftCtrlAltClick:b_ma,shiftCtrlClick:b_ma});b_T_('css',function(b_H,b_a_){return b_n(b_H,b_h(b_a_)
?b_e_(b_a_,b_H)||b_a_:b___(b_a_,b_H));},function(b_H,b_a_){b_o(b_H,b___(b_a_,b_H))});var b_ta=function(b_K_,b_2){b_t_[b_K_]=function(b_ua){var m=this,b_4=m.css(b_2,b_ua);return m==b_4?b_4:(b_h(b_4)?parseInt(b_4,10)
:b_c.map(b_4,'parseInt(value, 10)'));};};b_ta('contentHeight','height');b_ta('contentWidth','width');b_ta('opacity','opacity');b_t_.rotate=function(b_k_){return this.b_R_(b_k_,function(b_H,b_va){var b_wa=b_e_('transform',b_H);
b_wa&&b_o(b_H,b_c.pairUp(b_wa,'rotate('+(b_c.isNumber(b_va)?b_va+'deg':b_va)+')'));});};b_t_.supportsCss=function(b_2,b_N_){return this.b_L_(function(b_H){return b_e_(b_2,b_H)},b_N_);};var b_xa=function(b_K_,b_C_){
b_t_[b_K_]=function(){return this.b_B_(b_C_)};};b_t_.display=function(b_C_){return this.b_B_(b_C_===b_b|| !!b_C_);};b_xa('show',b_$);b_xa('hide',b__);b_xa('toggleShow');b_t_.visible=function(){this.visibility(b_$);
};b_t_.invisible=function(){this.visibility(b__);};b_t_.visibility=function(b_ya){this.b_R_(b_ya,b_e.show);};var b_za=function(b_K_,b_2){b_t_[b_K_]=function(b_y){return this.property(b_2||b_K_,b_y)};
},b_Aa=function(b_Ba){var b_Ca=b_Ba?'pageXOffset':'pageYOffset',b_Da=b_Ba?'scrollLeft':'scrollTop',b_Ea=function(b_H){return b_H==b_q?b_Ca:b_Da};b_t_[b_Da]=function(b_P_){return this.b_O_(function(b_H){return b_H[b_Ea(b_H)]},
b_P_,function(b_H,b_Fa){b_H[b_Ea(b_H)]=b_Fa});};};b_T_('attribute',b_X_(function(b_H,b_Ga){return b_H.getAttribute(b_Ga)}),function(b_H,b_Ha){for(var b_Ga in b_Ha)b_H.setAttribute(b_Ga,b_Ha[b_Ga]);});
b_t_.coords=function(b_y,b_z){return this.b_O_(function(b_H){var b_Ia=b_g.getCoords(b_H),b_Ja=b_r.documentElement,b_Ka=b_r.body;return{left:b_Ia.left-(b_y?b_q.pageXOffset||b_Ja.scrollLeft||b_Ka.scrollLeft:0),
top:b_Ia.top-(b_y?b_q.pageYOffset||b_Ja.scrollTop||b_Ka.scrollTop:0)};},b_y==b_b||b_m(b_y)?b_z:b_y,function(b_H,b_W_){var b_La=b_n(b_H,'position');b_o(b_H,{position:b_La=='static'?'relative':b_La,left:'auto',
right:'auto',top:'auto',bottom:'auto'});var b_Ma=b_g.getCoords(b_H);b_o(b_H,{left:-b_Ma.left+(b_W_.left==b_b?b_Ma.left:b_W_.left)+(b_z?b_q.pageXOffset:0),top:-b_Ma.top+(b_W_.top==b_b?b_Ma.top:b_W_.top)
+(b_z?b_q.pageYOffset:0)});});};b_t_.dimensions=function(b_P,b_N_){return this.b_L_(function(b_H){return b_O(b_H,b_P)},b_N_);};b_t_.height=function(b_P,b_N_){return this.b_L_(function(b_H){return b_O(b_H,b_P).height},
b_N_);};b_t_.html=function(b_P_){return this.b_O_(function(b_H){return b_H.innerHTML},b_P_,b_e.setInnerHtml);};b_t_.innerHeight=function(b_N_){return this.b_L_(function(b_H){return b_H.clientHeight},b_N_);
};b_t_.innerWidth=function(b_N_){return this.b_L_(function(b_H){return b_H.clientWidth},b_N_);};b_t_.offset=function(b_y,b_z){var b_Na= !b_c.isBoolean(b_y)&&b_y;return this.b_L_(function(b_H){if(b_Na){
var b_Oa=b_g.getCoords(b_H),b_Pa=b_Y(b_H,b_y),b_Qa=b_Pa?b_g.getCoords(b_Pa):{top:0,left:0};return{top:b_Oa.top-b_Qa.top,left:b_Oa.left-b_Qa.left};}else return{top:b_H.offsetTop,left:b_H.offsetLeft};},
b_Na?b_z:b_y);};b_t_.offsetParent=function(b_C){return b_g_(this.b_L_(function(b_H){return b_Y(b_H,b_C)},b_$));};b_T_('property',b_X_(function(b_H,b_2){return b_H[b_2]}),b_e.setProperties);b_t_.removeAttribute=function(b_Ga){
var b_Ra=b_i(b_Ga)?b_Ga:[b_Ga],b_Sa=b_Ra.length,b_Ta;return this.b_R_(b_Ra,function(b_H){for(b_Ta= -1;++b_Ta<b_Sa;)b_H.removeAttribute(b_Ra[b_Ta]);});};b_Aa(b_$);b_za('scrollHeight');b_Aa();b_za('scrollWidth');
b_t_.text=function(b_P_){return this.b_O_(b_d.Text.getText,b_P_,function(b_H,b_Ua){b_H.appendChild(b_r.createTextNode(b_Ua+''));});};b_t_.value=function(b_P_){return this.b_O_(b_e.getValue,b_P_,b_e.setValue
);};b_t_.width=function(b_P,b_N_){return this.b_L_(function(b_H){return b_O(b_H,b_P).width},b_N_);};return b_g_;}});
Uize.module({name:'Uize.Widget.mWeb',required:'Uize.Web',builder:function(){'use strict';var d_$=Uize;return function(d__){d__.declare({instanceMethods:{web:function(d_a){return d_$.Web(d_$.isObject(d_a)&&d_$.isFunction(d_a.getNode)
?d_a.getNode():this.getNode(d_a));}}});};}});
Uize.module({name:'Uize.Widget.Button.ValueDisplay',builder:function(e_$){'use strict';return e_$.subclass({stateProperties:{e__:'defaultValueDetails',e_a:'value',e_b:{name:'valueDetails',conformer:function(e_b){return e_b||this.e__}
}}});}});
Uize.module({name:'Uize.Widget.Button.ValueDisplay.Selector',required:['Uize.Dom.Classes','Uize.Widget.mWeb'],builder:function(f_$){'use strict';var f__=Uize.Dom.Classes;function f_a(m,f_b){m.isWired&&m.setNodeProperties('input',f_b);
}function f_c(m){var f_d=m.get('valueDetails');if(m.isWired){if(f_d){f_d.value!=null&&f_a(m,{value:f_d.name});f_d.displayName!=null&&m.setNodeInnerHtml('displayName',f_d.displayName);}m.web().display(f_d);
}}function f_e(m){if(m.isWired){var f_f=m.get('state'),f_g=m.get('enabledInherited')&& !m.get('busyInherited');f_a(m,{readOnly:!f_g,disabled:!f_g});f__.setState(m.getNode(),['',m.f_h,m.f_i,m.f_j],(!f_g
?3:(f_f=='down'?2:f_f=='over'&&1)||0));}}function f_k(m){if(m.isWired){var f_l=m.get('selected');f_a(m,{checked:f_l});f__.setState(m.getNode(),m.f_m,f_l);}}return f_$.subclass({mixins:Uize.Widget.mWeb,
omegastructor:function(){var m=this;function f_n(){f_e(m)}m.wire({'Changed.busyInherited':f_n,'Changed.enabledInherited':f_n,'Changed.state':f_n,'Changed.selected':function(){f_k(m)},'Changed.valueDetails':function(){f_c(m)}
});},instanceMethods:{updateUi:function(){var m=this;if(m.isWired){f_c(m);f_e(m);f_k(m);f_$.doMy(m,'updateUi');}},wireUi:function(){var m=this;if(!m.isWired){var f_o=m.getNode('input'),f_p=m.getNode('displayName')
;m.wireNode(f_o,'change',function(f_q){var f_r=f_o.checked;if((f_r&& !m.get('clickToSelect'))||(!f_r&& !m.get('clickToDeselect'))){m.set({selected:f_r});m.fire({name:'Click',domEvent:f_q});}});f_p&&f_p.removeAttribute('for')
;f_$.doMy(m,'wireUi');}}},stateProperties:{f_i:'cssClassActive',f_j:'cssClassDisabled',f_m:'cssClassSelected',f_h:'cssClassTentativeSelected'}});}});
Uize.module({name:'Uize.Widget.Options',required:'Uize.Widget.Button',builder:function(d_$){'use strict';var d__=false,d_a=null,d_b;function d_c(m){if(m.isWired&&m.d_d!=m.d_e){var d_f=function(d_g,d_h){
d_g>=0&&Uize.callOn(m.children['option'+d_g],'set',[{selected:d_h}]);};d_f(m.d_e,d__);d_f(m.d_e=m.d_d,true);}}function d_i(m){var d_d=m.getValueNoFromValue(m.d_j);m.set({d_d:d_d,d_k:d_d});d_c(m);}function d_l(d_j){
var m=this,d_m=this.d_m;return(!m.d_n|| !d_m|| !d_m.length||m.getValueNoFromValue(d_j)> -1?d_j:(typeof d_m[0]=='object'?d_m[0].name:d_m[0]));}return d_$.subclass({omegastructor:function(){this.d_e= -1;
this.d_o=0;},instanceMethods:{forAll:function(d_p){for(var d_d= -1,d_q=this.d_m.length,d_r=this.children;++d_d<d_q;)if(d_p(d_r['option'+d_d],d_d)===d__)break;},getValueNoFromValue:function(d_j){var d_m=this.d_m;
return(d_m.length?(typeof d_m[0]=='object'?Uize.findRecordNo(d_m,{name:d_j}):Uize.indexIn(d_m,d_j,d__,d__)): -1);},getValueObject:function(d_j){var m=this,d_d=m.getValueNoFromValue(d_j===d_b?m.d_j:d_j)
;return d_d> -1?m.d_m[d_d]:d_a;},getOptionProperties:function(){return d_a;},updateUi:function(){var m=this;if(m.isWired){d_c(m);d_$.doMy(m,'updateUi');}},wireUi:function(){var m=this;if(!m.isWired){
m.d_d= -1;var d_s=m.d_s||Uize.Widget.Button,d_t=m.d_t,d_m=m.d_m,d_q=m.d_o=d_m.length,d_u,d_v,d_w=function(){d_u=d_a;m.set({d_x:m.d_j,d_k:m.d_d});},d_y=function(){d_u&&clearTimeout(d_u);d_v&&clearTimeout(d_v);
};Uize.forEach(d_m,function d_z(d_A,d_d){var d_j=((typeof d_A=='object'&&d_A)||(d_A={name:d_A})).name,d_B=function(){m.set(m.d_C?{d_j:d_j}:{d_x:d_j,d_k:d_d});};m.addChild('option'+d_d,d_s,Uize.copy(d_t,m.getOptionProperties(d_d,d_A))
).wire('*',function(d_D){if(d_D.name=='Click'){m.fire({name:'Before Value Change',value:d_j,valueNo:d_d}).cancel||m.set({d_j:d_j});m.fire(d_D);}else if(d_D.name=='Over'){d_y();m.d_E?(d_v=setTimeout(d_B,m.d_E))
:d_B();}else if(d_D.name=='Out'){d_y();d_u=setTimeout(d_w,50);}m.fire({name:'Option Event',value:d_j,childEvent:d_D});});});if(d_q){var d_F=m.getNode();if(d_F){for(var d_G= -1,d_H,d_I,d_J,d_K=d_F.childNodes||[],
d_L=d_K.length,d_r=m.children,d_M=m.get('idPrefix'),d_N=d_M.length;++d_G<d_L;){if((d_I=(d_H=d_K[d_G]).id)&& !d_I.indexOf(d_M)&&(d_J=d_r[d_I.slice(d_N+1)]))d_J.set({nodeMap:{'':d_H,shell:d_a,bed:d_a}})
;}}}d_$.doMy(m,'wireUi');d_i(m);}}},stateProperties:{d_n:{name:'ensureValueInValues',onChange:function(){var m=this;m.set({d_j:d_l.call(m,m.d_j)});},value:d__},d_s:'optionWidgetClass',d_t:'optionWidgetProperties',
d_C:'setValueOnMouseover',d_E:{name:'tentativeRestTime',value:0},d_x:{name:'tentativeValue',value:d_a},d_k:{name:'tentativeValueNo',value:-1},d_j:{name:'value',conformer:d_l,onChange:function(){var m=this;
d_i(m);m.set({d_k:m.d_d,d_x:m.d_j});},value:d_a},d_d:{name:'valueNo',value:-1},d_m:{name:'values',onChange:function(){var m=this;if(m.isWired){for(var d_d= -1,d_o=m.d_o||0;++d_d<d_o;)m.removeChild('option'+d_d)
;m.unwireUi();m.get('html')!=d_b&&m.set({built:d__});m.set({d_j:d_l.call(m,m.d_j)});m.insertOrWireUi();}},value:[]}}});}});
Uize.module({name:'Uize.Widget.Options.Selector',required:'Uize.Widget.Button.ValueDisplay.Selector',builder:function(e_$){'use strict';return e_$.subclass({omegastructor:function(){var m=this,e__='value',
e_a='tentativeValue',e_b={},e_c;function e_d(e_e,e_f){if(e_f!=null)e_b[e_e]=e_f;}function e_g(e_h){var e_i=m.get(e_h),e_f=e_b[e_i];if(e_f===e_c){var e_j=Uize.findRecord(m.get('values'),{name:e_i});e_d(
e_h,e_f=(e_j?e_j.valueDetails:null));}m.set(e_h+'Details',e_f);}m.wire({'Changed.tentativeValue':function(){e_g(e_a)},'Changed.value':function(){e_g(e__)},'Changed.tentativeValueDetails':function(){e_d(m.get(e_a),m.e_k);
},'Changed.valueDetails':function(){e_d(m.get(e__),m.e_f);},'Changed.values':function(){e_b={};e_d(m.valueOf(),m.e_f);e_g(e__);}});e_g(e__);e_g(e_a);},instanceMethods:{getOptionProperties:function(e_l,e_j){
return Uize.copyInto(e_$.doMy(this,'getOptionProperties',[e_l,e_j])||{},{value:e_j.name,valueDetails:e_j.valueDetails});},wireUi:function(){var m=this;if(!m.isWired){m.set({container:m.getNode('options')});
e_$.doMy(m,'wireUi');}}},stateProperties:{e_k:'tentativeValueDetails',e_f:'valueDetails'},set:{optionWidgetClass:Uize.Widget.Button.ValueDisplay.Selector}});}});
Uize.module({name:'Uize.Widget.AutoSuggest',superclass:'Uize.Widget.FormElement.Text',required:['Uize.Data.NameValueRecords','Uize.Node','Uize.Dom.Event','Uize.Str.Trim','Uize.Widget.Options.Selector'],
builder:function(f_$){'use strict';var f__=true,f_a=false,f_b=null,f_c,f_d='',f_e=Uize,f_f=f_e.Data,f_g=f_e.Node,f_h=f_e.Dom.Event,f_i=Uize.Str.Trim.trim,f_j=typeof document!='undefined'&&'placeholder'in document.createElement('input'),
f_k={none:1,query:1,remaining:1};function f_l(f_m){return function(f_n){return Uize.constrain(f_n,f_m,Infinity)};}function f_o(f_p,f_q){return((f_p%f_q)+f_q)%f_q}function f_r(m){var f_s=m.f_s,f_t=m.addChild(
'suggestions',m.f_u||f_e.Widget.Options.Selector,f_e.copyInto({built:f_a,html:f__,optionWidgetProperties:{cssClassActive:f_s,cssClassSelected:f_s,cssClassTentativeSelected:f_s},values:[]},m.f_v));f_t.wire({
'Changed.tentativeValue':function(){m.f_w&&m.f_x(f_t.get('tentativeValue'));},'Option Event':function(f_y){if(f_y.childEvent.name==='Click'){m.f_w||m.f_x(f_t.get('tentativeValue'));m.f_z=f_a;m.set('focused',f__);
f_A(m,f_y.childEvent.source);}}});f_t.wireUi();return f_t;}function f_A(m,f_B){m.fire({name:'Suggestion Selected',option:f_B});m.f_C=m.f_D;m.children.suggestions.set({tentativeValue:f_b,tentativeValueNo: -1,
value:f_b,values:[]});f_E(m);}function f_F(f_D,f_G){var f_H=f_D.tokens.concat(),f_I=f_D.tokenIndex,f_J;if(f_G){f_H[f_I]=f_G;f_J=f_H.join('');}else f_J=f_D.query;return{text:f_J,position:f_H.splice(0,f_I+1).join('').length
};}function f_K(m,f_D){var f_L=f_D&&f_i(f_D.tokens.concat()[f_D.tokenIndex]).replace(/\s+/g,' ');return f_D?(!f_j&&f_L==m.get('defaultValue')?f_d:f_L):f_d;}function f_M(m,f_N,f_O){var f_P=m.f_Q,f_R=m.f_S,
f_T=f_N.length,f_U=f_O,f_H=[],f_I= -1,f_V=f_d,f_W=f_d,f_X=f_a,f_Y=f_d,f_Z=0;if(f_P){f_P=f_e.lookup(f_e.isArray(f_P)?f_P:[f_P]);f_R=f_R?f_f.NameValueRecords.toHash(f_e.isArray(f_R)?typeof f_R[0]==='object'?
f_R:f_e.map(f_R,function(f_0){return{open:f_0,close:f_0}}):typeof f_R==='object'?[f_R]:[{open:f_R,close:f_R}],'open','close'):{};while(++f_I<f_T){f_W=f_N[f_I];if(!f_X&&(f_Y=f_R[f_W])){f_X=f__;f_V+=f_W;
}else if(f_X&&f_W===f_Y){f_X=f_a;f_V+=f_W;}else if(!f_X&&f_P[f_W]){f_H.push(f_V);f_H.push(f_W);f_V=f_d;}else{f_V+=f_W;}}if(f_V|| !f_H.length)f_H.push(f_V);}else f_H.push(f_N);if(f_O== -1)f_Z= -1;else
 while(f_Z<f_H.length-1&&(f_O-=f_H[f_Z].length)>0)f_Z++;return{query:f_N,queryIndex:f_U,tokens:f_H,tokenIndex:f_Z};}function f_1(m,f_2){var f_t=m.children.suggestions;if(m.isWired){if(m.f_3&&f_t&&m.getNodeStyle('suggestionsPalette','display')!='none'
){if(f_h.isKeyUpArrow(f_2)||f_h.isKeyDownArrow(f_2)){var f_4=f_t.get('values').length,f_5=f_h.isKeyUpArrow(f_2)? -1:f_h.isKeyDownArrow(f_2)?1:0,f_6=f_t.get('tentativeValueNo'),f_7=f_t.children['option'+f_6],
f_8=f_t.children['option'+(f_o(f_6+1+f_5,f_4+1)-1)];if(f_5&&f_7){f_7.set('state',f_d);f_7.fire('Out');}if(f_5&&f_8){f_8.set('state','over');f_8.fire('Over');}m.f_9||m.f_x(f_t.get('tentativeValue'));}else if(
f_t.get('tentativeValue')&&(f_h.isKeyEnter(f_2)||f_h.isKeyTab(f_2))){f_A(m,f_t.children['option'+f_t.get('tentativeValueNo')]);}else if(f_h.isKeyTab(f_2)){var f_$_=f_t.children['option0'];f_$_.set('state','over');
f_$_.fire('Over');f_A(m,f_$_);}}}}function f___(m){function f_a_(f_J){return'<span class="'+m.f_b_+'">'+f_J+'</span>'}var f_c_=m.children,f_t=f_c_.suggestions,f_L=f_K(m,m.f_C),f_d_=m.get('defaultValue')
;m.f_z&&m.set({lastTypedQuery:f_L});if((f_L!=f_d_||(f_L==f_d_&& !f_d_))&&f_L.length>=m.f_e_&&m.f_f_&&m.f_g_!=f_c){m.ajax(f_e.copyInto(f_e.pairUp('serviceUrl',m.f_g_,m.f_h_,f_L,m.f_i_,m.f_f_),m.f_j_||{}
),{cache:'memory',callbackSuccess:function(f_k_){(f_t||f_r(m)).set({tentativeValue:f_b,tentativeValueNo: -1,values:f_e.map(m.f_l_(f_L,f_k_),function(f_G){var f_m_=f_G.fullWord,f_n_=m.f_n_,f_o_=f_n_==='none'?f_m_:
f_n_==='query'?f_G.prefix+f_a_(f_L)+f_G.suffix:f_G.fullWord.indexOf(f_L)===0?f_a_(f_G.prefix)+f_L+f_a_(f_G.suffix):f_a_(f_G.fullWord);return m.f_p_(f_m_,f_o_);})});f_E(m);}});}else if(f_t){f_t.set({tentativeValue:f_b,
tentativeValueNo: -1,values:[]});f_E(m);}}function f_E(m){if(m.isWired){var f_q_=m.getNode('input'),f_r_=m.getNode('suggestionsPalette'),f_s_=m.get('focused'),f_t=m.children.suggestions,f_t_=f_t&&f_t.get('values').length
;if(f_s_&&f_t_){m.displayNode('trending',!m.f_u_);m.showNode(f_r_,f_a);m.displayNode(f_r_);if(m.get('autoPositionSuggestionsPalette')){f_g.setAbsPosAdjacentTo(f_r_,f_q_,'y');m.setNodeStyle(f_r_,{minWidth:f_g.getDimensions(f_q_).width}
);}m.showNode(f_r_);}else if(m.getNodeStyle('suggestionsPalette','display')!='none'){setTimeout(function(){m.displayNode(f_r_,f_a);f_t&&f_t.set({tentativeValue:f_b,tentativeValueNo: -1,value:f_b,values:[]
});},200);}}}return f_$.subclass({omegastructor:function(){var m=this,f_v_='';m.f_w_=f_a;m.f_x_=f_a;m.f_C=f_b;m.f_D=f_b;m.f_z=f__;m.f_x=function(f_G){var f_y_=f_G?f_F(m.f_D,f_G):f_F(m.f_C);m.f_x_=f__;
if(f_y_.text===m+'')m.set('value','');m.set('value',f_y_.text);m.f_x_=f_a;m.setCaretPosition(f_y_.position);m.f_D=f_M(m,f_y_.text,f_y_.position);};function f_z_(f_A_,f_B_){if(m.f_Q){if(f_A_.tokenIndex!=f_B_.tokenIndex){
m.f_C=f_B_;m.children.suggestions.set({tentativeValue:f_b,tentativeValueNo: -1,value:f_b,values:[]});f_E(m);}}}m.wire({Cancel:function(){m.f_x_=f__;m.set('value',f_v_);m.f_x_=f_a;},'Changed.focused':function(){
if(m.get('focused')){f_v_=m+'';m.f_C=m.f_D=f_M(m,m.get('tentativeValue'),m.getCaretPosition());f___(m);}f_E(m);},'Changed.tentativeValue':function(){if(!m.f_x_&&m.get('focused')){clearTimeout(m.f_C_);
if(m.f_w_){m.f_w_=f_a;f___(m);}else m.f_C_=setTimeout(function(){f___(m)},m.f_D_);}},'Key Up':function(f_y){var f_A_=m.f_D,f_2=f_y.domEvent;if(f_h.isKeyEscape(f_2)){m.f_C=m.f_D=f_M(m,f_v_,-1);}else if(
!(m.isWired&&m.f_3&&m.getNodeStyle('suggestionsPalette','display')!='none'&&(f_h.isKeyUpArrow(f_2)||f_h.isKeyDownArrow(f_2)))){m.f_D=f_M(m,m.get('tentativeValue'),m.getCaretPosition());if(!m.f_x_&&m.get('focused'))
m.f_C=m.f_D;}f_A_&&f_z_(f_A_,m.f_D);f_1(m,f_y.domEvent);},Click:function(){var f_A_=m.f_D;m.f_D=f_M(m,m.get('tentativeValue'),m.getCaretPosition());f_A_&&f_z_(f_A_,m.f_D);},Ok:function(){m.set('focused',f_a)}
});},instanceMethods:{fireOkOnEnter:function(){var f_t=this.children.suggestions;return!(f_t&&f_t.get('tentativeValue'));},updateUi:function(){var m=this;if(m.isWired){f_E(m);f_$.doMy(m,'updateUi');}
},wireUi:function(){var m=this,f_E_=document.body,f_r_=m.getNode('suggestionsPalette');if(!m.isWired){m.wireNode('input',{paste:function(){m.f_w_=f__},keydown:function(f_2){var f_t=m.children.suggestions;
m.f_3&&(f_h.isKeyUpArrow(f_2)||f_h.isKeyDownArrow(f_2)||(f_h.isKeyTab(f_2)&&f_t&&f_t.get('values').length)||(f_h.isKeyEnter(f_2)&&f_t&&f_t.get('tentativeValue')))&&f_h.preventDefault(f_2);}});if(m.f_F_&&f_r_&&f_r_.parentNode!=f_E_)
f_E_.insertBefore(f_r_,f_E_.childNodes[0]);m.setNodeStyle(f_r_,{display:'none',position:'absolute',zIndex:10000,left:'',top:'',right:'',bottom:''});m.setNodeProperties('input',{autocomplete:'off'});f_$.doMy(m,'wireUi');
}}},stateProperties:{f_j_:{name:'additionalAutoSuggestParams',value:{}},f_3:{name:'allowKeypress',value:f__},f_G_:{name:'autoPositionSuggestionsPalette',value:true},f_b_:{name:'cssClassHighlight',value:'suggestionHighlight'
},f_s:{name:'cssClassSelected',value:'selectedSuggestion'},f_n_:{name:'highlightMode',conformer:function(f_n){return f_k[f_n]?f_n:'query'},value:'query'},f_u_:{name:'lastTypedQuery'},f_F_:{name:'moveSuggestionsPaletteToRoot',
value:f__},f_e_:{name:'numCharsBeforeSuggest',conformer:f_l(0),value:1},f_f_:{name:'numSuggestions',conformer:f_l(0),value:10},f_p_:{name:'optionDataAdapter',value:function(f_m_,f_o_){return{name:f_m_,
valueDetails:{name:f_m_,displayName:f_o_}};}},f_u:'optionsWidgetClass',f_v:'optionsWidgetProperties',f_S:'queryQuotes',f_Q:'querySeparators',f_l_:{name:'responseAdapter',value:function(f_L,f_k_){return f_e.map(
f_k_,function(f_m_){return{prefix:'',suffix:f_m_.substr(f_L.length),fullWord:f_m_};});}},f_g_:'serviceUrl',f_h_:{name:'serviceQueryParamName',value:'q'},f_i_:{name:'serviceNumSuggestionsParamName',value:'num'
},f_9:{name:'showOnMouseover',value:f_a},f_D_:{name:'typeSuggestDelay',conformer:f_l(0),value:10}}});}});
Uize.module({name:'Uize.Str.Replace',builder:function(){'use strict';var c_$;return Uize.package({replacerByLookup:c_$=function(c__){var c_a=[],c_b=[];Uize.forEach(Uize.keys(c__),function(c_c){if(c_c)(c_c.length>1?c_a:c_b).push(
Uize.escapeRegExpLiteral(c_c));});c_b.length&&c_a.unshift('['+c_b.join('')+']');var c_d=new RegExp(c_a.join('|'),'g');return function(c_e){return(c_e+='')&&c_e.replace(c_d,function(c_f){return c__[c_f]}
);}},replaceByLookup:function(c_g,c__){return c_$(c__)(c_g);}});}});
Uize.module({name:'Uize.Str.Split',builder:function(){'use strict';var c_$,c__=[],c_a='a,,b'.split(/,/)!=3||'1-2'.split(/(-)/).join('|')!='1|-|2';return Uize.package({split:function(c_b,c_c,c_d){if(c_a&&c_c instanceof RegExp){
if(c_d==c_$)c_d=Infinity;if(!c_d)return[];c_b+='';c_c=new RegExp(c_c.source,'g'+(c_c.multiline?'m':'')+(c_c.ignoreCase?'i':''));var c_e=c_b.length;if(c_e){var c_f=[],c_g=1,c_h,c_i=0;while(c_g&&c_i<c_e&&c_f.length<c_d){
if((c_g=c_c.exec(c_b))&& !(c_h=c_g[0]))c_g.index=c_i+1;c_f.push(c_b.slice(c_i,c_g?c_g.index:c_e));if(c_g){c_g.length>1&&c_g.index<c_e&&Uize.push(c_f,c_g.slice(1));c_i=c_c.lastIndex=c_g.index+c_h.length;
c_h&&c_i==c_e&&c_f.push('');}}return c_f;}else{return c_c.test('')?[]:[''];}}else{var c_j=[c_c+'',c_d];c_j.length=arguments.length-1;return c_b.split.apply(c_b,c_j);}},splitInTwo:function(c_b,c_c){if(c_c instanceof RegExp)
c_c=(c_b.match(c_c)||c__)[0];var c_k=c_c!=c_$?c_b.indexOf(c_c): -1;return(c_k> -1?[c_b.substr(0,c_k),c_b.substr(c_k+c_c.length)]:[c_b,'']);}});}});
Uize.module({name:'Uize.Template',required:['Uize.Str.Replace','Uize.Str.Split','Uize.Str.Trim'],builder:function(){'use strict';var b_$=function(){},b__=true,b_a=false,b_b='string',b_c=Uize.Str.Split.splitInTwo,
b_d=Uize.Str.Trim.trim,b_e=Uize.Str.Replace.replacerByLookup({'\\':'\\\\','\n':'\\n','\r':'\\r','\'':'\\\''}),b_f={},b_g=/^\s*=/,b_h=/^\s*@/,b_i=/^\s*\./,b_j=/^!\s*/,b_k=/(\r|\n|\r\n)[ \t]*$/,b_l=/^[ \t]*(\r|\n|\r\n)[ \t]*/,
b_m='->',b_n={};function b_o(b_p,b_q,b_r,b_s){if(b_q){b_q=b_q.split(b_m);for(var b_t= -1,b_u=b_q.length,b_v,b_w,b_x,b_y;++b_t<b_u;){if(b_w=b_d((b_v=b_c(b_q[b_r?b_u-b_t-1:b_t],'{'))[0])){if(b_x=b_j.test(b_w))
b_w=b_w.replace(b_j,'');if(b_y=b_$.encodings[b_w]){if(b_r)b_x= !b_x;var b_z=b_d(b_v[1]),b_A=b_x?'from':'to',b_B=b_y[b_A];b_s&&b_s(b_w+':'+b_A,b_B.required);b_p=b_B.expansion(b_p,b_z?('{'+b_z):'');}}}
}return b_p;}b_$.compile=function(b_C,b_D){b_D=b_D||b_f;var b_E=[],b_F={},b_G={},b_H={},b_I=b_D.openerToken||'<%',b_J=b_D.closerToken||'%>',b_K=b_D.gobbleWhitespace!==b_a,b_L=b_C.length,b_M='var output = [];',
b_N='return output.join (\'\');',b_O=['var m = this, output = [];'],b_P=[],b_Q=0,b_R,b_S=b__,b_T,b_U,b_V,b_W,b_X;function b_Y(b_U){if(b_P.length){b_O.push('output.push ('+b_P.join(',')+');');b_P=[];}
b_O.push(b_U);}function required(b_Z){var b_0=arguments;Uize.forEach(b_0.length!=1?b_0:typeof b_Z==b_b?b_Z.split(','):b_Z,function(b_1){if(!b_F[b_1]){b_E.push(b_1);b_F[b_1]=1;}});}function input(b_2){
Uize.copyInto(b_H,b_2);}function startBlock(b_3,b_4){b_Y('function '+b_3+' ('+(b_4||'')+') {'+b_M);}function endBlock(){b_Y(b_N+'}');}while(b_S){b_R=b_C.indexOf(b_I,b_Q);if(b_R<0)b_R=b_L;b_T=b_C.slice(b_Q,b_R);
if(b_S=b_R<b_L){b_Q=b_C.indexOf(b_J,b_R+=2);b_W=b_g.test(b_U=b_C.slice(b_R,b_Q));b_X=b_W||b_i.test(b_U);b_V= !b_X&&b_h.test(b_U);b_Q+=2;}if(b_T){if(b_K&&b_S&& !b_X&&b_k.test(b_T)&&b_l.test(b_C.substr(b_Q))
)b_T=b_T.replace(b_k,'');b_T&&b_P.push('\''+b_e(b_T)+'\'');}if(b_S){if(b_X){var b_5=b_c(b_W?b_U.replace(b_g,''):'input'+b_U,b_m);b_P.push(b_o(b_d(b_5[0]),b_5[1],b_a,function(b_6,b_7){if(!b_G[b_6]){required(b_7);
b_G[b_6]=1;}}));}else if(b_V){eval(b_U.replace(b_h,''));}else{b_Y(b_U);}}}b_Y(b_N);var b_8=b_O.join('\n'),b_9=Function('input',b_8);return(b_D.result=='full'?{input:b_H,required:b_E,code:b_8,templateFunction:b_9
}:b_9);};b_$.encode=function(b_$_,b_q,b_r){var b___=(b_r?'! ':'')+b_q;return((b_n[b___]||(b_n[b___]=Function('e','return '+b_o('e',b_q,b_r))))(b_$_));};b_$.decode=function(b_a_,b_y){return b_$.encode(b_a_,b_y,b__)};
var b_b_=b_$.defineStandardEncoding=function(b_w,b_c_,b_d_,b_e_){var b_f_=b_c_+'.'+b_e_+' (',b_g_=b_c_+'.'+b_d_+' (';b_$.encodings[b_w]={to:{required:b_c_,expansion:function(b_h_,b_i_){return b_g_+b_h_+(b_i_&&',')+b_i_+')'
}},from:{required:b_c_,expansion:function(b_h_,b_i_){return b_f_+b_h_+(b_i_&&',')+b_i_+')'}}};};b_$.encodings={};b_b_('iso8601','Uize.Date','toIso8601','fromIso8601');b_b_('json','Uize.Json','to','from');
b_b_('miniJson','Uize.Json','to','from');b_$.encodings.miniJson.to.expansion=function(b_h_){return'Uize.Json.to ('+b_h_+',\'mini\')'};b_b_('tagAttributes','Uize.Xml','toAttributes','fromAttributes');
b_b_('tagAttributeValue','Uize.Xml','toAttributeValue','fromAttributeValue');b_b_('url','Uize.Url','resolve','from');b_b_('urlParams','Uize.Url','toParams','fromParams');b_b_('urlPiece','Uize.Url','toPiece','fromPiece');
return b_$;}});
Uize.module({name:'Uize.Cookie',builder:function(){'use strict';var b_$,b__=null;return Uize.package({setCookie:function(b_a,b_b,b_c,b_d){if(b_b===b_$||b_b==b__){b_b='';b_d='Mon, 1 Jan 1990 12:00:00 UTC';
}else{if(b_d===b_$){var b_e=new Date;b_e.setFullYear(b_e.getFullYear()+1);b_d=b_e.toGMTString();}}document.cookie=escape(b_a)+'='+escape(b_b)+';'+((b_c!==b_$&&b_c!=b__)?('path='+b_c+';'):'')+((b_d!==b__)?('expires='+b_d+';'):'');
},getCookie:function(b_a){var b_b='',b_f=document.cookie;if(typeof b_f=='string'){b_f=b_f.replace(/ /g,'');for(var b_g= -1,b_h=b_f.split(';'),b_i=b_h.length;++b_g<b_i;){var b_j=b_h[b_g].split('=');if(unescape(b_j[0])==b_a){
b_b=(typeof b_j[1]=='string')?unescape(b_j[1]):'';break;}}}return b_b;}});}});
Uize.module({name:'Uize.Url',builder:function(){'use strict';var b_$,b__=Uize.isArray,b_a,b_b,b_c,b_d,b_e,b_f=[],b_g={},b_h=0,b_i={favorQuery:false},b_j=/^(\.\.\/)*/;function b_k(b_l,b_m){var b_n=(b_l+='').indexOf('?');
if(b_n<0&& !b_m)b_n=b_l.length;return{b_o:b_l.slice(0,b_n),b_p:b_l.slice(b_n+1)};}return Uize.package({from:b_a=function(b_q){var b_r=b_q&&b_q.match(/^(([^:\\\/]+:)\/\/(([^:\\\/]*)(:(\d+))?)?)?(([^\?#]*[\\\/])?(([^\\\/\?#]*?)(\.([^\.\?#]+))?))(\?([^#]*))?(#(.*))?$/
);function b_s(b_t){return b_r?(b_r[b_t]||''):'';}return{href:b_q,fullDomain:b_s(1),protocol:b_s(2),host:b_s(3),hostname:b_s(4),port:b_s(6),pathname:b_s(7),folderPath:b_s(8),file:b_s(9),fileName:b_s(10),
extension:b_s(11),fileType:b_s(12),search:b_s(13),query:b_s(14),hash:b_s(15),anchor:b_s(16)};},fromParams:b_b=function(b_u,b_v){var b_w={};if(b_u=b_k(b_u,(b_v||b_g).favorQuery!==false).b_p){for(var b_x= -1,
b_y=b_u.split('&'),b_z=b_y.length,b_A,b_B;++b_x<b_z;){if(b_B=(b_A=b_y[b_x].split('='))[0])b_w[b_d(b_B)]=b_d(b_A[1]);}}return b_w;},fromPiece:b_d=function(b_C){return b_C!=b_$?decodeURIComponent(b_C):'';
},getCacheDefeatStr:function(){return Uize.now()+''+Math.round(Math.random()*1000)+b_h++;},toRelative:function(b_D,b_E){if(!b_D){return b_E;}else{var b_F=b_E.charAt(0)=='/';if(b_F==(b_D.charAt(0)=='/')&&
b_E.match(b_j)[0].length==b_D.match(b_j)[0].length&&b_a(b_E).fullDomain==b_a(b_D).fullDomain){var b_G='',b_H=b_D.slice(0,b_D.lastIndexOf('/')+1),b_I=false,b_J;while(!b_I){if(!(b_I=b_E.slice(0,b_H.length)==b_H)){
b_I=(b_J=b_H.lastIndexOf('/',b_H.length-2))<0;b_G+='../';b_H=b_H.slice(0,b_J+1);}}return b_G+b_E.slice(b_H.length);}else{return b_a(b_E).fullDomain?b_E:null;}}},toAbsolute:function(b_D,b_K){var b_L=b_K?b_a(b_K):b_g;
b_L.fullDomain?(b_K=''):(b_L=b_a(b_D));var b_M,b_N=b_L.folderPath+b_K;while(b_N!=b_M){b_M=b_N;b_N=b_N.replace(/([\/\\])[^\/\\]*[\/\\]\.\.(?:[\/\\]|$)/,'$1');}return b_L.fullDomain+b_N.replace(/\.\.([\/\\]|$)/g,'');
},toParams:b_c=function(b_w){var b_y=[],b_O;if(b__(b_w))b_w=b_w.length<2?b_w[0]:Uize.copyInto.apply(Uize,[{}].concat(b_w));for(var b_P in b_w)b_P&&(b_O=b_w[b_P])!=b_$&&b_y.push(b_e(b_P)+'='+b_e(b_O))
;return b_y.join('&');},toPiece:b_e=function b_Q(b_R){return encodeURIComponent(b_R+'');},resolve:function(b_l,b_w){if(b__(b_l)){b_w=b_l.slice(1).concat(b_w||b_f);b_l=b_l[0];}var b_u=b_c([b_b(b_l,b_i)].concat(
b__(b_w)?b_w:[b_w]));return b_k(b_l).b_o+(b_u?'?':'')+b_u;}});}});
Uize.module({name:'Uize.Node.Event',required:'Uize.Dom.Event',builder:function(){return Uize.Dom.Event}});
Uize.module('ZazzleWww');
Uize.module({name:'ZazzleWww.SearchInput',superclass:'Uize.Widget.AutoSuggest',required:['Uize.Cookie','Uize.Url','Uize.Node','Uize.Node.Event','Uize.Widget.Button'],builder:function(g_$){var g__,g_a=Uize,
g_b=true;var g_c=g_$.subclass(null,function(){var m=this,g_d=false;function g_e(g_f){if(m.isWired&& !g_d){g_d=g_b;var g_g=m.getNodeValue('input'),g_h={qs:g_g===m.get('placeholder')?'':g_g,pg:1,cg:!m.getNode('inCategory')|| !m.getNode('inCategory').checked?0:g__
};m.fire({name:'Track Event',bubble:g_b,extra:Uize.copyInto({ax:'search',pos:g_f?g_f:0,q:m.get('lastTypedQuery')},g_h)});g_a.Cookie.setCookie('ax',g_a.Url.toParams(g_a.copyInto({hs:true},g_h)),'/');function g_i(g_j){
if(m.g_k){location.href=Uize.Url.resolve(m.getInherited('env').www+m.g_k,Uize.copyInto(m.g_l?m.getInherited('env').params:{},g_j));}else{location.href=m.callInherited('wwwSearchPag')(Uize.copyInto(m.g_l?m.getInherited('env').params:{},
g_j));}}if(m.getInherited('env').lang=='ja-JP')m.ajax({serviceUrl:'/svc/search/tokenizer/tokenize',term:g_h.qs},function(g_m){g_m.success&&g_m.data.terms!=null&&(g_h.qs=g_m.data.terms.toString().replace(/,/g,' '));
g_i(g_h);});else g_i(g_h);}};if(m.g_n){m.wire({Ok:function(){g_e(0)},'Suggestion Selected':function(g_o){g_e(g_o.option.get('name').substr(6)+1)}});m.wireNode('searchButton','click',function(g_o){if(m.g_p)
g_e(0);});}}),g_q=g_c.prototype;g_q.wireUi=function(){var m=this;if(!m.isWired){var g_r=m.getNode('form');m.wireNode('form','submit',function(g_o){Uize.Node.Event.preventDefault(g_o)});g_$.doMy(m,'wireUi');
}};g_c.stateProperties({g_l:{name:'useEnvParams',value:g_b},g_n:{name:'useZazzleSearch',value:g_b},g_k:{name:'targetPath',value:null},g_p:{name:'searchOnClick',value:true}});return g_c;}});
Uize.module({name:'ZazzleWww.BasicPromotion',superclass:'Uize.Widget',required:'Uize.Node',builder:function(d_$){'use strict';var d__=true,d_a=false,d_b=null,d_c=Uize;var d_d=d_$.subclass(),d_e=d_d.prototype
;d_e.launchDetailsDialog=function(){var m=this;m.callInherited('useDialog')({component:{name:'ZazzleWww.Dialog.PromotionDetails',params:{promotion:m.d_f}},widgetClassName:'Uize.Widget.Dialog',widgetProperties:{
name:'promotionDetailsDialog'}});};d_e.wireUi=function(){var m=this;if(!m.isWired){m.wireNode('details','click',function(){m.launchDetailsDialog()});d_$.doMy(m,'wireUi');}};d_d.stateProperties({d_f:'promotionId'
});return d_d;}});
Uize.module({name:'ZazzleWww.BasicPromotion.Header',required:['Uize.Node','Uize.Widget.mWeb'],builder:function(e_$){'use strict';var e__=true,e_a=false,e_b=null,e_c=Uize;var e_d=e_$.subclass(),e_e=e_d.prototype
;e_d.mixins(e_c.Widget.mWeb);e_e.e_f=function(e_g){this.web('title').setClassState('active',e_g);};e_e.wireUi=function(){var m=this;if(!m.isWired){if(m.e_h){var e_i=document.documentElement,e_j=document.body
;e_c.Node.wire(window,{'load':function(){m.e_k&&setTimeout(function(){m.e_f(e__);setTimeout(function(){m.e_f(e_a)},m.e_l);},m.e_m);},'scroll':function(){var e_n=(e_i&&e_i.scrollTop||e_j&&e_j.scrollTop||window.pageYOffset&&window.pageYOffset||0);
m.e_o&&clearTimeout(m.e_o);m.e_o=setTimeout(function(){m.e_f(e_n>m.e_p);},e_n>m.e_p?m.e_q:m.e_r);}});}e_$.doMy(m,'wireUi');}};e_d.stateProperties({e_k:{name:'allowAnimationOnLoad',value:e_a},e_h:{name:'useAnimation',
value:e__},e_m:{name:'afterLoadAnimationDelay',value:1000},e_l:{name:'afterLoadAnimationDuration',value:500},e_q:{name:'afterScrollAnimationDelay',value:10},e_r:{name:'afterScrollAnimationDuration',value:100
},e_p:{name:'scrollThreshold',value:120}});return e_d;}});
Uize.module({name:'Uize.Widget.Collection',required:['Uize.Widget.Button','Uize.Dom.Event'],builder:function(d_$){'use strict';var d__=true,d_a=false,d_b;function d_c(m){m.fire('Items Changed');}function d_d(m){
m.set({d_e:m.getSelected().length});}function d_f(m){m.isWired&&m.setNodeValue('totalItems',m.d_g);}function d_h(m){m.forAll(function(d_i){d_j(m,d_i)});m.d_k.length=0;}function d_j(m,d_i){d_i.removeUi();
d_i.kill();m.removeChild(d_i);}return d_$.subclass({alphastructor:function(){var m=this;m.d_l=0;m.d_k=m.itemWidgets=[];m.wire('Items Changed',function(){m.set({d_g:m.d_k.length});d_d(m);});m.set('items',[]);
},omegastructor:function(){var m=this;m.addControlButton('selectAll',function(){m.selectAll()},'allSelected,totalItems,selectionMode,isEmpty: !allSelected && !isEmpty && (selectionMode != "single" || totalItems == 1)'
);m.addControlButton('selectNone',function(){m.selectAll(d_a)},'someSelected');m.addControlButton('remove',function(){m.removeWithConfirm(m.getSelected(),d__)},'someSelected');},instanceMethods:{addControlButton:function(d_m,d_n,d_o){
var m=this,d_p=Uize.Widget.Button.addChildButton.call(m,d_m,d_n);if(d_o)m.onChange(d_o,function(d_q){d_p.set({enabled:d_q?'inherit':d_a})});return d_p;},addChild:function(d_r,d_s,d_t){var m=this,d_u=d_$.doMy(m,'addChild',[d_r,d_s,d_t])
;if(m.isCollectionItem(d_u)){m.wireItemWidget(d_u);m.d_k.push(d_u);if(m.d_v.length<m.d_k.length){(m.d_v=(!m.d_v.length?[]:m.d_v)).push(d_u.get('properties'));d_c(m);}}return d_u;},isCollectionItem:function(d_u){
return d_u.isCollectionItem;},addItemWidget:function(d_w,d_x){var m=this,d_i=m.addChild(d_w,m.d_y,Uize.copyInto(d_x,m.getItemWidgetProperties()));m.isWired&&d_i.insertOrWireUi();return d_i;},wireItemWidget:function(d_i){
var m=this;d_i.wire({'Changed.selected':function(d_z){if(d_z.newValue){m.d_A=='single'&&m.selectAll(d_a,m.d_B=d_i);m.fire({name:'Item Selected',itemWidget:d_i});}else if(d_i==m.d_B)m.d_B=null;d_d(m);
},'Click Selected':function(d_z){var d_C=d_z.domEvent,d_D=d_C&&d_C.shiftKey,d_E=(!d_D&&d_z.forceToggle)||(d_C&&(d_C.ctrlKey||d_C.metaKey)),d_F=d_E||d_D;d_F&&Uize.Dom.Event.abort(d_C);if((m.d_A=='single'&& !(d_E&&d_i.get('selected')))||
 !d_F){d_i.set({selected:d__});m.selectAll(d_a,m.d_B=d_i);}else{d_D?m.selectRange(m.d_B,d_i):(m.d_B=d_i).toggle('selected');}},'Item Changed':function(){var d_G,d_k=m.d_k;for(var widgetNo= -1;++widgetNo<d_k.length;)
if(d_k[widgetNo]==d_i)d_G=widgetNo;m.d_v[d_G]=Uize.clone(d_i.get('properties'));d_c(m);},Remove:function(d_z){m.removeWithConfirm(d_i.get('selected')&&m.d_H?m.getSelected():[d_i],d_z.byUser);}});},forAll:function(d_I){
for(var d_J= -1,d_k=this.d_k,d_K=d_k.length;++d_J<d_K;){if(d_I(d_k[d_J],d_J)===d_a)break;}},getItemWidgetProperties:function(){return this.d_L;},makeItemWidgetName:function(d_M){var m=this;return((d_M&&m.d_N&&d_M[m.d_N])||
(m.d_O+(m.d_k.length? ++m.d_l:m.d_l=0)));},getSelected:function(d_P){var d_Q=[];this.forAll(function(d_i){d_i.get('selected')&&d_Q.push(d_i)});return!d_Q.length&&d_P?this.d_k.concat():d_Q;},getPropertyForItems:function(d_R,d_k){
return Uize.map(d_k,function(d_i){var d_S=d_i.get('properties');return d_R==d_b?d_S:d_S[d_R];});},getPropertyForSelected:function(d_R,d_P){return this.getPropertyForItems(d_R,this.getSelected(d_P));},
updateUi:function(){d_f(this)},remove:function(d_T,d_U){var m=this;function d_V(d_T,d_U){m.finishRemove(d_T,d_U);}m.fire({name:'Remove',itemWidgets:d_T,byUser:d_U,finishRemove:d_V}).handled||d_V(d_T,d_U)
;},removeWithConfirm:function(d_T,d_U){var m=this,d_W=d_T.length;if(d_W){var d_X=function(){m.remove(d_T,d_U)};if(d_U){m.confirm({message:m.localize(d_W==1?'removeItemConfirmation':'removeItemsConfirmation',
{0:d_W,itemsToRemove:d_T}),title:m.localize(d_W==1?'removeItemConfirmationTitle':'removeItemsConfirmationTitle',{0:d_W,itemsToRemove:d_T}),yesHandler:d_X});}else{d_X();}}},finishRemove:function(d_T,d_U){
var m=this,d_v=m.get('items'),d_k=m.itemWidgets,d_K=d_k.length,d_Y=d_T,d_Z=d_T.length;if(d_Z==d_K){d_h(m);d_v.length=0;}else{d_Y=[];d_Z=0;var d_0=null;m.forAll(function(d_i,d_J){if(Uize.isIn(d_T,d_i)){
d_0=null;d_Y.push(d_i);d_Z++;d_j(m,d_i,d_J);}else{if(!d_0&& !d_i.get('locked'))d_0=d_i;if(d_Z){d_v[d_J-d_Z]=d_v[d_J];d_k[d_J-d_Z]=d_i;}}});d_v.length=d_k.length=d_K-d_Z;}if(d_Z){m.fire({name:'Items Removed',
byUser:d_U,totalBeforeRemove:d_K,itemWidgetsRemoved:d_Y,totalRemoved:d_Z,percentRemoved:d_Z/d_K*100});d_c(m);}},selectAll:function(d_Q,d_1){if(!(d_Q=d_Q!==d_a)||this.d_A!='single'||this.d_g==1)this.forAll(
function(d_i){d_i!==d_1&&d_i.set({selected:d_Q});});},selectRange:function(d_2,d_3){var m=this;if(d_2&&d_3&&(m.d_A=='multi'||d_2==d_3)){var d_4=d_a;m.forAll(function(d_i){var d_5=d_i==d_2||d_i==d_3;if(d_5)d_4= !d_4;
d_i.set({selected:d_4||d_5});});}},selectNone:function(){this.selectAll(d_a);}},stateProperties:{d_6:{name:'allSelected',derived:'totalSelected,totalItems: totalSelected > 0 && totalSelected == totalItems'
},d_7:{name:'isEmpty',derived:'totalItems: !totalItems'},d_N:{name:'itemPropertyForItemWidgetName',value:'id'},d_H:{name:'itemRemoveActsOnSelection',value:d_a},d_v:{name:'items',onChange:function(){var m=this;
d_h(m);Uize.forEach(m.d_v,function(d_M){m.addItemWidget(m.makeItemWidgetName(d_M),{properties:d_M})});d_c(m);}},d_y:'itemWidgetClass',d_O:{name:'itemWidgetNamePrefix',value:'item'},d_L:'itemWidgetProperties',
d_8:{name:'oneSelected',derived:'totalSelected: totalSelected == 1'},d_A:{name:'selectionMode',value:'multi'},d_9:{name:'someSelected',derived:'totalSelected: totalSelected > 0'},d_g:{name:'totalItems',
onChange:function(){d_f(this)}},d_e:{name:'totalSelected',value:0}}});}});
Uize.module('Uize.Math');
Uize.module({name:'Uize.Math.Blend',builder:function(c_$){'use strict';var c__,c_a='object',c_b=Uize,c_c=c_b.constrain,c_d=c_b.isFunction,c_e=c_b.clone,c_f;return c_b.package({blend:c_f=function(c_g,c_h,c_i,c_j,c_k,c_l,c_m){
if(c_g===c_h){return c_l!==c__&&c_g===c_l?c_m:c_e(c_g);}else{if(c_d(c_k)){c_i=c_k(c_i);c_k=c__;}if(typeof c_g==c_a&&c_g&& !(c_g instanceof RegExp)){var c_n=c_l&&typeof c_l==c_a,c_o=c_j&&typeof c_j==c_a,
c_p=c_k&&typeof c_k==c_a,c_q=c_n?c_l:c_b.isArray(c_g)?[]:{},c_r;for(var c_s in c_g){var c_t=c_f(c_g[c_s],c_h[c_s],c_i,c_o?c_j[c_s]:c_j,c_p?c_k[c_s]:c_k,c_r=c_q[c_s],c_m);if(c_n)c_n=c_t==c_m||(typeof c_t!=c_a&&c_t==c_r)
;if(c_t!=c_m)c_q[c_s]=c_t;}return c_n?c_m:c_q;}else{var c_q= !c_i?c_g:c_i==1?c_h: !c_j?c_g+(c_h-c_g)*c_i:(c_j<0?(c_j*= -1):c_j)&&(c_i<0||c_i>1)?c_g+Math.round((c_h-c_g)*c_i/c_j)*c_j:c_j!=Infinity?c_c(
c_g+Math.round((c_h-c_g)*c_i/c_j)*c_j,c_g,c_h):c_g;return c_l!==c__&&c_q===c_l?c_m:c_q;}}}});}});
Uize.module({name:'Uize.Fade',superclass:'Uize.Class',required:'Uize.Math.Blend',builder:function(c_$){'use strict';var c__=Uize.constrain,c_a=Uize.now,c_b=[],c_c=false,c_d,c_e={},c_f=Uize.Math.Blend.blend
;function c_g(){if((c_c= !!c_b.length)!= !!c_d)c_d=c_c?setInterval(c_h,10):clearInterval(c_d);}function c_h(){for(var c_i= -1,c_j;++c_i<c_b.length;)(c_j=c_b[c_i]).c_k?c_l(c_j):c_b.splice(c_i--,1);c_g();
}function c_m(){var m=this,c_n=c_f(m.c_o,m.c_p,m.c_q,m.c_r,m.c_s,m.c_n,c_e);if(c_n!=c_e)c_n!=m.c_n?m.set({c_n:c_n}):m.fire({name:'Changed.value',newValue:c_n});};function c_l(m){var c_t=Math.min((c_a()-m.c_u)/m.c_v,1);
m.set({c_q:m.c_w?1-c_t:c_t});if(c_t==1){m.stop();m.fire('Done');}};function c_x(){var m=this;m.set({c_s:m.c_y||m.c_z?m.Class.celeration(m.c_y,m.c_z):null});}function c_A(){this.c_n=null;c_m.call(this);
}return Uize.mergeInto(c_$.subclass({instanceMethods:{stop:function(){this.set({c_k:false});},start:function(c_B){this.stop();this.set(Uize.copyInto({c_k:true},c_B));}},staticMethods:{blendValues:c_f,
celeration:function(c_y,c_z){var c_C=1-(c_y=c_y||0)-(c_z=c_z||0),c_D=2/(1+c_C),c_E=c_y?c_D/c_y:0,c_F=c_E/2,c_G=c_z? -c_D/c_z:0,c_H=c_G/2,c_I=c_y*c_y,c_J;return(c_C>=1?Uize.returnX:function(c_n){return(
(c_n=(c_y?c__(c_n*c_n,0,c_I)*c_F:0)+(c_C?c_D*c__(c_n-c_y,0,c_C):0)+(c_z?((c_D+(c_J=c__(c_n-c_y-c_C,0,c_z))*c_H)*c_J):0))>1?1:c_n);});}},stateProperties:{c_y:{name:'acceleration',onChange:c_x},c_s:{name:'curve',
onChange:c_A},c_z:{name:'deceleration',onChange:c_x},c_v:{name:'duration',value:2000},c_p:{name:'endValue',onChange:c_A,value:100},c_k:{name:'inProgress',onChange:function(){var m=this;if(m.c_k){m.c_u=c_a();
m.fire('Start');m.c_n=m.c_q=null;c_l(m);c_b.push(m);c_g();}},value:false},c_q:{name:'progress',onChange:c_m,value:0},c_w:'reverse',c_o:{name:'startValue',onChange:c_A,value:0},c_r:'quantization',c_n:{
name:'value',value:0}}}),{nonInheritableStatics:{blendValues:1,celeration:1}});}});
Uize.module({name:'Uize.Widget.PopupPalette',required:['Uize.Node','Uize.Fade','Uize.Widget.Button'],builder:function(d_$){'use strict';var d__=true,d_a=false,d_b=Uize.Node,d_c=Uize.Widget.Button.addChildButton,
d_d={};function d_e(d_f){for(var d_g in d_d){var d_h=d_d[d_g];d_h!=d_f&&d_h.d_i&&d_h.set({d_j:d_a});}}function d_k(){d_l=d__}if(typeof navigator!='undefined'){var d_l=d_a,d_m=document.onmousedown;document.onmousedown=function(d_n){
d_l?(d_l=d_a):d_e();Uize.isFunction(d_m)&&d_m(d_n||event);};}function d_o(m){m.d_p.set({selected:m.d_j})}function d_q(m){return m.d_j&&(m.d_r!==d_a||m.d_s!==d_a);}function d_t(m){d_q(m)&&d_u(m);m.fire('Over');
}function d_v(m){d_q(m)&&d_w(m);m.fire('Out');}function d_x(m,d_y){m.displayNode('palette',d_y);d_y&&m.setNodeStyle('palette',{filter:''});m.fire({name:'Palette '+(d_y?'Shown':'Dismissed'),bubble:d__});
}function d_u(m){if(m.d_z){clearTimeout(m.d_z);m.d_z=null;}}function d_w(m){var d_A= !Uize.isNumber(m.d_s)?250:m.d_s;d_u(m);function d_B(){m.set({d_j:d_a})}d_A?(m.d_z=setTimeout(d_B,!Uize.isNumber(m.d_s)?250:m.d_s
)):d_B();}return d_$.subclass({omegastructor:function(){var m=this;m.fade=Uize.Fade({duration:750,curve:Uize.Fade.celeration(0,1)});m.fade.wire({'Changed.value':function(d_n){m.setNodeOpacity('palette',d_n.newValue)},
Done:function(){d_x(m,m.d_j)}});var d_p=m.d_p=d_c.call(m,'selector',function(){m.toggle('shown')}),d_C;d_p.set({clickToDeselect:d__});d_o(m);function d_D(d_n){var d_E=d_n.name=='Over',d_r=m.d_r;function d_F(){m.set({d_j:d__})}
if(d_E){if(d_r===d__||d_r===0)d_F();else if(d_r>0)d_C=setTimeout(d_F,d_r);d_t(m);}else{clearTimeout(d_C);d_v(m);}}d_p.wire({Down:d_k,Over:d_D,Out:d_D});d_d[m.instanceId]=m;},instanceMethods:{kill:function(){
delete d_d[this.instanceId];d_$.doMy(this,'kill');},wireUi:function(){var m=this;if(!m.isWired){m.wireNode('palette',{mousedown:d_k,mouseup:function(d_n){m.d_G&&d_n.target!=m.getNode('palette')&&m.set({d_j:d_a})
;},mouseover:function(){d_t(m)},mouseout:function(){d_v(m)}});m.wireNode('paletteClose','click',function(){m.set({d_j:d_a})});if(m.d_H!='none'){var d_I=document.body,d_J=m.getNode('palette');if(d_J&&d_J.parentNode!=d_I){
d_I.insertBefore(d_J,d_I.childNodes[0]);m.setNodeStyle(d_J,{zIndex:10000,position:'absolute',left:'',top:'',right:'',bottom:'',width:m.getNodeStyle(d_J,'width')});}}d_$.doMy(m,'wireUi');}}},stateProperties:{
d_i:{name:'exclusive',value:d__},d_s:{name:'hideWhenOut',value:d_a},d_G:{name:'hideOnClick',value:d__},d_H:{name:'positioning',value:'none'},d_j:{name:'shown',onChange:function(){var m=this,d_j=m.d_j,
d_H=m.d_H;m.d_p&&d_o(m);if(m.isWired){d_u(m);if(d_j){m.fire('Before Palette Shown');m.d_i&&d_e(m);if(d_H!='none'){var d_J=m.getNode('palette'),d_K=Uize.isFunction(d_H)?d_H(d_J):m.d_p.getNode(),d_L=function(d_M){
m.showNode('palette',!d_M);m.displayNode('palette',d_M);};if(d_b.isNode(d_K)){d_L(d__);d_b.setAbsPosAdjacentTo(d_J,d_K);d_L(d_a);}}}if(m.fade.get('duration')>0){d_j&&m.displayNode('palette');m.fade.start({
startValue:d_j?0:1,endValue:d_j?1:0});}else{d_x(m,d_j);}}},value:d_a},d_r:{name:'showWhenOver',value:d_a}}});}});
Uize.module({name:'ZazzleWww.HeaderNavSection2',superclass:'Uize.Widget.PopupPalette',required:['Uize.Widget.Collection','Uize.Widget.mWeb'],builder:function(e_$){var e__=false;var e_a=e_$.subclass(null,
function(){var m=this,e_b=Uize.Node,e_c=e__;m.fade.set({duration:0});function e_d(){var e_e=e_b.find({root:m.children.selector.getNode(),className:'navColumns'});if(e_e.length){var e_f=e_e[0],e_g=e_b.find({
root:e_f,tagName:'UL'}),e_h=2;for(var e_i= -1;++e_i<e_g.length;)e_h+=e_b.getDimensions(e_g[e_i]).width;e_b.setStyle(e_f,{width:e_h});}}m.wire({Over:function(){m.e_j()},'Changed.shown':function(){e_c&&m.set({shown:e__});
m.get('shown')&&m.e_j(e_d);}});m.children.selector.wire({Down:function(){if(m.get('showWhenOver')!==e__)e_c=true},Up:function(){e_c=e__}});if(m.e_k=='User'){m.addChild('userFlyoutSavedDesigns',Uize.Widget.Collection);
m.addChild('userFlyoutWishlist',Uize.Widget.Collection);}}),e_l=e_a.prototype;e_a.mixins(Uize.Widget.mWeb);e_l.e_j=function(e_m){var m=this;function e_n(){e_m&&e_m()}if(m.e_o=='unloaded'){m.set({e_o:'loading'});
m.callInherited('loadHtmlIntoNode')({node:m.getNode('palette')},Uize.copyInto({cp:m.e_p,idPrefix:m.get('idPrefix'),navNo:m.e_k,now:m.e_q,md:'ContentOnly'},m.e_r),function(){m.flushNodeCache();m.set({e_o:'loaded'});
e_n();if(m.e_k=='User'&&window&&window.s){var e_s=window.s;function e_t(e_u,e_v){var e_w=m.web(e_u.getNode('imageLink'));e_w.click(function(e_x){e_x.preventDefault();e_s.c_w(e_s.headerFlyoutCookie,e_v);
window.location.href=e_w.attribute('href');});}m.children.userFlyoutSavedDesigns.forAll(function(e_y){e_t(e_y,'product');});m.children.userFlyoutWishlist.forAll(function(e_y){e_t(e_y,'wishlist');});}
});}else e_n();};e_l.wireUi=function(){var m=this;if(!m.isWired){m.wireNode('title','click',function(e_z){if(m.get('showWhenOver')!==e__||m.get('shown'))location.href=m.getNode('title').href;});e_$.doMy(m,'wireUi');
}};e_l.loadContent=e_l.e_j;e_l.reloadContent=function(){var m=this;m.set({e_o:'unloaded'});m.e_j();};e_a.stateProperties({e_r:{name:'additionalPaletteProperties',value:{}},e_p:{name:'contentPath',value:'zazzlewww.headerNavSection'
},e_o:{name:'contentState',value:'unloaded'},e_q:'now',e_k:'sectionName'});return e_a;}});
Uize.module({name:'ZazzleWww.HeaderNavigation',superclass:'Uize.Widget',required:'ZazzleWww.HeaderNavSection2',builder:function(d_$){'use strict';var d__=true,d_a=false;var d_b=d_$.subclass(null,function(){
var m=this,d_c=m.d_c,d_d= -1,d_e=m.d_f.length,d_g=m.d_g=m.getInherited('env').isMobile,d_h=function(d_i){var d_j=m.addChild('navSection'+d_i,m.d_k||ZazzleWww.HeaderNavSection2,{contentPath:m.d_l,hideWhenOut:d__,
sectionName:d_i,showWhenOver:d_g?d_a:d_c,hideOnClick:d_g,now:m.d_m,additionalPaletteProperties:m.d_n});d_j.wire({'Before Palette Shown':function(){m.fire('Before Menu Dropdown Shown');m.displayNode('shield',d__);
},'Palette Shown':function(){m.fire('Menu Dropdown Shown')},'Palette Dismissed':function(){m.displayNode('shield',d_a);m.fire('Menu Dropdown Dismissed');}});m.wireNode('shield',{mouseup:function(){d_j.set({shown:d_a});}});
m.d_o.push(d_j);};for(;++d_d<d_e;)d_h(m.d_f[d_d]);m.getNode('SELLERSTORES')&&d_h('SELLERSTORES');m.getNode('SELLERSTORESZBAR')&&d_h('SELLERSTORESZBAR');}),d_p=d_b.prototype;d_p.wireUi=function(){var m=this;
if(!m.isWired){var d_o=m.d_o,d_c=m.d_c,d_q=m.d_g?d_a:(Uize.isNumber(d_c)?d_c:0),d_r=function(d_s){var d_t= -1,d_u=d_o.length,d_v=function(){++d_t<d_u&&d_s(d_o[d_t],d_v)};d_v();};if(m.d_w){m.wireNode(
'',{mouseover:function(){for(var d_x=0;d_x<d_o.length;++d_x)d_o[d_x].loadContent();},mouseout:function(){d_r(function(d_j,d_y){d_j.set({showWhenOver:d_q});d_y();})}});d_q>0&&m.wireNode('','mouserest('+d_q+')',
function(){d_r(function(d_j,d_y){d_j.set({showWhenOver:0});d_y();})});}d_$.doMy(m,'wireUi')}};d_b.stateProperties({d_n:{name:'additionalPaletteProperties',value:{}},d_c:'delay',d_l:{name:'contentPath',
value:'zazzlewww.headerNavSection'},d_o:{value:[]},d_f:{name:'sections',value:{}},d_k:'sectionWidgetClass',d_m:'now',d_w:{name:'deferWireSections',value:true}});return d_b;}});
Uize.module({name:'ZazzleWww.ZazzleHeader',superclass:'ZazzleWww.HeaderNavigation',required:['Uize.Node','Uize.Widget.Options','Uize.Widget.mWeb','ZazzleWww.SearchInput','ZazzleWww.BasicPromotion.Header'
],builder:function(e_$){'use strict';var e__=true,e_a=false,e_b=ZazzleWww;var e_c=e_$.subclass(null,function(){var m=this,e_d=m.addChild('cartContents',Uize.Widget.Options,{html:e__,built:e_a,values:[]
}),e_e=m.addChild('cartContents2',Uize.Widget.Options,{html:e__,built:e_a,values:[]}),e_f=function(e_g){var e_h=m.addChild('headerSearch'+(e_g?'2':''),e_b.SearchInput,{useEnvParams:e_a});e_h.wire('Changed.focused',
function(){var e_i=e_h.get('focused');m.isWired&&m.web().setClassState('searchActive',e_i);m.isWired&& !e_g&&m.displayNode('shield',e_i);if(e_g&&e_h.get('focused')){Uize.require('Uize.Fx.Scroll',function(e_j){
setTimeout(function(){e_j.scrollToNode(e_h.getNode('input'),{scrollToTop:true,duration:250});},250);});}});!e_g&&m.web(e_h.getNode('searchButton')).mousedown(function(){var e_k=m.web().hasClass('searchActive');
if(!e_k)e_h.set('focused',true);e_h.set('searchOnClick',e_k);});};e_f();e_f(e__);m.addChild('promoGlobal',e_b.BasicPromotion.Header);if(!m.e_l){var e_m=m.children.navSectionCart;e_m&&e_m.set({contentState:'loaded'});
e_m&&e_m.wire('Before Palette Shown',function(){m.retrieveCartItems(e_e)});if(m.e_n){var e_o=m.children.navSectionShop,e_p=m.children.navSectionMake,e_q=m.children.navSectionSell;e_o&&e_o.set({contentState:'loaded'});
e_p&&e_p.set({contentState:'loaded'});e_q&&e_q.set({contentState:'loaded'});}}});e_c.mixins(Uize.Widget.mWeb);e_c.prototype.retrieveCartItems=function(e_r){var m=this;m.ajax({serviceUrl:'/co/cartservice',
bg:'515151'},function(e_s){var e_t=e_s.records;if(e_t)(e_r||m.children.cartContents).set({values:e_t.slice(Math.max(e_t.length-m.e_u,0))});});};e_c.stateProperties({e_l:'compatibilityMode',e_u:{name:'maxCartItemsToShowInPalettes',
value:3},e_n:'serverLoadMainSectionPalettes'});return e_c;}});
Uize.module({name:'Uize.Json',builder:function(){'use strict';var b_$,b__='string',b_a=[],b_b={},b_c='       ',b_d=b_c.replace(/ /g,b_c).replace(/ /g,b_c),b_e={RegExp:1,Date:1,String:1,Number:1,Boolean:1},
b_f=Uize.lookup(['break','boolean','case','catch','continue','const','debugger','default','delete','do','else','export','false','finally','for','function','if','import','in','instanceof','new','null','return','switch','this','throw','true','try','typeof','var','void','while','with','implements','interface','let','package','private','protected','public','static','yield'
],b_b),b_g={indentChars:'\t',keyAlign:'left',keyDelimiter:':',linebreakChars:'\n',padKeys:false,quoteChar:'\'',sortKeys:false,whenToQuoteKeys:'auto'},b_h={whenToQuoteKeys:'always',quoteChar:'"'},b_i={
indentChars:'',linebreakChars:''},b_j={mini:Uize.copy(b_g,b_i),miniStrict:Uize.copy(b_g,b_i,b_h),nice:b_g,strict:Uize.copy(b_g,b_h)};return Uize.package({encodingOptionsPresets:b_j,from:function(b_k){
return b_k?Uize.eval('0,('+b_k+')'):null;},to:function(b_l,b_m){b_m=(typeof b_m=='string'?b_j[b_m]:b_m)||b_j.nice;function b_n(b_o,b_p){var b_q=b_m[b_o];return typeof b_q==b__?b_q:b_p;}var b_r=[],b_s=b_n('indentChars','\t'),
b_t=b_n('linebreakChars','\n'),b_u=b_n('quoteChar','\''),b_v=new RegExp(b_u,'g'),b_w='\\'+b_u,b_x=b_m.sortKeys===true,b_y=b_m.padKeys===true,b_z=b_m.keyDelimiter||':',b_A={left:0,center:0.5,right:1}[b_m.keyAlign||'left'],
b_B=b_m.whenToQuoteKeys||'auto';function b_C(b_D){return b_d.substr(0,b_D)}function b_E(b__){return(b_u+b__.replace(/\\/g,'\\\\').replace(/\n/g,'\\n').replace(/\r/g,'\\r').replace(b_v,b_w)+b_u);}function b_F(b_G,b_H,b_I,b_J){
var b_K=0,b_L=typeof b_G;function b_M(b_N,b_J){b_r.push(b_I+(b_K++ ?'':b_H)+b_N+(b_J?',':''));}if(b_G==b_$||b_L=='number'||b_L=='boolean'||b_L=='function'){b_M(b_G,b_J);}else if(b_L==b__){b_M(b_E(b_G),b_J);
}else if(b_L=='object'){var b_O=b_G.constructor,b_P=b_O==Object||b_O==Array,b_Q;if(!b_P)b_Q=(((b_O+'').match(typeof b_O=='object'?/\[object\s+([^\]]+)\]/:/^\s*function\s+([^\(]+)\s*\(/)||b_a)[1])||''
;if(b_P||b_Q=='Object'||b_Q=='Array'){var b_R=b_I+b_s;if(b_G instanceof Array||(b_G&&Uize.isFunction(b_G.splice))){var b_S=b_G.length;if(b_S){var b_T=b_S-1;b_M('[');for(var b_U= -1;++b_U<b_S;)b_F(b_G[b_U],'',b_R,b_U<b_T
);b_M(']',b_J);}else{b_M('[]',b_J);}}else{var b_V=Uize.keys(b_G),b_W=b_V.length;if(b_W){b_x&&b_V.sort();var b_X=function(b_Y){return(isNaN(+b_Y)?(/[^\w\$]|^\d/.test(b_Y)||b_f[b_Y]==b_b):b_Y!= +b_Y+''||b_Y<0
);};var b_Z=b_B=='always';if(!b_Z&&b_B=='auto all'){for(var b_0= -1;++b_0<b_W&& !b_Z;)b_Z=b_Z||b_X(b_V[b_0]);}var b_1=[];for(var b_0= -1;++b_0<b_W;){var b_Y=b_V[b_0];b_1[b_0]=(b_Z||b_X(b_Y))?b_E(b_Y)
:b_Y;}var b_2=0;if(b_y){for(var b_0= -1;++b_0<b_W;)b_2=Math.max(b_2,b_1[b_0].length);}var b_3=b_W-1;b_M('{');for(var b_0= -1;++b_0<b_W;){var b_4='',b_5=b_1[b_0];if(b_y){var b_6=b_2-b_5.length,b_7=Math.round(b_A*b_6)
;b_4=b_C(b_7);b_5+=b_C(b_6-b_7);}b_F(b_G[b_V[b_0]],b_5+b_z,b_R+b_4,b_0<b_3);}b_M('}',b_J);}else{b_M('{}',b_J);}}}else{if(b_e[b_Q]){b_M('new '+b_Q+' ('+(b_Q=='String'?b_E(b_G):b_G.valueOf())+')',b_J);
}else{b_M('{}',b_J);}}}}b_F(b_l,'','');return b_r.join(b_t);}});}});
Uize.module({name:'Zazzle.Widget',superclass:'Uize.Widget',required:'Uize.Widget.mWeb',builder:function(d_$){'use strict';return d_$.subclass({mixins:Uize.Widget.mWeb});}});
Uize.module({name:'Zazzle.MediaGallery',superclass:'Zazzle.Widget',required:'Uize.Json',builder:function(e_$){'use strict';var e__=true;var e_a=e_$.subclass(),e_b=e_a.prototype;e_b.clickHandler=function(e_c){
var m=this,e_d=function(e_c){m.callInherited('loadHtmlIntoNode')({injectMode:'inner top'},{cp:'Zazzle.MediaGallerySlideshow',idPrefix:m.childId('gallerySlideshow'),selected:e_c.id,maxDim:(m.e_e),imageRequestSize:m.e_f,
galleryType:'SUPPORTING',productTypeName:m.e_g},{cache:'none',beforeInject:function(e_h,e_i){var e_j=m.children.gallerySlideshow;if(e_j){e_j.removeUi();m.removeChild(e_j);}e_h();},callback:function(){
}});},e_j=m.children.gallerySlideshow;if(e_j){e_j.updateUi();m.web(e_j).display(e__);e_j.clickHandler(e_c);}else{e_d(e_c);}};e_b.wireUi=function(){var m=this;if(!m.isWired){if(m.e_k&&m.e_k.length){Uize.forEach(m.e_k,function(e_l){
m.web('item'+e_l.index).click(function(){m.clickHandler(e_l);});});}e_$.doMy(m,'wireUi');}};e_a.stateProperties({e_e:{name:'galleryImageSize',value:210},e_f:{name:'gallerySelectedSize',value:700},e_k:{
name:'mediaData',value:[]},e_g:'productTypeName'});return e_a;}});
Uize.module({name:'Zazzle.SeeMoreUi',superclass:'Zazzle.Widget',builder:function(e_$){var e__=e_$.subclass(),e_a=e__.prototype;e_a.e_b=function(){var m=this;if(m.isWired){var e_c=m.e_c,e_d=m.web('container')
;e_d.css('maxHeight',e_c?m.e_e:'none');m.web('seeLess').display(!e_c);m.web('seeMore').display(e_c&&e_d.height()>=parseInt(e_d.css('maxHeight')));}};e_a.updateUi=function(){var m=this;if(m.isWired){m.e_b();
e_$.doMy(m,'updateUi');}};e_a.wireUi=function(){var m=this;if(!m.isWired){m.web(['seeMore','seeLess']).click(function(){m.toggle('collapsed')});e_$.doMy(m,'wireUi');}};e__.stateProperties({e_c:{name:'collapsed',
onChange:e_a.e_b,value:true},e_e:{name:'shortHeight',onChange:e_a.e_b}});return e__;}});
Uize.module({name:'Zazzle.ProductValueMessagingUi',superclass:'Uize.Widget',required:['Uize.Node','Uize.Data','Uize.Url'],builder:function(d_$){'use strict';var d__=Uize.Node,d_a=null;var d_b=d_$.subclass(),
d_c=d_b.prototype;d_c.d_d=function(){var m=this;if(m.isWired){m.ajax({service:'product/maketimes/get',pt:m.d_e,pd:m.d_f,att:Uize.Url.toParams(m.d_g),accd:m.d_h,ppd:m.d_i,patt:Uize.Url.toParams(m.d_j)
},{cache:'memory',callbackSuccess:function(d_k){if(d_k.success){var d_l=d_k.data;m.set({d_m:d_l.inStock,d_n:d_l.makeTimes})}}});}};d_c.d_o=function(){var m=this;if(m.isWired){var d_m=m.d_m,d_p=m.d_p,
d_q=m.d_n,d_r=m.d_r,d_s=d_q&&d_q.minDays>0&&d_q.maxDays>=d_q.minDays,d_t=m.d_u.length,d_v=m.d_v,d_w=m.d_w,d_x=m.d_x,d_y=m.d_y,d_z=d_t,d_A=function(){return d__.getDimensions(d_w).width>d__.getDimensions(d_v).width
};m.setNodeStyle(d_x.concat(m.d_y),{display:'inline',visibility:'hidden'});!d_m&&d_p&&m.displayNode([d_x[0],d_y[0]],false);!d_s&&d_r&&m.displayNode([d_x[d_p?1:0],d_y[d_p?1:0]],false);if(d_r&&d_s){var
 d_q=m.d_n,d_B=m.d_B,d_C;if(d_q.minDays==d_q.maxDays)d_C=d_q.minDays==1&&d_q.minDateTomorrow?m.localize('shipDateTomorrow'):m.localize('shipDateDate',{date:d_q.minDate});else if(!(d_q.minDays%d_B)&& !(d_q.maxDays%d_B))
d_C=m.localize('shipDateWeekRange',{minWeek:d_q.minDays/d_B,maxWeek:d_q.maxDays/d_B});else d_C=m.localize('shipDateDayRange',{minDay:d_q.minDays,maxDay:d_q.maxDays});m.setNodeInnerHtml(d_x[d_p?1:0],d_C
);}while((d_A()||d_z>3)&& --d_z>0){m.displayNode([d_x[d_z],d_z>0?d_y[d_z-1]:d_a],false);}m.showNode(m.d_x.concat(m.d_y),true);}};d_c.updateUi=function(){var m=this;if(m.isWired){m.d_o();d_$.doMy(m,'updateUi');
}};d_c.wireUi=function(){var m=this;if(!m.isWired){m.d_p=m.d_u[0]=='InStock';m.d_r=m.d_u[m.d_p?1:0]=='ShipDate';m.d_t=m.d_u.length;m.d_v=m.getNode();m.d_w=m.getNode('messages');m.d_x=[];m.d_y=[];for(var d_D= -1;++d_D<m.d_t;){
d_D>0&&m.d_y.push(m.getNode('separator'+d_D));m.d_x.push(m.getNode('message'+d_D));}d_$.doMy(m,'wireUi');}};d_b.stateProperties({d_h:{name:'accessoryId',onChange:d_c.d_d},d_m:{name:'inStock',onChange:d_c.d_o
},d_n:{name:'makeTimes',onChange:d_c.d_o},d_u:{name:'messages',value:[]},d_i:{name:'parentProductId',onChange:d_c.d_d},d_j:{name:'parentProductOption',onChange:d_c.d_d},d_f:{name:'productId',onChange:d_c.d_d
},d_g:{name:'productOption',conformer:function(d_E){return Uize.Data.identical(d_E,this.d_g)?this.d_g:d_E},onChange:d_c.d_d},d_e:{name:'productType',onChange:d_c.d_d},d_B:{name:'weekMultiplier',value:5
}});return d_b;}});
Uize.module({name:'Uize.Widget.Fleeting',required:'Uize.Fade',builder:function(d_$){'use strict';var d__;function d_a(m){m.d_b!=d__&&m.isWired&&m.setNodeInnerHtml('text',m.d_b);}return d_$.subclass({alphastructor:function(){
var m=this;m.d_c=null;m.d_d=Uize.Fade({curve:Uize.Fade.celeration(0,1),duration:750});m.d_d.wire({Start:function(){m.d_e&&m.displayNode('',m.d_e)},'Changed.value':function(){m.setNodeOpacity('',m.d_d)
},Done:function(){!m.d_e&&m.displayNode('',m.d_e)}});},instanceMethods:{show:function(){var m=this;if(m.d_c!=null){clearTimeout(m.d_f);m.d_f=null;}m.set({d_e:true});},updateUi:function(){var m=this;if(m.isWired){
d_a(m);d_$.doMy(m,'updateUi');}},wireUi:function(){var m=this;if(!m.isWired){var d_g=m.d_g=m.getNode();if(d_g){m.d_b==d__&&m.set({d_b:m.getNodeValue('text')});m.wireNode('','click',function(){if(m.d_h)
m.set({d_e:false});});d_$.doMy(m,'wireUi');}}}},stateProperties:{d_h:{name:'clickToDismiss',value:false},d_i:{name:'maxOpacity',value:1},d_j:{name:'lifeSpan',value:5000},d_e:{name:'shown',onChange:function(){
var m=this;if(m.isWired){m.d_e&&m.fire('Before Show');m.d_d.start({startValue:m.d_e?0:m.d_i,endValue:m.d_e?m.d_i:0});if(m.d_e)m.d_c=setTimeout(function(){m.set({d_e:false})},m.d_j);!m.d_e&&m.fire('After Hide');
}},value:false},d_b:{name:'text',onChange:function(){d_a(this)}}}});}});
Uize.module({name:'ZazzleWww.AccessoryUi',superclass:'Uize.Widget.Button',required:['Uize.Url','Zazzle.SeeMoreUi','Uize.Widget.mWeb'],builder:function(e_$){'use strict';var e__=false,e_a=null;var e_b=e_$.subclass(
e_a,function(){var m=this;m.addChild('seeMore',Zazzle.SeeMoreUi);m.addChild('add',Uize.Widget.Button).wire('Click',function(){m.e_c()});}),e_d=e_b.prototype;e_b.mixins(Uize.Widget.mWeb);e_d.e_c=function(){
var m=this,e_e=m.e_e,e_f=e_e.isDependent,e_g=function(e_h){m.callInherited('useProductUiDialog')({action:e_f?'bundle':'addtocartservice',productId:e_e.productId,productAttributes:Uize.copyInto({},e_e.attributes,
{context:null,view:null}),title:e_e.title,okText:m.children.add.get('text'),isEditable:e__,allowOos:e__,singleProductContext:true,accessoryId:e_e.accessoryId,parentProductOption:m.e_i,parentProductId:e_h,
parentProductType:m.e_j,productTitle:e_e.title,showQuantitySelector:e_f?e_a:true,submitHandler:function(e_k){m.fire({name:'Accessory Added',widget:m,parentProductId:e_h,attributes:e_k.attributeValues,
isDependent:e_f});},dismissHandler:function(){m.fire({name:'Cancel Add',widget:m,parentProductId:e_h});}})};!m.fire({name:'Before Add',handler:e_g}).handled&&e_g(m.e_h);};e_d.e_l=function(e_m){var m=this;
if(m.isWired){}};e_d.e_n=function(){var m=this,e_e=m.e_e;if(m.isWired){m.web('title').html(e_e.title).property('title',e_e.title);m.web('description').html(e_e.description);m.web('price').html(e_e.price);
m.web('thumbnail').value(Uize.Url.resolve(e_e.thumbnailUrl,{max_dim:m.e_o==='List'?m.e_p:m.e_q}));m.children.seeMore.updateUi();}};e_d.updateUi=function(){var m=this;if(m.isWired){m.e_n();e_$.doMy(m,'updateUi');
}};e_d.wireUi=function(){var m=this;if(!m.isWired){m.web('thumbnail').click(function(){m.e_c()});e_$.doMy(m,'wireUi');}};e_b.stateProperties({e_e:{name:'info',onChange:e_d.e_n},e_i:'parentAttributes',
e_h:'parentProductId',e_j:'parentProductType',e_q:{name:'thumbnailSizeGrid',value:152},e_p:{name:'thumbnailSizeList',value:92},e_o:{name:'view',value:'List'}});return e_b;}});
Uize.module({name:'ZazzleWww.AccessoriesUi',superclass:'Uize.Widget.Options',required:['ZazzleWww.AccessoryUi','Uize.Url','Uize.Data','Uize.Node','Uize.Widget.Fleeting','Uize.Widget.mWeb'],builder:function(e_$){
'use strict';var e__=Uize,e_a=e__.Node,e_b=e__.Url.toParams,e_c=null,e_d;var e_e=e_$.subclass(e_c,function(){var m=this,e_f=m.addChild('added',e__.Widget.Fleeting);m.wire({'Option Event':function(e_g){
var e_h=e_g.childEvent,e_i=e_h.name;if(e_i=='Accessory Added'){var e_j=e_h.widget,e_k=e_h.widget.get('info'),e_l=e_f.getNodeStyle('',{paddingLeft:1,paddingRight:1});e_f.setNodeStyle('',{width:e_a.getDimensions(e_j.getNode('title')).width
-parseInt(e_l.paddingLeft||0)-parseInt(e_l.paddingRight||0),top:e_a.getCoords(e_j.getNode()).top-e_a.getCoords(m.getNode()).top});e_f.set({text:m.localize('accessoryAdded',{accessoryName:e_k.productTypeDisplayName}
),shown:true});e_k.isDependent?m.ajax({service:'product/bundle',ax:'createoradd',pd:e_k.productId,ea:e_b(e_h.attributes),qty:e_k.quantity,did:e_k.dependencyId,ppd:m.e_m,patt:e_b(m.e_n),pqty:m.e_o},function(e_p){
if(e_p.success)m.fire({name:'Accessory Added',bundleId:e_p.bundleId});else m.inform({message:m.localize('accessoryAddFailed')});}):m.fire({name:'Accessory Added',isDependent:false,parentProductId:e_h.parentProductId
});}else if(e_i=='Before Add'||e_i=='Cancel Add')m.fire(e_h);},'Changed.values':function(){m.e_q()}});}),e_r=e_e.prototype;e_e.mixins(e__.Widget.mWeb);e_r.e_s=function(){var m=this;m.isWired&&m.getNode()
&&(m.e_m||m.e_t)&&m.ajax({service:'product/accessories/get',pt:m.e_t,pd:m.e_m,ea:e_b(m.e_n),bg:m.e_u,ta:e_b(m.e_v)},{cache:'memory',callbackSuccess:function(e_p){if(e_p.success){var e_w=m.e_w,e_x=m.e_x,
e_y=e_p.data;if(e_w==e_d)e_w=0;if(e_x==e_d)e_x=Infinity;if(e_w>0||e_x<Infinity){e_x=Math.min(e_y.length-1,e_x);var e_z=[];for(var e_A=e_w;e_A<=e_x;e_A++)e_z.push(e_y[e_A]);e_y=e_z;}!e__.Data.identical(e_y,m.get('values'))
&&m.set({values:e_y});}}});};e_r.e_q=function(){var m=this;if(m.isWired){m.web().display(!e__.isEmpty(m.get('values')));m.forAll(function(e_B){e_B.updateUi()});}};e_r.getOptionProperties=function(e_C,e_D){
var m=this;return e__.copyInto(e_$.doMy(m,'getOptionProperties',[e_C,e_D])||{},{backgroundColor:m.e_u,info:e_D.info,parentAttributes:m.e_n,parentProductId:m.e_m,parentProductType:m.e_t,thumbnailSizeGrid:m.e_E,
thumbnailSizeList:m.e_F,view:m.e_G});};e_r.updateUi=function(){var m=this;if(m.isWired){m.e_q();e_$.doMy(m,'updateUi');}};e_r.wireUi=function(){var m=this;if(!m.isWired){e_$.doMy(m,'wireUi');!m.e_H&&m.e_I
&&m.e_s();m.e_H=true;}};e_e.stateProperties({e_n:{name:'attributes',conformer:function(e_J){return Uize.Data.identical(e_J,this.e_n)?this.e_n:e_J;},onChange:e_r.e_s},e_u:{name:'backgroundColor',onChange:e_r.e_s
},e_I:'clientSideLoaded',e_x:'endIndex',e_m:{name:'productId',onChange:e_r.e_s},e_t:{name:'productType',onChange:e_r.e_s},e_o:{name:'quantity',value:1},e_w:'startIndex',e_v:{name:'templateParams',onChange:e_r.e_s
},e_E:{name:'thumbnailSizeGrid',value:152},e_F:{name:'thumbnailSizeList',value:92},e_G:{name:'view',value:'List'}});e_e.set({optionWidgetClass:ZazzleWww.AccessoryUi,html:true});return e_e;}});
Uize.module({name:'ZazzleWww.ProductPagePromotions',superclass:'Zazzle.Widget',builder:function(e_$){'use strict';var e__=true,e_a=false;var e_b=e_$.subclass(),e_c=e_b.prototype;e_c.wireUi=function(){var m=this;
if(!m.isWired){m.wireNode('seeBelow','click',function(){m.e_d&&Uize.require('Uize.Fx.Scroll',function(e_e){e_e.scrollToNode(m.e_d);});});if(m.e_f){m.web('close').click(function(){m.web().setClassState(m.e_g,e__);
m.web('closeTab').hide();m.web('offerTab').show();m.fire({name:'Changed.height',bubble:e__});});m.web('offerTab').click(function(){m.web().setClassState(m.e_g,e_a);m.web('closeTab').show();m.web('offerTab').hide();
m.fire({name:'Changed.height',bubble:e__});});m.web().setClassState(m.e_h,e_a);m.web('closeTab').contentHeight(m.web('content').dimensions().height);m.web().setClassState(m.e_h,e__);}if(m.e_i){m.web('content').click(function(e_j){
if(e_j.target.tagName.toLowerCase()!=='a')m.web().toggleClassState(m.e_k);});}e_$.doMy(m,'wireUi');}};e_b.stateProperties({e_d:'scrollToNodeId',e_h:'cssClassOpen',e_g:'cssClassCollapsed',e_k:'cssClassToggled',
e_f:{name:'allowTab',value:e_a},e_i:'toggleOnClick'});return e_b;}});
Uize.module({name:'Zazzle.SelectorValueDisplayBase',superclass:'Uize.Widget.Button.ValueDisplay.Selector',required:'Uize.Url',builder:function(g_$){'use strict';var g__=false,g_a=null,g_b=Uize.Url,g_c='Alternate',
g_d='None',g_e=function(){this.set({g_f:true});return this.canWire;},g_g=function(){this.set({canWire:this.g_f&& !this.isWired&&this.g_h!==g__});},g_i=function(){this.set({canUpdate:this.isWired&&this.g_h!==g__});
},g_j=function(){var m=this,g_k=m.get('valueDetails'),g_l=m.g_l;if(m.isWired&&g_k&&g_l){var g_m=function(g_n){return!!g_n},g_o=function(g_p,g_n,g_q){var g_r=m.web(g_p);g_r.display(g_q);g_q&&g_r.html(g_n);
},g_s=g_l.showDisplayName==g_c?g_k.displayNameAlt||g_k.displayName:g_k.displayName,g_t=g_k.importantInfo,g_u=g_l.showDescription==g_c?g_k.descriptionAlt||g_k.description:g_k.description,g_v=g_l.showThumbnail==g_c
?g_k.thumbnailUrlAlt||g_k.thumbnailUrl:g_k.thumbnailUrl,g_w=m.showDisplayName=g_l.showDisplayName!=g_d&&g_m(g_s),g_x=m.showImportantInfo=g_l.showImportantInfo&&g_m(g_t),g_y=m.showDescription=g_l.showDescription!=g_d
&&g_m(g_u),g_z=m.showThumbnail=m.g_A!=g__&&g_l.showThumbnail!=g_d&&g_m(g_v),g_B=m.showInput=g_l.showInput!=g_d,g_C=m.showData=g_w||g_x||g_y,g_D=m.web('thumbnail'),g_E=m.getInherited('env').assets;m.web('input').display(g_B);
if(g_C){g_o('displayName',g_s,g_w);g_o('importantInfo',g_t,g_x);g_o('description',g_u,g_y);}g_D.display(g_z);if(g_z){var g_F=g_v.charAt(0)=='#',g_G=g_F?g_a:g_b.resolve(g_v,(g_v.indexOf(g_E)<0||g_b.from(g_v).query
)?{max_dim:m.g_H,bg:g_l.thumbnailBgColor}:{});g_D.css({backgroundColor:g_F?g_v:'transparent',backgroundImage:g_G?'url("'+g_G+'")':'none'});}}},g_I=function(){this.set({g_h:this.g_A!==g__||this.g_J!==g__});
};return g_$.subclass({omegastructor:function(){var m=this;m.wire({'Changed.valueDetails':function(){m.g_j()},'Changed.wired':function(){g_g.call(m);g_i.call(m);}});},instanceMethods:{g_j:g_j,insertOrWireUi:g_e,
prepareToWire:g_e,unwireUi:function(){this.set({g_f:false});g_$.doMy(this,'unwireUi');},updateUi:function(){var m=this;if(m.isWired&&m.canUpdate){g_$.doMy(m,'updateUi');m.g_j();}},wireUi:function(){var m=this;
!m.isWired&&m.prepareToWire()&&g_$.doMy(m,'wireUi');}},stateProperties:{g_H:{name:'thumbnailSize',onChange:g_j},g_l:{name:'valueDisplayInfo',onChange:g_j},canUpdate:{onChange:function(){this.canUpdate&&this.updateUi()}
},canWire:{onChange:function(){if(this.canWire)this.get('built')?this.wireUi():this.insertUi()}},g_f:{name:'desiredWired',onChange:g_g},g_A:{name:'seen',onChange:g_I},g_h:{name:'usable',onChange:[g_g,g_i]
},g_J:{name:'usableWhenNotSeen',onChange:g_I,value:g__}},set:{mode:null}});}});
Uize.module({name:'Zazzle.SelectorValueDisplay',superclass:'Zazzle.SelectorValueDisplayBase',required:'Uize.Widget.mWeb',builder:function(h_$){var h__=function(){var m=this;m.web('label').value(m.h_a);
},h_b=function(){var m=this,h_c=m.get('valueDetails'),h_d=m.get('valueDisplayInfo');if(m.isWired&&m.canUpdate&&h_c&&h_d){var h_e=h_c.attributes&&h_c.attributes.zazzicon,h_f=h_e&&h_e.indexOf('zazzicon-')===0,
h_g= !!(m.showThumbnail||h_f),h_h=m.showData=m.showData|| !!m.getNode('label')||m.h_i,h_j=m.getNode('inputImage');m.web(['inputCell','inputCellExtra']).display(h_d.showInput);m.web('input').display(!h_j);
m.web(h_j).display();m.web('displayData').display(h_h);m.web('thumbnailCell').display(h_g);if(h_g){!(m.h_k&&h_c.name!=null)&&m.web('thumbnail').property({alt:h_c.displayName,title:h_c.displayName});}
m.web('thumbnailZazzicon').display(h_f);h_f&&m.web('thumbnailZazzicon').addClass(h_e);m.web('thumbDataExtra').display(h_h&&h_g);}};return h_$.subclass({mixins:[Uize.Widget.mWeb],omegastructor:function(){
var m=this;m.wire('Changed.valueDetails',function(){m.h_b()});},instanceMethods:{h_b:h_b,h__:h__,updateUi:function(){var m=this;if(m.isWired&&m.canUpdate){h_$.doMy(m,'updateUi');m.h_b();m.h__();}}},stateProperties:{
h_a:{name:'label',onChange:h__},h_i:{name:'showAfterDisplayNameContent',onChange:h_b}}});}});
Uize.module({name:'Zazzle.SelectorValueDisplay.DroplistButton',required:['Uize.Widget.Button','Uize.Dom.Util'],builder:function(i_$){'use strict';var i__=function(){var m=this,i_a=m.i_a;if(m.isWired){m.web(m.children.right).display(i_a);
Uize.Dom.Util.showClickable(m.web('displayName')[0],i_a&&m.get('enabledInherited'));}};return i_$.subclass({omegastructor:function(){var m=this,i_b=m.addChild('left',Uize.Widget.Button),i_c=m.addChild('right',Uize.Widget.Button)
;m.wire('Changed.selected',function(){var i_d=m.get('selected');i_b.set({selected:i_d});i_c.set({selected:i_d});});},instanceMethods:{i__:i__,updateUi:function(){var m=this;if(m.isWired&&m.canUpdate){
m.i__();i_$.doMy(m,'updateUi');}}},stateProperties:{i_a:{name:'allowSelection',onChange:[function(){this.set({enabled:this.i_a?'inherit':false})},i__],value:true}}});}});
Uize.module({name:'Zazzle.OptionsSelector',superclass:'Uize.Widget.Options.Selector',required:['Uize.Node','Zazzle.SelectorValueDisplay','Uize.Widget.mWeb'],builder:function(f_$){'use strict';var f__=true,
f_a=false,f_b=Uize.Node;var f_c=f_$.subclass(null,function(){var m=this;m.wire('Changed.values',function(){m.f_d=f_a;m.f_e();m.f_f();});}),f_g=f_c.prototype;f_c.mixins(Uize.Widget.mWeb);f_g.f_h=function(){
var m=this;m.forAll(function(f_i){f_i&&f_i.set({valueDisplayInfo:m.f_j})})};f_g.f_k=function(){var m=this;if(m.isWired){var f_l=m.f_l||[],f_m=Uize.lookup(f_l),f_n= !!m.f_n,f_o=m.get('values');m.forAll(
function(f_p,f_q){if(f_p){var f_r= !!f_m[f_o[f_q].name];f_p.set({enabled:f_r?f_a:'inherit'});if(f_n){m.web('option'+f_q).display(!f_r);m.web(f_p).display(!f_r);}}});}};f_g.f_f=function(){var m=this,f_j=m.f_j
;if(m.isWired&&m.get('values')&& !m.f_d){var f_s=m.getNode('options');if(f_s&&f_j&&f_j.layout=='Vertical'){var f_t=0,f_u=0,f_v=f__,f_w=f__,f_x=f_j.showThumbnail!='None';m.forAll(function(f_p,f_q){var
 f_y=m.web('option'+f_q).dimensions(),f_z=f_y.height,f_A=f_y.width;f_t=f_z>f_t?f_z:f_t;f_u=f_A>f_u?f_A:f_u;f_v&=(!f_q||f_z===f_t);f_w&=(!f_q||f_A===f_u);});f_t&&f_u&& !(f_v&&f_w)&&m.forAll(function(f_p,f_q){
var f_B={};f_B.height=f_t;if(f_x)f_B.width=f_u;!Uize.isEmpty(f_B)&&m.web('option'+f_q).css(f_B);});if(f_t&&f_u)m.f_d=f__;}}};f_g.getOptionProperties=function(f_C,f_D){return Uize.copyInto(f_$.doMy(this,'getOptionProperties',[f_C,f_D])||{},
{valueDisplayInfo:this.f_j})};f_g.updateUiOptionsSeen=f_g.f_e=function(){var m=this;if(m.isWired){var f_s=m.web('options');if(f_s.length){var f_E=m.get('valueNo'),f_F=0,f_G=0,f_H=0,f_I=0,f_J=null,f_K=function(){
return f_J!==null?f_J:(f_J=(f_s.scrollHeight())>(f_I=f_I||f_s.height())||(f_s.scrollWidth())>(f_H=f_H||f_s.width()));},f_L=f_a;m.forAll(function(f_p,f_C){var f_M=function(){var f_N=m.web('option'+f_C),
f_O=f_N.dimensions(),f_P=f_N.offset();return f_N.length&&f_b.doRectanglesOverlap(f_F=f_F||f_s.scrollLeft(),f_G=f_G||f_s.scrollTop(),f_H=f_H||f_s.width(),f_I=f_I||f_s.height(),f_P.left,f_P.top,f_O.width,
f_O.height);},f_Q=f_p.get('seen')||f_C==f_E;if(!f_Q&&(!f_K()||f_M()))f_Q=f_L=true;f_p.set({seen:f_Q});return!f_L||f_Q;});}}};f_g.updateUi=function(){var m=this;if(m.isWired){m.f_e();m.f_f();m.f_k();f_$.doMy(m,'updateUi');
}};f_g.wireUi=function(){var m=this;if(!m.isWired){m.web('options').scroll(function(){m.f_e()},500);f_$.doMy(m,'wireUi');}};f_c.stateProperties({f_n:{name:'hideDisabledOptions',value:f_a},f_l:{name:'disabledList',
onChange:f_g.f_k},f_j:{name:'valueDisplayInfo',onChange:f_g.f_h}});f_c.set({optionWidgetClass:Zazzle.SelectorValueDisplay,html:true});return f_c;}});
Uize.module({name:'Uize.Util.Coupler',superclass:'Uize.Class',builder:function(c_$){'use strict';var c__={};function c_a(){var m=this,c_b=m.c_b;if(c_b){for(var c_c= -1,c_d=c_b.length,c_e;++c_c<c_d;)(c_e=c_b[c_c]).c_f.unwire(c_e.c_g,c_e.c_h)
;c_b=m.c_b=null;}if(m.c_i){var c_j=m.c_j,c_k=m.c_k;if(c_j&&c_k){Uize.callOn(c_j,'set',[c_j[0].get(c_k)]);var c_l=c_k.length,c_m=c_k.concat().sort()+'',c_n=c__[c_m];if(!c_n){var c_o=['if (target.UIZE_UTIL_COUPLER_driver) return;'];
if(c_l>1){c_o.push('var properties, changedMap = eventObj.properties;');for(var c_p= -1;++c_p<c_l;){var c_q='\''+c_k[c_p]+'\'';c_o.push('if ('+c_q+' in changedMap) (properties || (properties = {})) ['+c_q+'] = changedMap ['+c_q+'];'
);}c_o.push('if (!properties) return;');}else{var c_q='\''+c_k[0]+'\'';c_o.push('var properties = {'+c_q+':eventObj.source.get ('+c_q+')};');}c_o.push('var source = eventObj.source;','source.UIZE_UTIL_COUPLER_driver = 1;',
'target.set (properties);','delete source.UIZE_UTIL_COUPLER_driver;');c_n=c__[c_m]=Function('eventObj,target',c_o.join(''));}c_b=m.c_b=[];var c_g='Changed.'+(c_l>1?'*':c_k[0]),c_r=function(c_s,c_t){var c_h=function(c_u){c_n(c_u,c_t)};
c_b.push({c_f:c_s,c_g:c_g,c_h:c_h});c_s.wire(c_g,c_h);};for(var c_v= -1,c_w=c_j.length;++c_v<c_j.length;)c_r(c_j[c_v],c_j[(c_v+1)%c_w]);}}}return c_$.subclass({stateProperties:{c_i:{name:'coupled',onChange:c_a,
value:true},c_j:{name:'instances',onChange:c_a},c_k:{name:'properties',onChange:c_a}}});}});
Uize.module({name:'Uize.Widget.Button.Checkbox',builder:function(e_$){'use strict';var e__=e_$.subclass(function(){var m=this;m.wire('Click',function(){m.toggle('selected')});});e__.set({clickToDeselect:true});
return e__;}});
Uize.module({name:'Uize.Widget.Drag',required:['Uize.Node','Uize.Dom.Event'],builder:function(d_$){'use strict';var d__,d_a=true,d_b=false,d_c=Uize.Node,d_d=d_c.getEventAbsPos,d_e=d_c.isIe,d_f,d_g=d_b,
d_h=d_b;if(typeof navigator!='undefined'){var d_i=d_c.ieMajorVersion;d_g=d_e&&d_i<9;d_h= !d_e||d_i>6;}function d_j(m){m.d_k=null;m.fire('Drag Rest');}function d_l(m){m.d_k&&clearTimeout(m.d_k);m.d_k=null;
}function d_m(m){if(m.isWired){var d_n=m.getNode();m.d_o?d_c.setStyle(m.d_p?[d_n,d_f]:d_n,{cursor:m.get('enabledInherited')?m.d_o:'not-allowed'}):m.set({d_o:d_c.getStyle(d_n,'cursor')});}}function d_q(d_r,d_s){
var m=this,d_t=m.d_t,d_u=m.d_u,d_v=m.d_v;function d_w(d_r){if(m.d_p){if(m.d_x){m.d_x.stop();m.d_x=d__;}d_y=d_a;if(m.d_k){d_l(m);d_j(m);}m.set({d_z:d_b,d_p:d_b,d_A:d_b,d_B:d_b});m.fire({name:'Drag Done',domEvent:d_r});
m.set({d_C:d_b,d_D:d_b});if(d_B){m.unwireNode(d_s?'':d_r.target,{touchmove:null,touchend:null,touchcancel:null});}}}function d_E(d_F,d_G,d_H,d_I){m.set(d_F,d_a);(m.d_x=Uize.Fade.fade(d_J,[d_u[0],d_u[1]],
d_G,d_H,d_I)).wire('Done',function(){d_w(d_r)});}function d_K(d_r){if(m.d_L&&Uize.Fade&&Uize.Fade.fade){var d_M=d_u[0]-d_v[0],d_N=d_u[1]-d_v[1];if(d_M||d_N){var d_O=Math.sqrt(Math.pow(d_M,2)+Math.pow(d_N,2)),
d_P=m.d_L(d_O/((m.d_Q-m.d_R)||1)*1000),d_S=1+(d_P.distance/d_O);d_E('inReleaseTravel',[d_v[0]+d_M*d_S,d_v[1]+d_N*d_S],d_P.duration*1000,{curve:d_P.curve});return;}}d_w(d_r);}function d_J(d_T,d_U){m.d_R=m.d_Q;
m.d_Q=Uize.now();d_v[0]=d_u[0];d_v[1]=d_u[1];var d_V=[(d_u[0]=d_T)-d_t[0],(d_u[1]=d_U)-d_t[1]],d_W=[Math.abs(d_V[0]),Math.abs(d_V[1])];for(var d_X= -1;++d_X<2;)m.d_V[d_X]=(m.d_Y=='both'||d_W[d_X]>d_W[1-d_X]||
(d_W[d_X]==d_W[1-d_X]&&d_X==1))?d_V[d_X]:0;m.fire('Drag Update');d_l(m);m.d_k=setTimeout(function(){d_j(m)},m.d_Z);}function d_0(d_r){if(!d_y&& !m.d_C){if(!m.d_D){if(!d_B){m.Class.resizeShield(d_f);d_c.display(d_f);
}m.set({d_D:d_a});m.fire({name:'Drag Start',domEvent:d_r});}var d_1=d_d(d_r);d_J(d_1.left,d_1.top);}}function d_2(d_r){m.set({d_C:d_a});if(m.d_3&&Uize.Fade&&Uize.Fade.fade){d_E('inCancel',d_t,500,m.d_3);
}else{d_J(d_t[0],d_t[1]);d_w(d_r);}}if(m.d_z||m.d_A)d_w(d_r);if(!m.d_p&&m.get('enabledInherited')){var d_B= !!d_r.targetTouches;m.set({d_p:d_a,d_B:d_B});d_m(m);Uize.Dom.Event.abort(d_r);m.d_Y=d_r.shiftKey?'one':'both';
m.fire({name:'Before Drag Start',domEvent:d_r});var d_1=d_d(d_r);d_t[0]=d_u[0]=d_v[0]=d_1.left;d_t[1]=d_u[1]=d_v[1]=d_1.top;m.d_Q=m.d_R=Uize.now();var d_y=d_b,d_4;if(!d_B)d_4={onkeyup:document.onkeyup,
onmousemove:document.onmousemove,onmouseup:document.onmouseup};if(d_B){m.wireNode(d_s?'':d_r.target,{touchmove:function(d_r){d_r.preventDefault();d_0(d_r);},touchend:function(d_r){d_r.preventDefault();
d_K(d_r);},touchcancel:function(d_r){d_r.preventDefault();d_2(d_r);}});}else{var d_5=function(d_r){Uize.copyInto(document,d_4);d_c.display(d_f,d_b);m.d_C||d_K(d_r);};document.onmousemove=function(d_r){
d_r||(d_r=window.event);d_g&&d_r.button==0?m.d_p&&d_5(d_r):d_0(d_r);return d_b;};document.onmouseup=function(d_r){d_5(d_r||window.event);return d_b;};document.onkeyup=function(d_r){Uize.Dom.Event.isKeyEscape(d_r)&&m.d_p&&d_2(d_r);
};}}return d_b;};return d_$.subclass({alphastructor:function(){var m=this;m.eventStartPos=m.d_t=[0,0];m.eventPos=m.d_u=[0,0];m.d_v=[0,0];m.d_Q=m.d_R=0;m.eventDeltaPos=m.d_V=[0,0];},instanceMethods:{initiate:d_q,
mousedown:d_q,updateUi:function(){var m=this;m.isWired&& !m.get('enabledInherited')||m.d_o&&d_m(m);},wireUi:function(){var m=this;if(!m.isWired){var d_6=m.getNode();if(d_6){d_6.onmousedown=Uize.returnFalse;
var d_7=function(d_r){return m.initiate(d_r,d_a)};m.wireNode(d_6,{mousedown:d_7,touchstart:d_7});}if(!d_f){d_f=m.Class.insertShield({zIndex:50000});d_h||d_c.wire(window,'resize',function(){m.Class.resizeShield(d_f)})
;}m.wire({'Changed.enabledInherited':function(){d_m(m)}});d_$.doMy(m,'wireUi');}}},staticMethods:{insertShield:function(d_8){var m=this,d_9={display:'none',position:'absolute'};if(d_e)d_9.background='url('+m.getBlankImageUrl()+')'
;var d_$_=document.createElement('div');d_c.setStyle(d_$_,Uize.copyInto(d_9,d_8));d_$_.Uize_Widget_Drag_shield=d_a;document.body.appendChild(d_$_);m.resizeShield(d_$_);return d_$_;},resizeShield:function(d_$_){
if(d_h){d_c.setStyle(d_$_,{left:'0',top:'0',width:'100%',height:'100%',position:'fixed'});}else{var d___=d_c.getStyle(d_$_,'display'),d_a_=document.documentElement,d_b_=document.body;d_c.display(d_$_,d_b);
d_c.setStyle(d_$_,{left:0,top:0,width:d_a_.scrollWidth,height:Math.max(typeof window.innerHeight=='number'?window.innerHeight:(d_a_&&d_a_.clientHeight?d_a_.clientHeight:(d_b_&&d_b_.clientHeight?d_b_.clientHeight:0)),
d_a_.scrollHeight),display:d___});}}},stateProperties:{d_c_:{name:'animation',onChange:function(){this.set({d_3:this.d_c_?{duration:500}:d__})}},d_3:'cancelFade',d_o:{name:'cursor',onChange:function(){d_m(this)}
},d_C:'dragCancelled',d_Z:{name:'dragRestTime',value:250},d_D:'dragStarted',d_z:'inCancel',d_p:'inDrag',d_A:'inReleaseTravel',d_B:'isTouch',d_L:'releaseTravel'}});}});
Uize.module({name:'Uize.Widget.Dialog',required:['Uize.Node','Uize.Widget.Button','Uize.Widget.Drag','Uize.Fade'],builder:function(d_$){'use strict';var d__=true,d_a=false,d_b,d_c=Uize.Node,d_d=Uize.Widget,
d_e=d_d.Drag,d_f='updateUiDimsIfShown',d_g='updateUiPositionIfShown',d_h={},d_i={},d_j=0,d_k=d_c.ieMajorVersion==6;function d_l(m,d_m,d_n){var d_o=m.addChild(d_m,m.Class.buttonWidgetClass);d_o.wire('Click',d_n);
return d_o;}function d_p(m,d_q){m.fire(d_q).abort||m.set({d_r:d_a});}function d_s(){var m=this;if(m.isWired){var d_t=m.d_u||m.d_v;d_t!=d_b&&m.setNodeInnerHtml('title',d_t||'&nbsp;');}}function d_w(){
var m=this,d_x=m.children;function d_y(d_z,d_A){d_z&&d_A!=d_b&&d_z.set({text:d_A});}d_y(d_x.ok,m.d_B||m.d_C);d_y(d_x.cancel,m.d_D||m.d_E);}var d_F=d_$.subclass({alphastructor:function(){var m=this;(m.d_G=m.shieldFade=Uize.Fade({
curve:Uize.Fade.celeration(0,1),duration:750})).wire('Changed.value',function(d_H){m.set({d_I:d_H.newValue})});m.wire({'Drag Start':function(){if(!m.d_J){m.d_J=d__;m.fire('First Drag Since Shown');m.d_K&&m.set({d_L:d_a});
}},'Drag Done':function(){var d_M=d_c.getById(m.d_M);if(d_M){var d_N=d_c.getCoords(d_M),d_O=m.getNode();m.set({offsetX:parseInt(d_c.getStyle(d_O,'left'))-d_N.left,offsetY:parseInt(d_c.getStyle(d_O,'top'))-d_N.top
});}}});},omegastructor:function(){var m=this;var d_O,d_P=[0,0];(m.d_Q=m.addChild('drag',d_e,{cursor:'move'})).wire({'Before Drag Start':function(){d_O=m.getNode();d_P[0]=parseInt(d_c.getStyle(d_O,'left'));
d_P[1]=parseInt(d_c.getStyle(d_O,'top'));},'Changed.inDrag':function(d_H){m.set({d_R:d_H.newValue})},'Drag Start':m,'Drag Update':function(){var d_S=m.d_Q.eventDeltaPos;d_c.setStyle(d_O,{left:d_P[0]+d_S[0],
top:d_P[1]+d_S[1]});},'Drag Done':m});d_l(m,'close',function(){d_p(m,'Close')});d_l(m,'qualifiedOk',function(){d_p(m,'Qualified Ok')});d_l(m,'ok',function(){d_p(m,'Ok')});d_l(m,'cancel',function(){d_p(m,'Cancel')});
d_w.call(m);m.atEndOfOmegaStructor();},instanceMethods:{atEndOfOmegaStructor:Uize.nop,afterWireUi:Uize.nop,responsiveUpdateUiPositionAndDimensions:function(){var m=this,d_O=m.getNode(),d_T=m.getNode(m.d_T)
;m.setNodeStyle(d_T,{maxWidth:'',maxHeight:''});var d_U=d_c.getCoords(window),d_V=d_c.getDimensions(d_O),d_W=d_T==d_O,d_X=d_W?d_V:d_c.getDimensions(d_T);m.setNodeStyle(d_T,{maxWidth:d_V.width>d_U.width?d_U.width-(d_V.width-d_X.width):'',
maxHeight:d_V.height>d_U.height?d_U.height-(d_V.height-d_X.height):''});if(d_V.width>d_U.width||d_V.height>d_U.height)d_V=d_c.getDimensions(d_O);var d_Y=d_U.x+((d_U.width-d_V.width)>>1),d_Z=d_U.y+((d_U.height-d_V.height)>>1)
;m.setNodeStyle(d_O,{left:d_Y>0?d_Y:0,top:d_Z>0?d_Z:0});},updateUiPositionIfShown:function(){var m=this;if(m.isWired&&m.d_r&& !m.d_R){d_e.resizeShield(m.getNode('shield'));if(m.d_0){var d_O=m.getNode(),
d_M=d_c.getById(m.d_M),d_1=m.d_1,d_2=m.d_2;if(!d_M||d_1==d_b||d_2==d_b){m.responsiveUpdateUiPositionAndDimensions();}if(d_M){if(d_1=='adjacent'||d_2=='adjacent'){d_c.setAbsPosAdjacentTo(d_O,d_M);}else{
var d_N=d_c.getCoords(d_M);d_c.setStyle(d_O,Uize.copy(d_1!=d_b?{left:d_N.left+d_1}:d_b,d_2!=d_b?{top:d_N.top+d_2}:d_b));}}}}},updateUiDimsIfShown:function(){var m=this;m.isWired&&m.d_r&& !m.d_R&&m.setNodeStyle(m.getNode(m.d_T),{width:m.d_3,height:m.d_4})
;},updateUi:function(){var m=this;if(m.isWired){d_s.call(m);d_$.doMy(m,'updateUi');}},wireUi:function(){var m=this;if(!m.isWired){m.wireNode(window,'resize',function(){m.updateUiPositionIfShown()});m.d_Q.set({node:m.getNode('title')});
m.wireNode('shield','click',function(){m.d_5&&d_p(m,'Close')});var d_6=function(d_7,d_z,d_8){if(!m.get(d_7)){var d_9=(d_z.getNode(d_8)||d_h).innerHTML;d_9&&m.set(d_7,d_9);}};d_6('defaultTitle',m,'title');
d_6('defaultOkText',m.children.ok,'text');d_6('defaultCancelText',m.children.cancel,'text');d_$.doMy(m,'wireUi');m.afterWireUi();}}},stateProperties:{d_0:{name:'autoPosition',value:d__,onChange:d_g},
d_D:{name:'cancelText',onChange:d_w},d_I:{name:'currentShieldOpacity',onChange:function(){var m=this;m.isWired&&m.d_r&&m.setNodeOpacity('shield',m.d_I);}},d_E:{name:'defaultCancelText',onChange:d_w},
d_C:{name:'defaultOkText',onChange:d_w},d_v:{name:'defaultTitle',onChange:d_s},d_5:{name:'dismissOnShieldClick',value:d_a},d_4:{name:'height',onChange:[d_f,d_g]},d_K:{name:'hideShieldOnDrag',value:d__
},d_R:{name:'inDrag',value:d_a},d_M:{name:'mooringNode',onChange:d_g},d_T:{name:'nodeToSetDimension',onChange:[d_f,d_g],value:''},d_1:{name:'offsetX',onChange:d_g,value:0},d_2:{name:'offsetY',onChange:d_g,
value:0},d_$_:{name:'okEnabledOnShow',value:d__},d_B:{name:'okText',onChange:d_w},d___:{name:'shieldOpacity',onChange:function(){this.d_L&&this.set({d_I:this.d___});},value:.3},d_L:{name:'shieldShown',
onChange:function(){var m=this;if(m.isWired&&m.d_r){if(m.d_L){if(d_k&&m.getNode('shield')){if(!m.d_5&& !m.getNode('ie6SelectHackShield')){m.flushNodeCache('ie6SelectHackShield');m.injectNodeHtml('shield',
'<iframe src="javascript:\'\'" id="'+m.d_a_+'-ie6SelectHackShield" style="position:absolute; left:0; top:0; width:100%; height:100%; filter:alpha(opacity=0);" frameborder="0" scrolling="no"></iframe>',
'inner bottom');}}m.d_I=d_b;m.set({d_I:m.d___});}else{m.d_G.start({startValue:m.d___,endValue:.001});}}},value:d_a},d_r:{name:'shown',onChange:function(){var m=this;if(m.isWired){if(m.d_r){d_j++;d_F.openDialogs[m.get('name')]=m;
m.d_J=d_a;typeof m.d_$_=='boolean'&&m.children.ok.set({enabled:m.d_$_?'inherit':d_a});m.fire('Before Show');m.setNodeStyle('',{position:'absolute'});var d_b_= -1;for(var d_c_ in d_i)d_b_=Math.max(d_b_,d_c_)
;d_i[m.d_c_= ++d_b_]=1;m.setNodeStyle(['','shield'],{zIndex:4000+d_b_*10});var d_d_=function(d_e_){m.showNode('',!d_e_);m.displayNode('',d_e_);};d_d_(d__);m.updateUiDimsIfShown();m.updateUiPositionIfShown();
d_d_(d_a);}else{d_j--;delete d_F.openDialogs[m.get('name')];delete d_i[m.d_c_];m.fire('Before Hide');}m.set({d_L:m.d_r});m.displayNode(['','shield'],m.d_r);m.fire(m.d_r?'After Show':'After Hide');}},
value:d_a},d_u:{name:'title',onChange:d_s},d_3:{name:'width',onChange:[d_f,d_g]}},staticProperties:{buttonWidgetClass:Uize.Widget.Button,openDialogs:{}}});return d_F;}});
Uize.module({name:'Uize.Widget.Dialog.Picker',required:'Uize.Widget.Button.Checkbox',builder:function(e_$){'use strict';var e__=false,e_a=true;function e_b(m){m.e_c&&m.children.keepOpen.set({selected:m.e_d});
}return e_$.subclass({omegastructor:function(){var m=this;function e_e(e_d){var e_f=m.children.value,e_g=e_f.get('valueDetails'),e_h;m.e_i=e_a;m.fireSubmissionComplete(e_d,Uize.copyInto({value:e_f.valueOf()},
e_g!==e_h?{valueDetails:e_g}:e_h,m.e_j&&e_f.get(m.e_j)));}m.addChild('value',m.e_k).wire('Changed.value',function(){!m.e_l&&setTimeout(function(){e_e(m.e_d);m.e_d||m.set({shown:e__});},0);});m.addChild('keepOpen',Uize.Widget.Button.Checkbox).wire(
'Changed.selected',function(e_m){m.set({e_d:e_m.source.get('selected')})});function e_n(){if(m.e_i){m.children.value.set({value:m.e_o});e_e(e__);}}m.wire({Ok:function(){e_e()},Cancel:e_n,Close:e_n,'Before Show':function(){
m.e_l=e_a;m.children.value.set(m.get((m.e_j||[]).concat('value')));m.e_o=m.e_p;m.e_l=m.e_i=e__;}});m.e_c=e_a;e_b(m);},instanceMethods:{fireSubmissionComplete:function(e_d,e_q){var m=this;m.get('shown')
&&m.fire({name:'Submission Complete',result:e_q,keepOpen:e_d});}},stateProperties:{e_d:{name:'keepOpen',onChange:function(){e_b(this)},value:e__},e_k:'valueWidgetClass',e_r:'picker',e_j:'pipedProperties',
e_p:'value'},set:{shieldOpacity:0.01}});}});
Uize.module({name:'Uize.Widget.Dialog.Picker.Palette',required:['Uize.Dom.Basics','Uize.Util.Coupler'],builder:function(f_$){'use strict';function f__(m){if(m.isWired&&m.f_a){m.setNodeStyle('',{minWidth:m.f_a}
);Uize.Dom.Basics.isIe&&Uize.Dom.Basics.ieMajorVersion<=7&&m.setNodeStyle('valueShell',{minWidth:m.f_a});}}return f_$.subclass({omegastructor:function(){var m=this;Uize.Util.Coupler({instances:[m,m.children.value],
properties:['tentativeValue','tentativeValueDetails']});m.wire('After Show',function(){m.children.value.updateUi();f__(m);});},stateProperties:{f_a:{name:'minWidth',onChange:function(){f__(this)}},f_b:{
name:'tentativeValue',onChange:function(){var m=this;setTimeout(function(){m.fireSubmissionComplete(true,{tentativeValue:m.f_b,tentativeValueDetails:m.f_c});},0);},value:null},f_c:'tentativeValueDetails'
},set:{dismissOnShieldClick:true}});}});
Uize.module({name:'Uize.Widget.Dialog.Picker.Palette.Selector',required:['Uize.Widget.Options.Selector','Uize.Util.Coupler'],builder:function(g_$){'use strict';function g__(g_a){this.fireSubmissionComplete(true,g_a);
}return g_$.subclass({omegastructor:function(){var m=this,g_b=m.children.value;m.wire('After Show',function(){g_b.updateUi()});Uize.Util.Coupler({instances:[m,g_b],properties:['valueNo','tentativeValueNo']
});},stateProperties:{g_c:{name:'tentativeValueNo',onChange:g__,value:-1},g_d:{name:'valueNo',onChange:g__,value:-1},g_e:{name:'values',value:[]}},set:{pipedProperties:['values'],valueWidgetClass:Uize.Widget.Options.Selector,
shieldOpacity:.01}});}});
Uize.module({name:'Zazzle.DroplistPalette',superclass:'Uize.Widget.Dialog.Picker.Palette.Selector',required:'Zazzle.OptionsSelector',builder:function(h_$){'use strict';var h__=h_$.subclass();h__.stateProperties({
h_a:'disabledList',h_b:'hideDisabledOptions'});h__.set({pipedProperties:(h__.get('pipedProperties')||[]).concat('disabledList','hideDisabledOptions'),valueWidgetClass:Zazzle.OptionsSelector});return h__;
}});
Uize.module({name:'Uize.Widget.Picker',superclass:'Uize.Widget.FormElement',required:['Uize.Widget.Button.ValueDisplay','Uize.Dom.Event'],builder:function(e_$){'use strict';var e__=null;return e_$.subclass({
omegastructor:function(){var m=this,e_a=function(){m.pickValue()};m.wire('Changed.focused',function(){m.get('focused')&& !m.e_b&&e_a()});m.addChild('selector',m.e_c||Uize.Widget.Button.ValueDisplay,m.e_d
).wire('Click',e_a);},instanceMethods:{getDialogWidgetProperties:function(){return e__},getMoreDialogEventHandlers:function(){return e__},getMooringNode:function(){return this.children.selector.getNode()||this.getNode('input');
},handleDialogSubmit:function(e_e){var m=this,e_f=e_e.value,e_g=e_e.valueDetails,e_h;m.set(Uize.copy(e_g!==e_h?{valueDetails:e_g}:e_h,e_f!==e_h?({value:e_f!=e__?(m.e_i?m.e_i.call(m,e_f):e_f):''}):e_h
));},pickValue:function(){var m=this;m.set({focused:false});var e_j=m.getMooringNode(),e_k=Uize.Node.getDimensions(e_j);function e_l(){m.e_b&&m.set({focused:true});}m.callInherited('useDialog')({component:m.e_m
?Uize.copyInto(m.e_m,{value:m.get('value')}):e__,widgetClassName:m.e_n,widgetProperties:Uize.copyInto({name:m.e_o||'dialog'+m.e_n.replace(/\./g,''),picker:m,mooringNode:e_j,offsetX:e_k.width>>1,offsetY:e_k.height>>1
},m.getDialogWidgetProperties(),m.get((m.e_p||[]).concat('value','valueDetails'))),submitHandler:function(e_e,e_q){m.handleDialogSubmit(e_e);e_q&&e_q.keepOpen||e_l();},dismissHandler:e_l,widgetEventHandlers:m.getMoreDialogEventHandlers()
});},wireUi:function(){var m=this;if(!m.isWired){m.wireNode('input','mousedown',function(e_q){if(!m.e_b){Uize.Dom.Event.abort(e_q);m.pickValue();}});e_$.doMy(m,'wireUi');}}},stateProperties:{e_b:{name:'allowManualEntry',
value:true},e_m:'dialogComponent',e_o:'dialogName',e_n:'dialogWidgetClass',e_p:'pipedProperties',e_c:'selectorButtonWidgetClass',e_d:'selectorButtonWidgetProperties',e_g:{name:'valueDetails',onChange:function(){
var e_r=this.children.selector;e_r&&e_r.set({valueDetails:this.e_g});}},e_i:'valueFormatter'},set:{value:e__}});}});
Uize.module({name:'Uize.Widget.Picker.Palette',required:'Uize.Node',builder:function(f_$){'use strict';var f__=true,f_a=false,f_b=Uize.Node,f_c=Uize.copyInto;function f_d(m){var f_e=m.getMooringNode();
return f_e?f_b.getDimensions(f_e).width:undefined;}function f_f(m){if(m.isWired){var f_g=m.children.selector.getNode('valueDisplayShell'),f_h=f_b.getDimensions(f_g).width,f_i=parseInt(m.getNodeStyle(f_g,'maxWidth')),
f_j=m.f_j;if(f_j&&f_h<f_j){m.setNodeStyle(f_g,{minWidth:f_i?Math.min(f_j,f_i):f_j});}else if(f_h){m.f_j=f_h;m.palette&&m.palette.set({minWidth:f_d(m)});}}}return f_$.subclass({omegastructor:function(){
var m=this;m.wire('Changed.valueDetails',function(){m.set({f_k:m.get('valueDetails')});f_f(m);});m.f_j=0;},instanceMethods:{getDialogWidgetProperties:function(){var m=this;return f_c(f_$.doMy(m,'getDialogWidgetProperties')||{},
{parent:m,offsetX:'adjacent',offsetY:'adjacent',minWidth:f_d(m)});},getMoreDialogEventHandlers:function(){var m=this,f_l=m.children.selector,f_m;function f_n(f_o){return Uize.pairUp('Changed.'+f_o,function(f_p){
m.palette=f_p.source;var f_q=m.palette.get(f_o);f_q!==f_m&&m.set(f_o,f_q);});}return f_c(f_$.doMy(m,'getMoreDialogEventHandlers')||{},f_n('tentativeValue'),f_n('tentativeValueDetails'),{'Before Show':function(f_p){
var f_r=m.palette=f_p.source;f_l.set({selected:f__});m.set({focused:f__});f_r.set({minWidth:f_d(m)});if(!m.f_s){m.f_s=f__;var f_t=f_r.getNode(),f_u=document.body;if(f_t&&f_t.parentNode!=f_u){var f_v=f_r.getNode('shield');
f_b.remove([f_t,f_v]);f_v&&f_u.appendChild(f_v);f_u.appendChild(f_t);}}},'After Hide':function(){m.set({focused:f_a});f_l.set({selected:f_a});m.palette=f_m;}});},updateUi:function(){var m=this;if(m.isWired){
f_f(m);f_$.doMy(m,'updateUi');}}},stateProperties:{f_w:{name:'syncTentativeValue',value:f__},f_k:{name:'tentativeValueDetails',onChange:function(){var m=this;m.f_w&&m.children.selector.set({valueDetails:m.f_k})
;f_f(m);}}},set:{dialogName:'palette'}});}});
Uize.module({name:'Uize.Widget.FormElement.Select',builder:function(e_$){'use strict';function e__(m){if(m.isWired){var e_a=m.get('value'),e_b=m.e_b,e_c=m.getNode('input');if(e_b&&e_c&&m.get('type')=='select-one'){
var e_d=false;m.e_e= -1;for(var e_e= -1,e_f=e_b.length,e_g=e_c.options,e_h=e_g.length;++e_e<e_f;){var e_i=e_b[e_e],e_j=e_i.name,e_k=e_a==e_j,e_l;if(e_e<e_h)e_l=e_g[e_e];else{e_l=document.createElement('option');
try{e_c.add(e_l,null)}catch(e_m){e_c.add(e_l)}}m.setNodeProperties(e_l,{value:e_j,text:(e_i.valueDetails&&e_i.valueDetails.displayName)||e_i.displayName||e_j,selected:e_k});if(e_k)e_d=true;}for(var e_n=e_h-1;e_n>=e_e;e_n--)
e_c.remove(e_n);if(!(e_d&&e_a)&&e_b.length)m.set({value:e_b[0].name});}}}return e_$.subclass({alphastructor:function(){this.e_b=[]},omegastructor:function(){var m=this;m.wire('Changed.value',function(){
if(m.isWired){var e_c=m.getNode('input');e_c&&m.set({e_e:e_c.selectedIndex});}});},instanceMethods:{wireUi:function(){var m=this;if(!m.isWired){e_$.doMy(m,'wireUi');var e_b=m.e_b||[],e_c=m.getNode('input')
;if(e_b.length)e__(m);else if(e_c&&m.get('type')=='select-one'){for(var e_o=m.get('value'),e_g=e_c.options,e_n= -1,e_h=e_g.length;++e_n<e_h;){var e_l=e_g[e_n],e_p=e_l.value,e_q=e_l.text,e_j=e_p!=null?e_p:e_q
;e_b.push({name:e_j,displayName:e_q});if(e_j==e_o)e_l.selected=true;}(m.e_e=e_c.selectedIndex)> -1&&m.set({value:e_b[m.e_e].name});}}}},stateProperties:{e_e:{name:'valueNo',value:-1},e_b:{name:'values',
onChange:function(){e__(this)}}}});}});
Uize.module({name:'Uize.Widget.mChildBindings',builder:function(){'use strict';var d_$,d__=Uize,d_a=d__.forEach,d_b=d__.isString,d_c=d__.isArray,d_d=d__.isPlainObject,d_e=d__.resolveTransformer,d_f=d__.pairUp,
d_g=/^([<\->]+)?(\w+)(\.(.+))?$/;function d_h(d_i,d_j,d_k,d_l,d_m){var d_n=d_i.get(d_j);d_k.set(d_l,d_m?d_m(d_n,d_i,d_k):d_n);}return function(d_o){d_o.declare({alphastructor:function(){var m=this,d_p=m.addedChildren
;d_a(m.Class.mChildBindings_bindings,function(d_q,d_r){d_p.whenever(d_r,function(){for(var d_s in d_q)d_q[d_s](m);});});},staticMethods:{childBindings:function(d_t){var d_u=this.mChildBindings_bindings;
d_a(d_t,function(d_v,d_w){function d_x(d_y){var d_z=d_b(d_y)&&d_y.match(d_g);if(d_z)d_y={child:d_z[2],property:d_z[4],direction:d_z[1]};if(d_d(d_y)&&d_y.child){var d_r=d_y.child,d_A=d_y.property||d_w,
d_B=d_y.direction||'<->',d_C=d_B.length,d_D=d_y.valueAdapter,d_E=d_D&&d_D.aToB&&d_e(d_D.aToB),d_F=d_D&&d_D.bToA&&d_e(d_D.bToA),d_G=d_B.indexOf('->')==(d_C-2),d_H= !d_B.indexOf('<-'),d_I=d_B.indexOf('<->'),
d_J='Changed.'+d_w,d_K='Changed.'+d_A;(d_u[d_r]=d_u[d_r]||{})[d_w+'/'+d_A]=function(m){var d_L=m.children[d_r],d_M,d_N;function d_O(){d_h(m,d_w,d_L,d_A,d_E)}function d_P(){d_h(d_L,d_A,m,d_w,d_F)}if(d_G){
(d_I||m.get(d_w)!==d_$)&&d_O();m.wire(d_M=d_f(d_J,d_O));}if(d_H){d_P();d_L.wire(d_N=d_f(d_K,d_P));}m.addedChildren.whenever('!'+d_r,function(){if(d_L){d_M&&m.unwire(d_M);d_N&&d_L&&d_L.unwire(d_N);d_L=undefined;
}});};}}d_c(d_v)?d_a(d_v,d_x):d_x(d_v);});}},staticProperties:{mChildBindings_bindings:{}}});};}});
Uize.module({name:'Uize.Widget.Picker.Palette.Selector',required:'Uize.Widget.Button.ValueDisplay.Selector',builder:function(g_$){'use strict';return g_$.subclass({omegastructor:function(){var m=this;function g__(){
var g_a=m.getValueObject();m.set({valueDetails:g_a?g_a.valueDetails:null});}m.wire({'Changed.value':g__,'Changed.values':g__});g__();},instanceMethods:{getValueObject:function(g_b){return Uize.findRecord(this.g_c,{name:g_b==undefined?this+'':g_b});
},getMoreDialogEventHandlers:function(){var m=this;function g_d(g_e){return Uize.pairUp('Changed.'+g_e,function(g_f){var g_g=g_f.source.get(g_e);g_g!==undefined&&m.set(g_e,g_g);});}return Uize.copyInto(
g_$.doMy(m,'getMoreDialogEventHandlers')||{},g_d('valueNo'),g_d('tentativeValueNo'));}},stateProperties:{g_h:{name:'tentativeValueNo',value:-1},g_i:{name:'valueNo',value:-1},g_c:{name:'values',value:[]
}},set:{pipedProperties:['values','valueNo','tentativeValueNo'],selectorButtonWidgetClass:Uize.Widget.Button.ValueDisplay.Selector,dialogWidgetClass:'Uize.Widget.Dialog.Picker.Palette.Selector'}});}});

Uize.module('Zazzle.Picker');
Uize.module('Zazzle.Picker.Palette');
Uize.module({name:'Zazzle.Picker.Palette.Selector',superclass:'Uize.Widget.Picker.Palette.Selector',required:'Zazzle.SelectorValueDisplay.DroplistButton',builder:function(h_$){'use strict';var h__=h_$.subclass();
h__.prototype.getMooringNode=function(){return this.children.selector.getNode('shell')||h_$.doMy(this,'getMooringNode')};h__.stateProperties({h_a:'disabledList',h_b:'hideDisabledOptions'});h__.set({selectorButtonWidgetClass:Zazzle.SelectorValueDisplay.DroplistButton,
dialogWidgetClass:'Zazzle.DroplistPalette',pipedProperties:(h__.get('pipedProperties')||[]).concat('disabledList','hideDisabledOptions')});return h__;}});
Uize.module({name:'Zazzle.Droplist',superclass:'Zazzle.Picker.Palette.Selector',required:['Uize.Widget.FormElement.Select','Uize.Widget.mChildBindings','Uize.Widget.mWeb'],builder:function(i_$){'use strict';
return i_$.subclass({mixins:[Uize.Widget.mWeb,Uize.Widget.mChildBindings],omegastructor:function(){var m=this,i__=function(){var i_a=m.get('values'),i_b=[];if(i_a){for(var i_c= -1;++i_c<i_a.length;){
var i_d=i_a[i_c];i_b.push({name:i_d.name,displayName:i_d.valueDetails?i_d.valueDetails.displayName:null});}}return i_a;},i_e=m.addChild('select',Uize.Widget.FormElement.Select,{values:i__(),value:m+''
}),i_f=m.children.selector,i_g=function(i_h){i_f.children[i_h].wire('Click',function(){m.pickValue()});};m.wire({'Changed.value':function(){i_e.set({value:m+''});m.validate();},'Changed.values':function(){i_e.set({values:i__()})}
});i_g('left');i_g('right');},instanceMethods:{wireUi:function(){var m=this;if(!m.isWired){var i_i=m.children,i_j=i_i.selector.web('shell'),i_k=i_j.length,i_e=i_i.select,i_l=m.web(i_e.getRootNode());
i_j.display();i_l.display(!i_k);if(!i_k&&i_l.length){var i_m=function(){var i_a=m.get('values');i_a&&i_a.length&&m.set({value:i_e.get('value')});};i_e.wire('Changed.value',i_m);i_m();}i_$.doMy(m,'wireUi');
}}},stateProperties:{i_n:'label'},childBindings:{label:'selector.label'}});}});
Uize.module({name:'Zazzle.Menu',superclass:'Zazzle.Droplist',builder:function(j_$){'use strict';var j__=null;return j_$.subclass({omegastructor:function(){var m=this,j_a=m.children.selector,j_b=j_a.children,
j_c=j_b.left,j_d=function(){!m.j_e?m.pickValue():m.fire('Default Action');};j_a.unwire('Click');j_c.unwire('Click');j_a.wire('Click',j_d);j_c.wire('Click',j_d);j_a.wire('Changed.selected',function(){m.j_e&&j_c.set({selected:false})}
);m.wire('Changed.value',function(){var j_f=m.valueOf();if(j_f!=j__){var j_g=m.get('valueDetails');m.fire({name:'Item.'+j_f,itemDetails:j_g});m.fire({name:'Item Selected',item:j_f,itemDetails:j_g});m.set('value',j__);
}});},instanceMethods:{getMooringNode:function(){return this.j_e?this.children.selector.children.right.getNode():j_$.doMy(this,'getMooringNode');},pickValue:function(){var m=this,j_h=m.get('values');
j_h.length==1?m.set('value',j_h[0].name):j_$.doMy(m,'pickValue');}},stateProperties:{j_e:'isSplit'}});}});
Uize.module({name:'Uize.Widget.DirectionalPad',required:['Uize.Widget.Button','Uize.Dom.Classes','Uize.Widget.mWeb'],builder:function(d_$){'use strict';var d__=Uize,d_a=d__.Dom.Classes,d_b={north:1,south:1,east:1,west:1,center:1}
;function d_c(){var m=this;if(m.isWired){if(m.d_d){var d_e,d_f=m.d_f;for(d_e in d_f)m.web(d_e).display(m.d_g=='full'||d_e in d_b);}else{var d_h=m.children;for(var d_i in d_h)m.web(d_h[d_i]).display(m.d_g=='full'||d_i in d_b)
;}}}function d_j(m){var d_h=m.children,d_k=m.get('enabled'),d_l=m.d_l,d_f=m.d_f,d_d=m.d_d;if(typeof d_k=='object'){var d_m=d_k.defaultValue===undefined||d_k.defaultValue,d_n;for(d_n in d_f){var d_o=d_n in d_k;
if(d_o||d_m!==undefined){var d_p=d_o?d_k[d_n]:d_m;if(d_d){d_a.setState(m.getNode(d_n),d_l,d_p);}else d_h[d_n].set({enabled:d_p});}}}else{if(d_d){var d_q;for(d_q in d_f){d_a.setState(m.getNode(d_q),d_l,d_k);
}}else Uize.callOn(d_h,'set',[{enabled:d_k}]);}}return d_$.subclass({mixins:d__.Widget.mWeb,omegastructor:function(){var m=this;if(!m.d_d){var d_r=d__.Widget.Button,d_f=m.d_f;d__.forEach(d_f,function(d_s,d_t){
m.addChild(d_t,d_r).wire('Click',function(d_u){m.fire({name:'Move',direction:d_f[d_t],domEvent:d_u.domEvent});});});}},instanceMethods:{wireUi:function(){var m=this;if(!m.isWired){m.wire('Changed.enabled',function(){d_j(m)});
m.d_d&&d__.forEach(m.d_f,function(d_v,d_e){m.wireNode(d_e,'click',function(d_u){(m.get('enabled')||m.get('enabledInherited'))&&m.fire({name:'Move',direction:d_v,domEvent:d_u});});});d_$.doMy(m,'wireUi');
}},updateUi:function(){var m=this;if(m.isWired){d_$.doMy(m,'updateUi');d_c.call(m);d_j(m);}}},stateProperties:{d_f:{name:'buttonDictionary',value:{north:'North',south:'South',east:'East',west:'West',
northeast:'Northeast',northwest:'Northwest',southeast:'Southeast',southwest:'Southwest',northEdge:'NorthEdge',southEdge:'SouthEdge',eastEdge:'EastEdge',westEdge:'WestEdge',northeastEdge:'NortheastEdge',
southeastEdge:'SoutheastEdge',northwestEdge:'NorthwestEdge',southwestEdge:'SouthwestEdge',center:'Center'}},d_l:'cssClassDisabledButton',d_g:{name:'mode',onChange:d_c,value:'full'},d_d:'useLinks'}});
}});
Uize.module({name:'Zazzle.Validator',requires:['Uize.Comm.Ajax','Uize.Data'],builder:function(){'use strict';var b_$=function(){},b__=null,b_a=true,b_b=false,b_c='string',b_d;function b_e(b_f,b_g,b_h){
(b_h.commObject||new Uize.Comm.Ajax).request({url:[b_h.envUrl+b_f,b_g],returnType:'json',requestMethod:'POST',cache:'memory',callback:b_h.callback})}b_$.alphaNumeric=function(b_i){return typeof b_i==b_c&&/^\w+$/.test(b_i)
};b_$.categoryId=function(b_j){return b_$.zid(b_j,103)};b_$.storeId=function(b_j){return b_$.zid(b_j,196)};b_$.checkbox=function(b_i){return b_i};b_$.comboBoxSelectOne=function(b_k,b_l){return!b_l||b_k.selectedIndex>0
};b_$.email=function(b_m){return(!!b_m&&typeof b_m==b_c&&b_m.length<=50&&/^(([A-Za-z0-9])|(\w[-\w\.\+]*[\w\+]))@([-A-Za-z0-9]+\.)+[A-Za-z]{2,4}$/.test(b_m));};b_$.emailList=function(b_n){return(typeof b_n==b_c&&
/^(([A-Za-z0-9])|(\w[-\w\.\+]*[\w\+]))@([-A-Za-z0-9]+\.)+[A-Za-z]{2,4}[\s,;]*([\s,;]+(([A-Za-z0-9])|(\w[-\w\.\+]*[\w\+]))@([-A-Za-z0-9]+\.)+[A-Za-z]{2,4})*$/.test(b_n));};b_$.handle=function(b_o,b_h){
var b_p=/^\d{6,20}$/.test(b_o);if(b_o&&/^\w{6,20}$/.test(b_o)&& !b_p){b_e('lgn/checkhandle',{ch:b_o},b_h);return b__;}else{if(b_h.callback)b_h.callback({exists:b_b,badFormatting:b_a,allNumeric:b_p});
return b_b;}};b_$.storehandle=function(b_o,b_h){var b_p=/^\d{6,20}$/.test(b_o);if(b_o&&/^\w{6,20}$/.test(b_o)&& !b_p){b_e('store/checkhandle',{gl:b_o},b_h);return b__;}else{if(b_h.callback)b_h.callback({exists:b_b,badFormatting:b_a,allNumeric:b_p})
;return b_b;}};b_$.integer=function(b_i){return(b_i%1)===0};b_$.loginEmail=function(b_m,b_q){return b_$.email(b_m)&&b_$.serviceValidator('lgn/checkloginemail',{em:b_m},this,b_q);};b_$.nonEmpty=function(b_i){return!Uize.isEmpty(b_i)};
b_$.radio=function(b_i){return b_i!=b__&&b_i!=b_d};b_$.state=function(b_r,b_s,b_h){function b_t(b_u){if(b_h.callback)b_h.callback({success:b_u});}var b_v=b_s.toLowerCase();if(!b_s||(b_v!='united states'&&b_v!='canada'&&b_v!='mexico'&&b_v!='spain'&&b_v!='brazil')){
var b_u= !!b_s;b_t(b_u);return b_u;}else{b_e('my/account/validatestate',{state:b_r,country:b_s},b_h);return b__;}};b_$.zid=function(b_j,b_w){if(!b_j)return false;return b_j.length==18&&(new RegExp('^'+b_w+'(\\d{15})$')).test(b_j)
};b_$.serviceValidator=function(b_x,b_g,b_y,b_q){b_y.set({busy:b_a});b_e(b_x,b_g,{commObject:b_y.getInherited('commObject'),envUrl:b_y.getInherited('env').service,callback:function(b_z){b_y.set({busy:b_b});
b_q(b_z.isValid,b_z.warningMessage);}});return b__;};return b_$;}});
Uize.module({name:'Uize.Util.PropertyAdapter',superclass:'Uize.Class',builder:function(c_$){'use strict';function c__(c_a){if(c_a){var c_b=Uize.isArray(c_a);if(c_b||Uize.isInstance(c_a))c_a=c_b?{instance:c_a[0],property:c_a[1]}:{instance:c_a}
;c_a.property||(c_a.property='value');}return c_a;}function c_c(){var m=this,c_d=m.c_d;function c_e(c_f){for(var c_g= -1,c_h=c_d.length,c_i;++c_g<c_h;)(c_i=c_d[c_g]).c_j[c_f](c_i.c_k,c_i.c_l);}if(c_d)
c_d=m.c_d=c_e('unwire');if(m.c_m){var c_n=m.c_n,c_o=m.c_o,c_p=m.c_p,c_q,c_r=function(c_s){var c_t=c_s?c_n:c_o,c_u=c_s?c_o:c_n;if(c_q!=c_u){var c_v=c_t.instance.get(c_t.property);c_q=c_t;c_u.instance.set(
c_u.property,c_p?c_p[c_s?'aToB':'bToA'](c_v):c_v);c_q=null;}};if(c_n&&c_o){c_r(true);c_d=m.c_d=[{c_j:c_n.instance,c_k:'Changed.'+c_n.property,c_l:function(){c_r(true)}},{c_j:c_o.instance,c_k:'Changed.'+c_o.property,
c_l:function(){c_r()}}];c_e('wire');}}}return c_$.subclass({stateProperties:{c_m:{name:'connected',onChange:c_c,value:true},c_n:{name:'propertyA',conformer:c__,onChange:c_c},c_o:{name:'propertyB',conformer:c__,
onChange:c_c},c_p:{name:'valueAdapter',onChange:c_c}}});}});
Uize.module({name:'Zazzle.DroplistPalette.ComboBox',required:['Uize.Widget.FormElement.Text','Uize.Util.PropertyAdapter'],builder:function(i_$){'use strict';var i__={nearest:'round',up:'ceil',down:'floor'
};var i_a=i_$.subclass(null,function(){var m=this,i_b=m.children.value,i_c=m.addChild('input',Uize.Widget.FormElement.Text);Uize.Util.PropertyAdapter({propertyA:i_b,propertyB:i_c,valueAdapter:{aToB:function(i_d){return i_d},
bToA:function(i_d){var i_e=m.i_e,i_f=m.i_f,i_g=Uize.constrain(i_d,m.i_h,m.i_i);if(i_e&&i_e!=1){i_f=i_f&&i__[i_f]?i_f:'nearest';var i_j=function(i_k){return Math.round(i_k*Math.pow(10,14))/Math.pow(10,14)};
i_g=Uize.isNumber(+i_g)?(i_j(Math[i__[i_f]](i_j(i_g/i_e))*i_e)):i_g;}i_d!=i_g&&i_c.set('value',i_g);return i_g;}}});});i_a.stateProperties({i_i:{name:'maxValue',value:-Infinity},i_h:{name:'minValue',
value:Infinity},i_f:{name:'roundDirection',value:'nearest'},i_e:{name:'valueIncrement',value:1}});return i_a;}});
Uize.module({name:'Zazzle.Droplist.ComboBox',builder:function(j_$){'use strict';var j__={nearest:'round',up:'ceil',down:'floor'};var j_a=j_$.subclass(),j_b=j_a.prototype;j_b.valueConformer=function(j_c){
var m=this,j_d=m.j_d,j_e=m.j_e,j_f=Uize.constrain(j_$.doMy(m,'valueConformer',[j_c]),m.j_g,m.j_h);if(j_d&&j_d!=1){j_e=j_e&&j__[j_e]?j_e:'nearest';var j_i=function(j_c){return Math.round(j_c*Math.pow(10,14))/Math.pow(10,14)};
j_f=Uize.isNumber(+j_f)?(j_i(Math[j__[j_e]](j_i(j_f/j_d))*j_d)):j_f;}return j_f;};j_b.wireUi=function(){var m=this;if(!m.isWired){var j_j=m.web('inputLabel');if(m.children.selector.getNode()){m.wire(
'Changed.value',function(){j_j.html(m+'')});m.web('input').hide();j_j.display();}j_$.doMy(m,'wireUi');}};j_a.stateProperties({j_h:{name:'maxValue',value:-Infinity},j_g:{name:'minValue',value:Infinity
},j_e:{name:'roundDirection',value:'nearest'},j_d:{name:'valueIncrement',value:1}});return j_a;}});
Uize.module({name:'Uize.Widget.mHtmlBindings',builder:function(){'use strict';var d_$=Uize,d__=d_$.forEach,d_a=d_$.pairUp,d_b=d_$.applyAll;return function(d_c){d_c.declare({alphastructor:function(){var m=this;
m.whenever('wired',function(){var d_d=m.Class.mHtmlBindings_bindings;for(var d_e in d_d)d_b(m,d_d[d_e],[m.get(d_e)]);});},staticMethods:{htmlBindings:function(d_f){var m=this,d_d=m.mHtmlBindings_bindings
;d__(d_f,function(d_g,d_e){var d_h=d_d[d_e]||(d_d[d_e]=[]);function d_i(d_g){if(typeof d_g=='string'){var d_j=d_g.split(':'),d_k=d_j[0],d_l=d_j[1]||'value';if(d_l=='value'){d_g=function(d_m){this.setNodeValue(
d_k,d_m==null?'':d_m);};}else if(d_l=='html'||d_l=='innerHTML'){d_g=function(d_m){this.setNodeInnerHtml(d_k,d_m==null?'':d_m);};}else if(d_l=='?'){d_g=function(d_m){this.displayNode(d_k,!!d_m)};}else if(d_l=='show'||d_l=='hide'){
d_g=function(d_m){this.setNodeStyle(d_k,{display:!!d_m==(d_l=='show')?'':'none'});};}else if(d_l.charCodeAt(0)==64){var d_n=d_l.slice(1);d_g=function(d_m){var d_o=this.getNode(d_k);d_o&&d_o.setAttribute(d_n,d_m);
};}else if(d_l.slice(0,6)=='style.'){var d_p=d_l.slice(6);d_g=function(d_m){this.setNodeStyle(d_k,d_a(d_p,d_m));};}else{d_g=function(d_m){this.setNodeProperties(d_k,d_a(d_l,d_m));};}d_g.propertyName=d_e;
d_g.nodeName=d_k;d_g.bindingType=d_l;}d_h.push(d_g);m.stateProperties(Uize.pairUp(d_e,{onChange:function(d_q){this.isWired&&d_g.call(this,d_q[d_e]);}}));}d_$.isArray(d_g)?d__(d_g,d_i):d_i(d_g);});}},
staticProperties:{mHtmlBindings_bindings:{}}});};}});
Uize.module({name:'Uize.Widget.mCssBindings',required:'Uize.Widget.mHtmlBindings',builder:function(){'use strict';var d_$,d__=Uize,d_a='mCssBindings_bindings',d_b={},d_c={},d_d={},d_e={},d_f={},d_g={};
function d_h(m){var d_i=m[d_a],d_j=d__.keys(d_i),d_k=d_j.join();m.stateProperties({mCssBindings_rootNodeClasses:{derived:d_g[d_k]||(d_g[d_k]=Function.apply(0,d_j.concat('extraClasses','var '+'m=this,c=m.Class,b=c.'+d_a+
Uize.map(d_j,function(d_l,d_m){return',p'+d_m+'=b[\''+d_l+'\'](m.get(\''+d_l+'\')),c'+d_m+'=p'+d_m+'&&m.cssClass(p'+d_m+')';}).join('')+',e=m.extraClasses'+';'+'return '+'m.cssClass(\'\')'+Uize.map(d_j,
function(d_l,d_m){return'+(c'+d_m+'?\' \'+c'+d_m+':\'\')';}).join('')+'+(e?\' \'+e:\'\')'+';')))}});}return function(d_n){d_n.declare({mixins:Uize.Widget.mHtmlBindings,alphastructor:function(){function d_o(m){
var d_p=m.moduleName;if(d_c[d_p]!=d_b){d_c[d_p]=d_b;m.superclass&&d_o(m.superclass);m.cssModule&&m.cssModule.add();}}d_o(this.Class);},instanceMethods:{rootNodeCssClasses:function(){return this.mCssBindings_rootNodeClasses;
},cssClass:function(d_q){var d_r=this.Class,d_s=d_r.moduleName,d_t=d_f[d_s]||(d_f[d_s]={}),d_u=d_t[d_q];if(!d_u){var d_v=d_e[d_s];if(!d_v){var d_w=d_r,d_x,d_y=[],d_z={};while(d_w){if((d_x=d_r.cssClassPrefix.call(d_w))!=d_$&&
 !d_z[d_x]){d_z[d_x]=1;d_y.unshift('"'+d_x+'"+cs');}d_w=d_w.superclass;}d_v=d_e[d_s]=Function('cn','var cs=(cn||"")&&"-"+cn;return '+d_y.join('+" "+')+';');}d_u=d_t[d_q]=d_v(d_q);}return d_u;}},staticMethods:{
cssClassPrefix:function(){var d_A=this.cssModule,d_B;return(d_A&&(d_d[d_B=d_A.moduleName]||(d_d[d_B]=d_B.replace(/\./g,'_'))));},cssBindings:function(d_C){d__.copyInto(this[d_a],d__.map(d_C,d__.resolveTransformer));
d_h(this);}},staticProperties:{mCssBindings_bindings:{}},stateProperties:{extraClasses:{value:''}},htmlBindings:{mCssBindings_rootNodeClasses:':@class'}});d_h(d_n);};}});
Uize.module({name:'Uize.Widget.mEventBindings',builder:function(){'use strict';var d_$=Uize,d__=d_$.forEach,d_a=d_$.returnTrue,d_b=d_$.isFunction,d_c=d_$.isPlainObject,d_d=d_$.pairUp;return function(d_e){
d_e.declare({alphastructor:function(){var m=this,d_f=m.Class,d_g=d_f.mEventBindings_dom,d_h=m.addedChildren,d_i=m.children,d_j={};function d_k(d_l,d_m,d_n,d_o){return function(d_p){(!d_m.required||d_h.isMet(d_m.required))
&&m.isMet(d_m.fireIf||d_o)&&d_m.handler.call(d_l,d_p,d_n);};}m.whenever('wired',function(){for(var d_q in d_g){for(var d_r=d_g[d_q],d_s=m.getNode(d_q),d_t= -1,d_u=d_r.length;++d_t<d_u;){var d_v=d_r[d_t];
m.wireNode(d_s,d_v[0],d_k(m,d_v[1],d_s,'enabledInherited,!busyInherited'));}}});d__(d_f.mEventBindings_widget,function(d_r,d_w){function d_x(d_y){for(var d_t= -1,d_u=d_r.length;++d_t<d_u;){var d_v=d_r[d_t],
d_z=d_d(d_v[0],d_k(m,d_v[1],d_y,d_a));d_y.wire(d_z);(d_j[d_w]||(d_j[d_w]=[])).push(d_z);}}if(d_w){var d_A;d_h.wire('Changed.'+d_w,function(){if(d_h.get(d_w))d_x(d_A=d_i[d_w]);else{for(var d_B=d_j[d_w],d_C= -1;++d_C<d_B.length;)
d_A.unwire(d_B[d_C]);delete d_j[d_w];d_A=undefined;}});}else d_x(m);});},staticMethods:{eventBindings:function(d_r){var d_D=this,d_E=d_D.mEventBindings_dom,d_F=d_D.mEventBindings_widget,d_G;d__(d_r,function(d_H,d_I){
var d_J=d_I.split(':'),d_K=d_J[0],d_L=(!d_K.indexOf('#')?(d_K=d_K.substr(1)):d_G)!=d_G?d_E:d_F;function d_M(d_m,d_N){if(!d_K&&d_L==d_F&&d_b(d_m)&& !d_N.indexOf('Changed.')){var d_O=d_N.slice(8);d_D.stateProperties(
d_d(d_O,{onChange:function(){var m=this;d_m.call(m,{name:d_N,source:m,newValue:m.get(d_O)},m);}}));}else(d_L[d_K]||(d_L[d_K]=[])).push([d_N,d_c(d_m)?d_m:{handler:d_m}]);}d_J.length>1?d_M(d_H,d_J[1]):d__(d_H,d_M)
;});}},staticProperties:{mEventBindings_dom:{},mEventBindings_widget:{}}});};}});
Uize.module({name:'Uize.Widget.mDeclarativeChildren',builder:function(){'use strict';var d_$=Uize;return function(d__){d__.declare({omegastructor:function(){var m=this,d_a=m.Class.mDeclarativeChildren_children
;for(var d_b in d_a){var d_c=d_a[d_b],d_d=d_c.d_e,d_f=d_c.d_g;if(d_c.d_h){d_f=d_$.copy(d_f.call(m,d_b));d_d=d_f.widgetClass;delete d_f.widgetClass;}d_d&&m.mDeclarativeChildren_getContainer(d_b).addChild(d_b,d_d,d_f)
;}},staticMethods:{children:function(d_i){var d_a=this.mDeclarativeChildren_children;for(var d_b in d_i){var d_j=d_i[d_b],d_k=d_$.isFunction(d_j)&& !d_j.declare,d_l=d_$.isPlainObject(d_j),d_f= !d_k&& !d_l?{widgetClass:d_j}:d_j,
d_d= !d_k&&d_f.widgetClass;if(!d_k&&d_l&&d_d){d_f=d_$.copy(d_f);delete d_f.widgetClass;}d_a[d_b]=d_$.copyInto(d_a[d_b]||{},{d_e:d_d,d_g:d_f,d_h:d_k});}}},staticProperties:{mDeclarativeChildren_children:{}
},instanceMethods:{mDeclarativeChildren_getContainer:function(){return this}}});};}});
Uize.module({name:'Zazzle.Widget.mV2',required:['Uize.Widget.mHtmlBindings','Uize.Widget.mCssBindings','Uize.Widget.mEventBindings','Uize.Widget.mDeclarativeChildren','Uize.Widget.mChildBindings'],builder:function(){
'use strict';var e_$=Uize,e__=e_$.Widget;return function(e_a){e_a.declare({mixins:[e__.mHtmlBindings,e__.mCssBindings,e__.mEventBindings,e__.mDeclarativeChildren,e__.mChildBindings],staticMethods:{cssClassPrefix:function(){return this.v2CssClassPrefix}
}});e_$.copyInto(e_a.nonInheritableStatics,{v2CssClassPrefix:1});};}});
Uize.module({name:'Zazzle.ColorPickerButton',superclass:'Uize.Widget.Button',required:'Zazzle.Widget.mV2',builder:function(e_$){'use strict';return e_$.subclass({mixins:Zazzle.Widget.mV2,stateProperties:{
e__:{name:'color',value:null},e_a:{name:'colorCssBackground',derived:function(color){var e__=color||'cccccc';e__=e__.indexOf('#')?'#'+e__:e__;return e__.toLowerCase()=='#00ffffff'?'url('+this.get('urls').transparentImage+')'
:e__;}},e_b:'size'},set:{classNamingForStates:''},cssBindings:{size:'value'},htmlBindings:{color:'stroke:hide',colorCssBackground:'color:style.background'}});}});
Uize.module({name:'Zazzle.Picker.Color',superclass:'Uize.Widget.Picker',required:['Zazzle.ColorPickerButton','Zazzle.Widget.mV2'],builder:function(f_$){'use strict';return f_$.subclass({mixins:Zazzle.Widget.mV2,
stateProperties:{f__:'dialogMooringNode',f_a:{name:'dialogOffsetX',value:0},f_b:{name:'dialogOffsetY',value:0},f_c:'usedColors'},set:{allowManualEntry:false,pipedProperties:['usedColors'],selectorButtonWidgetClass:Zazzle.ColorPickerButton,
dialogWidgetClass:'Zazzle.Dialog.Picker.Color'},childBindings:{value:'->selector.color'},eventBindings:{'selector:Click':function(){this.set({focused:true})}},instanceMethods:{getMooringNode:function(){return this.f__},
getDialogWidgetProperties:function(){var m=this;return Uize.copyInto(f_$.doMy(m,'getDialogWidgetProperties')||{},{offsetX:m.f_a,offsetY:m.f_b});}}});}});
Uize.module({name:'Uize.Widget.mWebBindings',required:['Uize.Widget.mWeb','Uize.Widget.mHtmlBindings','Uize.Widget.mCssBindings','Uize.Widget.mEventBindings','Uize.Web'],builder:function(){'use strict';
var d_$=Uize.Widget;return function(d__){d__.declare({mixins:[d_$.mWeb,d_$.mHtmlBindings,d_$.mCssBindings,d_$.mEventBindings],instanceMethods:{webSelect:function(d_a){var m=this;return Uize.Web((d_a||'').replace(
/[\.|\#]\w+/g,function(d_b){var d_c=d_b[0];return d_c+m[d_c=='#'?'nodeId':'cssClass'](d_b.substr(1));}),m.getNode());}}});};}});
Uize.module({name:'Zazzle.Widget.mV2Web',required:['Uize.Widget.mWebBindings','Zazzle.Widget.mV2'],builder:function(){'use strict';return function(e_$){e_$.declare({mixins:[Uize.Widget.mWebBindings,Zazzle.Widget.mV2]
});};}});
Uize.module({name:'Zazzle.Widget.V2',required:'Zazzle.Widget.mV2Web',builder:function(e_$){'use strict';return e_$.subclass({mixins:Zazzle.Widget.mV2Web});}});
Uize.module({name:'Zazzle.FontSelector',superclass:'Zazzle.Widget.V2',required:['Zazzle.Droplist','Uize.Web'],builder:function(f_$){'use strict';var f__=Uize,f_a=f__.Web;return f_$.subclass({alphastructor:function(){
this.f_b=[];this.f_c={};},children:{fontCategories:Zazzle.Droplist},stateProperties:{f_d:{name:'mruLength',value:50},f_e:'fontCategory',f_f:'fonts',f_g:'value',f_h:{name:'valueDetails',derived:function(fonts,value){
var f_i=fonts&&f__.findRecord(fonts,{name:value});return f_i&&f_i.valueDetails;}}},childBindings:{fontCategory:'fontCategories.value'},htmlBindings:{fontCategory:function(f_e){var m=this,f_j=f_e==='mru',
f_f=m.f_f,f_k=f_j?f__.lookup(m.f_b):null;f_a('.'+m.cssClass('font')).each(function(f_l,f_m){m.web(f_m).display(f_j?f_f[f_l].name in f_k:f_e in f_f[f_l].valueDetails.attributes);});m.scrollToSelected();
},value:function(f_g){var m=this,f_n=m.cssClass('selected'),f_o=m.f_p(f_g);f_a('.'+f_n).removeClass(f_n);f_o> -1&&m.web(f_o+'').addClass(f_n);}},eventBindings:{':Changed.value':function(){var m=this,
f_b=m.f_b,f_c=m.f_c,f_g=m+'';if(f_g in f_c){for(var f_l=f_b.length;--f_l>=0;){if(f_b[f_l]===f_g){f_b.splice(f_l,1);break;}}}f_b.unshift(f_g);f_c[f_g]=1;if(f_b.length>m.f_d)delete f_c[f_b.pop()];},'#fonts:click':function(f_q){
var m=this,f_r=f_q.target||f_q.srcElement,f_s=f_r.id||f_r.parentElement.id||f_r.parentElement.parentElement.id;f_s&&m.set({f_g:m.f_f[f_s.substring(f_s.lastIndexOf('-')+1)].name});}},instanceMethods:{
f_p:function(f_g){return f__.findRecordNo(this.f_f,{name:f_g||this+''});},scrollToSelected:function(){var m=this,f_o=m.f_p();if(m.isWired&&f_o> -1){setTimeout(function(){var f_t=m.getNode(f_o+''),f_u=f_t?Uize.Node.getCoords(f_t):null
;if(f_u&& !f_u.seen)Uize.require('Uize.Fx.Scroll',function(f_v){f_v.scrollToNode(f_t)});},0);}}}});}});
Uize.module({name:'Zazzle.Picker.Font',superclass:'Uize.Widget.Picker',required:'Zazzle.FontSelector',builder:function(f_$){'use strict';return f_$.subclass({stateProperties:{f__:'dialogMooringNode',f_a:{
name:'dialogOffsetX',value:0},f_b:{name:'dialogOffsetY',value:0}},omegastructor:function(){var m=this;m.wire('Changed.valueDetails',function(){var f_c=m.get('valueDetails');m.children.selector.set({text:f_c?f_c.displayName:'?'})
})},instanceMethods:{getMooringNode:function(){return this.f__},getMoreDialogEventHandlers:function(){return Uize.copyInto(f_$.doMy(this,'getMoreDialogEventHandlers')||{},{'After Show':function(f_d){
f_d.source.children.value.scrollToSelected()}});},getDialogWidgetProperties:function(){var m=this;return Uize.copyInto(f_$.doMy(m,'getDialogWidgetProperties')||{},{valueWidgetClass:Zazzle.FontSelector,
offsetX:m.f_a,offsetY:m.f_b});}}});}});
Uize.module({name:'Zazzle.Checkbox',superclass:'Uize.Widget.FormElement',required:['Zazzle.SelectorValueDisplay','Uize.Util.PropertyAdapter'],builder:function(e_$){var e__=e_$.subclass(null,function(){
var m=this,e_a=Uize.Util.PropertyAdapter,e_b=m.addChild('valueDisplay',m.e_c||Zazzle.SelectorValueDisplay,m.e_d);new e_a({propertyA:{instance:m,property:'value'},propertyB:{instance:e_b,property:'selected'
},valueAdapter:{aToB:function(e_e){return m.valueAtoB(e_e)},bToA:function(e_e){return m.valueBtoA(e_e)}}});new e_a({propertyA:{instance:e_b,property:'valueDetails'},propertyB:{instance:m,property:'label'
},valueAdapter:{aToB:function(e_e){return e_e?e_e.displayName:'';},bToA:function(e_e){return Uize.copyInto({},e_b.get('valueDetails'),{displayName:e_e});}}});e_b.wire({Over:function(){m.set({tentativeValue:true})},
Out:function(){m.set({tentativeValue:m.valueOf()})}});m.wire('Changed.value',function(){m.validate()});}),e_f=e__.prototype;e_f.valueAtoB=function(e_e){return e_e===true||e_e=='true'};e_f.valueBtoA=function(e_e){return e_e};
e_f.updateUi=function(){var m=this;if(m.isWired){m.children.valueDisplay.updateUi();e_$.doMy(m,'updateUi');}};e__.stateProperties({e_g:'label',e_c:'valueDisplayWidgetClass',e_d:{name:'valueDisplayWidgetProperties',
onChange:function(){var e_b=this.children.valueDisplay;e_b&&e_b.set(this.e_d);}}});return e__;}});
Uize.module({name:'ZazzleWww.TemplateDesigner',superclass:'Uize.Widget',required:['Zazzle.Checkbox','Zazzle.Droplist','Uize.Widget.FormElement.Text','Uize.Util.PropertyAdapter'],builder:function(d_$){'use strict';
var d__=true,d_a=false,d_b=null,d_c,d_d=Uize.Util.PropertyAdapter;var d_e=d_$.subclass(d_b,function(){var m=this;new d_d({propertyA:{instance:m,property:'isTemplate'},propertyB:{instance:m.addChild('enable',Zazzle.Checkbox,{value:!!m.d_f}),
property:'value'}});m.children.enable.wire('Click',function(){!!m.children.enable&&m.set({d_g:d_a});});new d_d({propertyA:{instance:m,property:'title'},propertyB:{instance:m.addChild('title',d_$.FormElement.Text,
{maxLength:200,validator:/^[^<>]*$/}),property:'value'}});new d_d({propertyA:{instance:m,property:'urlKey'},propertyB:{instance:m.addChild('urlkey',d_$.FormElement.Text,{maxLength:200,valueConformer:function(d_h){
return(d_h||'').toLowerCase().replace(/[^a-z0-9]/g,'')}}),property:'value'}});new d_d({propertyA:{instance:m,property:'fitMode'},propertyB:{instance:m.addChild('fitMode',Zazzle.Droplist),property:'value'
}});new d_d({propertyA:{instance:m,property:'showOnProductPage'},propertyB:{instance:m.addChild('ppageedit',Zazzle.Checkbox),property:'value'}});}),d_i=d_e.prototype;d_i.wireUi=function(){var m=this;
if(!m.isWired){m.wire('Changed.enabled',function(){var d_j=m.get('enabled');m.children.enable.displayNode('',!!d_j);m.displayNode('body',!!m.get('isTemplate'));});d_$.doMy(m,'wireUi');}};d_i.d_k=function(){
var m=this;if(m.isWired)m.displayNode('body',!!(m.d_f&& !m.d_g));};d_i.d_l=function(){var m=this;m.isWired&&m.children.fitMode.displayNode('shell',m.d_m==='image');};d_i.updateUi=function(){var m=this;
if(m.isWired){m.d_k();m.d_l();d_$.doMy(m,'updateUi');}};d_e.stateProperties({d_n:{name:'fitMode',onChange:function(){this.updateUi()}},d_f:{name:'isTemplate',onChange:function(){var m=this;m.updateUi();
},value:d_a},d_g:{name:'hasMultiple',onChange:function(){var m=this;m.updateUi();m.d_g&&m.set({d_f:d_a});}},d_m:{name:'mode',onChange:function(){this.d_l()},value:d_a},d_o:{name:'showOnProductPage',onChange:function(){this.updateUi()}
},d_p:{name:'title',onChange:function(){this.updateUi()},value:''},d_q:{name:'urlKey',conformer:function(d_h){return(d_h||'').toLowerCase().replace(/[^a-z0-9]/g,'')},onChange:function(){this.updateUi()},
value:''}});return d_e;}});
Uize.module({name:'Uize.Comm',superclass:'Uize.Class',required:'Uize.Url',builder:function(c_$){'use strict';var c__=true,c_a=false,c_b=Uize.clone;function c_c(c_d){return'response'+Uize.capFirstChar(c_d.returnType);
}function c_e(c_d){c_d.url=Uize.Url.resolve(c_d.url);}function c_f(m,c_d){return c_d.cache=='memory'?m.c_g[c_d.url]:null;}function c_h(m,c_d){var c_i=c_d.returnType,c_j=c_d.callback,c_k=c_d.errorCallback,
c_l=c_f(m,c_d);if(c_d.error)return c_k&&c_k(c_d.error);if(c_l){var c_m=c_i=='object';if(c_j){c_d.responseText='';c_d.responseJson=c_d.responseXml=null;if(c_m||c_i=='xml')c_d.responseXml=c_b(c_l.responseXml)
;if(c_m||c_i=='text')c_d.responseText=c_l.responseText;if(c_m||c_i=='json')c_d.responseJson=c_b(c_l.responseJson);}}else{if(c_d.cache=='memory')m.c_g[c_d.url]={responseXml:c_b(c_d.responseXml),responseJson:c_b(c_d.responseJson),
responseText:c_d.responseText};}c_j&&c_j(c_i=='object'?c_d:c_d[c_c(c_d)]);}function c_n(m){m.fire('Request Queue Updated');}return c_$.subclass({alphastructor:function(){var m=this;m.c_o=[];m.c_g={};
m.requestQueue=m.c_o;},instanceMethods:{performRequest:function(c_d,c_p){c_p();},flush:function(){this.c_o.length=0;c_n(this);},flushCache:function(c_q){arguments.length?delete this.c_g[typeof c_q=='string'?c_q:c_q.url]
:(this.c_g={});},request:function(c_d){var m=this;c_e(c_d);if(c_f(m,c_d)){setTimeout(function(){c_h(m,c_d)},0);}else{m.queueRequest(c_d);m.useQueue();}},queueRequest:function(c_d){var m=this;c_e(c_d);
delete c_d.completed;if(!c_d.requestMethod)c_d.requestMethod='GET';if(!c_d.returnType)c_d.returnType='object';if(typeof c_d.cache!='string')c_d.cache=c_d.cache?'memory':'never';m.c_o[c_d.cutToHead?'unshift':'push'](c_d);
c_n(m);},useQueue:function(){var m=this,c_o=m.c_o,c_r=c_o.length;if(!m.c_s&&c_r){m.c_s=c__;var c_t=function(){var c_d;while((c_d=c_o[0])&&(c_f(m,c_d)||c_d.completed))c_h(m,c_o.shift());m.c_s=c_a;c_n(m);
c_o.length&&setTimeout(function(){m.useQueue()},1);},c_u=function(c_d){if(c_f(m,c_d)){c_t();}else{m.fire({name:'Perform Request',request:c_d});m.performRequest(c_d,function(error){c_d.completed=c__;c_d.error=error;
c_t();});}};if(c_r==1){c_u(c_o[0]);}else{var c_v=[];var c_w;for(var c_x= -1;++c_x<c_r;){var c_d=c_o[c_x],c_y=c_d.batchingAgent;if(!c_y||(c_w&&c_y!=c_w)||c_d.cache=='browser'){break;}else{if(!c_w)c_w=c_y
;c_v.push(c_d);}}var c_z=c_v.length;if(c_z>1){var c_A=[];for(var c_x= -1;++c_x<c_z;){var c_d=c_v[c_x];if(!c_f(m,c_d)){c_d.completed=c_a;c_A.push(c_d);}}var c_B=c_A.length;if(c_B){if(c_B==1){c_u(c_A[0]);
}else{var c_C=c_w.buildRequest(c_A);m.fire({name:'Perform Request',request:c_C});m.performRequest(c_C,function(error){var c_D=c_w.responseParser(c_C),c_E=0;for(var c_x= -1;++c_x<c_z;){var c_d=c_v[c_x];
if(c_d.completed!==undefined){c_d[c_c(c_d)]=c_D[c_E++];c_d.completed=c__;c_d.error=error;}}c_t();});}}else{c_t();}}else{c_u(c_o[0]);}}}}},staticMethods:{processArrayAsync:function(c_F,c_G,c_H,c_I){if(!c_I)c_I=1;
var c_J=c_F.length-1,c_K=(c_I>0?0:c_J)-c_I;function c_L(c_M){(c_K+=c_I)>=0&&c_K<=c_J&&c_M!==c_a?c_G(c_F[c_K],c_L,c_K):c_H?c_H(c_J+1):0;}c_L();}}});}});
Uize.module({name:'Uize.Tooltip',required:['Uize.Dom.Basics','Uize.Dom.Pos','Uize.Fade'],builder:function(){'use strict';var b_$=function(){},b__=true,b_a=false,b_b,b_c=Uize.Dom.Basics,b_d=Uize.Dom.Pos,
b_e=Uize.getGuid(),b_f=[],b_g,b_h=16;function b_i(b_j){return b_c.getById(Uize.isFunction(b_j)?b_j():b_j);}function b_k(){b_l()}function b_m(b_n){if(b_n!=b_g){if(b_n){if(b_g){b_o.stop();b_p();}if(!b_n.b_q){
b_c.wire(document.body,'scroll',b_k,b_e);b_c.wire(document.documentElement,'mousemove',b_k,b_e);}b_g=b_n;b_c.setStyle(b_g.b_r,{position:'absolute',zIndex:5000,left:-50000,top:-50000});b_c.display(b_g.b_r);
b_l();}else{b_o.get('duration')>0?b_o.start():b_p();}}else if(b_n){b_o.stop();b_c.setOpacity(b_g.b_r,1);}}b_$.showTooltip=function(b_j,b_s,b_q){if(b_j=b_i(b_j)){if(b_s!==b_a){b_f.push({b_r:b_j,b_q:b_q
});}else{for(var b_t=b_f.length;--b_t> -1;)if(b_f[b_t].b_r==b_j)break;b_t> -1&&b_f.splice(b_t,1);}b_m(b_f[b_f.length-1]);}};b_$.hideTooltip=function(b_j){b_$.showTooltip(b_j,b_a)};var b_l=b_$.positionTooltip=function(b_j,b_u){
b_g&&(b_j===b_b?(b_j=b_g.b_r):b_g.b_r==b_i(b_j))&&b_d.setAbsPos(b_j,b_d.getEventAbsPos(b_u),b_h);};var b_o=b_$.fade=Uize.Fade({duration:0});function b_p(){b_g.b_q||b_c.unwireEventsByOwnerId(b_e);b_c.display(b_g.b_r,b_a);
b_c.setOpacity(b_g.b_r,1);b_g=null;}b_o.wire({'Changed.value':function(){b_c.setOpacity(b_g.b_r,1-b_o.get('progress'))},Done:b_p});return b_$;}});
Uize.module({name:'Uize.Widget.Collection.Dynamic',required:['Uize.Dom.Basics','Uize.Dom.Pos','Uize.Widget.Drag','Uize.Tooltip'],builder:function(e_$){'use strict';var e__=true,e_a=false,e_b=null,e_c=Uize.Dom,
e_d=e_c.Basics,e_e=e_c.Pos,e_f=Uize.Tooltip,e_g={selected:e__};function e_h(m,e_i){var e_j=e_i.properties,e_k=m.makeItemWidgetName(e_j);m.get('items').push(e_j);return m.addItemWidget(e_k,e_i);}function e_l(m){m.fire('Items Changed')};
return e_$.subclass({omegastructor:function(){var m=this;var e_m,e_n,e_o,e_p,e_q,e_r,e_s,e_t,e_u,e_v,e_w,e_x,e_y,e_z,e_A,e_B,e_C,e_D=m.addChild('drag',Uize.Widget.Drag,{nodeMap:{'':e_b}}),e_E=e_a;e_D.wire(
'Changed.inDrag',function(e_F){m.set({e_G:e_F.newValue})});function e_H(e_G){var e_I=e_G?m.e_J:1,e_K=m.getNode('tooltipDragging');for(var e_L=e_p;--e_L> -1;)e_o[e_L].setNodeOpacity('',e_I);e_G&&e_d.setInnerHtml(
e_K,m.localize('draggingToReorder'+(e_p>1?'Plural':'Singular'),{totalItems:e_p}));e_f.showTooltip(e_K,e_G,e__);}e_D.wire({'Drag Start':function(){e_n=m.e_M=='reverse'?1:0;e_m.set({over:e_a});var e_N=e_m.get('selected');
if(!e_N){m.selectAll(e_a);m.e_O&&e_m.set({selected:e__});}if(!m.e_P){if(e_N){for(var e_Q= -1,e_R=m.getSelected(),e_S=e_R.length;++e_Q<e_S;)e_R[e_Q].get('locked')&&e_R[e_Q].set({selected:e_a});e_E= !m.get('totalSelected');
}else if(e_m.get('locked'))e_E=e__;}e_o=e_N?m.getSelected():[e_m];e_p=e_o.length;e_q=[];m.forAll(function(e_T){e_q.push(e_e.getCoords(e_T.getNode()));});var e_U=e_q.length,e_V=e_U-1,e_W=e_q[e_n?e_V:0],
e_X=e_q[e_n?e_V-1:1];e_y=e_V&&e_X.top>=e_W.bottom?1:0;e_B=e_y?'top':'left';e_C=e_y?'height':'width';e_t=e_u=e_v=e_w=e_x=e_b;e_z=m.getNode('insertionMarker');e_A=e_e.getDimensions(e_z);for(var e_Y= -1,
e_Z=e_V?e_X[e_B]-(e_W[e_B]+e_W[e_C]-1):0,e_0=e_Z/2;++e_Y<e_U;){var e_1=e_q[e_Y];e_1[e_B]-=e_0;e_1[e_C]+=e_Z;}e_H(e__);},'Drag Update':function(){var e_2=e_D.eventPos;e_f.positionTooltip(m.getNode('tooltipDragging'),
{pageX:e_2[0],pageY:e_2[1]});function e_3(e_4){return(e_4&&e_e.doRectanglesOverlap(e_4.left,e_4.top,e_4.width,e_4.height,e_2[0],e_2[1],1,1));}if(!e_3(e_s)){e_r=e_s=e_b;m.forAll(function(e_T,e_Y){var e_1=e_q[e_Y];
if(e_3(e_1)){e_r=e_T;e_s=e_1;}return!e_r;});}if(!e_3(e_v)){e_t=e_v=e_b;if(e_r&& !Uize.isIn(e_o,e_r)){var e_5=e_s[e_C],e_6=e_5/2,e_7=e_s[e_B],e_8=e_7+e_6;e_t=e_r;e_u=e_2[e_y]<e_8?0:1;e_v=Uize.clone(e_s);
e_v[e_B]=e_u?e_8:e_7;e_v[e_C]=e_6;}}if(e_t!=e_w||e_u!=e_x){m.displayNode(e_z,!!e_t);if(e_t){var e_9=Uize.clone(e_v);e_9[e_B]+=(e_u?e_v[e_C]:0)-e_A[e_C]/2;delete e_9[e_C];e_e.setCoords(e_z,e_9);}e_w=e_t;
e_x=e_u;}e_D.set({cursor:e_t||e_r?m.e_$_:'not-allowed'});},'Drag Done':function(){if(e_D.get('dragStarted')){e_H(e_a);m.displayNode('insertionMarker',e_a);var e___=function(){if(e_t&& !e_E&& !e_D.get('dragCancelled')){
var e_a_=m.itemWidgets;if(e_u^e_n){var e_b_=e_a_.length,e_c_=Uize.indexIn(e_a_,e_t)+1;e_t=e_b;while(e_c_<e_b_){var e_T=e_a_[e_c_];if(!Uize.isIn(e_o,e_T)){e_t=e_T;break;}else{e_c_++;}}}for(var e_L= -1;++e_L<e_p;)
m.move(e_o[e_L],e_t);m.fire('Items Reordered');e_l(m);}};m.e_d_?m.confirm({state:'warning',title:m.localize('confirmDragToReorderTitle'),message:m.localize('confirmDragToReorderPrompt'),yesHandler:function(){
m.e_d_=e_a;m.fire('Drag Confirmed');e___();},noHandler:function(){e_D.set({dragCancelled:true});}}):e___();}}});m.wire('Item Mouse Down',function(e_F){if(m.e_e_){e_m=e_F.source;e_D.initiate(e_F.domEvent);
}e_F.bubble=e_a;});},instanceMethods:{add:function(e_f_){var m=this,e_g_=[];if(!Uize.isArray(e_f_))e_f_=[e_f_];var e_h_=e_f_.length;if(e_h_){m.e_i_&&m.selectAll(e_a);var e_j_=m.e_i_?e_g:e_b;for(var e_k_= -1;++e_k_<e_h_;)
e_g_.push(e_h(m,Uize.copyInto(e_f_[e_k_],e_j_)));}e_l(m);return e_g_;},getItemWidgetProperties:function(){var m=this;return(Uize.copyInto({previewTooltip:function(){return m.e_e_?m.getNode('tooltipDragToReorder'):e_b}
},m.get('itemWidgetProperties')));},move:function(e_l_,e_m_){var m=this,e_n_=m.e_M=='reverse',e_o_=e_m_?e_m_.getNode():e_b,e_p_=m.get('items'),e_a_=m.itemWidgets,e_q_=e_l_.getNode().parentNode,e_r_=e_l_.getNode(),
e_s_=e_n_?(e_o_?e_o_.nextSibling:e_q_.childNodes[0]):e_o_;e_s_?e_q_.insertBefore(e_r_,e_s_):e_q_.appendChild(e_r_);var e_t_=Uize.indexIn(e_a_,e_l_),e_u_=e_p_[e_t_];e_a_.splice(e_t_,1);e_p_.splice(e_t_,1);
var e_v_=e_m_?Uize.indexIn(e_a_,e_m_):e_a_.length;e_a_.splice(e_v_,0,e_l_);e_p_.splice(e_v_,0,e_u_);},getTemplateHtml:function(e_w_){return e_w_.innerHTML;},processItemTemplate:function(e_w_){var e_x_=this.getTemplateHtml(e_w_);
return Uize.Template&&e_w_.tagName=='SCRIPT'&&e_w_.type=='text/jst'?Uize.Template.compile(e_x_,this.e_y_||{openerToken:'[%',closerToken:'%]'}):function(e_z_){return e_x_.replace(/ITEMWIDGETNAME/g,e_z_.name)}
;},afterWireUi:function(){},wireUi:function(){var m=this;if(!m.isWired){var e_A_=document.body,e_z=m.getNode('insertionMarker'),e_B_={},e_C_=m.getNode('itemTemplate');if(e_z&&e_z.parentNode!=e_A_){e_A_.insertBefore(e_z,e_A_.childNodes[0]);
m.setNodeStyle(e_z,{display:'none',position:'absolute',zIndex:10000,left:'',top:'',right:'',bottom:''});}if(e_C_)e_B_.html=m.processItemTemplate(e_C_);e_B_.built=e_a;e_B_.container=m.getNode('items');
e_B_.insertionMode=m.e_M=='reverse'?'inner top':'inner bottom';m.get('built')||m.forAll(function(e_T){e_T.set(e_B_)});m.set({itemWidgetProperties:Uize.copyInto(e_B_,m.get('itemWidgetProperties')||{})});
e_$.doMy(m,'wireUi');m.afterWireUi();}}},stateProperties:{e_d_:{name:'confirmToDrag',value:e_a},e_$_:{name:'dragCursor',value:'move'},e_P:{name:'dragIgnoresLocked',value:e__},e_e_:{name:'dragToReorder',
value:e_a},e_O:{name:'ensureItemDraggedIsSelected',value:e_a},e_G:'inDrag',e_M:{name:'itemDisplayOrder',value:'normal'},e_i_:{name:'makeNewlyAddedSelected',value:e__},e_J:{name:'itemVestigeOpacity',value:.2
},e_y_:'templateTokens'}});}});
Uize.module({name:'Uize.Widget.CollectionItem',required:['Uize.Node','Uize.Widget.Button','Uize.Dom.Classes','Uize.Dom.Event'],builder:function(d_$){'use strict';var d__=true,d_a=false,d_b;function d_c(m){
if(m.isWired){var d_d=m.d_d;d_d!=d_b&&m.setNodeInnerHtml('title',d_d);}}function d_e(m){if(m.isWired){Uize.Dom.Classes.setState(m.getNode(),['',m.d_f,m.d_g],(m.d_h?2:m.d_i&&1)||0);var d_j=m.d_j,d_k=m.d_k
;typeof d_j=='string'&&typeof d_k=='string'&&Uize.Dom.Classes.setState(m.getNode('preview'),[d_j,d_k],m.d_i);}}function d_l(){d_e(this);}function d_m(m,d_n,d_o){m.fire({name:'Click Selected',domEvent:d_n,forceToggle:d_o});
}function d_p(m){var d_q=m.children.select;d_q.get('state')!='over'&&d_q.set({selected:m.d_h});}return d_$.subclass({alphastructor:function(){this.d_r={};},omegastructor:function(){var m=this;m.addChildButton(
'select',function(d_s){d_m(m,d_s.domEvent,d__)}).set({clickToSelect:d__,clickToDeselect:d__});d_p(m);m.addChildButton('remove',function(){m.fire({name:'Remove',byUser:d__})});},instanceMethods:{addChildButton:Uize.Widget.Button.addChildButton,
updateUi:function(){d_e(this);d_c(this);},wireUi:function(){var m=this;if(!m.isWired){var d_t=m.getNode();if(m.d_u&&d_t)d_t.className=m.d_u;var d_v=m.getNode('previewShell')||'imageLink',d_w=function(d_s){
m.fire({name:'Item Mouse Down',domEvent:d_s,bubble:d__});};var d_x=null;var d_y=function(){var d_s=d_x;d_x=null;if(d_s){d_w(d_s);}};m.wireNode(d_v,{mouseover:function(){m.set({d_i:d__})},mouseout:function(d_s){
d_y(d_s);m.set({d_i:d_a});},touchend:d_w,mousedown:function(d_s){if(typeof d_s.pageX==='undefined'){d_w(d_s);return;}d_x=d_s;Uize.Dom.Event.preventDefault(d_s);},mousemove:function(d_s){if(!d_x)return;
var dx=d_s.pageX-d_x.pageX;var dy=d_s.pageY-d_x.pageY;var d_z=2;if(Math.sqrt(dx*dx+dy*dy)>d_z){d_y(d_s);}},mouseup:function(){d_x=null;}});if(m.d_A)m.wireNode(d_v,'click',function(d_s){var d_o=m.d_A=='Toggle Selected';
d_o||m.d_A=='Select'?d_m(m,d_s,d_o):m.fire({name:'Click Preview',bubble:d__});});d_$.doMy(m,'wireUi');}}},instanceProperties:{isCollectionItem:d__},stateProperties:{d_g:'cssClassActive',d_u:'cssClassBase',
d_j:'cssClassImage',d_k:'cssClassImageOver',d_f:'cssClassOver',d_B:{name:'locked',value:d_a},d_i:{name:'over',onChange:[function(){var m=this;m.isWired&&m.d_C&&Uize.Tooltip&&Uize.Tooltip.showTooltip(m.d_C,m.d_i)
;},d_l],value:d_a},d_A:'previewClickAction',d_C:'previewTooltip',d_r:{name:'properties',onChange:function(){var d_r=this.d_r;d_r&&'title'in d_r&&this.set({d_d:d_r.title});}},d_h:{name:'selected',onChange:[
function(){this.children.select&&d_p(this)},d_l],value:d_a},d_d:{name:'title',onChange:function(){var m=this,d_r=m.d_r;if(d_r){d_r.title=m.d_d;d_c(m);m.fire({name:'Title Changed',bubble:d__,value:m.d_d});
}}}}});}});
Uize.module({name:'ZazzleWww.DesignObjectUi',superclass:'Uize.Widget.CollectionItem',required:['Uize.Widget.Button','Uize.Url','Zazzle.FormElementWarning','Uize.Widget.mWeb'],builder:function(e_$){'use strict';
var e__=true,e_a=false,e_b=null,e_c;var e_d=e_$.subclass(e_b,function(){var m=this;m.e_e('edit',function(){m.fire('Edit')});m.e_e('recolor',function(){m.fire('Recolor')});m.wire({'Changed.locked':function(){m.e_f()},
'Changed.title':function(){m.e_g()}});m.addChild('warning',Zazzle.FormElementWarning,{shown:!!m.e_h,message:m.e_i,focused:!!m.e_j});}),e_k=e_d.prototype;e_d.mixins(Uize.Widget.mWeb);e_k.e_e=Uize.Widget.Button.addChildButton;
e_k.e_l=function(){var m=this;if(m.isWired){var e_m=m.e_m,e_n=m.e_n,e_o=e_m&&e_m.imageid;if(e_o&&e_n==='image'){var e_p=m.getNode('icon'),e_q=Uize.Node.getDimensions(e_p),e_r=e_m&&e_m.getProperty('physwidth'),
e_s=e_r&&e_m.getProperty('state')!='done',e_t=e_r&& !e_s&&e_m.colors;m.setNodeStyle(e_p,{backgroundImage:'url('+Uize.Url.resolve([m.getInherited('env').imageRealview,{action:'getimage',max_dim:Math.min(e_q.height,e_q.width),
id:e_o,square_it:e__},e_s?{pendstitch:1}:{},e_t?{colors:e_t}:{}])+')'});}}};e_k.e_f=function(){var m=this;if(m.isWired){var e_u=m.get('locked'),e_v= !e_u,e_w={enabled:e_v},e_x=m.children;e_x.edit.set(e_w);
e_x.remove.set(e_w);m.web('locked').display(e_u);}};e_k.e_y=function(){var m=this;if(m.isWired){var e_u=m.get('locked'),e_z=m.e_n==='image',e_m=m.e_m,e_A=e_m&&e_m.getProperty('state'),e_B=e_z&& !e_u&&e_A==='done'
;m.setNodeStyle('recolorspan',{display:e_B?'inline':'none'});}};e_k.e_C=function(){var m=this;if(m.isWired)m.setNodeInnerHtml(['displayPrice','displayPrice2'],m.e_D||'');m.e_E();};e_k.e_g=function(){
var m=this;m.isWired&&m.web('title').property('title',m.get('title'));};e_k.e_E=function(){var m=this,e_F= !!m.e_D,e_m=m.e_m,e_z=m.e_n==='image',e_s=e_m&&e_m.getProperty('state')!='done',e_G=e_m&&e_m.getProperty('physwidth'),
e_H=e_m&&e_m.getProperty('physheight'),e_I=e_z&&e_G&&e_H&&((+e_G).toFixed(2)+'" x '+(+e_H).toFixed(2)+'"');m.setNodeInnerHtml(['physicalSize','physicalSize2'],e_I);m.displayNode('stitchInfoShell',e_I&& !e_s);
m.displayNode('conversionInfoShell',e_I&&e_s&&e_F);};e_k.wireUi=function(){var m=this;if(!m.isWired){m.wireNode('',{click:function(e_J){m.fire({name:'Click Selected',domEvent:e_J});e_J.cancelBubble=e__;
return e_a;}});e_$.doMy(m,'wireUi');m.updateUi();}};e_k.updateUi=function(){var m=this;if(m.isWired){m.set({e_D:'100.00'});m.e_l();m.e_f();m.e_y();m.e_g();m.e_E();e_$.doMy(m,'updateUi');}};e_d.stateProperties({
e_h:{name:'hasError',onChange:function(){this.children.warning&&this.children.warning.set({shown:this.e_h})},value:e_a},e_j:{name:'warningIsFocused',onChange:function(){this.children.warning&&this.children.warning.set({focused:this.e_j})
}},e_K:'hotspotTemplate',e_L:'hotspotParent',e_n:'type',e_m:{name:'model',onChange:function(){var m=this,e_m=m.e_m,e_n=e_m instanceof zazzle.rlv.DesignImage?'image':(e_m instanceof zazzle.rlv.DesignText?'text':'')
;m.set({type:e_n,value:(e_n==='image'?e_m.imageid:e_c)||e_m.text})}},e_D:{name:'price',onChange:e_k.e_C},e_M:{name:'value',onChange:function(){this.e_n==='image'&&this.e_l()}},e_i:{name:'warningMessage',
onChange:function(){this.children.warning&&this.children.warning.set({message:this.e_i})}}});return e_d;}});
Uize.module({name:'ZazzleWww.ControlPopupPalette',superclass:'Uize.Widget.PopupPalette',required:'Uize.Widget.Options',builder:function(e_$){'use strict';var e__=e_$.subclass(null,function(){var m=this;
m.e_a=m.addChild('options',Uize.Widget.Options,{idPrefixConstruction:'same as parent',value:m.e_b,values:m.e_c});m.e_a.wire({Click:function(){m.set({shown:!m.get('hideOnClick')});m.fire({name:'Option Clicked',value:m.e_a+''});
},'Changed.value':function(){m.set({e_b:m.e_a+''})},'Changed.values':function(){m.set({values:m.e_a.get('values')})}});m.e_d={};for(var e_e= -1;++e_e<m.e_c.length;)m.e_d[m.e_c[e_e]]=e_e;}),e_f=e__.prototype
;e_f.updateUi=function(){var m=this;e_$.doMy(m,'updateUi');if(m.isWired){var e_g=m.children.selector,e_h=m.e_a.children['option'+m.e_d[m.e_b]],e_i=e_h.getNode('frames'),e_j=e_h.getNode('label');if(e_i){
e_g.setNodeStyle('frames',{background:'url('+e_i.getAttribute('src')+') '+m.e_k});if(e_j)e_g.setNodeInnerHtml('label',e_j.innerHTML);e_g.updateUi();}}};e__.stateProperties({e_b:{name:'value',onChange:function(){
var m=this;if(m.e_a)m.e_a.set({value:m.e_b});m.updateUi();},value:''},e_c:{name:'values',onChange:function(){var m=this;if(m.e_a)m.e_a.set({values:m.e_c});m.updateUi();},value:[]},e_k:{name:'backgroundUrlAttributes',
value:''}});e__.set({positioning:'none'});return e__;}});
Uize.module({name:'Uize.Widget.Population',required:'Uize.Dom.Basics',builder:function(d_$){'use strict';var d__=true,d_a;function d_b(d_c,d_d){return(d_d+d_c.replace(/\\/g,'\\\\').replace(/\n/g,'\\n').replace(
/\r/g,'\\r').replace(new RegExp(d_d,'g'),'\\'+d_d)+d_d);}function d_e(d_f,d_g,d_h,d_i,d_j,d_k,d_l,d_m){var d_n=[],d_o=0,d_p=d_f.length;while(d_o<d_p){var d_q='',d_r='',d_s=d_p,d_t=function(d_u,d_v){var d_w;
for(var d_x in d_u){var d_y=d_u[d_x],d_z=typeof d_y=='object',d_A='('+d_v+' || {}) ['+d_b(d_x,'\'')+']';if(d_z&&typeof d_y.length!='number'){d_t(d_y,d_A);}else{if(d_z){var d_B=d_y[0];d_w=d_f.indexOf(d_B.OPENER_TOKEN,d_o);
if(d_w> -1){var d_C=d_f.indexOf(d_B.CLOSER_TOKEN,d_w+d_B.OPENER_TOKEN.length);if(d_C> -1){d_y=d_f.slice(d_w,d_C+d_B.CLOSER_TOKEN.length);}else{d_w= -1;}}}else{d_w=d_f.indexOf(d_y,d_o);}if(d_w> -1&&d_w<d_s){
d_q=d_A;d_r=d_y;d_s=d_w;}}}};d_t(d_g,'obj');d_n.push({d_D:d_f.slice(d_o,d_s),d_A:d_q,d_E:d_q?Function('obj','return '+d_q):0,d_y:d_r});d_o=d_s;if(d_q)d_o+=d_r.length;}var d_F=[d_l];for(var d_G= -1,d_H=d_h.length;++d_G<d_H;){
var d_I=d_h[d_G];d_F.push(d_j);for(var d_J= -1,d_K=d_n.length;++d_J<d_K;){var d_L=d_n[d_J],d_M=d_L.d_A;d_F.push(d_L.d_D);if(d_M){if(d_M=='(obj || {}) [\'GENERATED_itemNo\']'){d_F.push(d_G);}else{var d_N=d_L.d_E,
d_y=d_N(d_I);if(d_y===d_a)d_y=d_N(d_i);if(d_y!==d_a){if(Uize.isFunction(d_y)){d_y=d_y.call(d_I);}else if(Uize.isArray(d_y)){var d_B=d_N(d_g)[0];d_y=d_e(d_L.d_y.slice(d_B.OPENER_TOKEN.length,d_L.d_y.length-d_B.CLOSER_TOKEN.length
),d_B,d_y,'','','','');}d_F.push(d_y!=null?d_y:d_L.d_y);}}}}d_F.push(d_k);}d_F.push(d_m);return d_F.join('');}return d_$.subclass({alphastructor:function(){this.d_O={d_f:d__,d_h:d__};},instanceMethods:{
getOutput:function(){var m=this;return(d_e(m.d_f,m.d_g,m.d_h,m.d_i,m.d_j,m.d_k,m.d_l,m.d_m));},getHtml:function(){return this.getOutput().replace(/[\t\n\r ]+/g,' ').replace('> <','><');},updateUi:function(){
var m=this,d_O=m.d_O;if(m.isWired&&(d_O.d_f||d_O.d_h)&&m.get('enabledInherited')){var d_P=Uize.Dom.Basics.getById(m.get('container'))||m.getNode('shell')||m.getNode();if(d_P){if(!m.d_f)m.d_f=d_P.innerHTML;
var d_Q=m.getHtml();if(d_Q!==m.d_R)d_P.innerHTML=m.d_R=d_Q;d_O.d_f=d_O.d_h=false;}}}},staticMethods:{makeTemplateItem:function(d_I,d_S){var d_T=function(d_U){return d_U};if(typeof d_S=='string'&&d_S){
d_T=function(d_U){return d_S.replace('KEY',d_U)};}else if(Uize.isFunction(d_S)){d_T=d_S;}function d_V(d_W,d_X,d_Y){for(var d_U in d_W){var d_Z=d_W[d_U];typeof d_Z=='object'?d_V(d_Z,d_X[d_U]={},d_U+'.')
:d_X[d_U]=d_T(d_Y+d_U);}return d_X;}return d_V(d_I,{},'');},replaceByTemplateItem:function(d_0,d_I,d_g){return d_e(d_0,d_g,[d_I],d_a,'','','','');},replaceByToken:function(d_0,d_I,d_S){return d_1.replaceByTemplateItem(d_0,d_I,d_1.makeTemplateItem(d_I,d_S||'{KEY}'));
}},stateProperties:{d_l:{name:'outputPrefix',value:''},d_m:{name:'outputSuffix',value:''},d_j:{name:'itemPrefix',value:''},d_k:{name:'itemSuffix',value:''},d_h:{name:'items',onChange:function(){this.d_O.d_h=d__;
this.updateUi();},value:[]},d_i:'itemPhantomProperties',d_g:'templateItem',d_f:{name:'templateStr',onChange:function(){this.d_O.d_f=d__;this.updateUi();}}}});}});
Uize.module({name:'ZazzleWww.ControlPoptions',superclass:'Uize.Widget',required:['Uize.Widget.Options','Uize.Widget.Population'],builder:function(d_$){'use strict';var d__;var d_a=d_$.subclass(function(){
var m=this;m.d_b=m.addChild('options',Uize.Widget.Options,{idPrefixConstruction:'same as parent',nodeMap:{'':'options'},built:false,html:true});}),d_c=d_a.prototype;d_c.d_d=function(){var m=this,d_e=this.d_e,
d_f=m.d_g[d_e];m.set({d_h:d_f?(typeof d_f.shownIndex=='number'?d_f.shownIndex:d_e): -1});};d_c.d_i=function(){var m=this;if(m.isWired){var d_b=m.children.options,d_j=d_b.children,d_g=m.d_g,d_k=Math.min(d_b.get('values').length,d_g.length)
;for(var d_e= -1;++d_e<d_k;){var d_l=d_g[d_e].shownIndex;if(typeof d_l=='number'){var d_m=d_j['option'+d_e];d_m.displayNode(d_m.getNode('shell')||d_m.getNode('bed')||d_m.getNode(),d_l> -1);}}}};d_c.createOptionButtons=function(){
var m=this;if(m.isWired){var d_g=m.d_g,d_k=d_g.length;if(d_k){m.insertUiHtml();m.d_b.set({values:d_g});m.d_b.set({value:m.d_n});m.set({d_o:d_k});}m.d_i();}};d_c.filter=function(d_p){var m=this,d_g=m.d_g
;if(d_g){var d_o=0;for(var d_e= -1,d_k=d_g.length;++d_e<d_k;){var d_f=d_g[d_e],d_q= !d_p||d_p(d_f);d_f.shownIndex=d_q?d_o: -1;if(d_q)d_o++;}m.d_i();m.set({d_o:d_o});m.d_d();}};d_c.insertUiHtml=function(){
if(this.d_r){this.d_r.wireUi();this.d_r.set({items:this.d_g});}};d_c.updateUi=function(){var m=this;m.isWired&&m.d_s&&m.displayNode('shell',m.d_g&&m.d_g.length>1);d_$.doMy(m,'updateUi');};d_c.wireUi=function(){
var m=this;if(!m.isWired){if(m.d_r)m.d_r.set({container:m.getNode('options')});var d_b=m.d_b,d_t=function(d_u,d_v){var d_g=m.d_g,d_e=d_b.get(d_v);if(d_e== -1)d_e=Uize.findRecordNo(d_g,{name:d_b.get(d_u)})
;m.set(d_v,d_e);if(d_g[d_e])m.set(d_u,d_g[d_e].name);};d_b.wire({Click:m,'Changed.tentativeValue':function(){d_t('tentativeValue','tentativeValueNo')},'Changed.value':function(){d_t('value','valueNo');},
'Option Event':m,'Before Value Change':m});d_$.doMy(m,'wireUi');m.updateUi();m.createOptionButtons();}};var d_w=function(d_x){var m=this,d_n=m.d_n,d_y=d_x.value!==d__,d_z=d_x.values!==d__,d_A=function(){
var d_B= -1,d_g=m.d_g,d_k=d_g.length;for(var d_e= -1;++d_e<d_k;){if(d_n==d_g[d_e].name){d_B=d_e;break;}}var d_C=d_B> -1?d_g[d_B].name:null;m.set({d_D:d_B,d_E:d_C});if(d_B!=m.d_e){m.d_e=d_B;m.d_n=d_C;
if(m.d_b)m.d_b.set({value:d_C});}m.updateUi();};if(d_y&&d_z){m.d_h= -1;m.createOptionButtons();d_A();m.d_d();}else if(d_y){if(!m.d_F){d_A();m.d_d();}}else if(d_z){m.set({d_e:-1,d_D:-1});m.d_F=true;m.set({
d_E:null,d_n:null});m.d_F=false;m.updateUi();m.createOptionButtons();m.d_d();}};d_a.stateProperties({d_s:'hideOnSingleValue',d_G:{name:'isDirty',value:true},d_H:{name:'templateOption',onChange:function(){
var m=this;(m.d_r||(m.d_r=m.population=new Uize.Widget.Population)).set({templateItem:m.d_H});m.d_b.set({built:true,html:null});}},d_E:{name:'tentativeValue',value:null},d_D:{name:'tentativeValueNo',
value:-1},d_n:{name:'value',onChange:d_w,value:null},d_e:{name:'valueNo',value:-1},d_h:{name:'valueShownIndex',value:-1},d_g:{name:'values',onChange:d_w,value:[]},d_o:'valuesShown'});return d_a;}});
Uize.module({name:'Uize.Widget.Bar',required:'Uize.Node',builder:function(d_$){'use strict';var d__,d_a=Uize.Node;function d_b(d_c){var m=this,d_d=m.d_e==d__?m.d_d:m.d_e,d_f=m.d_f;return(Uize.constrain(
d_f?(d_d+Math.round((d_c-d_d)/d_f)*d_f):d_c,d_d,m.d_g==d__?m.d_h:m.d_g));}function d_i(){var m=this;if(m.isWired){var d_j=m.d_j,d_k=d_a.getDimensions(m.d_l),d_m=[d_k.width,d_k.height],d_n=m.d_n,d_o=d_a.getDimensions(d_n),
d_p=[d_o.width,d_o.height],d_q=m.d_q,d_r=d_q(m.d_d),d_s=d_q(m.d_h),d_t=d_q(m.d_c),d_u=Math.round((d_t-d_r)/(d_s-d_r)*(d_m[d_j]-d_p[d_j])),d_v=d_j?d_m[1]-d_p[1]-d_u:d_u,d_w=Math.round(d_v+d_p[d_j]/2),
d_c=Uize.isNumber(m.d_x)?m.d_c.toFixed(m.d_x):m.d_c;if(d_n){d_n.style[d_j?'top':'left']=d_v+'px';d_n.title=d_c;}m.d_y&&d_a.setClipRect(m.d_y,d_j?d_w:0,d_j?d_m[0]:d_w,d_m[1],0);m.d_z&&d_a.setClipRect(
m.d_z,0,d_m[0],d_j?d_w:d_m[1],d_j?0:d_w);m.d_A&&d_a.setInnerHtml(m.d_A,Uize.isNumber(m.d_x)?m.d_c.toFixed(m.d_x):m.d_c);}}function d_B(){var m=this;m.set({d_c:d_b.call(m,m.d_c)});d_i.call(m);}return d_$.subclass({
instanceMethods:{updateUi:d_i,wireUi:function(){var m=this;if(!m.isWired){m.d_l=m.getNode('track');m.d_n=m.getNode('knob');m.d_y=m.getNode('full');m.d_z=m.getNode('empty');m.d_A=m.getNode('value');d_$.doMy(m,'wireUi');
}}},staticProperties:{presets:{}},stateProperties:{d_x:'decimalPlacesToDisplay',d_f:{name:'increments',onChange:d_B,value:1},d_e:{name:'minValidValue',onChange:d_B},d_d:{name:'minValue',onChange:d_B,
value:0},d_g:{name:'maxValidValue',onChange:d_B},d_h:{name:'maxValue',onChange:d_B,value:100},d_C:{name:'orientation',value:'vertical'},d_j:{derived:function(orientation){return orientation=='vertical'?1:0},
onChange:d_i},d_q:{name:'scaleFunc',value:function(d_D){return d_D;}},d_c:{name:'value',conformer:d_b,onChange:d_i,value:0}}});}});
Uize.module({name:'Uize.Widget.Bar.Slider',required:['Uize.Dom.Pos','Uize.Widget.Drag'],builder:function(e_$){'use strict';var e__=Uize.Dom.Pos,e_a=Uize.Widget.Drag;function e_b(){this.e_c=null;this.fire('Value Change After Rest');
}function e_d(e_e){var m=this,e_f= +m;m.set({value:e_e});if(+m!=e_f){if(m.isWired&&m.children.drag.get('inDrag')){if(m.e_c)clearTimeout(m.e_c);m.e_c=setTimeout(function(){e_b.call(m)},m.e_g);}else{e_b.call(m);
}}}return e_$.subclass({instanceMethods:{wireUi:function(){var m=this;if(!m.isWired){var e_h=m.getNode('track'),e_i=m.getNode('knob'),e_j,e_k,e_l,e_m,e_n,e_o=m.get('scaleFunc'),e_p=m.get('valueFunc'),
e_q=function(){e_j=m.get('orientation')=='vertical'?1:0;e_k=e__.getDimensions(e_h);e_l=[e_k.width,e_k.height];e_m=e__.getDimensions(e_i);e_n=[e_m.width,e_m.height];},e_r=function(e_s){var e_t=e_o(m.get('maxValue')),
e_u=e_o(m.get('minValue'));return(e_s*(1-e_j*2)*(e_t-e_u)/(e_l[e_j]-e_n[e_j]));};var e_v=m.addChild('drag',e_a,{node:e_i}),e_w;e_v.wire({'Drag Start':function(){m.set({e_x:true});e_q();e_w= +m;},'Drag Update':
function(){e_d.call(m,e_p(e_o(e_w)+e_r([e_v.eventDeltaPos[0],e_v.eventDeltaPos[1]][e_j])));},'Drag Done':function(){m.set({e_x:false});clearTimeout(m.e_c);m.e_c=null;e_b.call(m);}});var e_y=function(e_z){
if(m.get('enabledInherited')){e_q();var e_A=e__.getCoords(e_h),e_B=e__.getEventAbsPos(e_z);e_d.call(m,e_p(e_o(m.get('minValue'))+e_r((e_j?e_B.top:e_B.left)-e_n[e_j]/2*(1-e_j*2)-(e_j?e_A.bottom:e_A.x)
)));return e_v.initiate(e_z);}};m.wireNode([e_h,'full','empty'],{mousedown:e_y,touchstart:e_y});e_$.doMy(m,'wireUi');}}},staticProperties:{presets:{}},stateProperties:{e_x:{name:'inDrag',value:false},
e_g:{name:'restTime',value:250},e_p:{name:'valueFunc',value:function(e_C){return e_C}}}});}});
Uize.module({name:'Uize.Widget.Bar.Slider.Plus',required:'Uize.Widget.Button',builder:function(f_$){'use strict';return f_$.subclass({omegastructor:function(){var m=this;function f__(f_a,f_b){function f_c(f_d){
return Math.round(f_d*Math.pow(10,14))/Math.pow(10,14);}var f_e=f_b.shiftKey?m.f_f:(f_b.ctrlKey?m.f_g:m.f_h),f_i=m.get('minValue'),f_j=(m.get('maxValue')-f_i)/f_e;m.set({value:(Math[f_a<0?'ceil':'floor'](f_c((m-f_i)/f_j))+f_a)*f_j+f_i});
}m.addChildren({setToMin:{action:function(){m.set({value:m.get('minValue')})}},setToMax:{action:function(){m.set({value:m.get('maxValue')})}},stepToMin:{action:function(f_b){f__(-1,f_b)}},stepToMax:{action:function(f_b){f__(1,f_b)}}
},{widgetClass:Uize.Widget.Button});m.onChange('value',function(f_d){var f_k=m.children,f_l=f_d!=m.get('minValue')?'inherit':false,f_m=f_d!=m.get('maxValue')?'inherit':false;f_k.setToMin.set({enabled:f_l});
f_k.setToMax.set({enabled:f_m});f_k.stepToMin.set({enabled:f_l});f_k.stepToMax.set({enabled:f_m});});},stateProperties:{f_f:{name:'stepsCoarse',value:2},f_g:{name:'stepsFine',value:25},f_h:{name:'stepsNormal',
value:5}}});}});
Uize.module('Uize.Util.Html');
Uize.module({name:'Uize.Util.Html.Entities',builder:function(){'use strict';var d_$={quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,CCedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830
};return Uize.package({entityNameToCharCodeLookup:d_$,charCodeToEntityNameLookup:Uize.reverseLookup(d_$)});}});
Uize.module({name:'Uize.Util.Html.Encode',required:['Uize.Str.Replace','Uize.Util.Html.Entities'],builder:function(){'use strict';var d_$=Uize.Util.Html.Entities.entityNameToCharCodeLookup;return Uize.package({
encode:Uize.Str.Replace.replacerByLookup({'&':'&amp;','"':'&quot;','\'':'&apos;','<':'&lt;','>':'&gt;','\n':'&#10;','\r':'&#13;'}),decode:function(d__){return((d__+='')&&d__.replace(/&(?:(\w+)|#(\d{1,4}|x[0-9a-fA-F]{1,4}));/g,
function(d_a,d_b,d_c){return String.fromCharCode(d_c? +(d_c.charAt(0)=='x'?('0'+d_c):d_c):d_$[d_b]);}));}});}});
Uize.module({name:'Uize.Xml',required:'Uize.Util.Html.Encode',builder:function(){'use strict';var b_$={},b__=Uize.Util.Html.Encode,b_a=b__.encode,b_b=b__.decode,b_c=/\s*([^=\s]+)\s*(=\s*("([^"]*)"|'([^']*)'|(\S*))|$|)/g
;function b_d(b_e){return{upper:'toUpperCase',lower:'toLowerCase'}[b_e.nameCase]||'valueOf';}return Uize.package({toAttributeValue:b_a,fromAttributeValue:b_b,fromAttributes:function(b_f,b_e){var b_g={};
if(b_f){b_e=b_e||b_$;var b_h=b_d(b_e),b_i;while(b_i=b_c.exec(b_f))b_g[b_i[1][b_h]()]=b_b(b_i[4]||b_i[5]||b_i[6]||'');}return b_g;},toAttributes:function(b_j,b_e){var b_h=b_d(b_e=b_e||b_$),b_k=b_e.quoteChar||'"',
b_l='='+b_k,b_m=[];if(b_h!='valueOf'){var b_n=b_j;b_j={};for(var b_o in b_n)b_j[b_o[b_h]()]=b_n[b_o];}for(var b_o in b_j)b_o&&b_m.push(b_o+b_l+b_a(b_j[b_o])+b_k);return b_m.join(' ');}});}});
Uize.module({name:'Zazzle.DesignModel',builder:function(b_$){Uize.global().zazzle=(function(){var b__={rlv:{DesignState:{SYNCHRONIZED:1,DIRTY:2,NEEDSYNCH:3,WAITINGFORSERVER:4,ERROR:5},DesignObjectSpace:{
OBJECT:1,DESIGN:2,SCREEN:3},DesignTextAlign:{CENTER:1,LEADING:2,TRAILING:3},DesignTextParagraphAlign:{CENTER:1,NEAR:2,FAR:3},DesignTextScaleMode:{FIT:1,NONE:2,USER:3},DesignTextPath:{HORZ:1,VERT:2,ARC:3,
RARC:4},DesignImageType:{JPG:1,PNG:2,ZTR:3,OFM:4}},ajax:{},util:{}};return b__;}());(function(){var i;var xhr;var options=[function(){return new XMLHttpRequest();},function(){return new ActiveXObject('Microsoft.XMLHTTP');
}];for(i=0;i<options.length;i++){try{xhr=options[i]();zazzle.ajax.create=options[i];}catch(e){}}}());(function(){if(!zazzle.ajax.create){return;}function isSuccess(transport){var status=transport.status;
return(status>=200&&status<300)||status===304;}function getResponse(transport){var result;var index;var contentType=transport.getResponseHeader('Content-Type');index=contentType.indexOf(';');if(index>0){
contentType=contentType.substring(0,index);}switch(contentType){case'text/html':result=transport.responseXML;break;case'text/javascript':case'text/json':case'application/json':result=(new Function('var a=['+transport.responseText+'];return a.pop()'))();
break;default:result=transport.responseText;}return result;}function buildQueryString(data){var name;var value;var pair;var pairs=[];for(name in data){if(data.hasOwnProperty(name)){value=data[name].toString();
pair=encodeURIComponent(name)+'='+encodeURIComponent(value);pairs.push(pair);}}return pairs.join('&');}zazzle.ajax.buildQueryString=buildQueryString;function encodeFormData(data){var name;var value;var pair;
var regexp=/%20/g;var pairs=[];for(name in data){if(data.hasOwnProperty(name)){value=data[name].toString();pair=encodeURIComponent(name).replace(regexp,'+')+'='+encodeURIComponent(value).replace(regexp,'+');
pairs.push(pair);}}return pairs.join('&');}zazzle.ajax.encodeFormData=encodeFormData;function post(url,data,callback,errorHandler,token){var contentType;var sendData=data;var transport=zazzle.ajax.create();
transport.onreadystatechange=function(){if(transport.readyState===4){if(isSuccess(transport)){callback(getResponse(transport),token);}else{if(errorHandler){errorHandler(transport.status,transport.statusText,token);
}else{callback(null,token);}}}};transport.open('POST',url);if(typeof data==='string'){contentType='text/xml';sendData=data;}else{contentType='application/x-www-form-urlencoded';sendData=zazzle.ajax.encodeFormData(data);
}transport.setRequestHeader('Content-Type',contentType);transport.send(sendData);}zazzle.ajax.post=post;}());(function(){var nextSequenceId=1;var defeatStrCount=1;var entitiesToEncodeMap={'&':'&amp;',
'"':'&quot;','\'':'&apos;','<':'&lt;','>':'&gt;','\n':'&#10;','\r':'&#13;'};function getEncodedCharacter(val){return entitiesToEncodeMap[val];}function xmlSafe(str,inAttribute){var result=str;if(str&&typeof str==='string'){
if(inAttribute){result=str.replace(/[&\n\r"'<>]/g,getEncodedCharacter);}else{result=str.replace(/[&<>]/g,getEncodedCharacter);}}return result;}zazzle.util.xmlSafe=xmlSafe;function xmlStartElement(name,attribs,selfClose){
var aName;var aValue;var segment='<'+name;if(attribs&&(typeof attribs==='object')){for(aName in attribs){if(attribs.hasOwnProperty(aName)){aValue=attribs[aName];segment=segment+' '+aName+'="'+zazzle.util.xmlSafe(aValue,true)+'"';
}}}if(selfClose){segment=segment+'/>';}else{segment=segment+'>';}return segment;}zazzle.util.xmlStartElement=xmlStartElement;function xmlEndElement(name){var result='</'+name+'>';return result;}zazzle.util.xmlEndElement=xmlEndElement;
function getNextSequenceId(){var result=nextSequenceId;nextSequenceId=nextSequenceId+1;return result;}zazzle.util.getNextSequenceId=getNextSequenceId;function isArray(val){return val&&typeof val==='object'&&val.constructor===Array;
}zazzle.util.isArray=isArray;function defeatCacheStr(){var now=new Date();var result=String(now.valueOf())+String(Math.round(Math.random()*1000))+String(defeatStrCount++);return result;}zazzle.util.defeatCacheStr=defeatCacheStr;
function matrixDeterminant(matrixA){var det=0.0;if(isArray(matrixA)&&(matrixA.length===6)){det=matrixA[0]*matrixA[3];det-=matrixA[1]*matrixA[2];}return det;}zazzle.util.matrixDeterminant=matrixDeterminant;
function matrixInverse(matrixA){var resultMatrix=[1.0,0.0,0.0,1.0,0.0,0.0];var temp;var det;var a;var b;var c;var d;var e;var f;if(isArray(matrixA)&&(matrixA.length===6)){det=matrixDeterminant(matrixA);
temp=det;if(det<0.0){temp= -det;}if(temp>0.0001){a=matrixA[3];b= -matrixA[2];c=(matrixA[2]*matrixA[5])-(matrixA[3]*matrixA[4]);d= -matrixA[1];e=matrixA[0];f=(matrixA[4]*matrixA[1])-(matrixA[0]*matrixA[5]);
resultMatrix[0]=a/det;resultMatrix[1]=d/det;resultMatrix[2]=b/det;resultMatrix[3]=e/det;resultMatrix[4]=c/det;resultMatrix[5]=f/det;}}return resultMatrix;}zazzle.util.matrixInverse=matrixInverse;}());
zazzle.rlv.DesignOptions=function DesignOptions(opts){if(!(this instanceof zazzle.rlv.DesignOptions)){return new zazzle.rlv.DesignOptions(opts);}var aName;var aValue;if(opts&&typeof opts==='object'){
for(aName in opts){if(opts.hasOwnProperty(aName)){aValue=opts[aName];this[aName]=aValue;}}}};zazzle.rlv.DesignViewOptions=function DesignViewOptions(opts){if(!(this instanceof zazzle.rlv.DesignViewOptions)){
return new zazzle.rlv.DesignViewOptions(opts);}if(opts&&typeof opts==='object'){if(opts.max_dim){this.max_dim=opts.max_dim;}if(opts.rvtype){this.rvtype=opts.rvtype;}if(opts.view){this.view=opts.view;
}if(opts.context){this.context=opts.context;}}this.mergeOpts=function(opts){if(opts.max_dim&& !(this.max_dim)){this.max_dim=opts.max_dim;}if(opts.rvtype&& !(this.rvtype)){this.rvtype=opts.rvtype;}if(opts.context&& !(this.context)){
this.context=opts.context;}};};zazzle.rlv.ZDesign=function ZDesign(opts){if(!(this instanceof zazzle.rlv.ZDesign)){return new zazzle.rlv.ZDesign(opts);}var self=this;this.opts=new zazzle.rlv.DesignOptions(opts);
this.serverRequest='';this.serverResult={};this.missingAreaGroups=[];var editUrl='/rlv/svc/edit';var state=zazzle.rlv.DesignState.DIRTY;var areas=[];var views=[];var activeView;var errorCode=0;var errorMessage='';
var errorCategory='';var designId;var attributes={};var constraints=[];var templates=[];var undoable=false;var redoable=false;var canpaste=false;var canpublish=false;var usedesignspace=true;var registeredListeners=[];
var pendingActions=[];var properties=[];if(this.opts.id){designId=this.opts.id;}this.getOpts=function(){return this.opts;};this.useDesignSpace=function(val){if(typeof val==='boolean'){usedesignspace=val;
}};this.getView=function(options){var result;var k;for(k=0;k<views.length;k++){if(views[k].matches(options)){result=views[k];break;}}if(result){result.mergeOptions(options);}else{if((!options.max_dim)&&this.opts.max_dim&&(typeof this.opts.max_dim==='number')){
options.max_dim=this.opts.max_dim;}result=new zazzle.rlv.DesignView(this,options);views.push(result);this.setDirty();}return result;};this.hasDefaultAreaForView=function(view){var result=false;var viewname;
var areaName;var anArea;var k;if(view instanceof zazzle.rlv.DesignView){viewname=view.getOpts().view;for(k=0;k<areas.length;k++){anArea=areas[k];areaName=anArea.getName();}for(k=0;k<areas.length;k++){
if(areas[k].isDefaultForView(viewname)){result=true;break;}}}return result;};this.getDefaultAreaForView=function(view){var result;var viewname;var k;if(view instanceof zazzle.rlv.DesignView){viewname=view.getOpts().view;
for(k=0;k<areas.length;k++){if(areas[k].isDefaultForView(viewname)){result=areas[k];break;}}}return result;};this.setActiveView=function(view){if(view instanceof zazzle.rlv.DesignView){if(view!==activeView){
view.setNeedsAreaRefresh(true);this.setDirty();}activeView=view;}};this.forceReturnAllAreas=function(){if(activeView){activeView.setNeedsAreaRefresh(true);activeView.setNeedsGridRefresh(true);}};this.getArea=function(name){
var result;var k;for(k=0;k<areas.length;k++){if(areas[k].getName()===name){result=areas[k];break;}}if(!result){if(name){result=new zazzle.rlv.DesignArea(this,name,'','');areas.push(result);}}return result;
};this.removeArea=function(name){var area;var k;if(name){for(k=0;k<areas.length;k++){area=areas[k];if(area.getName()===name){area.markDeleted();}}}};this.addDesignListener=function(handler){var result;
var register;if(handler&&typeof handler==='function'){register={};register.seq=zazzle.util.getNextSequenceId();register.callback=handler;registeredListeners.push(register);result=new zazzle.rlv.DesignListener(register.seq);
}return result;};this.removeDesignListener=function(listener){var seq;var k;var index;var arr;if(listener&&(listener instanceof zazzle.rlv.DesignListener)){seq=listener.getSequenceId();index= -1;for(k=0;k<registeredListeners.length;k++){
if(registeredListeners[k].seq===seq){index=k;break;}}if(index>=0){arr=[];for(k=0;k<registeredListeners.length;k++){if(k!==index){arr.push(registeredListeners[k]);}}registeredListeners=arr;}}};this.getState=function(){
return state;};this.getErrorCode=function(){return errorCode;};this.getErrorMessage=function(){return errorMessage;};this.getErrorCategory=function(){return errorCategory;};this.getId=function(){return designId;
};this.getAreas=function(){return areas;};this.getAttributes=function(){return attributes;};this.getConstraints=function(){return constraints;};this.getTemplates=function(){return templates;};this.isUndoable=function(){
return undoable;};this.isRedoable=function(){return redoable;};this.canPaste=function(){return canpaste;};this.canPublish=function(){return canpublish;};this.setProperty=function(name,value){var k;var prop;
var found=false;for(k=0;k<properties.length;k++){prop=properties[k];if(prop&&(prop instanceof zazzle.rlv.DesignProperty)){if(prop.name===name){found=true;break;}}}if(found){prop.value=value;prop.changed=true;
}else{prop=new zazzle.rlv.DesignProperty(name,value);prop.changed=true;properties.push(prop);}};function notifyListeners(type,success,design,view){var k;var listener;var event=new zazzle.rlv.DesignEvent(type,success,design,view);
for(k=0;k<registeredListeners.length;k++){listener=registeredListeners[k];listener.callback(event);}}function parseAttributeString(attr){var result={};var pieces;var keyval;var k;var key;var val;if(typeof attr==='string'){
pieces=attr.split('&');for(k=0;k<pieces.length;k++){keyval=pieces[k].split('=');if(keyval&&keyval.length>1){key=keyval[0];val=keyval[1];result[key]=val;}}}return result;}function ajaxCallback(response,design){
var k;var rsparea;var area;var view;var viewname;var areaNames=[];var rspConstraint;var constraint;var rspTemplate;var template;if(localStorage&&localStorage.doublecheckTest){console.log("DesignModel is loading data",response);
}if(response&&typeof response==='object'&&design&&(design instanceof zazzle.rlv.ZDesign)){design.serverResult=response;if('undo'in response){undoable=response.undo;}if('paste'in response){canpaste=response.paste;
}if('redo'in response){redoable=response.redo;}if('canpublish'in response){canpublish=response.canpublish;}if(response.design){if(response.design.id){designId=response.design.id;}if(response.design.attributes){
attributes=parseAttributeString(response.design.attributes);}constraints=[];if(zazzle.util.isArray(response.design.constraints)){for(k=0;k<response.design.constraints.length;k++){rspConstraint=response.design.constraints[k];
if(rspConstraint&&typeof rspConstraint==='object'){constraint=new zazzle.rlv.DesignConstraint(rspConstraint.area,rspConstraint.level,rspConstraint.objects,rspConstraint.type);constraints.push(constraint);
}}}templates=[];if(zazzle.util.isArray(response.design.templates)){for(k=0;k<response.design.templates.length;k++){rspTemplate=response.design.templates[k];if(rspTemplate&&typeof rspTemplate==='object'){
template=new zazzle.rlv.DesignTemplate(rspTemplate);templates.push(template);}}}if(attributes.view){view=design.getView({view:attributes.view});if(view){view.setNeedsAreaRefresh(false);if(zazzle.util.isArray(response.design.wireframes)){
view.handleResponseWireframes(response.design.wireframes);}}}for(k=0;k<areas.length;k++){areas[k].setMarked(true);}if(response.design.areas){for(k=0;k<response.design.areas.length;k++){areaNames.push(response.design.areas[k].name);
}for(k=0;k<response.design.areas.length;k++){rsparea=response.design.areas[k];area=null;if(rsparea&&rsparea.name){area=design.getArea(rsparea.name);}if(area&&area.handleServerResponse){area.setMarked(false);
if(rsparea.isdefault){if(view){viewname=view.getViewName();area.setAsDefaultForView(viewname);}}area.handleServerResponse(rsparea,view);}}}if(response.design.missingAreaGroups){self.missingAreaGroups=response.design.missingAreaGroups;
}for(k=0;k<areas.length;k++){area=areas[k];if(area&&area.getMarked()){area.handleAreaIsNowEmpty();}}state=zazzle.rlv.DesignState.SYNCHRONIZED;notifyListeners('sync',true,design,view);}else{if(response.Code){
errorCode=response.Code;}else{errorCode= -1;}if(response.Message){errorMessage=response.Message;}else{errorMessage='UNKNOWN';}if(response.Category){errorCategory=response.Category;}else{errorCategory='UNKNOWN';
}state=zazzle.rlv.DesignState.ERROR;notifyListeners('error',false,design,null);}}}function ajaxErrorCallback(err,errmsg,design){if(err){errorCode=err;}else{errorCode= -1;}if(errmsg){errorMessage=errmsg;
}else{errorMessage='UNKNOWN';}state=zazzle.rlv.DesignState.ERROR;notifyListeners('error',false,design);}this.update=function(){var data;var url;if(state===zazzle.rlv.DesignState.DIRTY){data=this.buildServerRequest();
url=editUrl+'?output=js';zazzle.ajax.post(url,data,ajaxCallback,ajaxErrorCallback,this);state=zazzle.rlv.DesignState.WAITINGFORSERVER;}};this.updateWithResponse=function(response){if(state===zazzle.rlv.DesignState.DIRTY){
ajaxCallback(response,this);}};this.undo=function(){if(this.isUndoable()){var action={};var attribs={};action.verb='undo';action.attribs=attribs;pendingActions.push(action);this.setDirty();}};this.save=function(){
var action={};var attribs={};action.verb='save';action.attribs=attribs;pendingActions.push(action);this.setDirty();};this.redo=function(){if(this.isRedoable()){var action={};var attribs={};action.verb='redo';
action.attribs=attribs;pendingActions.push(action);this.setDirty();}};this.finish=function(forsale){var action={};var attribs={};action.verb='finish';if(forsale){attribs.forsale='true';}action.attribs=attribs;
pendingActions.push(action);this.setDirty();};this.buildParamAttribs=function(){var attribs={};var viewopts;var aName;var aValue;var prop;var k;if(designId){attribs.id=designId;}else{if(this.opts.pid){
attribs.pid=this.opts.pid;}if(this.opts.pdt){attribs.pdt=this.opts.pdt;}}if(this.opts.pending){attribs.pending=this.opts.pending;}if(activeView){viewopts=activeView.getOpts();if(viewopts.max_dim){attribs.max_dim=viewopts.max_dim;
}if(viewopts.rvtype){attribs.rvtype=viewopts.rvtype;}if(viewopts.view){attribs.view=viewopts.view;}if(viewopts.context){attribs.context=viewopts.context;}if(activeView.needsAreaRefresh()){attribs.returnallareas='true';
}else{attribs.returnallareas='false';}}else{attribs.rvtype='none';if(areas.length===0){attribs.returnallareas='true';attribs.returngrids='true';}}for(aName in this.opts){if(this.opts.hasOwnProperty(aName)){
if((aName!=='id')&&(aName!=='pid')&&(aName!=='pending')&&(aName!=='max_dim')&&(aName!=='context')&&(aName!=='rvtype')&&(aName!=='returngrids')&&(aName!=='returnallareas')){aValue=this.opts[aName];attribs[aName]=aValue;
}}}if(usedesignspace&&(attribs.rvtype!=='none')){attribs.returngrids='false';attribs.coordspace='design';if(activeView){if(activeView.needsGridRefresh()){attribs.returngrids='true';attribs.returnallareas='true';
}}}for(k=0;k<properties.length;k++){prop=properties[k];aName=prop.name;if((aName!=='id')&&(aName!=='pid')&&(aName!=='pending')&&(aName!=='max_dim')&&(aName!=='context')&&(aName!=='rvtype')&&(aName!=='returngrids')&&(aName!=='returnallareas')){
aValue=prop.value;attribs[aName]=aValue;}}properties=[];return attribs;};this.buildServerRequest=function(){var k;var area;var action;var attribs;var req=zazzle.util.xmlStartElement('edit',{version:1});
attribs=this.buildParamAttribs();req=req+zazzle.util.xmlStartElement('params',attribs,true);for(k=0;k<areas.length;k++){area=areas[k];req=req+area.buildServerRequest();}for(k=0;k<pendingActions.length;k++){
action=pendingActions[k];if(action){req=req+zazzle.util.xmlStartElement(action.verb,action.attribs,true);}}pendingActions=[];req=req+zazzle.util.xmlEndElement('edit');this.serverRequest=req;return req;
};this.setDirty=function(){if((state===zazzle.rlv.DesignState.SYNCHRONIZED)||(state===zazzle.rlv.DesignState.ERROR)){state=zazzle.rlv.DesignState.DIRTY;}};};zazzle.rlv.createZDesign=function(opts){var that=new zazzle.rlv.ZDesign(opts);
return that;};zazzle.rlv.DesignView=function DesignView(design,opts){if(!(this instanceof zazzle.rlv.DesignView)){return new zazzle.rlv.DesignView(design,opts);}this.design=design;this.opts=new zazzle.rlv.DesignViewOptions(opts);
var viewUrl='/rlv/svc/view';var needsSync=false;var defaultArea;var viewAreas=[];var viewAnnotations=[];var needsAreaRefresh=true;var needsGridRefresh=true;this.getOpts=function(){return this.opts;};
this.getViewName=function(){var name='';if(this.opts&&this.opts.view){name=this.opts.view;}return name;};this.getZDesign=function(){return this.design;};this.needsSync=function(){return needsSync;};this.needsAreaRefresh=function(){
return needsAreaRefresh;};this.setNeedsAreaRefresh=function(val){if(typeof val==='boolean'){needsAreaRefresh=val;}};this.needsGridRefresh=function(){return needsGridRefresh;};this.setNeedsGridRefresh=function(val){
if(typeof val==='boolean'){needsGridRefresh=val;}};this.matches=function(options){var result=false;if(typeof options==='object'){if(options.view===this.opts.view){result=true;}}return result;};this.mergeOptions=function(options){
if(this.opts&&options){this.opts.mergeOpts(options);}};this.setSync=function(val){if(typeof val==='boolean'){needsSync=val;}};this.sync=function(){};this.getDefaultArea=function(){if(!defaultArea){defaultArea=design.getDefaultAreaForView(this);
}return defaultArea;};this.getViewArea=function(name){var result;var k;var area;for(k=0;k<viewAreas.length;k++){if(viewAreas[k].getName()===name){result=viewAreas[k];break;}}if(!result){area=this.design.getArea(name);
result=new zazzle.rlv.DesignViewArea(this,area);viewAreas.push(result);}return result;};this.getViewAreas=function(){return viewAreas;};this.getAnnotations=function(){return viewAnnotations;};this.getJpegImageSource=function(imagesize){
var result;var attribs=this.buildParamAttribs();attribs.image_type='jpg';if(imagesize&&typeof imagesize==='number'){attribs.max_dim=imagesize;}result=viewUrl+'?'+zazzle.ajax.buildQueryString(attribs);
result=result+'&rnd='+zazzle.util.defeatCacheStr();return result;};this.getPngImageSource=function(imagesize){var result;var attribs=this.buildParamAttribs();attribs.image_type='png';if(imagesize&&typeof imagesize==='number'){
attribs.max_dim=imagesize;}result=viewUrl+'?'+zazzle.ajax.buildQueryString(attribs);result=result+'&rnd='+zazzle.util.defeatCacheStr();return result;};this.buildParamAttribs=function(){var attribs={};
var desopts=design.getOpts();var designId=design.getId();if(designId){attribs.id=designId;}else{if(desopts.pid){attribs.pid=desopts.pid;}if(desopts.pdt){attribs.pdt=desopts.pdt;}}if(desopts.pending){
attribs.pending=desopts.pending;}if(this.opts.max_dim){attribs.max_dim=this.opts.max_dim;}if(this.opts.rvtype){attribs.rvtype=this.opts.rvtype;}if(this.opts.view){attribs.view=this.opts.view;}if(this.opts.context){
attribs.context=this.opts.context;}if(desopts.title){attribs.title=desopts.title;}if(desopts.style){attribs.style=desopts.style;}if(desopts.color){attribs.color=desopts.color;}if(desopts.size){attribs.size=desopts.size;
}return attribs;};this.handleResponseWireframes=function(rspWireframes){var k;var annotation;viewAnnotations=[];for(k=0;k<rspWireframes.length;k++){annotation=new zazzle.rlv.DesignViewAnnotation(this);
annotation.handleServerResponse(rspWireframes[k]);if(annotation.isValid()){viewAnnotations.push(annotation);}}};};zazzle.rlv.DesignArea=function DesignArea(design,thename,thegroup,theselector){if(!(this instanceof zazzle.rlv.DesignArea)){
return new zazzle.rlv.DesignArea(design,thename,thegroup,theselector);}var name=thename;this.groupName="";this.insideBleed=[];this.outsideSafe=[];var group=thegroup;var selector=theselector;var areaFill=null;
var properties=[];var children=[];var stitches=0;var marked=false;var markDeleted=false;var okToDelete=false;var pendingActions=[];var colors=[];var dirty=false;var nameChanged=false;var chgareaName;
var fillSet=false;var firstTime=true;var defaultForViews=[];this.design=design;var getSelectNames=function(objs){var result;var k;var names=[];var obj;var val;if(zazzle.util.isArray(objs)){for(k=0;k<objs.length;k++){
obj=objs[k];if(obj&&typeof obj==='object'&&obj.getName&&typeof obj.getName==='function'){val=obj.getName();names.push(val);}}if(names.length>0){result=names.join(',');}}return result;};this.getName=function(){
return name;};this.setName=function(newname){if(newname&&(typeof newname==='string')){if(name&&(name!==newname)){nameChanged=true;this.setDirty();this.design.forceReturnAllAreas();}chgareaName=newname;
}};this.getColors=function(){return colors;};this.setFill=function(theFill){if(theFill&&(theFill instanceof zazzle.rlv.DesignFill)){areaFill=theFill;fillSet=true;this.setDirty();}};this.getFill=function(){
return areaFill;};this.getProperties=function(){return properties;};this.getChildObjects=function(name,match){return children;};this.getStitches=function(){return stitches;};this.getMarked=function(){
return marked;};this.setMarked=function(val){if(typeof val==='boolean'){marked=val;}};this.reorderAbove=function(objs,target){var action={};var attribs={};var names=getSelectNames(objs);if(names){if(target&&typeof target==='object'){
attribs.above=target.getName();}action.verb='reorder';action.names=names;action.attribs=attribs;pendingActions.push(action);this.setDirty();}};this.group=function(name,objs){var group;if(name&&typeof name==='string'&&objs){
group=new zazzle.rlv.DesignGroup(this,name,objs,true);children.push(group);this.setDirty();}return group;};this.moveDesignSpace=function(objs,x,y,dx,dy){var action={};var attribs={};var names=getSelectNames(objs);
if(names){attribs.space='design';if((typeof x==='number')&&(typeof y==='number')){attribs.x=x;attribs.y=y;}if((typeof dx==='number')&&(typeof dy==='number')){attribs.dx=dx;attribs.dy=dy;}action.verb='move';
action.names=names;action.attribs=attribs;pendingActions.push(action);this.setDirty();}};this.addPendingAction=function(action){pendingActions.push(action);this.setDirty();};this.moveObjectSpace=function(objs,x,y,dx,dy){
var action={};var attribs={};var names=getSelectNames(objs);if(names){attribs.space='object';if((typeof x==='number')&&(typeof y==='number')){attribs.x=x;attribs.y=y;}if((typeof dx==='number')&&(typeof dy==='number')){
attribs.dx=dx;attribs.dy=dy;}action.verb='move';action.names=names;action.attribs=attribs;pendingActions.push(action);this.setDirty();}};this.scale=function(objs,xscale,yscale,absolute){var action={};
var attribs={};var names=getSelectNames(objs);if(names){if(names.indexOf(',')=== -1){attribs.xscale=xscale;attribs.yscale=yscale;}else{attribs.scale=xscale;}attribs.abs=absolute?'true':'false';action.verb='scale';
action.names=names;action.attribs=attribs;pendingActions.push(action);this.setDirty();}};this.transfer=function(objs,targetareaname){var action={};var attribs={};var names=getSelectNames(objs);if(names){
if(typeof targetareaname==='string'){attribs.area=targetareaname;action.verb='transfer';action.names=names;action.attribs=attribs;pendingActions.push(action);this.setDirty();}}};this.rotate=function(objs,angle,absolute){
var action={};var attribs={};var names=getSelectNames(objs);if(names){attribs.angle=angle;attribs.abs=absolute?'true':'false';action.verb='rotate';action.names=names;action.attribs=attribs;pendingActions.push(action);
this.setDirty();}};this.layout=function(objs,type,params,persist){var action={};var attribs={};var layoutparams='';var k;var prop;var names=getSelectNames(objs);if(names){if(type&&typeof type==='string'){
if(params&&typeof params==='string'){layoutparams=params;}else if(zazzle.util.isArray(params)){for(k=0;k<params.length;k++){prop=params[k];if(prop&&(prop instanceof zazzle.rlv.DesignProperty)){if(layoutparams.length){
layoutparams=layoutparams+'&';}layoutparams=layoutparams+prop.name+'='+prop.value;}}}if(persist){this.setProperty(objs,'layout',type);this.setProperty(objs,'layoutparams',layoutparams);}else{attribs.type=type;
attribs.layoutparams=layoutparams;action.verb='layout';action.names=names;action.attribs=attribs;pendingActions.push(action);this.setDirty();}}}};this.setProperty=function(objs,name,value){var k;var obj;
if(name&&value&&typeof name==='string'&&typeof value==='string'&&zazzle.util.isArray(objs)){for(k=0;k<objs.length;k++){obj=objs[k];if(obj&&typeof obj==='object'&&obj.setProperty&&typeof obj.setProperty==='function'){
obj.setProperty(name,value);}}}};this.setAttribute=function(objs,name,value){var k;var obj;if(name&&value&&typeof name==='string'&&typeof value==='string'&&zazzle.util.isArray(objs)){for(k=0;k<objs.length;k++){
obj=objs[k];if(obj&&typeof obj==='object'&&obj.setAttribute&&typeof obj.setAttribute==='function'){obj.setAttribute(name,value);}}}};this.cut=function(objs){var action={};var attribs={};var names=getSelectNames(objs);
if(names){action.verb='cut';action.names=names;action.attribs=attribs;pendingActions.push(action);this.design.forceReturnAllAreas();this.setDirty();}};this.remove=function(objs){var action={};var attribs={};
var names=getSelectNames(objs);if(names){action.verb='delete';action.names=names;action.attribs=attribs;pendingActions.push(action);this.design.forceReturnAllAreas();this.setDirty();}};this.copy=function(objs){
var action={};var attribs={};var names=getSelectNames(objs);if(names){action.verb='copy';action.names=names;action.attribs=attribs;pendingActions.push(action);this.setDirty();}};this.paste=function(){
var action={};var attribs={};action.verb='paste';action.attribs=attribs;pendingActions.push(action);this.setDirty();};this.markDeleted=function(){markDeleted=true;this.setDirty();};this.canDelete=function(){
return okToDelete;};this.setDirty=function(){dirty=true;this.design.setDirty();};this.addImage=function(name,imageid,after){var image;if(name&&typeof name==='string'&&imageid&&typeof imageid==='string'){
image=new zazzle.rlv.DesignImage(this,name,imageid,true);image.setAddAfterObject(after);children.push(image);this.setDirty();}return image;};this.addText=function(name,textvalue,after){var text;if(name&&typeof name==='string'&&textvalue&&typeof textvalue==='string'){
text=new zazzle.rlv.DesignText(this,name,textvalue,true);text.setAddAfterObject(after);children.push(text);this.setDirty();}return text;};this.addEmbeddedDesign=function(name,embedId,embedProductId,embedArea,after){
var embed;if(name&&typeof name==='string'&&embedId&&typeof embedId==='string'&&embedProductId&&typeof embedProductId==='string'){embed=new zazzle.rlv.DesignEmbed(this,name,embedId,embedProductId,embedArea,true);
embed.setAddAfterObject(after);children.push(embed);this.setDirty();}return embed;};this.addPath=function(name,fill,after){var path;if(name&&typeof name==='string'&&fill&&(fill instanceof zazzle.rlv.DesignFill)){
path=new zazzle.rlv.DesignPath(this,name,fill,true);path.setAddAfterObject(after);children.push(path);this.setDirty();}return path;};this.isDefaultForView=function(viewname){var result=false;var k;if(viewname&&typeof viewname==='string'){
for(k=0;k<defaultForViews.length;k++){if(viewname===defaultForViews[k]){result=true;break;}}}return result;};this.setAsDefaultForView=function(viewname){if(viewname&&typeof viewname==='string'){if(!this.isDefaultForView(viewname)){
defaultForViews.push(viewname);}}};this.buildServerRequest=function(){var req='';var attribs;var k;var designObj;var action;if(dirty){if(markDeleted){if(name){req=zazzle.util.xmlStartElement('delarea',{name:name},true);
}markDeleted=false;}else if(nameChanged){req=zazzle.util.xmlStartElement('chgarea',{from:name,to:chgareaName},true);nameChanged=false;}else{attribs={};if(name){attribs.name=name;}if(group){attribs.group=group;
}if(selector){attribs.selector=selector;}req=zazzle.util.xmlStartElement('area',attribs,true);if(fillSet&&areaFill){attribs={};if(areaFill.solid){attribs.type='solid';}if(areaFill.fillcolor){attribs.fillcolor=areaFill.fillcolor;
}if(areaFill.strokecolor){attribs.strokecolor=areaFill.strokecolor;}if(areaFill.strokewidth){attribs.strokewidth=areaFill.strokewidth;}req=req+zazzle.util.xmlStartElement('fill',attribs,true);}for(k=0;k<children.length;k++){
designObj=children[k];req=req+designObj.buildServerRequest();}for(k=0;k<pendingActions.length;k++){action=pendingActions[k];if(action){if(action.names){req=req+zazzle.util.xmlStartElement('select',{name:action.names},true);
}req=req+zazzle.util.xmlStartElement(action.verb,action.attribs,true);}}pendingActions=[];}dirty=false;}return req;};this.handleAreaIsNowEmpty=function(){children=[];stitches=0;marked=false;pendingActions=[];
colors=[];areaFill=null;nameChanged=false;dirty=false;};this.handleServerResponse=function(rsparea,view){var k;var obj;var name;var child;var imageid;var text;var productid;var designid;var fill;var fillcolor;
var strokewidth;var strokecolor;var solid;var viewarea;var hasobjects;if(rsparea&&(typeof rsparea==='object')){if(rsparea.name){name=rsparea.name;}if(rsparea.group){this.groupName=rsparea.group;}if(view){
viewarea=view.getViewArea(name);if(viewarea){viewarea.handleServerResponse(rsparea);}}hasobjects=false;if(rsparea.objects&&(rsparea.objects.length>0)){hasobjects=true;}if(firstTime||hasobjects||rsparea.changed){
colors=[];areaFill=null;if(rsparea.colors&&typeof rsparea.colors==='string'){colors=rsparea.colors.split(',');}if(rsparea.fill&&typeof rsparea.fill==='object'){fillcolor=rsparea.fill.fillcolor;strokewidth=rsparea.fill.strokewidth;
strokecolor=rsparea.fill.strokecolor;if(fillcolor){solid=true;}else{solid=false;}areaFill=new zazzle.rlv.DesignFill(solid,fillcolor,strokecolor,strokewidth);}properties=zazzle.rlv.convertToPropertyArray(rsparea.properties);
if(rsparea.insideBleed&&zazzle.util.isArray(rsparea.insideBleed)){this.insideBleed=rsparea.insideBleed;}else{this.insideBleed=[];}if(rsparea.outsideSafe&&zazzle.util.isArray(rsparea.outsideSafe)){this.outsideSafe=rsparea.outsideSafe;
}else{this.outsideSafe=[];}children=[];if(rsparea.objects){for(k=0;k<rsparea.objects.length;k++){obj=rsparea.objects[k];if(obj&&typeof obj==='object'&&obj.type){child=undefined;if(obj.type==='image'){
imageid=zazzle.rlv.lookupResponseProperty(obj.properties,'imageid');if(!imageid){imageid='';}child=new zazzle.rlv.DesignImage(this,obj.name,imageid,false);}else if(obj.type==='text'){text=zazzle.rlv.lookupResponseProperty(obj.properties,'value');
if(!text){text='';}child=new zazzle.rlv.DesignText(this,obj.name,text,false);}else if(obj.type==='embed'){productid=zazzle.rlv.lookupResponseProperty(obj.properties,'productid');designid=zazzle.rlv.lookupResponseProperty(obj.properties,'designid');
child=new zazzle.rlv.DesignEmbed(this,obj.name,designid,productid,undefined,false);}else if(obj.type==='path'){fillcolor=zazzle.rlv.lookupResponseProperty(obj.properties,'fillcolor');strokewidth=zazzle.rlv.lookupResponseProperty(obj.properties,'strokewidth');
strokecolor=zazzle.rlv.lookupResponseProperty(obj.properties,'strokecolor');if(fillcolor){solid=true;}else{solid=false;}fill=new zazzle.rlv.DesignFill(solid,fillcolor,strokecolor,strokewidth);child=new zazzle.rlv.DesignPath(this,obj.name,fill,false);
}else if(obj.type==='group'){child=new zazzle.rlv.DesignGroup(this,obj.name,[],false);}if(child){children.push(child);child.handleServerResponse(obj);}}}}}firstTime=false;}dirty=false;};};zazzle.rlv.DesignViewArea=function DesignViewArea(view,area){
if(!(this instanceof zazzle.rlv.DesignViewArea)){return new zazzle.rlv.DesignViewArea(view,area);}var outline=[];var grid=[];var designtogridmatrix=[1.0,0.0,0.0,1.0,0.0,0.0];var gridtodesignmatrix=[1.0,0.0,0.0,1.0,0.0,0.0];
var visible=false;this.view=view;this.design=view.getZDesign();this.area=area;var getSelectNames=function(objs){var result;var k;var names=[];var obj;var val;if(zazzle.util.isArray(objs)){for(k=0;k<objs.length;k++){
obj=objs[k];if(obj&&typeof obj==='object'&&obj.getName&&typeof obj.getName==='function'){val=obj.getName();names.push(val);}}if(names.length>0){result=names.join(',');}}return result;};this.getName=function(){
var result='unknown';if(this.area){result=this.area.getName();}return result;};this.getOutline=function(){return outline;};this.getGrid=function(){return grid;};this.getDesignToGridMatrix=function(){
return designtogridmatrix;};this.getgridtodesignmatrix=function(){return gridtodesignmatrix;};this.canMapScreenToDesign=function(){var result=false;if(grid&&(grid.length>0)){result=true;}return result;
};this.isVisible=function(){return visible;};this.moveScreenSpace=function(objs,x,y,dx,dy){var names=getSelectNames(objs);var action={};var attribs={};var xyStartPt;var xyEndPt;var uvStartPt;var uvEndPt;
this.design.setActiveView(this.view);if(this.canMapScreenToDesign()){xyStartPt=new zazzle.rlv.Point(x,y);xyEndPt=new zazzle.rlv.Point(x+dx,y+dy);uvStartPt=this.screenSpaceToDesignSpace(xyStartPt);uvEndPt=this.screenSpaceToDesignSpace(xyEndPt);
attribs.space='design';attribs.x=uvStartPt.x;attribs.y=uvStartPt.y;attribs.dx=uvEndPt.x-uvStartPt.x;attribs.dy=uvEndPt.y-uvStartPt.y;}else{attribs.space='screen';attribs.x=x;attribs.y=y;attribs.dx=dx;
attribs.dy=dy;}action.verb='move';action.names=names;action.attribs=attribs;this.area.addPendingAction(action);return this;};this.screenSpaceToDesignSpace=function(xyPt){var uvPt=new zazzle.rlv.Point(0,0);
var max_dim=512;var viewOpts=this.view.getOpts();var x;var y;var u;var v;var uPrime;var vPrime;var dx;var dy;var dist;var minError=Number.MAX_VALUE;var k;var foundIndex= -1;this.design.setActiveView(this.view);
if((xyPt instanceof zazzle.rlv.Point)&&grid){if(viewOpts&&viewOpts.max_dim&&typeof viewOpts.max_dim==='number'){max_dim=viewOpts.max_dim;}x=xyPt.x/max_dim;y=xyPt.y/max_dim;for(k=0;k<grid.length;k=k+12){
dx=x-grid[k];dy=y-grid[k+1];dist=dx*dx+dy*dy;if(dist<minError){minError=dist;foundIndex=k;}}if(foundIndex>=0){dx=x-grid[foundIndex];dy=y-grid[foundIndex+1];u=grid[foundIndex+2];v=grid[foundIndex+3];u+=grid[foundIndex+4]*dx;
v+=grid[foundIndex+5]*dx;u+=grid[foundIndex+6]*dy;v+=grid[foundIndex+7]*dy;uPrime=gridtodesignmatrix[0]*u;uPrime=uPrime+gridtodesignmatrix[2]*v;uPrime=uPrime+gridtodesignmatrix[4];vPrime=gridtodesignmatrix[1]*u;
vPrime=vPrime+gridtodesignmatrix[3]*v;vPrime=vPrime+gridtodesignmatrix[5];uvPt.x=uPrime;uvPt.y=vPrime;}}return uvPt;};this.designSpaceToScreenSpace=function(uvPt){var xyPt=new zazzle.rlv.Point(0,0);var max_dim=512;
var viewOpts=this.view.getOpts();var x;var y;var u;var v;var uPrime;var vPrime;var du;var dv;var dist;var minError=Number.MAX_VALUE;var k;var foundIndex= -1;this.design.setActiveView(this.view);if((uvPt instanceof zazzle.rlv.Point)&&grid){
if(viewOpts&&viewOpts.max_dim&&typeof viewOpts.max_dim==='number'){max_dim=viewOpts.max_dim;}uPrime=uvPt.x;vPrime=uvPt.y;u=designtogridmatrix[0]*uPrime;u=u+designtogridmatrix[2]*vPrime;u=u+designtogridmatrix[4];
v=designtogridmatrix[1]*uPrime;v=v+designtogridmatrix[3]*vPrime;v=v+designtogridmatrix[5];for(k=0;k<grid.length;k=k+12){du=u-grid[k+2];dv=v-grid[k+3];dist=du*du+dv*dv;if(dist<minError){minError=dist;
foundIndex=k;}}if(foundIndex>=0){du=u-grid[foundIndex+2];dv=v-grid[foundIndex+3];x=grid[foundIndex];y=grid[foundIndex+1];x+=grid[foundIndex+8]*du;y+=grid[foundIndex+9]*du;x+=grid[foundIndex+10]*dv;y+=grid[foundIndex+11]*dv;
xyPt.x=x*max_dim;xyPt.y=y*max_dim;}}return xyPt;};this.handleServerResponse=function(rsparea){var tempArray;if(rsparea&&typeof rsparea==='object'){tempArray=zazzle.rlv.convertToPointArray(rsparea.outline);
if(tempArray.length>0){outline=tempArray;}if(rsparea.grid){grid=rsparea.grid;view.setNeedsGridRefresh(false);}if(rsparea.designtogridmatrix){if(zazzle.util.isArray(rsparea.designtogridmatrix)){designtogridmatrix=rsparea.designtogridmatrix;
gridtodesignmatrix=zazzle.util.matrixInverse(designtogridmatrix);}}if(rsparea.visible){visible=true;}else{visible=false;}}};};zazzle.rlv.DesignImage=function DesignImage(designArea,name,imageid,addToArea){
if(!(this instanceof zazzle.rlv.DesignImage)){return new zazzle.rlv.DesignImage(designArea,name,imageid,addToArea);}this.designArea=designArea;this.name=name;this.imageid=imageid;this.title=imageid;this.addToArea=addToArea;
this.dirty=false;this.children=[];this.properties=[];this.attributes=[];this.template={};this.removeTheTemplate=false;this.bounds=[];this.outline=[];this.matrix=[];this.contentOutline=[];this.colors=[];
this.pendingActions=[];this.addAfterName=undefined;this.urlkey=undefined;this.getImageid=function(){return this.imageid;};this.setImageid=function(val){if(val&&typeof val==='string'){if(val!==this.imageid){
this.imageid=val;if(!this.addToArea){this.setProperty('imageid',val);}}}return this;};this.getTitle=function(){return this.title;};this.buildServerRequest=function(){var req='';if(this.addToArea){if(this.addAfterName){
req=zazzle.util.xmlStartElement('select',{name:this.addAfterName},true);this.addAfterName=undefined;}req=req+zazzle.util.xmlStartElement('image',{name:this.name,imageid:this.imageid},true);}if(this.dirty){
if(!this.addToArea){req=zazzle.util.xmlStartElement('select',{name:this.name},true);}req=req+this.buildSubRequest();}this.addToArea=false;this.dirty=false;return req;};this.handleServerResponseSpecialized=function(rspobj){
this.imageid=this.getProperty('imageid');this.title=this.getProperty('title');};};zazzle.rlv.DesignText=function DesignText(designArea,name,text,addToArea){if(!(this instanceof zazzle.rlv.DesignText)){
return new zazzle.rlv.DesignText(designArea,name,text,addToArea);}this.designArea=designArea;this.name=name;this.text=text;this.addToArea=addToArea;this.align='center';this.paragraphAlign='center';this.arcRadius=undefined;
this.path=undefined;this.scaleMode=undefined;this.wrap=true;this.clip=true;this.styleRuns=[];this.dirty=false;this.children=[];this.properties=[];this.attributes=[];this.template={};this.removeTheTemplate=false;
this.bounds=[];this.outline=[];this.matrix=[];this.contentOutline=[];this.color=undefined;this.pendingActions=[];this.addAfterName=undefined;this.urlkey=undefined;this.colors=[];this.setAlign=function(val){
var newVal='center';if(val===zazzle.rlv.DesignTextAlign.LEADING){newVal='leading';}else if(val===zazzle.rlv.DesignTextAlign.TRAILING){newVal='trailing';}if(this.align!==newVal){this.align=newVal;if(!this.addToArea){
this.setProperty('align',newVal);}this.setDirty();}return this;};this.getAlign=function(){var result=zazzle.rlv.DesignTextAlign.CENTER;if(this.align==='leading'){result=zazzle.rlv.DesignTextAlign.LEADING;
}else if(this.align==='trailing'){result=zazzle.rlv.DesignTextAlign.TRAILING;}return result;};this.setParagraphAlign=function(val){var newVal='center';if(val===zazzle.rlv.DesignTextParagraphAlign.NEAR){
newVal='near';}else if(val===zazzle.rlv.DesignTextParagraphAlign.FAR){newVal='far';}if(this.paragraphAlign!==newVal){this.paragraphAlign=newVal;if(!this.addToArea){this.setProperty('palign',newVal);}
this.setDirty();}return this;};this.getParagraphAlign=function(){var result=zazzle.rlv.DesignTextParagraphAlign.CENTER;if(this.paragraphAlign==='near'){result=zazzle.rlv.DesignTextParagraphAlign.NEAR;
}else if(this.paragraphAlign==='far'){result=zazzle.rlv.DesignTextParagraphAlign.FAR;}return result;};this.setArc=function(radius){if(radius&&typeof radius==='number'){if(radius!==this.arcRadius){this.arcRadius=radius;
if(!this.addToArea){this.setProperty('arcradius',radius.toString());}this.setDirty();}}return this;};this.getArc=function(){return this.arcRadius;};this.setPath=function(val){var path;if(val===zazzle.rlv.DesignTextPath.HORZ){
path='horz';}else if(val===zazzle.rlv.DesignTextPath.VERT){path='vert';}else if(val===zazzle.rlv.DesignTextPath.ARC){path='arc';}else if(val===zazzle.rlv.DesignTextPath.RARC){path='rarc';}if(path&&(path!==this.path)){
this.path=path;if(!this.addToArea){this.setProperty('path',path);}this.setDirty();}return this;};this.getPath=function(){var result=zazzle.rlv.DesignTextPath.HORZ;if(this.path==='vert'){result=zazzle.rlv.DesignTextPath.VERT;
}else if(this.path==='arc'){result=zazzle.rlv.DesignTextPath.ARC;}else if(this.path==='rarc'){result=zazzle.rlv.DesignTextPath.RARC;}return result;};this.setScaleMode=function(val){var newVal='fit';if(val===zazzle.rlv.DesignTextScaleMode.NONE){
newVal='none';}else if(val===zazzle.rlv.DesignTextScaleMode.USER){newVal='user';}if(newVal!==this.scaleMode){this.scaleMode=newVal;if(!this.addToArea){this.setProperty('scalemode',newVal);}this.setDirty();
}return this;};this.getScaleMode=function(){var result=zazzle.rlv.DesignTextScaleMode.FIT;if(this.scaleMode==='none'){result=zazzle.rlv.DesignTextScaleMode.NONE;}else if(this.scaleMode==='user'){result=zazzle.rlv.DesignTextScaleMode.USER;
}return result;};this.setWrap=function(val){if(typeof val==='boolean'){if(val!==this.wrap){this.wrap=val;if(!this.addToArea){this.setProperty('wrap',val?'true':'false');}this.setDirty();}return this;
}};this.getWrap=function(){return this.wrap;};this.setClip=function(val){if(typeof val==='boolean'){if(val!==this.clip){this.clip=val;if(!this.addToArea){this.setProperty('clip',val?'true':'false');}
this.setDirty();}return this;}};this.getClip=function(){return this.clip;};this.getValue=function(){return this.text;};this.setValue=function(val){if(val&&typeof val==='string'){if(val!==this.text){this.text=val;
if(!this.addToArea){this.setProperty('value',val);}this.setDirty();}}return this;};this.addStyleRun=function(font,start,end){var styleRun;if(font&&(font instanceof zazzle.rlv.DesignFont)){styleRun={};
if(font.face){styleRun.face=font.face;}if(font.style){styleRun.style=font.style;}if(font.height){styleRun.height=font.height;}if(font.weight){styleRun.weight=font.weight;}if(font.color){styleRun.color=font.color;
}if(font.minheight){styleRun.minheight=font.minheight;}if(font.maxheight){styleRun.maxheight=font.maxheight;}if(start&&typeof start==='number'){styleRun.start=start;}if(end&&typeof end==='number'){styleRun.end=end;
}this.styleRuns.push(styleRun);this.setDirty();}return this;};this.clearStyleRuns=function(){this.styleRuns=[];this.setDirty();return this;};this.buildServerRequest=function(){var req='';var k;var run;
var attr={};if(this.addToArea){if(this.addAfterName){req=zazzle.util.xmlStartElement('select',{name:this.addAfterName},true);this.addAfterName=undefined;}attr.name=this.name;attr.align=this.align;if(this.path){
attr.path=this.path;}if(this.arcRadius){attr.arc=this.arcRadius;}if(this.paragraphAlign){attr.palign=this.paragraphAlign;}attr.wrap=this.wrap?'true':'false';attr.clip=this.clip?'true':'false';if(this.scaleMode){
attr.scalemode=this.scaleMode;}req=req+zazzle.util.xmlStartElement('text',attr,false);if(this.text){req=req+zazzle.util.xmlStartElement('value');req=req+zazzle.util.xmlSafe(this.text);req=req+zazzle.util.xmlEndElement('value');
}if(this.styleRuns.length>0){for(k=0;k<this.styleRuns.length;k++){run=this.styleRuns[k];req=req+zazzle.util.xmlStartElement('font',run,true);}}req=req+zazzle.util.xmlEndElement('text');}if(this.dirty){
if(!this.addToArea){req=zazzle.util.xmlStartElement('select',{name:this.name},true);}req=req+this.buildSubRequest();}this.addToArea=false;this.dirty=false;return req;};this.handleServerResponseSpecialized=function(rspobj){
var k;var style;var styleRun;var val;if(zazzle.util.isArray(rspobj.styles)){this.styleRuns=[];for(k=0;k<rspobj.styles.length;k++){style=rspobj.styles[k];styleRun={};if(style.face){styleRun.face=style.face;
}if(style.style){styleRun.style=style.style;}if(style.color){styleRun.color=style.color;}if(style.weight){styleRun.weight=style.weight;}if(style.height){styleRun.height=style.height;}if(style.minheight){
styleRun.minheight=style.minheight;}if(style.maxheight){styleRun.maxheight=style.maxheight;}if(style.start){styleRun.start=style.start;}if(style.end){styleRun.end=style.end;}this.styleRuns.push(styleRun);
}}val=this.getProperty('align');if(val){this.align=val;}val=this.getProperty('path');if(val){this.path=val;}val=this.getProperty('palign');if(val){this.paragraphAlign=val;}val=this.getProperty('scalemode');
if(val){this.scalemode=val;}val=this.getProperty('arcradius');if(val){this.arcRadius=val;}val=this.getProperty('wrap');if(typeof val==='boolean'){this.wrap=val;}val=this.getProperty('clip');if(typeof val==='boolean'){
this.clip=val;}val=this.getProperty('value');if(val){this.text=val;}};};zazzle.rlv.DesignGroup=function DesignGroup(designArea,name,objs,addToArea){if(!(this instanceof zazzle.rlv.DesignGroup)){return new zazzle.rlv.DesignGroup(designArea,name,objs,addToArea);
}this.designArea=designArea;this.name=name;this.addToArea=addToArea;this.objnames=[];this.markDeleted=false;this.okToDelete=false;this.dirty=false;this.children=[];this.properties=[];this.attributes=[];
this.template={};this.removeTheTemplate=false;this.bounds=[];this.outline=[];this.matrix=[];this.contentOutline=[];this.color=undefined;this.pendingActions=[];this.addAfterName=undefined;this.urlkey=undefined;
var k;var obj;var val;if(objs){for(k=0;k<objs.length;k++){obj=objs[k];if(obj&&obj.getName&&typeof obj.getName==='function'){val=obj.getName();if(val&&typeof val==='string'){this.objnames.push(val);}}
}}this.canDelete=function(){return this.okToDelete;};this.ungroup=function(){this.markDeleted=true;this.setDirty();};this.buildServerRequest=function(){var req='';var selection;if(this.addToArea){if(this.objnames.length>0){
selection=this.objnames.join(',');req=req+zazzle.util.xmlStartElement('select',{name:selection},true);req=req+zazzle.util.xmlStartElement('group',{name:this.name},true);}}if(this.dirty){if(!this.addToArea){
req=zazzle.util.xmlStartElement('select',{name:this.name},true);if(this.markDeleted){req=req+zazzle.util.xmlStartElement('ungroup',{},true);}}if(!this.markDeleted){req=req+this.buildSubRequest();}}this.addToArea=false;
this.dirty=false;return req;};this.handleServerResponseSpecialized=function(rspobj){var k;var obj;var child;var imageid;var text;var productid;var designid;var fillcolor;var strokewidth;var strokecolor;
var fill;var solid;if(rspobj.objects){for(k=0;k<rspobj.objects.length;k++){obj=rspobj.objects[k];if(obj&&typeof obj==='object'&&obj.type){child=undefined;if(obj.type==='image'){imageid=zazzle.rlv.lookupResponseProperty(obj.properties,'imageid');
if(!imageid){imageid='';}child=new zazzle.rlv.DesignImage(this.designArea,obj.name,imageid,false);}else if(obj.type==='text'){text=zazzle.rlv.lookupResponseProperty(obj.properties,'value');if(!text){
text='';}child=new zazzle.rlv.DesignText(this.designArea,obj.name,text,false);}else if(obj.type==='embed'){productid=zazzle.rlv.lookupResponseProperty(obj.properties,'productid');designid=zazzle.rlv.lookupResponseProperty(obj.properties,'designid');
child=new zazzle.rlv.DesignEmbed(this.designArea,obj.name,designid,productid,undefined,false);}else if(obj.type==='path'){fillcolor=zazzle.rlv.lookupResponseProperty(obj.properties,'fillcolor');strokewidth=zazzle.rlv.lookupResponseProperty(obj.properties,'strokewidth');
strokecolor=zazzle.rlv.lookupResponseProperty(obj.properties,'strokecolor');if(fillcolor){solid=true;}else{solid=false;}fill=new zazzle.rlv.DesignFill(solid,fillcolor,strokecolor,strokewidth);child=new zazzle.rlv.DesignPath(this.designArea,obj.name,fill,false);
}else if(obj.type==='group'){child=new zazzle.rlv.DesignGroup(this.designArea,obj.name,[],false);}if(child){this.children.push(child);child.handleServerResponse(obj);}}}}};};zazzle.rlv.DesignEmbed=function DesignEmbed(designArea,name,embedId,embedProductId,embedArea,addToArea){
if(!(this instanceof zazzle.rlv.DesignEmbed)){return new zazzle.rlv.DesignEmbed(designArea,name,embedId,embedProductId,embedArea,addToArea);}this.designArea=designArea;this.name=name;this.embedId=embedId;
this.embedProductId=embedProductId;this.embedArea=embedArea;this.addToArea=addToArea;this.params=[];this.dirty=false;this.children=[];this.properties=[];this.attributes=[];this.template={};this.removeTheTemplate=false;
this.bounds=[];this.outline=[];this.matrix=[];this.contentOutline=[];this.color=undefined;this.pendingActions=[];this.addAfterName=undefined;this.urlkey=undefined;this.setParam=function(name,value){this.setPropertyHelper(this.params,name,value);
this.setDirty();return this;};this.buildServerRequest=function(){var req='';var k;var attr={};var name;var value;var pair;var regexp=/%20/g;var pairs=[];if(this.addToArea){if(this.addAfterName){req=zazzle.util.xmlStartElement('select',{name:this.addAfterName},true);
this.addAfterName=undefined;}attr.name=this.name;attr.designid=this.embedId;attr.productid=this.embedProductId;if(this.embedArea){attr.area=this.embedArea;}if(this.params.length>0){for(k=0;k<this.params.length;k++){
name=this.params[k].name;value=this.params[k].value;pair=encodeURIComponent(name).replace(regexp,'+')+'='+encodeURIComponent(value).replace(regexp,'+');pairs.push(pair);}attr.params=pairs.join('&');}
req=req+zazzle.util.xmlStartElement('embed',attr,true);}if(this.dirty){if(!this.addToArea){req=zazzle.util.xmlStartElement('select',{name:this.name},true);}req=req+this.buildSubRequest();}this.addToArea=false;
this.dirty=false;return req;};this.handleServerResponseSpecialized=function(rspobj){this.embedId=this.getProperty('designid');this.embedProductId=this.getProperty('productid');this.embedArea=this.getProperty('designarea');
};};zazzle.rlv.DesignPath=function DesignPath(designArea,name,fill,addToArea){if(!(this instanceof zazzle.rlv.DesignPath)){return new zazzle.rlv.DesignPath(designArea,name,fill,addToArea);}this.designArea=designArea;
this.name=name;this.fill=fill;this.addToArea=addToArea;this.segment='';this.dirty=false;this.children=[];this.properties=[];this.attributes=[];this.template={};this.removeTheTemplate=false;this.bounds=[];
this.outline=[];this.matrix=[];this.contentOutline=[];this.color=undefined;this.pendingActions=[];this.addAfterName=undefined;this.urlkey=undefined;this.setSegment=function(segment){if(segment&&typeof segment==='string'){
this.segment=segment;this.setDirty();}return this;};this.getSegment=function(){return this.segment;};this.setFill=function(theFill){if(theFill&&(theFill instanceof zazzle.rlv.DesignFill)){this.fill=theFill;
this.setDirty();}return this;};this.getFill=function(){return this.fill;};this.buildServerRequest=function(){var req='';var attribs;if(this.addToArea){if(this.addAfterName){req=zazzle.util.xmlStartElement('select',{name:this.addAfterName},true);
this.addAfterName=undefined;}req=req+zazzle.util.xmlStartElement('path',{name:this.name},false);if(this.segment){req=req+zazzle.util.xmlStartElement('segment');req=req+zazzle.util.xmlSafe(this.segment);
req=req+zazzle.util.xmlEndElement('segment');}if(this.fill){attribs={};if(this.fill.solid){attribs.type='solid';}if(this.fill.fillcolor){attribs.fillcolor=fill.fillcolor;}if(this.fill.strokecolor){attribs.strokecolor=fill.strokecolor;
}if(this.fill.strokewidth){attribs.strokewidth=fill.strokewidth;}req=req+zazzle.util.xmlStartElement('fill',attribs,true);}req=req+zazzle.util.xmlEndElement('path');}if(this.dirty){if(!this.addToArea){
req=zazzle.util.xmlStartElement('select',{name:this.name},true);}req=req+this.buildSubRequest();}this.addToArea=false;this.dirty=false;return req;};this.handleServerResponseSpecialized=function(rspobj){
var val;var solid;var fillcolor;var strokecolor;var strokewidth;var segment;segment=this.getProperty('segments');if(segment){this.segment=segment;}val=this.getProperty('filltype');solid=val==='solid';
fillcolor=this.getProperty('fillcolor');strokecolor=this.getProperty('strokecolor');strokewidth=this.getProperty('strokewidth');this.fill=new zazzle.rlv.DesignFill(solid,fillcolor,strokecolor,strokewidth);
};};(function(){var f=function(proto){function getPropertyHelper(propArray,name){var result;var k;var prop;for(k=0;k<propArray.length;k++){prop=propArray[k];if(prop&&(prop instanceof zazzle.rlv.DesignProperty)){
if(prop.name===name){result=prop.value;break;}}}return result;}function setPropertyHelper(propArray,name,value){var k;var prop;var found=false;for(k=0;k<propArray.length;k++){prop=propArray[k];if(prop&&(prop instanceof zazzle.rlv.DesignProperty)){
if(prop.name===name){found=true;break;}}}if(found){prop.value=value;prop.changed=true;}else{prop=new zazzle.rlv.DesignProperty(name,value);prop.changed=true;propArray.push(prop);}}proto.setPropertyHelper=setPropertyHelper;
function getProperties(){var result={};var k;var prop;for(k=0;k<this.properties.length;k++){prop=this.properties[k];if(prop&&(prop instanceof zazzle.rlv.DesignProperty)){result[prop.name]=prop.value;
}}return result;}proto.getProperties=getProperties;function getProperty(name){return getPropertyHelper(this.properties,name);}proto.getProperty=getProperty;function setProperty(name,value){setPropertyHelper(this.properties,name,value);
this.setDirty();return this;}proto.setProperty=setProperty;function setAttribute(name,value){setPropertyHelper(this.attributes,name,value);this.setDirty();return this;}proto.setAttribute=setAttribute;
function getChildObjects(){return this.children;}proto.getChildObjects=getChildObjects;function setTemplate(urlkey,title,ppshow){this.template={};if(urlkey&&typeof urlkey==='string'){this.template.urlkey=urlkey;
}if(title&&typeof title==='string'){this.template.title=title;}if(typeof ppshow==='boolean'){this.template.ppshow=ppshow;}this.setDirty();return this;}proto.setTemplate=setTemplate;function removeTemplate(){
this.removeTheTemplate=true;this.template={};this.setDirty();return this;}proto.removeTemplate=removeTemplate;function getName(){return this.name;}proto.getName=getName;function getMatrix(){return this.matrix;
}proto.getMatrix=getMatrix;function getRotationAngle(){var angle=0.0;var theta;var a;var aPrime;var b;var c;if(this.matrix&&(this.matrix.length===6)){a=this.matrix[0];b=this.matrix[1];c=Math.sqrt((a*a)+(b*b));
if(c>0.0001){aPrime=a/c;theta=Math.acos(aPrime);if(b>0.0){theta=(Math.PI*2.0)-theta;}angle=360.0*(theta/(Math.PI*2.0));if(angle>359.5){angle=0.0;}}}return angle;}proto.getRotationAngle=getRotationAngle;
function getViewAreaForView(view){var result=null;var areaName='unknown';if(view&&view instanceof zazzle.rlv.DesignView){if(this.designArea){areaName=this.designArea.getName();result=view.getViewArea(areaName);
}}return result;}proto.getViewAreaForView=getViewAreaForView;function getBounds(view){var result=this.bounds;var xyPt;var minXY;var maxXY;var k;var viewArea;var rect;viewArea=this.getViewAreaForView(view);
if(this.bounds&&this.bounds.length>=2&&viewArea&&viewArea.canMapScreenToDesign()){result=[];rect=[];xyPt=new zazzle.rlv.Point(this.bounds[0].x,this.bounds[0].y);rect.push(xyPt);xyPt=new zazzle.rlv.Point(this.bounds[1].x,this.bounds[0].y);
rect.push(xyPt);xyPt=new zazzle.rlv.Point(this.bounds[1].x,this.bounds[1].y);rect.push(xyPt);xyPt=new zazzle.rlv.Point(this.bounds[0].x,this.bounds[1].y);rect.push(xyPt);minXY=new zazzle.rlv.Point(Number.MAX_VALUE,Number.MAX_VALUE);
maxXY=new zazzle.rlv.Point(-Number.MAX_VALUE,-Number.MAX_VALUE);for(k=0;k<rect.length;k++){xyPt=viewArea.designSpaceToScreenSpace(rect[k]);minXY.x=Math.min(minXY.x,xyPt.x);minXY.y=Math.min(minXY.y,xyPt.y);
maxXY.x=Math.max(maxXY.x,xyPt.x);maxXY.y=Math.max(maxXY.y,xyPt.y);}result.push(minXY);result.push(maxXY);}return result;}proto.getBounds=getBounds;function getOutline(view){var result=this.outline;var xyPt;
var k;var viewArea;viewArea=this.getViewAreaForView(view);if(this.outline&&viewArea&&viewArea.canMapScreenToDesign()){result=[];for(k=0;k<this.outline.length;k++){xyPt=viewArea.designSpaceToScreenSpace(this.outline[k]);
result.push(xyPt);}}return result;}proto.getOutline=getOutline;function getContentOutline(view){var result=this.contentOutline;var xyPt;var k;var viewArea;viewArea=this.getViewAreaForView(view);if(this.contentOutline&&viewArea&&viewArea.canMapScreenToDesign()){
result=[];for(k=0;k<this.contentOutline.length;k++){xyPt=viewArea.designSpaceToScreenSpace(this.contentOutline[k]);result.push(xyPt);}}return result;}proto.getContentOutline=getContentOutline;function getColors(){
return this.colors;}proto.getColors=getColors;function isLocked(){var result=false;var val=this.getProperty('locked');if(val&&(val==='true')){result=true;}return result;}proto.isLocked=isLocked;function moveScreenSpace(view,x,y,dx,dy){
var action={};var attribs={};var xyStartPt;var xyEndPt;var uvStartPt;var uvEndPt;var viewArea;viewArea=this.getViewAreaForView(view);if(viewArea&&viewArea.canMapScreenToDesign()){xyStartPt=new zazzle.rlv.Point(x,y);
xyEndPt=new zazzle.rlv.Point(x+dx,y+dy);uvStartPt=viewArea.screenSpaceToDesignSpace(xyStartPt);uvEndPt=viewArea.screenSpaceToDesignSpace(xyEndPt);attribs.space='design';attribs.x=uvStartPt.x;attribs.y=uvStartPt.y;
attribs.dx=uvEndPt.x-uvStartPt.x;attribs.dy=uvEndPt.y-uvStartPt.y;}else{attribs.space='screen';attribs.x=x;attribs.y=y;attribs.dx=dx;attribs.dy=dy;}action.verb='move';action.attribs=attribs;this.pendingActions.push(action);
this.setDirty();return this;}proto.moveScreenSpace=moveScreenSpace;function moveDesignSpace(x,y,dx,dy){var action={};var attribs={};attribs.space='design';if((typeof x==='number')&&(typeof y==='number')){
attribs.x=x;attribs.y=y;}if((typeof dx==='number')&&(typeof dy==='number')){attribs.dx=dx;attribs.dy=dy;}action.verb='move';action.attribs=attribs;this.pendingActions.push(action);this.setDirty();return this;
}proto.moveDesignSpace=moveDesignSpace;function moveObjectSpace(x,y,dx,dy){var action={};var attribs={};attribs.space='object';if((typeof x==='number')&&(typeof y==='number')){attribs.x=x;attribs.y=y;
}if((typeof dx==='number')&&(typeof dy==='number')){attribs.dx=dx;attribs.dy=dy;}action.verb='move';action.attribs=attribs;this.pendingActions.push(action);this.setDirty();return this;}proto.moveObjectSpace=moveObjectSpace;
function scale(xscale,yscale,absolute){var action={};var attribs={};attribs.xscale=xscale;attribs.yscale=yscale;attribs.abs=absolute?'true':'false';action.verb='scale';action.attribs=attribs;this.pendingActions.push(action);
this.setDirty();return this;}proto.scale=scale;function rotate(angle,absolute){var action={};var attribs={};attribs.angle=angle;attribs.abs=absolute?'true':'false';action.verb='rotate';action.attribs=attribs;
this.pendingActions.push(action);this.setDirty();return this;}proto.rotate=rotate;function setDirty(){this.dirty=true;this.designArea.setDirty();}proto.setDirty=setDirty;function buildSubRequest(){var req='';
var k;var prop;var action;var setAttribs={};var setAttribsChanged;var setUnsafeChars;var pattern;var aName;var aValue;setAttribsChanged=false;setUnsafeChars=false;setAttribs={};pattern=/[\t\n\v\f\r]/;
for(k=0;k<this.properties.length;k++){prop=this.properties[k];if(prop&&(prop instanceof zazzle.rlv.DesignProperty)){if(prop.changed){setAttribs[prop.name]=prop.value;if(typeof prop.value==='string'&&prop.value.search(pattern)!== -1){
setUnsafeChars=true;}setAttribsChanged=true;prop.changed=false;}}}if(setAttribsChanged){if(setUnsafeChars){req=req+zazzle.util.xmlStartElement('set',{},false);for(aName in setAttribs){if(setAttribs.hasOwnProperty(aName)){
aValue=setAttribs[aName];req=req+zazzle.util.xmlStartElement(aName,{},false);req=req+zazzle.util.xmlSafe(aValue,false);req=req+zazzle.util.xmlEndElement(aName);}}req=req+zazzle.util.xmlEndElement('set');
}else{req=req+zazzle.util.xmlStartElement('set',setAttribs,true);}}setAttribsChanged=false;setAttribs={};for(k=0;k<this.attributes.length;k++){prop=this.attributes[k];if(prop&&(prop instanceof zazzle.rlv.DesignProperty)){
if(prop.changed){setAttribs[prop.name]=prop.value;setAttribsChanged=true;prop.changed=false;}}}if(setAttribsChanged){req=req+zazzle.util.xmlStartElement('setattr',setAttribs,true);}if(this.removeTheTemplate){
req=req+zazzle.util.xmlStartElement('template',{},true);this.removeTheTemplate=false;}if(this.template.urlkey){req=req+zazzle.util.xmlStartElement('template',this.template,true);this.template={};}if(this.pendingActions.length>0){
for(k=0;k<this.pendingActions.length;k++){action=this.pendingActions[k];req=req+zazzle.util.xmlStartElement(action.verb,action.attribs,true);}this.pendingActions=[];}return req;}proto.buildSubRequest=buildSubRequest;
function handleServerResponse(rspobj){var tempArray;if(rspobj&&typeof rspobj==='object'){if(rspobj.name){this.name=rspobj.name;}tempArray=zazzle.rlv.convertToPointArray(rspobj.bounds);if(tempArray.length>0){
this.bounds=tempArray;}tempArray=zazzle.rlv.convertToPointArray(rspobj.outline);if(tempArray.length>0){this.outline=tempArray;}tempArray=zazzle.rlv.convertToPointArray(rspobj.contentoutline);if(tempArray.length>0){
this.contentOutline=tempArray;}this.properties=zazzle.rlv.convertToPropertyArray(rspobj.properties);if(rspobj.matrix){this.matrix=rspobj.matrix;}if(rspobj.urlkey){this.urlkey=rspobj.urlkey;}if(rspobj.colors&&typeof rspobj.colors==='string'){
this.colors=rspobj.colors.split(',');}this.handleServerResponseSpecialized(rspobj);this.dirty=false;}}proto.handleServerResponse=handleServerResponse;function setAddAfterObject(afterObj){if(afterObj&&(afterObj instanceof zazzle.rlv.DesignObject)){
this.addAfterName=afterObj.getName();}}proto.setAddAfterObject=setAddAfterObject;function getUrlKey(){return this.urlkey;}proto.getUrlKey=getUrlKey;};f(zazzle.rlv.DesignImage.prototype);f(zazzle.rlv.DesignText.prototype);
f(zazzle.rlv.DesignGroup.prototype);f(zazzle.rlv.DesignEmbed.prototype);f(zazzle.rlv.DesignPath.prototype);}());(function(){zazzle.rlv.DesignEvent=function DesignEvent(type,success,design,view){if(!(this instanceof zazzle.rlv.DesignEvent)){
return new zazzle.rlv.DesignEvent(type,success,design,view);}this.type=type;this.success=success;this.design=design;this.view=view;};zazzle.rlv.DesignListener=function DesignListener(sequenceId){if(!(this instanceof zazzle.rlv.DesignListener)){
return new zazzle.rlv.DesignListener(sequenceId);}this.getSequenceId=function(){return sequenceId;};};}());zazzle.rlv.DesignViewAnnotation=function DesignViewAnnotation(view){if(!(this instanceof zazzle.rlv.DesignViewAnnotation)){
return new zazzle.rlv.DesignViewArea(view);}var grid=[];var ident='';this.view=view;this.design=view.getZDesign();this.isValid=function(){var result=false;if((ident.length>0)&&(grid.length===12)){result=true;
}return result;};this.getIdent=function(){return ident;};this.getBounds=function(){var xCenter;var yCenter;var width;var height;var ptMin=new zazzle.rlv.Point(0.0,0.0);var ptMax=new zazzle.rlv.Point(0.0,0.0);
var maxDim=this.view.opts.max_dim;if(typeof maxDim!=='number'){maxDim=512;}if(grid.length===12){xCenter=grid[0];yCenter=grid[1];width=grid[8];height=grid[9];ptMin.x=(xCenter-(width/2.0))*maxDim;ptMin.y=(yCenter-(height/2.0))*maxDim;
ptMax.x=(xCenter+(width/2.0))*maxDim;ptMax.y=(yCenter+(height/2.0))*maxDim;}var result=[ptMin,ptMax];return result;};this.handleServerResponse=function(rspwireframe){var tempArray;if(rspwireframe&&typeof rspwireframe==='object'){
tempArray=zazzle.rlv.convertToPointArray(rspwireframe.grid);if(tempArray.length>0){grid=tempArray;}if(rspwireframe.annotation&&typeof rspwireframe.annotation==='string'){ident=rspwireframe.annotation;
}}};};zazzle.rlv.DesignConstraint=function DesignConstraint(area,level,objects,type){if(!(this instanceof zazzle.rlv.DesignConstraint)){return new zazzle.rlv.DesignConstraint(area,level,objects,type);
}this.area='';if(area&&typeof area==='string'){this.area=area;}this.level='';if(level&&typeof level==='string'){this.level=level;}this.objects='';if(objects&&typeof objects==='string'){this.objects=objects;
}this.type='';if(type&&typeof type==='string'){this.type=type;}};zazzle.rlv.DesignTemplate=function DesignTemplate(data){if(!(this instanceof zazzle.rlv.DesignTemplate)){return new zazzle.rlv.DesignTemplate(data);
}this.type=0;this.value='';this.ppshow=false;this.title='';this.urlkey='';for(var key in data){var newValue=data[key];var prevValue=this[key];if(prevValue!==undefined&&typeof newValue!==typeof prevValue){
continue;}this[key]=newValue;}};zazzle.rlv.DesignProperty=function DesignProperty(name,value){if(!(this instanceof zazzle.rlv.DesignProperty)){return new zazzle.rlv.DesignProperty(name,value);}this.name=name;
this.value=value;this.changed=false;};zazzle.rlv.DesignFill=function DesignFill(solid,fillcolor,strokecolor,strokewidth){if(!(this instanceof zazzle.rlv.DesignFill)){return new zazzle.rlv.DesignFill(solid,fillcolor,strokecolor,strokewidth);
}if(typeof solid==='boolean'){this.solid=solid;}if(fillcolor&&typeof fillcolor==='string'){this.fillcolor=fillcolor;}if(strokecolor&&typeof strokecolor==='string'){this.strokecolor=strokecolor;}if(strokewidth&&typeof strokewidth==='number'){
this.strokewidth=strokewidth;}};zazzle.rlv.DesignFont=function DesignFont(face,style,height,weight,color,minheight,maxheight){if(!(this instanceof zazzle.rlv.DesignFont)){return new zazzle.rlv.DesignFont(face,style,height,weight,color,minheight,maxheight);
}this.face=face;this.style=style;this.height=height;this.weight=weight;this.color=color;this.minheight=minheight;this.maxheight=maxheight;};zazzle.rlv.Point=function Point(x,y){if(!(this instanceof zazzle.rlv.Point)){
return new zazzle.rlv.Point(x,y);}this.x=x;this.y=y;};zazzle.rlv.convertToPointArray=function(inarray){var outarray=[];var p;var k;if(zazzle.util.isArray(inarray)){for(k=0;k<inarray.length;k=k+2){p=new zazzle.rlv.Point(inarray[k],inarray[k+1]);
outarray.push(p);}}return outarray;};zazzle.rlv.convertToPropertyArray=function(inarray){var properties=[];var obj;var name;var value;var prop;var k;if(zazzle.util.isArray(inarray)){for(k=0;k<inarray.length;k++){
obj=inarray[k];if(obj&&typeof obj==='object'){name=obj.name;value=obj.value;if(name&&value&&typeof name==='string'){prop=new zazzle.rlv.DesignProperty(name,value);properties.push(prop);}}}}return properties;
};zazzle.rlv.lookupResponseProperty=function(inarray,propname){var k;var obj;var result;if(zazzle.util.isArray(inarray)&&propname&&typeof propname==='string'){for(k=0;k<inarray.length;k++){obj=inarray[k];
if(obj&&typeof obj==='object'&&propname===obj.name){result=obj.value;break;}}}return result;};if(typeof zazzle.product==='undefined')zazzle.product={};zazzle.product.Realviews=function Realviews(opts){
if(!(this instanceof zazzle.product.Realviews))return new zazzle.product.Realviews(opts);this.opts=opts;this.ready=false;this.success=false;var url='/svc/product/realviews/get?output=js';var onsuccess;
var onerror;var m=this;function ajaxCallback(response){if(response&&typeof response==='object'){m.ready=true;if(response.success&&response.data){m.success=true;m.realviews=response.data.realviews;m.contexts=response.data.contexts;
onsuccess&&onsuccess(m);}else{m.errorMessage=errmsg||'UNKNOWN';onerror&&onerror(m);}}}function ajaxErrorCallback(err,errmsg){m.ready=true;m.err=err;m.errorMessage=errmsg||'UNKNOWN';onerror&&onerror(m);
}if(opts&&typeof opts==='object'){onsuccess=opts.onsuccess;onerror=opts.onerror;for(var key in{pt:1,pd:1,dz:1,att:1,ppd:1,patt:1}){var value=opts[key];if(value)url=url+'&'+key+'='+escape(value);}zazzle.ajax.post(url,'',ajaxCallback,ajaxErrorCallback,this);
}};}});
Uize.module({name:'ZazzleWww.DesignUi',superclass:'Zazzle.Widget',required:['Uize.Comm','Uize.Widget.Collection.Dynamic','ZazzleWww.DesignObjectUi','Uize.Widget.Button','Uize.Widget.PopupPalette','Uize.Template',
'Uize.Data','Zazzle.Picker.Color','Zazzle.Checkbox','Zazzle.Droplist','Zazzle.Menu','Uize.Url','Zazzle.Picker.Font','ZazzleWww.ControlPopupPalette','ZazzleWww.TemplateDesigner','ZazzleWww.ControlPoptions',
'Uize.Widget.Bar.Slider.Plus','Uize.Util.PropertyAdapter','Uize.Xml','Uize.Widget.DirectionalPad','Uize.Widget.FormElement','Uize.Widget.FormElement.Text','Zazzle.DesignModel','Zazzle.Droplist.ComboBox',
'Uize.Widget.mChildBindings'],builder:function(e_$){'use strict';var e__=true,e_a=false,e_b=null,e_c,e_d=Uize,e_e=e_d.Widget.Button,e_f=Zazzle,e_g=ZazzleWww,e_h=zazzle.rlv;var e_i=e_$.subclass(function(){
this.e_j=[];},function(){var m=this,e_k,e_l=m.children,e_m={e_n:1,e_o:'always'},e_p={e_n:1,e_o:'exist'},e_q={e_n:1,e_o:'selected-unlocked'},e_r={e_n:1,e_o:'multi-selected-unlocked'},e_s={image:1,ztimage:1,e_o:'selected-unlocked'},
e_t={text:1,image:1,ztimage:1,combined:1,e_o:'selected-unlocked'},e_u={image:1,ztimage:1,combined:1,e_o:'selected-unlocked'},e_v={text:1,e_o:'selected-unlocked'},e_w={text:1,combined:1,image:1,ztimage:1,e_o:'always'},
e_x=m.e_y==='stitch',e_j=m.e_j,e_z=function(e_A,e_i,e_B,e_C,e_D){var e_E=e_i==e_e?m.e_F(e_A,e_B):m.addChild(e_A,e_i,e_B);(m.e_G||(m.e_G=[])).push(e_d.copyInto({e_A:e_A},e_C));if(e_D!==e_c){e_D.e_H=e_E;
e_j.push(e_D);}else if(e_A==='move'){var e_I=e_E.get('buttonDictionary'),e_J;for(e_J in e_I)e_j.push({e_H:e_E,e_K:e_J})}return e_E;},e_L=function(){if(!m.e_M&& !m.e_N){var e_O=m.children.template,e_P=e_O.get('isTemplate')
;if(!e_O.get('hasMultiple')||e_P){m.e_Q('T',e_d.copyInto({name:'Set Template',isTemplate:e_P},e_P?{urlkey:e_O.get('urlKey'),title:e_O.get('title'),ppshow:e_O.get('showOnProductPage'),fitMode:e_O.get('fitMode')
}:e_c));}}};m.e_R={};(e_k=m.e_k=m.addChild('designObjects',e_d.Widget.Collection.Dynamic,{dragToReorder:e__,dragIgnoresLocked:e_a,itemRemoveActsOnSelection:e__,ensureItemDraggedIsSelected:e__,itemDisplayOrder:'reverse',
itemWidgetClass:e_g.DesignObjectUi,makeNewlyAddedSelected:e_a})).wire({'Changed.inDrag':function(){m.set({e_S:!e_k.get('inDrag')})},Remove:function(e_T){if(!m.e_M){var e_U=e_T.itemWidgets,e_V=e_U.length,
e_W= -1,e_X=[];for(;++e_W<e_V;)e_X.push(e_U[e_W].get('model'));m.e_Q('x',{name:'Remove',designObjects:e_X});e_T.handled=e__;}},'Items Reordered':function(){var e_Y=e_k.getSelected(),e_Z=e_k.itemWidgets,
e_0=e_d.isArray(e_Z)?e_Z.length:0,e_1=e_d.isArray(e_Y)?e_Y.length:0,e_2=e_1?e_Y[0]:e_b,e_3=[],e_W= -1;if(e_1){for(;++e_W<e_1;)e_3.push(e_Y[e_W].get('model'));for(e_W= -1;++e_W<e_0;){if(e_Z[e_W]==e_2){
e_W--;break;}}m.e_Q('z',{name:'Reordered',reorderedModels:e_3,above:e_W==e_0||e_W<0?undefined:e_Z[e_W].get('model')});}},'Item Selected':function(e_T){m.fire({name:'Design Object UI Selected',designObjectUi:e_T.itemWidget})
}});var e_4=m.addChild('areas',e_f.Droplist,{values:m.e_5,value:m.e_6});new e_d.Util.PropertyAdapter({propertyA:{instance:m,property:'area'},propertyB:{instance:e_4,property:'value'}});e_4.wire('Changed.values',
function(){m.e_7();});var e_8=m.addChild('areaGroups',e_f.Droplist);new e_d.Util.PropertyAdapter({propertyA:{instance:m,property:'areaGroup'},propertyB:{instance:e_8,property:'value'}});new e_d.Util.PropertyAdapter({
propertyA:{instance:m,property:'areaGroups'},propertyB:{instance:e_8,property:'values'}});m.e_9={};e_z('addImage',e_e,function(){m.e_$_(e__,function(e___){var e_a_=[];for(var e_b_= -1,e_c_=e___.length,
e_d_;++e_b_<e_c_;){e_d_=e___[e_b_];e_d_.e_e_&&e_a_.push({type:'image',id:e_d_.e_e_,title:e_d_.e_f_||''});}e_a_.length&&m.e_Q('i',{name:'Add',properties:e_a_});})},e_m,{});e_z('addText',e_e,function(){
m.e_g_('',function(e_h_){e_h_&&m.e_Q('t',{name:'Add',properties:[{type:'text',title:e_h_+''}]})})},e_m,{});e_z('edit',e_f.Menu,e_c,e_m).wire({'Item.undo':function(){m.e_Q('u','Undo')},'Item.redo':function(){m.e_Q('r','Redo')},
'Item.selectAll':function(){m.e_k.selectAll()},'Item.selectNone':function(){m.e_k.selectNone()},'Item.cut':function(){m.e_Q('c','Cut')},'Item.copy':function(){m.e_Q('o','Copy')},'Item.paste':function(){m.e_Q('p','Paste')},
'Item.delete':function(){m.e_Q('d','Remove')},'Item.bg':function(){var e_i_=m.e_j_?m.e_j_.fillcolor:'';if(!m.e_k_)m.e_k_={name:'Zazzle.Widgets.Dialogs.ColorSwatchList',params:{value:e_i_}};m.callInherited('useDialog')({
component:m.e_k_,widgetProperties:{name:'colorPalette',shieldOpacity:0.01,value:e_i_},dismissHandler:function(){m.fire({name:'Background Changed',bg:e_i_})},widgetEventHandlers:{'Changed.value':function(e_T){
m.e_Q('b',{name:'Background Changed',bg:e_T.source+''})}}});},'Item.border':function(){var e_j_=m.e_j_,e_l_=(e_j_&&e_j_.strokecolor)||'000000',e_m_=(e_j_&&e_j_.strokewidth)||10,e_n_=function(e_T){m.e_Q('J',{name:'Border Changed',border:e_T.source+'',strokewidth:e_T.source.get('thickness')})
};m.callInherited('useDialog')({component:{name:'Zazzle.Widgets.Dialogs.ColorSwatchList.Border'},widgetProperties:{name:'borderColorPalette',shieldOpacity:0.01,value:e_l_,thickness:e_m_},dismissHandler:function(){
m.fire({name:'Border Changed',border:e_l_,strokewidth:e_m_})},widgetEventHandlers:{'Changed.value':e_n_,'Changed.thickness':e_n_}});},'Item.clear':function(){m.confirm({state:'warning',message:m.localize(
'clearSideWarning',[m.e_o_,m.e_p_]),yesHandler:function(){m.e_Q('l','Clear')}});},'Item Selected':function(e_T){!e_T.item.indexOf('moveTo')&&m.e_Q('m',{name:'Transfer',area:e_T.itemDetails.attributes.area
})}});m.e_q_={selectAll:{e_n:1,e_o:'unselected'},selectNone:{e_n:1,e_o:'selected'},cut:e_q,copy:e_q,'delete':e_q,clear:e_p};e_z('arrange',e_f.Menu,e_c,e_q).wire({'Item.align':function(){m.callInherited('useDialog')({
component:{name:'ZazzleWww.Dialog.Align'},widgetProperties:{name:'alignDialog'},submitHandler:function(e_h_){var e_r_=e_h_.groupPinX,e_s_=e_h_.groupPinY;m.e_Q('a',{name:'Move',snap:e__,alignto:'objects',
hcenter:e_r_===0.5,vcenter:e_s_===0.5,left:e_r_===0,right:e_r_===1,top:e_s_===0,bottom:e_s_===1,group:e_a});}})},'Item.spaceH':function(){m.e_Q('h',{name:'Space',horizontal:1})},'Item.spaceV':function(){m.e_Q('v',{name:'Space',vertical:1})},
'Item.centerX':function(){m.e_Q('e',{name:'Move',snap:e__,hcenter:1})},'Item.centerY':function(){m.e_Q('n',{name:'Move',snap:e__,vcenter:1})},'Item.fill':function(){m.e_Q('f','Fill')},'Item.fit':function(){m.e_Q('g','Fit')},
'Item.rotateCcw':function(){m.e_Q('j',{name:'Rotate',rotation:45})},'Item.rotateCw':function(){m.e_Q('k',{name:'Rotate',rotation:-45})},'Item.sendToFront':function(){var e_t_=e_k.itemWidgets,e_W=e_t_.length,
e_u_,e_v_;for(;--e_W>=0;){e_u_=e_t_[e_W];if(!e_u_.get('selected')){e_v_=e_u_.get('model');break;}}e_v_&&m.e_Q('q',{name:'Reordered',above:e_v_});},'Item.sendToBack':function(){m.e_Q('s',{name:'Reordered'})}
});m.e_w_={align:e_r,spaceH:e_r,spaceV:e_r,fill:e_s,fit:e_s};e_z('move',e_d.Widget.DirectionalPad,{mode:'mini',useLinks:e__},e_q).wire('Move',function(e_T){var e_x_=e_T.direction,e_y_=function(e_z_){return e_x_.indexOf(e_z_)>=0}
;if(e_x_){e_x_=e_x_.toLowerCase();var e_A_=e_T.domEvent,e_B_=e_A_.shiftKey?.15:((e_A_.ctrlKey||e_A_.metaKey)?.01:.05),e_C_=e_y_('north'),e_D_=e_y_('south'),e_E_=e_y_('west'),e_F_=e_y_('east'),e_G_=e_x_==='center',
e_H_= !e_G_&&/edge$/.test(e_x_);m.e_Q('w',{name:'Move',snap:e_H_||e_G_,space:'design',dx:e_B_*(e_E_? -1:(e_F_?1:0)),dy:e_B_*(e_C_? -1:(e_D_?1:0)),alignto:'design',hcenter:e_G_,vcenter:e_G_,top:e_C_,bottom:e_D_,
left:e_E_,right:e_F_});}});e_z('centerX',e_e,function(e_T){m.e_Q('y',{name:'Move',direction:e_T.source.get('name'),domEvent:e_T.domEvent})},e_t,{});e_z('centerY',e_e,function(e_T){m.e_Q(0,{name:'Move',
direction:e_T.source.get('name'),domEvent:e_T.domEvent})},e_t,{});e_z('fill',e_e,function(){m.e_Q(1,'Fill')},e_s,{});e_z('fit',e_e,function(){m.e_Q(2,'Fit')},e_s,{});e_z('scaleLarger',e_e,function(e_T){
var e_A_=e_T.domEvent;m.e_Q(3,{name:'Scale',direction:'+',accelerate:e_A_.shiftKey,decelerate:e_A_.ctrlKey||e_A_.metaKey});},e_u,{});e_z('scaleSmaller',e_e,function(e_T){var e_A_=e_T.domEvent;m.e_Q(4,
{name:'Scale',direction:'-',accelerate:e_A_.shiftKey,decelerate:e_A_.ctrlKey||e_A_.metaKey});},e_u,{});e_z('rotateCw',e_e,function(e_T){var e_A_=e_T.domEvent;if((e_A_.ctrlKey||e_A_.metaKey)){var e_I_=m.e_J_.getSelected(),
e_K_=e_I_.length===1;m.e_L_({useTextArea:e_a},{name:'rotationInputDialog',value:e_K_?Math.round(e_I_[0].getRotationAngle()*1000)/1000:0,title:m.localize('rotateDialogTitle'),validator:function(e_M_){return Uize.isNumber(+e_M_)}
},function(e_M_){m.e_Q(5,{name:'Rotate',rotation:e_M_%360,isAbsolute:e_K_})});}else{var e_N_=e_T.domEvent&&e_T.domEvent.shiftKey;m.e_Q(e_N_?6:7,{name:'Rotate',rotation:e_N_?45: -45});}},e_t,{});e_z('face',
Zazzle.Picker.Font,e_c,e_v,{e_E:'selector'}).set({fontFilter:(e_x?1:0)});e_l.face.wire('Changed.value',function(){!m.e_N&&m.e_Q(8,{name:'Font Face Changed',face:m.children.face+''})});e_z('color',e_f.Picker.Color,
e_c,e_v,{e_E:'selector'}).wire('Changed.value',function(){m.e_Q(9,{name:'Color Changed',color:m.children.color+''})});if(e_x)e_l.color.set({paletteTemplate:'udtStitchPalette'});e_z('fontheight',e_f.Droplist.ComboBox,
e_c,e_v).wire('Changed.value',function(){!m.e_N&&m.e_Q('B',{name:'Font Height Changed',fontheight:+m.children.fontheight})});e_z('align',e_g.ControlPopupPalette,{hideOnClick:false,values:['left','center','right'],
value:'center',backgroundUrlAttributes:'no-repeat',positioning:'absolute'},e_v,{e_K:'title'}).wire('Changed.value',function(){var e_O_=m.children.align+'';m.e_Q('C',{name:'Align',align:e_h.DesignTextAlign[e_O_==='left'?'LEADING':e_O_==='right'?'TRAILING':'CENTER']});
});e_z('advancedOptions',e_d.Widget.PopupPalette,{hideOnClick:false},e_w,{e_E:'selector'});e_z('tile',e_f.Checkbox,e_c,{image:1,e_o:'selected-unlocked'}).set({clickToSelect:e__,clickToDeselect:e__,enabled:e__});
e_l.tile.wire('Changed.value',function(){m.e_Q('K',{name:'Tile',tile:e_l.tile.get('value')})});e_z('lock',e_f.Checkbox,e_c,e_w).set({clickToSelect:e__,clickToDeselect:e__,enabled:e__});e_l.lock.wire(
'Changed.value',function(){!m.e_M&& !m.e_N&&m.e_Q('L',{name:'Lock',isLocked:e_l.lock.get('value')})});e_z('template',e_g.TemplateDesigner,e_c,{image:1,text:1,e_o:'selected-unlocked'}).wire({'Changed.isTemplate':e_L,
'Changed.title':e_L,'Changed.urlKey':e_L,'Changed.fitMode':e_L,'Changed.showOnProductPage':e_L});e_z('transparent',e_f.Checkbox,e_c,{image:1,e_o:'selected-unlocked'}).set({clickToSelect:e__,clickToDeselect:e__,enabled:e__});
e_l.transparent.wire('Changed.value',function(){m.e_Q('D',{name:'Set As Transparent',isTransparent:m.children.transparent.get('value')})});e_z('path',e_d.Widget.FormElement,e_c,e_v).wire('Changed.value',
function(){var e_P_=m.children.path+'';m.e_Q('P',{name:'Path Changed',path:e_P_});});e_z('radius',e_d.Widget.FormElement.Text,e_c,e_v).wire('Changed.value',function(e_T){m.e_Q('E',{name:'Radius Changed',radius:+m.children.radius})
});e_z('mirror',e_g.ControlPoptions,{templateOption:{GENERATED_itemNo:'999',displayName:'DISPLAYNAME'}},{e_o:'selected-unlocked'}).wire('Changed.value',function(){m.e_Q('F',{name:'Mirroring Mode Changed',
mode:e_Q_+''})});}),e_R_=e_i.prototype;e_i.mixins(e_d.Widget.mChildBindings);e_R_.e_F=e_e.addChildButton;e_R_.e_S_=function(e_T_){this.fire({name:'Track',code:e_T_})};e_R_.e_Q=function(e_T_,e_T){this.e_S_(e_T_);
this.fire(e_T);};e_R_.e_U_=function(e_V_){var m=this,e_9=m.e_9,e_W=e_d.isArray(e_9)?e_9.length:0,e_W_=0,e_X_=e_V_?'imageTemplateKey':'textTemplateKey',e_Y_=m.localize(e_X_).replace('{index}',''),e_Z_,
e_0_;for(;--e_W>=0;){e_Z_=e_9[e_W].urlkey;if(!e_Z_.indexOf(e_Y_)){e_0_= +e_Z_.replace(e_Y_,'');if(e_d.isNumber(e_0_))e_W_=Math.max(e_W_,e_0_+1);}}return{urlKey:m.localize(e_X_,{index:e_W_}),title:m.localize(e_V_?'imageTemplateTitle':'textTemplateTitle',{index:e_W_}),
fitMode:'none',showOnProductPage:e__};};e_R_.e_$_=function(e_1_,e_2_){var m=this,e_x=m.e_y==='stitch';m.callInherited('useMediaBrowser')({selectionMode:e_1_?'multi':'single',imageType:e_x?'ztimage':'image',
checkZT:e_x,reloadFlag:m.e_k.get('totalItems')>0},function(e___){var e_3_=[],e_c_=e___.length,e_4_= -1;for(;++e_4_<e_c_;)e_3_.push(e___[e_4_].attributes.id);m.filterAddImages(e_3_,e_2_);});};e_R_.e_L_=function(e_5_,e_6_,e_2_){
this.callInherited('useDialog')({component:Uize.copyInto({name:'Zazzle.Dialog.Input'},e_5_?{params:e_5_}:e_c),widgetProperties:Uize.copyInto({persistText:e_a},e_6_),submitHandler:e_2_})};e_R_.e_g_=function(e_7_,e_2_){
var m=this;m.e_L_(e_c,{name:'addTextDialog',value:e_7_,title:m.localize('addTextDialogTitle'),validator:function(e_M_,e_8_){var e_9_= !!e_M_,e_$a=this,e__a='';if(e_M_.length>32767){e_9_=e_a;e__a=m.localize('invalidLengthError',{limit:32767,length:e_M_.length});
}else{var e_aa='',e_ba=e_M_.match(/[^\x0a\x0d\x20-\xFF\u0100-\u017F\u2018\u2019\u201C\u201D\u2460-\u2473\u2F00-\u31FF\u4E00-\u9FCB\uFF00-\uFFEE\uAC00-\uD7A3]+/),e_ca=e_ba?e_ba.length:0,e_da= -1;for(;++e_da<e_ca;){
var e_ea=e_ba[e_da],e_fa=e_ea.charCodeAt(0);e_aa+=(e_fa<32?'[#'+e_fa+']':e_ea)+' ';}if(!(e_9_= !e_aa))e__a=m.localize('invalidCharactersError',{invalidCharacters:e_aa});}e_8_(e_9_,e__a);}},e_2_);};e_R_.e_ga=function(e_ha,e_2_){
var m=this,e_ia=e_ha.length,e_4_= -1,e_ja=m.getInherited('commObject'),e_ka=0,e_la=[],e_ma=function(e_h_){e_h_&&e_la.push(e_h_);++e_ka==e_ia&&e_d.isFunction(e_2_)&&e_2_(e_la);};if(e_ia){!m.e_na&&(m.e_na={
buildRequest:function(e_oa){var e_pa={action:'batch'};for(var e_qa= -1,e_ra=e_oa.length;++e_qa<e_ra;)e_pa['command'+e_qa]=e_d.Url.from(e_oa[e_qa].url).query+'&comm_mode=ajax&output=xml';return{category:'BATCH REQUEST',
cache:'never',returnType:'json',requestMethod:'POST',url:[m.getInherited('env').realviewService,e_pa]};},responseParser:function(e_sa){var e_ta=e_sa.responseJson,e_ua=[],e_va=e_ta.children,e_wa=e_va.length
;for(var e_xa= -1;++e_xa<e_wa;)e_ua.push(e_va[e_xa].children[0]);return e_ua;}});for(;++e_4_<e_ia;)e_ja.queueRequest({url:[m.getInherited('env').realviewService,{action:'getimageinfo',id:e_ha[e_4_].toLowerCase()
}],returnType:'json',requestMethod:'POST',cache:'memory',callback:e_ma,batchingAgent:m.e_na});e_ja.useQueue();}else e_d.isFunction(e_2_)&&e_2_();};e_R_.select=function(e_3,e_ya){var m=this,e_W=e_3.length,
e_R=m.e_R,e_za,e_Aa=e_ya!==e_a;for(;--e_W>=0;){e_za=e_R[e_3[e_W].getName()];e_za&&e_za.set({selected:e_Aa});}m.updateUi();};e_R_.setDesignObjectState=function(e_Ba,e_Ca){var m=this,e_za=m.e_R[e_Ca.getName()]
;e_za&&e_za.set({over:e_Ba=='over'})};e_R_.e_Da=function(e_Ea){var m=this,e_Fa=e_Ea.objects.split(','),e_Ga=e_d.isArray(e_Fa)?e_d.lookup(e_Fa):e_c,e_Ha=[];if(e_Ga){for(var e_t_=m.e_k.itemWidgets,e_W=e_t_.length,
e_u_;--e_W>=0;){e_u_=e_t_[e_W];e_u_.get('name')in e_Ga&&e_Ha.push(e_u_);}}return e_Ha;};e_R_.setConstraint=function(e_Ea){for(var e_Ha=this.e_Da(e_Ea),e_W=e_Ha.length;--e_W>=0;)e_Ha[e_W].set({hasError:e__,
warningMessage:this.localize('constraint_'+e_Ea.type)});};e_R_.focusWarning=function(e_Ea,e_Ia){for(var e_Ha=this.e_Da(e_Ea),e_W=e_Ha.length;--e_W>=0;)e_Ha[e_W].set({warningIsFocused:e_Ia});};e_R_.syncDesignObjects=function(e_Ja,e_Ka,e_La){
var m=this,e_Ma=e_Ja.length,e_W= -1,e_9=m.e_9,e_Na=[],e_k=m.e_k,e_R={},e_Oa,e_u_,e_Pa,e_Qa,e_f_,e_V_;if(!m.e_M){m.e_M=e__;for(;++e_W<e_Ma;){e_u_=e_Ja[e_W];e_Pa=e_u_.type;e_Qa=e_u_ instanceof e_h.DesignText?'text':(e_u_ instanceof e_h.DesignImage?'image':'');
if(e_Qa){e_Oa=e_u_.name;e_V_=e_Qa==='image';!e_9[e_Qa]&&(e_9[e_Qa]=e_d.Template.compile(m.getNode(e_Qa+'PodTemplate').innerHTML.replace('\n','').replace('\t',''),{openerToken:'[%',closerToken:'%]'}))
;if(e_V_){var e_e_=e_u_.imageid.toLowerCase();e_f_=e_u_.getProperty('title')||e_Ka[e_e_]||e_e_;}else e_f_=e_d.Xml.toAttributeValue(e_u_.text);e_Na.push(e_d.copyInto({html:e_9[e_Qa]({itemWidgetName:e_Oa}),
cssClassBase:m.e_Ra,cssClassActive:m.e_Sa,cssClassOver:m.e_Ta,properties:{id:e_Oa,title:e_f_},draggable:e_k.get('dragToReorder'),model:e_u_,selected:e_Oa in e_La,locked:e_u_.isLocked()}));}}e_k.remove(e_k.itemWidgets);
e_k.setNodeInnerHtml('items','');for(var e_Ua=e_k.add(e_Na),e_Va= -1,e_Wa=e_Ua.length,e_Xa,e_Ya={'Changed.over':function(e_T){var e_Za=e_T.source;m.fire({name:'Design Object UI '+(e_Za.get('over')?'Over':'Out'),designObjectUi:e_Za})
},'Changed.selected':function(e_T){var e_Za=e_T.source;!e_Za.get('selected')&&m.fire({name:'Design Object UI Unselected',designObjectUi:e_Za});},Edit:function(e_T){var e_Za=e_T.source;m.e_k.selectNone();
e_Za.set({selected:e__});e_Za.get('type')=='image'?m.e_$_(e_a,function(e___){e___[0]&&m.e_Q('G',{name:'Edit',id:e___[0].e_e_})}):m.e_g_(e_T.source+'',function(e_h_){if(e_h_)m.e_Q('H',{name:'Edit',text:e_h_+''
});else{m.e_S_('I');e_Za.fire({name:'Remove',byUser:e__});}});}};++e_Va<e_Wa;){e_Xa=e_Ua[e_Va];e_Xa.wire(e_Ya);e_R[e_Xa.get('properties').id]=e_Xa;}e_k.isWired&&e_k.displayNode('items',!!e_Ua.length);
m.e_R=e_R;m.updateUi();m.e_M=e_a;}};e_R_.filterAddImages=function(e_3_,e_2_){var m=this,e_x=m.e_y==='stitch';m.e_ga(e_3_,function(e_0a){var e___=[];e_d.Comm.processArrayAsync(e_0a,function(e_1a,e_2a){
var e_3a=e_1a.attributes?e_1a.attributes.id:e_b;if(e_3a){var e_l=e_1a.children,e_4a=e_d.Data.findRecords(e_l,{name:'title'}),e_5a={e_e_:e_3a,e_f_:(e_4a&&e_4a[0]&&e_4a[0].value)||''},e_6a=e_d.Data.findRecords(e_l,{name:'image_type'}),
e_7a=(e_6a&&e_6a[0]&&e_6a[0].value)||'';if(e_x&&e_7a!='ofm'){m.callInherited('useDialog')({component:{name:'ZazzleWww.Dialog.StitchConversion',params:{im:e_3a}},widgetClassName:'Uize.Widget.Dialog.Confirm',
widgetProperties:{name:'confirmConversionDialog',mode:'confirmCustom'},submitHandler:function(e_8a){if(e_8a)e___.push(e_5a);else e___=[];e_2a(e_8a);}})}else{e___.push(e_5a);e_2a();}}},function(){e_2_(e___);
});});};e_R_.wireUi=function(){var m=this;if(!m.isWired){var e_l=m.children,e_9a=e_l.move,e_$b=e_l.advancedOptions;e_9a.wireNode('',{mouseover:function(){e_9a.get('enabled')&&e_9a.get('enabledInherited')&&e_9a.set({mode:'full'})},
mouseout:function(){e_9a.get('enabled')&&e_9a.get('enabledInherited')&&e_9a.set({mode:'mini'})}});e_$b.wire('Changed.enabled',function(){!e_$b.get('enabled')&&m.displayNode('palette',e_a)});m.wireNode(
'viewOther','click',function(){m.e_Q('V',{name:'View Pair',bubble:e__})});e_$.doMy(m,'wireUi');for(var e_H,e__b,e_j=m.e_j,e_ab=e_j.length;--e_ab>=0;){e__b=e_j[e_ab];e_H=e__b.e_H;this.callInherited('wireTooltip')({
node:e__b.e_K?e_H.getNode(e__b.e_K):e__b.e_E?e_H.children[e__b.e_E].getNode():e_H.getNode()});}}m.e_bb();};e_R_.updateUi=function(){var m=this;if(m.isWired){m.e_bb();m.e_7();m.e_cb();e_$.doMy(m,'updateUi');
}};e_R_.e_cb=function(){var m=this,e_db=m.children.edit;if(e_db){var e_eb=e_db.get('values'),e_fb=e_d.findRecord(e_eb,{name:'bg'}),e_gb=e_d.findRecord(e_eb,{name:'border'}),e_j_=m.e_j_,e_hb=e_a;if(e_fb){
e_fb.valueDetails.thumbnailUrl='#'+((e_j_&&e_j_.fillcolor)||'ffffff');e_hb=e__;}if(e_gb){e_gb.valueDetails.thumbnailUrl='#'+((e_j_&&e_j_.strokecolor)||'ffffff');e_hb=e__;}e_hb&&e_db.set({values:e_d.clone(e_eb)});
}};e_R_.e_7=function(){var m=this;if(m.isWired){var e_l=m.children,e_ib=e_l.areaGroups,e_5=e_l.areas,e_jb=e_ib.get('values'),e_kb=e_5.get('values');m.web(e_ib).display(e_d.isArray(e_jb)&&e_jb.length>1);
m.web(e_5).display(e_d.isArray(e_kb)&&e_kb.length>1&&e_l.designObjects.get('totalItems'));}};e_R_.e_bb=function(){var m=this;if(m.isWired){m.e_N=e__;var e_l=m.children,e_k=e_l.designObjects,e_J_=m.e_J_,
e_I_=e_J_?e_J_.getSelected():[],e_lb=e_I_.length,e_mb=e_k.get('totalItems'),e_W=e_lb,e_nb=m.e_nb,e_ob=e_J_?e_J_.getSelected({locked:e__}).length:0,e_pb=e_ob&&e_ob===e_J_.get('numLocked'),e_G=m.e_G,e_qb=e_G.length,
e_rb=[],e_sb=[],e_tb={},e_ub=function(e_vb){var e_o=e_vb.e_o;return(e_vb.e_n||e_vb[e_nb])&&((e_o=='selected-unlocked'&&e_lb&& !e_pb)||e_o=='always'||(e_o=='selected'&& !!e_lb)||(e_o=='unselected'&&e_lb!=e_mb)||
(e_o=='exist'&& !!e_mb)||(e_o=='multi-selected-unlocked'&&e_lb>1&& !e_pb));},e_vb,e_wb,e_o,e_A,e_xb;for(;--e_qb>=0;){e_vb=e_G[e_qb];e_A=e_vb.e_A;e_o=e_vb.e_o;e_wb=e_l[e_A];e_xb=e_vb[e_nb];e_wb.displayNode('shell',!!(e_vb.e_n||e_xb));
e_wb.set({enabled:e_ub(e_vb)});if(e_xb){if(e_A==='fontheight')e_tb.fontheight=e_wb;else if(e_A==='color')e_tb.color=e_wb;else if(e_A==='align')e_tb.align=e_wb;else if(e_A==='path')e_tb.path=e_wb;else if(e_A==='radius')
e_tb.radius=e_wb;else if(e_A==='face')e_tb.face=e_wb;else if(e_A=='lock')e_wb.set({value:!!e_pb});else if(e_A==='template')e_tb.template=e_wb;else if(e_A==='transparent')e_tb.transparent=e_wb;else if(e_A==='tile')
e_tb.tile=e_wb;}}for(var e_yb in m.e_q_){!e_ub(m.e_q_[e_yb])&&e_rb.push(e_yb)}!m.e_zb&&e_rb.push('undo');!m.e_Ab&&e_rb.push('redo');!m.e_Bb&&e_rb.push('paste');e_l.edit.set({disabledList:e_rb});for(var e_Cb in m.e_w_){
!e_ub(m.e_w_[e_Cb])&&e_sb.push(e_Cb)}e_l.arrange.set({disabledList:e_sb});if(!e_d.isEmpty(e_tb)&&e_lb){var e_Db=m.e_U_(e_W&&e_I_[0]instanceof e_h.DesignImage),e_u_,e_Eb,e_Fb,e_Gb,e_Hb,e_Ib,e_Jb,e_Kb,e_Lb,e_Mb,e_Nb,
e_Ob='',e_Pb,e_P_,e_Qb,e_Rb={},e_Sb,e_Tb=0,e_Ub,e_Vb,e_O_,e_Wb,e_Xb,e_Yb,e_Zb,e_0b,e_1b,e_2b,e_3b,e_4b,e_5b={};for(;--e_W>=0;){e_u_=e_I_[e_W];if((e_Ub||(e_Ub=e_tb.fontheight))&&e_Tb!==e_Rb){e_Lb=e_u_.getProperty('height');
e_Tb= !e_Tb||e_Tb===e_Lb?e_Lb:e_Rb;}if((e_Vb||(e_Vb=e_tb.color))&&e_Sb!==e_Rb){e_Kb=e_u_.getProperty('color');e_Sb= !e_Sb||e_Kb===e_Sb?e_Kb:e_Rb;}if((e_O_||(e_O_=e_tb.align))&&e_Pb!==e_Rb){e_Fb=e_u_.getAlign();
e_Gb=e_Fb===e_h.DesignTextAlign.LEADING?'left':(e_Fb===e_h.DesignTextAlign.TRAILING?'right':'center');e_Pb= !e_Pb||e_Pb===e_Gb?e_Gb:e_Rb;}if((e_Xb||(e_Xb=e_tb.path))&&e_P_!==e_Rb){e_Hb=e_u_.getPath();
e_Ib=e_Hb===e_h.DesignTextPath.RARC?'rarc':e_Hb===e_h.DesignTextPath.ARC?'arc':e_Hb===e_h.DesignTextPath.VERT?'vert':'horz';e_P_= !e_P_||e_P_===e_Ib?e_Ib:e_Rb;}if((e_Yb||(e_Yb=e_tb.radius))&&e_Qb!==e_Rb){
e_Jb=e_u_.getArc();e_Qb= !e_Qb||e_Qb===e_Jb?e_Jb:e_Rb;}if((e_Wb||(e_Wb=e_tb.face))&&e_Ob!==e_Rb){e_Eb=e_u_.getProperty('face');e_Ob= !e_Ob||e_Ob===e_Eb?e_Eb:e_Rb;}if(e_Zb||(e_Zb=e_tb.template)){e_Mb=e_u_.urlkey;
e_1b=e_W==e_I_.length-1||e_1b==e_Mb?e_Mb:e_Rb;}if((e_0b||(e_0b=e_tb.transparent))&&(e_0b.get('value')||e_W==e_I_.length-1)){e_3b=e_u_.getProperty('whitetransparent')==='true';}if((e_2b||(e_2b=e_tb.tile))&&(e_2b.get('value')||e_W==e_I_.length-1)){
e_Nb=e_u_.getProperty('layout')==='tile';e_4b= !e_4b||e_4b===e_Nb?e_Nb:e_Rb;}}if(e_Zb){if(e_1b){if(e_1b!==e_Rb){var e_6b=m.e_9,e_7b,e_8b=e_d.isArray(e_6b)?e_6b.length:0;for(;--e_8b>=0;){e_7b=e_6b[e_8b];
if(e_7b.urlkey===e_1b){e_Db={urlKey:e_7b.urlkey,title:e_7b.title,fitMode:e_u_.getProperty('fillmode'),showOnProductPage:e_7b.ppshow};break;}}}}e_Zb.set(e_d.copyInto({isTemplate:!!e_1b&&e_1b!==e_Rb,hasMultiple:e_1b===e_Rb,
mode:m.e_nb},e_Db));}if(e_Wb&&e_Ob&&e_Ob!==e_Rb&&e_Wb.get('value')!==e_Ob){e_Wb.set({value:e_Ob,valueDetails:{displayName:e_Ob}});e_5b.face=e_Ob;}if(e_O_&&e_Pb&&e_Pb!==e_Rb){e_O_.set({value:e_Pb})}if(e_Vb&&e_Sb&&e_Sb!==e_Rb){
e_Vb.set({value:e_Sb});e_5b.color=e_Sb;}if(e_Ub&&e_Tb&&e_Tb!==e_Rb){e_Ub.set({value:e_Tb/10});e_5b.height=e_Tb;}if(e_Xb&&e_P_&&e_P_!==e_Rb){e_Xb.set({value:e_P_})}if(e_Yb&&e_Qb&&e_Qb!==e_Rb){e_Yb.set({value:e_Qb})
}if(e_2b){e_2b.set({value:!!(e_4b!==e_Rb&&e_4b)});}if(e_0b){e_0b.set({value:!!e_3b});}m.fire({name:'Update Default Design Object Properties',newDefaults:{text:e_5b}});}m.displayNode('none',!e_ob&&e_mb);
e_l.lock&&e_l.lock.set({enabled:m.e_9b?'inherit':e_a});m.e_N=e_a;}};e_i.stateProperties({e_6:{name:'area'},e_5:{name:'areas',onChange:function(){this.children.areas&&this.children.areas.set('values',this.e_5)
}},e_$c:{name:'areaGroup'},e_o_:'areaGroupDisplayName',e_ib:'areaGroups',e_j_:{name:'areaFillProperties',onChange:e_R_.e_cb},e_S:{name:'canSave',value:e__},e_Bb:{name:'canPaste',value:e_a,onChange:e_R_.e_bb
},e_zb:{name:'canUndo',value:e_a,onChange:e_R_.e_bb},e_Ab:{name:'canRedo',value:e_a,onChange:e_R_.e_bb},e_Sa:'cssClassDesignObjectUiActive',e_Ra:'cssClassDesignObjectUiBase',e_Ta:'cssClassDesignObjectUiOver',
e__c:'dialogMooringNode',e_ac:{name:'dialogOffsetX',value:0},e_bc:{name:'dialogOffsetY',value:0},e_9b:{name:'lockIsEditable',value:e__},e_nb:{name:'mode',conformer:function(e_cc){return e_cc==='image'||e_cc==='text'||e_cc==='combined'?e_cc:this.e_k.get('totalItems')?'noneSelected':'noneExist'
},onChange:e_R_.e_bb},e_y:'process',e_p_:'productTypeDisplayName',e_J_:'selectedDesignObjectsModel',e_dc:{value:0},e_9:'templates',e_ec:{name:'transferableAreas',onChange:function(){var m=this,e_ec=m.e_ec,
e_db=m.children.edit;if(e_db){var e_eb=e_db.get('values'),e_q_=m.e_q_,e_fc= -1,e_gc= -1;for(var e_hc= -1;++e_hc<e_eb.length;){var e_ic=e_eb[e_hc];if(e_ic.name=='delete')e_fc=e_hc;else if(e_ic.name=='clear')
e_gc=e_hc;}if(e_fc> -1){if((e_gc-e_fc)>1){e_eb.splice(e_fc+1,e_gc-e_fc-1);for(var e_jc in e_q_){if(!e_jc.indexOf('moveTo'))delete e_q_[e_jc];}}if(e_ec.length)for(var e_kc= -1;++e_kc<e_ec.length;){var
 e_lc='moveTo'+e_kc,e_mc=e_ec[e_kc];e_eb.splice(e_fc+1+e_kc,0,{name:e_lc,valueDetails:{name:e_lc,displayName:m.localize('moveToMenuItem',{sideName:e_mc.displayName}),attributes:{e_nc:!e_kc,area:e_mc.name
}}});e_q_[e_lc]={e_n:1,e_o:'selected'};}e_db.set({values:e_d.clone(e_eb)});}}}}});e_i.childBindings({dialogMooringNode:['face','color'],dialogOffsetX:['face','color'],dialogOffsetY:['face','color']});
return e_i;}});
Uize.module({name:'Uize.Widget.Scrolly',required:['Uize.Fade','Uize.Widget.Button'],builder:function(d_$){'use strict';function d__(m,d_a,d_b,d_c){m.isWired&&m.displayNode([m.children[d_b].getNode(),m.children[d_c].getNode()],
m.d_d||m.get('isScrollable'+d_a));}function d_e(m,d_f){if(m.isWired){var d_g=m.getNode('view'),d_h=d_f=='X'?'Width':'Height';m.set('maxPage'+d_f,d_g?Math.max(Math.ceil(d_g['scroll'+d_h]/d_g['offset'+d_h])-1,
0):0);}}function d_i(m,d_j,d_f){d_e(m,d_f);return(Uize.isNumber(d_j= +d_j)?Uize.constrain(d_j,0,m.get('maxPage'+d_f)||0):m.get('page'+d_f));}function d_k(m,d_f){var d_l=m.get('page'+d_f),d_m=m.children
;function d_n(d_o,d_p){var d_q=d_m[d_o];d_q&&d_q.set({enabled:d_p?'inherit':false});}d_n(d_f=='X'?'left':'up',d_l);d_n(d_f=='X'?'right':'down',(m.get('maxPage'+d_f)-d_l+1||2)>1);}function d_r(){var m=this;
if(m.isWired){var d_g=m.getNode('view');m.fade.start({startValue:{scrollLeft:d_g.scrollLeft,scrollTop:d_g.scrollTop},endValue:{scrollLeft:m.d_s*d_g.offsetWidth,scrollTop:m.d_t*d_g.offsetHeight}});}}function d_u(){d_k(this,'X')}
function d_v(){d_k(this,'Y')}function d_w(){d__(this,'X','left','right')}function d_x(){d__(this,'Y','up','down')}return d_$.subclass({alphastructor:function(){var m=this;m.fade=Uize.Fade({duration:400,
curve:Uize.Fade.celeration(0,1),quantization:1});m.fade.wire('Changed.value',function(d_y){m.isWired&&m.setNodeProperties('view',d_y.newValue)});},omegastructor:function(){var m=this;function d_z(d_o,d_A,d_B){
m.addChild(d_o,Uize.Widget.Button,{action:function(d_C){var d_D=d_C.shiftKey?Infinity:1,d_E={};if(d_A)d_E.d_s=m.d_s+d_A*d_D;if(d_B)d_E.d_t=m.d_t+d_B*d_D;m.set(d_E);}});}d_z('left',-1,0);d_z('right',1,0);
d_z('up',0,-1);d_z('down',0,1);},instanceMethods:{updateUi:function(){d_e(this,'X');d_e(this,'Y');}},stateProperties:{d_F:{name:'isScrollableX',onChange:d_w,value:false},d_G:{name:'isScrollableY',onChange:d_x,
value:false},d_H:{name:'maxPageX',onChange:[function(){this.set({d_F:(this.d_H+1||2)>1});},d_u]},d_I:{name:'maxPageY',onChange:[function(){this.set({d_G:(this.d_I+1||2)>1});},d_v]},d_s:{name:'pageX',
conformer:function(d_J){return d_i(this,d_J,'X')},onChange:[d_r,d_u],value:0},d_t:{name:'pageY',conformer:function(d_J){return d_i(this,d_J,'Y')},onChange:[d_r,d_v],value:0},d_d:{name:'showButtonsWhenNotScrollable',
onChange:[d_w,d_x],value:true}}});}});
Uize.module({name:'Uize.Comm.Ajax',required:'Uize.Url',builder:function(d_$){'use strict';var d__=Uize.nop;return d_$.subclass({instanceMethods:{performRequest:function(d_a,d_b){var m=this,d_c=d_a.returnType,
d_d=d_c=='object',d_e=Uize.Url.fromParams(d_a.url),d_f=Uize.Url.resolve(d_a.url,Uize.copyInto({rnd:d_a.cache=='never'?Uize.Url.getCacheDefeatStr():null},d_e.comm_mode?null:{comm_mode:'ajax'},d_e.output?null:{output:'js'}
)),d_g=d_a.data||'',d_h=d_a.requestMethod,d_i=d_h=='POST',d_j=m.d_j||(m.d_j=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject('Microsoft.XMLHTTP'));d_j.onreadystatechange=function(){if(d_j.readyState==4){
d_j.onreadystatechange=d__;if(d_j.status==200){var d_k=d_j.responseText;if(d_d||d_c=='xml')d_a.responseXml=d_j.responseXML;if(d_d||d_c=='text')d_a.responseText=d_k;if(d_d||d_c=='json')d_a.responseJson=d_k
?Function('var a=['+d_k+'];return a.pop()')():null;d_j.abort();d_b();}else{d_j.abort();d_b({status:d_j.status,statusText:d_j.statusText});}}};if(d_j.upload){d_j.upload.onprogress=function(d_l){m.fire({name:'Progress',xhrEvent:d_l});
m.fire({name:'Progress',xhrEvent:d_l});}}if(d_i&& !d_g){var d_m=d_f.indexOf('?');d_g=d_f.substr(d_m+1);d_f=d_f.slice(0,d_m);}m.d_j.open(d_h,d_f,true);if(d_i){d_a.contentType!='multipart/form-data'&&m.d_j.setRequestHeader(
'Content-type',d_a.contentType||'application/x-www-form-urlencoded');}m.d_j.send(d_g);}}});}});
Uize.module({name:'Zazzle.ProductRealviewsModel',superclass:'Uize.Class',required:['Uize.Comm.Ajax','Uize.Url'],builder:function(c_$){'use strict';var c__=true,c_a=false,c_b=null,c_c=Uize;var c_d=c_$.subclass(
function(){this.c_e=c__;this.c_f=new c_c.Comm.Ajax;this.c_g=0;},function(){this.c_e=c_a;}),c_h=c_d.prototype;c_h.c_i=function(c_j){var m=this;if(!m.c_e&&m.c_f){clearTimeout(m.c_k);m.c_k=setTimeout(function(){
m.set({c_l:c__});m.c_f.request({url:[m.c_m,{pt:m.c_n,pd:m.c_o,att:c_c.Url.toParams(c_c.copy(m.c_p,{'design.areas':m.c_q})),dz:m.c_r,ppd:m.c_s,patt:m.c_t?c_c.Url.toParams(m.c_t):c_b,r:m.c_g,returnareas:m.c_u,
includeAnnotationsUi:m.c_v,experience:m.c_w,view:m.c_x}],cache:'memory',requestMethod:'POST',returnType:'json',callback:function(c_y){var c_z=c_y.data;m.c_e=c__;m.set({c_A:c_z.realviews});m.c_e=c_a;m.set({c_l:c_a});
var c_B=[];for(var c_C= -1;++c_C<m.c_A.length;){var c_x=m.c_A[c_C];c_x.type!='design'&&c_B.push(c_x);}m.fire({name:'Realviews Info Updated',views:c_B});c_j&&c_j();}});},m.c_D);}};c_h.getDesignViewInfo=function(c_E){
var c_F=this.getPrimaryViewInfo(c_E,'design');return c_F&&c_F.realviewParams;};c_h.getPrimaryArea=function(c_x){var c_F=this.c_G(c_x);return c_F&&c_F.primaryAreas&&c_F.primaryAreas.length?c_F.primaryAreas[0]:null;
};c_h.getPrimaryViewInfo=function(c_E,c_H){var c_I=this.c_A||[],c_J=c_I.length,c_K,c_L;for(var c_C= -1;++c_C<c_J;){var c_F=c_I[c_C];if((!c_H||c_F.type==c_H)){if(c_F.primaryAreas&&c_F.primaryAreas.length&&Uize.isIn(c_F.primaryAreas,c_E)){
c_K=c_F;break;}else if(!c_L&&c_F.areas&&c_F.areas.length&&Uize.isIn(c_F.areas,c_E))c_L=c_F;}}return c_K||c_L;};c_h.getViewInfo=c_h.c_G=function(c_x){return c_c.findRecord(this.c_A,{name:c_x});};c_h.getViewsForArea=function(c_E){
var c_I=this.c_A||[],c_J=c_I.length,c_M=[];for(var c_C= -1;++c_C<c_J;){var c_F=c_I[c_C];c_F.type=='product'&&c_F.areas&&c_c.isIn(c_F.areas,c_E)&&c_M.push(c_F.name);}return c_M;};c_h.getVisibleAreas=function(c_x){
var c_F=this.c_G(c_x);return c_F?c_F.areas:c_b;};c_h.update=c_h.c_N=function(c_j){this.c_g++;this.c_i(c_j);};var c_i=function(){this.c_i()};c_d.stateProperties({c_l:{name:'busy',value:c_a},c_r:{name:'designId',
onChange:c_i},c_q:{name:'designAreas',onChange:c_i},c_w:{name:'experience',onChange:c_i},c_v:{name:'includeAnnotationsUi',onChange:c_i},c_s:{name:'parentProductId',onChange:c_i},c_t:{name:'parentProductOption',
onChange:c_i},c_e:'preventServiceCall',c_o:{name:'productId',onChange:c_i},c_p:{name:'productOption',onChange:c_i},c_n:{name:'productType',onChange:c_i},c_A:'realviewsInfo',c_D:{name:'requestDelay',value:150
},c_u:{name:'returnAreas',onChange:function(){this.c_u&&this.c_i();}},c_x:'view',c_m:'serviceUrl'});return c_d;}});
Uize.module({name:'Zazzle.MaxHotspotUi',superclass:'Uize.Widget.Button',required:['Uize.Url','Uize.Widget.mWeb'],builder:function(e_$){'use strict';var e__='Left',e_a='Right',e_b=['Chiclet','Selection',
'View'],e_c=function(){var m=this;m.isWired&&m.web().setClassState([m.e_d,m.e_e,m.e_f],Uize.indexIn(e_b,m.e_g));},e_h=function(){var m=this;m.isWired&&m.web().setClassState([m.e_i,m.e_j],m.e_k==e_a);
},e_l=function(){var m=this;m.isWired&&m.web().setClassState(m.e_m,m.get('selected'));},e_n=function(){var m=this;m.isWired&&m.web('thumbnail').value(m.e_o?Uize.Url.resolve(m.e_o,{max_dim:m.e_p}):m.getInherited('env').assets+'s.gif'
);};return e_$.subclass({mixins:Uize.Widget.mWeb,omegastructor:function(){var m=this;m.wire('Changed.selected',function(){m.e_l()});},instanceMethods:{e_c:e_c,e_h:e_h,e_l:e_l,e_n:e_n,updateUi:function(){
var m=this;if(m.isWired){m.e_c();m.e_l();m.e_h();m.e_n();e_$.doMy(m,'updateUi');}}},stateProperties:{e_d:'cssClassDisplayModeChiclet',e_e:'cssClassDisplayModeSelection',e_f:'cssClassDisplayModeView',
e_i:'cssClassLeft',e_j:'cssClassRight',e_m:'cssClassSelected',e_g:{name:'displayMode',onChange:e_c},e_k:{name:'layout',onChange:e_h,value:e__},e_p:'thumbnailSizeMax',e_o:{name:'thumbnailUrl',onChange:e_n
}}});}});
Uize.module({name:'Zazzle.ProductViewHotspotUi',superclass:'Uize.Widget.CollectionItem',required:['Zazzle.MaxHotspotUi','Uize.Util.Coupler','Uize.Widget.mWeb'],builder:function(e_$){var e__=e_$.subclass(
null,function(){var m=this,e_a=m.e_a=m.addChild('hotspot',Zazzle.MaxHotspotUi,{clickToDeselect:true,clickToSelect:true,cssClassDisplayModeChiclet:m.e_b,cssClassDisplayModeSelection:m.e_c,cssClassDisplayModeView:m.e_d,
cssClassLeft:m.e_e,cssClassRight:m.e_f,cssClassSelected:m.e_g,thumbnailSizeMax:m.e_h}),e_i=function(e_j){m.fireAnnotationEvent(e_j)};new Uize.Util.Coupler({instances:[m,e_a],properties:['selected']});
e_a.wire({Click:e_i,Over:e_i,Out:e_i,Down:e_i});m.wire({'Changed.properties':function(){m.e_k()},'Changed.selected':e_i});}),e_l=e__.prototype;e__.mixins(Uize.Widget.mWeb);e_l.e_k=function(){var m=this;
if(m.isWired){var e_a=m.e_a,e_m='',e_n='',e_o='';if(m.e_p){var e_q=m.get('properties'),e_r=e_q.type,e_s=e_q.infoText,e_t=e_q.posX,e_u=m.e_v&&e_t>0,e_w=function(e_x){return 100*e_x+50},e_y=e_w(e_t);if(e_r=='option')
e_s=e_q.displayName||(m.getInherited('primaryOptions')||{})[e_q.optionName]||e_q.optionName;else if(e_r=='area')e_s=e_q.displayName||(m.getInherited('areas')||{})[e_q.areaName]||e_q.areaName;e_a.set({
text:e_s,displayMode:e_q.displayMode,layout:e_u?'Right':'Left',thumbnailUrl:e_q.thumbnailUrl});e_n=e_u?'':(e_y+'%');e_o=e_u?((100-e_y)+'%'):'';e_m=e_w(e_q.posY)+'%';}else{e_m='110%';if(e_a.get('layout')=='Right')
e_o='50%';else e_n='50%';}m.web(e_a).css({opacity:m.e_p?1:0,left:e_n,right:e_o,top:e_m});}};e_l.fireAnnotationEvent=function(e_z){var m=this,e_a=m.e_a;m.fire({name:'Annotation Event',type:e_z.name,data:m.get('properties'),
bubble:true,mooringNode:e_a.getNode('dot'),domEvent:e_z.domEvent});};e_l.updateUi=function(){var m=this;if(m.isWired){m.e_k();e_$.doMy(m,'updateUi');}};e__.stateProperties({e_b:'cssClassDisplayModeChiclet',
e_c:'cssClassDisplayModeSelection',e_d:'cssClassDisplayModeView',e_e:'cssClassLeft',e_f:'cssClassRight',e_g:'cssClassSelected',e_p:{name:'shown',onChange:e_l.e_k,value:false},e_v:{name:'smartPositioning',
value:true},e_h:'thumbnailSizeMax'});return e__;}});
Uize.module({name:'Zazzle.ProductViewUi',superclass:'Zazzle.Widget',required:['Uize.Widget.Collection','Uize.Widget.CollectionItem','Uize.Widget.Options','Uize.Widget.Scrolly','Uize.Widget.Button','Uize.Util.Coupler',
'Uize.Util.PropertyAdapter','Zazzle.ProductRealviewsModel','Uize.Node.Classes','Uize.Url','Uize.Node','Uize.Data','Uize.Template','Zazzle.ProductViewHotspotUi','Uize.Widget.mWeb'],builder:function(z_$){
'use strict';var z__=Uize,z_a=z__.Node,z_b=z__.Url,z_c=Zazzle,z_d=z__.Util.Coupler,z_e=z_a.getCoords,z_f=z_a.getDimensions,z_g=z_a.Classes.setState,z_h=true,z_i=false,z_j=null,z_k,z_l=1,z_m=2,z_n=4;z__.module({
name:'Zazzle.ProductViewMainViewUi',superclass:'Zazzle.Widget',builder:function(z_$){z__.module({name:'Zazzle.ProductViewHotspotsUi',superclass:'Uize.Widget.Collection',builder:function(z_$){var z_o=z_$.subclass(),
z_p=z_o.prototype;z_o.mixins(z__.Widget.mWeb);z_p.wireUi=function(){var m=this;if(!m.isWired){var z_q=m.web('hotspotTemplate').value();z_q&&m.set({itemWidgetProperties:z__.copyInto(m.get('itemWidgetProperties')||{},
{built:z_i,container:m.getNode(),insertionMode:'inner bottom',html:z__.Template.compile(z_q,{openerToken:'[%',closerToken:'%]'})})});m.wire('Annotation Event',function(z_r){if(z_r.type=='Click'){m.z_s
&&m.z_s.set({selected:z_i});(m.z_s=z_r.source).set({selected:z_h});}});z_$.doMy(m,'wireUi');}};z_o.set({itemWidgetClass:z_c.ProductViewHotspotUi});return z_o;}});var z_o=z_$.subclass(z_j,function(){this.z_t=this.addChild('hotspots',z_c.ProductViewHotspotsUi);
}),z_p=z_o.prototype;z_p.z_u=function(z_v){var m=this,z_w=m.z_w,z_x=m.z_x;return z_b.resolve(z_v,{max_dim:z_v.indexOf('_'+z_w+'.')== -1?z_w:z_j,bg:z_x&&z_x.indexOf('ffffff')== -1?z_x:z_j});};z_p.z_y=function(){
var m=this;m.isWired&&m.set({z_z:m.web().width()});};z_p.z_A=function(){var m=this,z_t=m.z_t;if(z_t){var z_B={},z_C,z_D=m.z_D||[],z_E=z_D.length,z_F= -1,z_G=m.z_G,z_H=m.z_H,z_I=m.z_I,z_J=function(z_K){return(z_I&z_K)==z_K},
z_L=z_t.itemWidgets,z_M= -1,z_N=z_L.length;for(;++z_F<z_E;){z_C=z_D[z_F];if(z_C){var z_O=z_C.type,z_P=z_B[z_O]=(z_B[z_O]||{});if((z_O=='info'&&z_J(z_l))||(z_O=='option'&&z_J(z_m)&&(!z_G||z_G[z_C.optionName]))
||(z_O=='area'&&z_J(z_n)&&z_H&&z_H[z_C.areaName]))z_P[z_C.name]=z_C;}}for(;++z_M<z_N;){var z_Q=z_L[z_M],z_R=z_Q.get('properties'),z_O=z_R.type,z_S=z_R.name,z_P=z_B[z_O];if(z_P&&z_P[z_S]){z_Q.set({properties:z_P[z_S],
shown:z_h});delete z_P[z_S];}else{z_Q.set({shown:z_i});}}for(var z_O in z_B){var z_P=z_B[z_O];for(var z_S in z_P){var z_R=z_P[z_S];z_t.addItemWidget(z_t.makeItemWidgetName(z_R),{properties:z_R,shown:z_h
});}}}};z_p.z_T=function(){var m=this;if(m.isWired){var z_v=m.z_u(m.z_U);m.getNodeValue('realview')!==z_v&&m.setNodeValue('realview',z_v);}};z_p.updateUi=function(){var m=this;if(m.isWired){m.z_y();m.z_T();
m.z_A();z_$.doMy(m,'updateUi');}};z_p.wireUi=function(){var m=this;if(!m.isWired){if(!m.z_U){var z_U=m.getNodeValue('realview'),z_V=m.getNode('realviewMask'),z_W=z_i,z_X=function(){z_W&&m.setNodeStyle(z_V,{opacity:.25});
},z_Y=function(z_r){var z_Z=z_r.type;z_W=z_Z=='Over';if(m.isWired&&(z_W||z_Z=='Out')){var z_R=z_r.data,z_0=function(){return z_b.resolve(m.z_u(m.z_U),{design:z_j,areamask:4,areacolor:'4c7fd3',maskcolor:'ffffff',
area:z_R.areaName,image_type:'png'});};if(z_R.type=='area'){if(z_W){var z_1=z_V.src,z_2=z_0();if(z_1==z_2)z_X();else z_V.src=z_2;}else m.setNodeStyle(z_V,{opacity:0});}}};z_U&&m.set({z_U:z_U});if(z_V){
m.wire('Annotation Event',z_Y);m.wireNode(z_V,'load',z_X);}}z_$.doMy(m,'wireUi');}};z_o.stateProperties({z_D:{name:'annotations',onChange:z_p.z_A},z_H:'areas',z_x:{name:'imageBackgroundColor',value:'0xffffff'
},z_z:{name:'imageSize',onChange:function(){var m=this,z_z=m.z_z,z_w=z_z,z_3=m.z_3,z_4=m.z_4;if(z__.isArray(z_3)){for(var z_5= -1;++z_5<z_3.length;){var z_6=z_3[z_5];if(z_6<=z_4&&z_z<=z_6){z_w=z_6;break;
}}}m.set({z_w:z_w});},value:700},z_I:'includeAnnotationsUi',z_4:{name:'maxRequestedImageSize',value:700},z_G:'primaryOptions',z_w:{name:'requestedImageSize',value:700},z_3:'validRequestedImageSizes',
z_U:{name:'value',onChange:z_p.z_T}});return z_o;}});z__.module({name:'Zazzle.ProductViewSelectorUi',superclass:'Uize.Widget.Options',builder:function(z_$){return z_$.subclass({stateProperties:{z_7:{
name:'viewUrls',derived:function(values){var m=this,z_8=m.callInherited('getUrlBase')(),z_9=m.callInherited('getRealviewParams')(),z_$_=m.getInherited('templateParams'),z___=m.getInherited('viewSelectorImageSize'),
z_a_=z_b.getCacheDefeatStr();return z__.map(values,function(z_b_){return z_b.resolve(z_8,z__.copy(z_b_.realviewParams,z_9,z_$_,{r:z_a_,max_dim:z___}))});}}},set:{html:z_h,insertionMode:'inner bottom',
optionWidgetProperties:{classNamingForStates:''}}});}});var z_o=z_$.subclass(z_j,function(){var m=this,z_c_=['designAreas','designId','parentProductId','parentProductOption','productId','productOption',
'productType','view'],z_d_=m.addChild('mainView',z_c.ProductViewMainViewUi),z_e_=m.model=m.z_e_=new z_c.ProductRealviewsModel(z__.copyInto({serviceUrl:m.z_f_,returnAreas:!!m.z_g_},m.get(z_c_))),z_h_=
m.z_h_=m.addChild('viewSelector',z_c.ProductViewSelectorUi),z_i_=new z_d({instances:[m,z_e_],properties:z_c_,coupled:m.isWired}),z_j_,z_k_;m.addChild('scrolly',z__.Widget.Scrolly);new z__.Util.PropertyAdapter({
propertyA:{instance:z_d_,property:'imageSize'},propertyB:{instance:m,property:'maxDim'}});z_d_.wire('Changed.requestedImageSize',function(){m.z_l_()});new z__.Util.PropertyAdapter({propertyA:{instance:z_d_,
property:'requestedImageSize'},propertyB:{instance:m,property:'requestedMaxDim'}});z_e_.wire({'Realviews Info Updated':function(z_r){var z_m_=z_r.views,z_n_=z_i,z_o_=z_i,z_p_=z_i,z_q_;if(m.z_r_){z_k_={name:m.z_r_};
m.z_r_=z_k;}z_h_.forAll(function(z_s_){z_s_.removeUi()});for(var z_t_= -1;++z_t_<z_m_.length;){var z_u_=z_m_[z_t_];if(z_k_){if(z_u_.name==z_k_.name){z_q_=z_u_;break;}else if(z_u_.displayName==z_k_.displayName){
if(!z_n_&&z_u_.contextId==z_k_.contextId){z_q_=z_u_;z_n_=z_h;}else if(!z_o_&& !z_n_){z_q_=z_u_;z_o_=z_h;}}else if(!z_p_&& !z_o_&& !z_n_&&z_u_.contextId==z_k_.contextId){z_q_=z_u_;z_p_=z_h;}}if(!z_q_)
z_q_=z_u_;}if(m.z_v_||m.z_w_){var z_x_=z_m_,z_y_;if(m.z_v_){z_x_=[];for(var z_t_= -1;++z_t_<z_m_.length;){z_y_=z_m_[z_t_];if(z_y_.type!='product'||z_y_.contextId==z_q_.contextId)z_x_.push(z_y_);}}if(m.z_w_){
var z_z_=[];for(var z_t_= -1;++z_t_<z_x_.length;){z_y_=z_x_[z_t_];if(z_y_.canBePreferred)z_z_.push(z_y_);}if(!z_z_.length)z_z_=z_x_;z_x_=z_z_;}z_m_=z_x_;}z_k_=z_q_;z_h_.set({values:z_m_,value:z_q_.name
});z_A_();},'Changed.busy':function(){m.set({busy:z_e_.get('busy')?z_h:'inherit'});}});function z_A_(z_U){m.z_B_&&m.z_T(z_U)}z_h_.wire({'Changed.value':function(){var z_U=z_h_+'';z_k_=z_h_.getValueObject();
z_A_();m.set({z_U:z_U});},'Changed.tentativeValue':function(){clearTimeout(z_j_);var z_C_=z_h_.get('tentativeValue');function z_D_(){m.z_T(z_C_)}if(z_C_!=z_h_.get('value'))z_j_=setTimeout(z_D_,250);else
 z_D_();}});z_k_=z__.findRecord(z_h_.get('values'),{name:z_h_+''});m.addChild('toggleButtonStrip',z__.Widget.Button,{classNamingForStates:''}).wire('Click',function(){m.set({z_E_:!m.z_E_});});m.setToolTip(m.children.toggleButtonStrip,function(){
return m.localize(m.z_E_?'openButtonStrip':'closeButtonStrip')});m.setToolTip(m.z_F_('largeView',function(){var z_G_=m.getCurrentViewInfo().maskParams;m.callInherited('useDialog')({component:{name:'Zazzle.TransparentRealviewOverlay'},
widgetProperties:{name:'transparentRealviewOverlay',imageUrl:z_b.resolve(z_d_+'',{bg:'0xdddddd'}),maskUrl:z_b.resolve(m.getUrlBase(),[{areamask:'pr'},z_G_&&z_G_.design&&{r:z_b.getCacheDefeatStr()},z_G_
])}});}));m.wire('Changed.wired',function(){z_e_.set('preventServiceCall',true);z_i_.set('coupled',m.isWired);z_e_.set('preventServiceCall',false);});}),z_p=z_o.prototype;z_p.z_F_=Uize.Widget.Button.addChildButton;
z_p.z_H_=function(){var m=this;m.isWired&&z_g(m.children.toggleButtonStrip.getNode(),[m.z_I_,m.z_J_],m.z_E_);};z_p.z_T=function(z_U){var m=this,z_K_=m.children,z_h_=m.z_h_,z_q_=z_h_.getValueObject(z_U)
;if(z_q_){z_K_.mainView.set({value:z_b.resolve(m.getUrlBase(),z__.copy(z_q_.realviewParams,{wm:m.z_L_},m.getRealviewParams(z_h),m.z_$_,{r:m.z_a_||z_j,max_dim:z_k})),annotations:z_q_.annotations});}};
z_p.z_l_=function(){var m=this;m.isWired&&m.web().setClassState(m.z_M_,m.children.mainView.get('requestedImageSize')>=700);};z_p.getCurrentViewInfo=function(){return this.z_h_.getValueObject();};z_p.getUrlBase=function(){
return this.get('urls').rlvBase;};z_p.getRealviewParams=function(){return{pending:!this.z_N_,pdt:this.z_O_};};z_p.refresh=function(){var m=this,z_h_=m.children.viewSelector;if(z_h_&&m.isWired){var z_P_=z_h_.get('values');
m.z_T();z_h_.forAll(function(z_s_,z_Q_){z_s_.setNodeValue('image',z_b.resolve(m.getUrlBase(),z__.copy(z_P_[z_Q_].realviewParams,m.getRealviewParams(),m.z_$_,{r:m.z_a_||z_j,max_dim:m.z_R_})));});}};z_p.setToolTip=function(z_S_,z_T_){
var z_U_={node:z_S_.getNode(),direction:'Right'};z_T_&&(z_U_.message=z_T_);this.callInherited('wireTooltip')(z_U_);return z_S_;};z_p.updateUi=function(){var m=this;if(m.isWired){var z_K_=m.children;z_K_.mainView.updateUi();
z_K_.scrolly.updateUi();m.z_H_();m.z_l_();z_$.doMy(m,'updateUi');}};function z_V_(z_W_){var m=this,z_X_=z_W_.productOption!==z_k,z_Y_=z_W_.value!==z_k;if(z_Y_&& !z_X_)m.z_h_&&m.z_h_.set({value:m.z_U})
;else if(m.isWired&&z_Y_&&z_X_)m.z_r_=z_W_.value;}function z_Z_(z_0_,z_1_){return z__.Data.identical(z_0_,z_1_)?z_1_:z_0_}z_o.stateProperties({z_C:'annotation',z_a_:{name:'cacheDefeat',onChange:z_p.refresh,
value:0},z_I_:'cssClassCollapseButtonStrip',z_J_:'cssClassExpandButtonStrip',z_2_:'cssClassSelectedInView',z_3_:'cssClassShowSelected',z_4_:'cssClassViewSelectorWithButtons',z_M_:'cssClassViewCrop',z_5_:'designId',
z_6_:'designAreas',z___:{name:'maxDim',value:700},z_7_:{name:'requestedMaxDim',value:700},z_8_:'modelRequiresDesignAreas',z_g_:{name:'modelReturnAreas',onChange:function(){this.z_e_&&this.z_e_.set('returnAreas',this.z_g_);
}},z_f_:{name:'modelServiceUrl',onChange:function(){this.z_e_&&this.z_e_.set({serviceUrl:this.z_f_})}},z_9_:'parentProductId',z_$a:'parentProductOption',z_w_:{name:'preferredViewsOnly',value:false},z_N_:'productId',
z__a:{name:'productOption',conformer:z_Z_,onChange:z_V_},z_O_:'productType',z_v_:{name:'singleProductContext',value:false},z_$_:{name:'templateParams',conformer:z_Z_,onChange:function(){this.z_B_&&this.refresh()}
},z_aa:'tentativeAnnotation',z_ba:'urls',z_B_:{name:'updateViewsOnDataChange',value:z_h},z_U:{name:'value|view',onChange:z_V_},z_R_:{name:'viewSelectorImageSize',onChange:z_p.refresh},z_ca:{name:'watermarkDesign',
value:0},z_L_:{name:'watermarkProduct',value:0},z_E_:{name:'toggleButtonStripExpanded',onChange:z_p.z_H_,value:z_i}});return z_o;}});
Uize.module({name:'ZazzleWww.ProductViewUi',superclass:'Zazzle.ProductViewUi',required:['Uize.Node','Uize.Node.Classes'],builder:function(f_$){'use strict';var f__=true,f_a=false,f_b=Uize,f_c=f_b.Node,
f_d=f_c.Classes;var f_e=f_$.subclass(function(){this.f_f={}},function(){var m=this;m.wire({'Changed.isDesigning':function(){m.f_g?m.f_h():m.updateUi();m.model&&m.model.set({returnAreas:m.f_g});},'Changed.requestedMaxDim':function(){
var f_i=m.f_i;if(f_i){f_i.opts.max_dim=m.get('requestedMaxDim');m.updateModelView(f_i);}},'Changed.maxDim':function(){m.updateUi()}});m.f_g&&m.f_h();}),f_j=f_e.prototype;f_j.f_h=function(){var m=this,
f_k=m.children;if(!m.f_l){f_b.require(['Uize.Widget.Resizer.Marquee','Uize.Widget.Collection.Dynamic','ZazzleWww.DesignObjectHotspot','Uize.Widget.Button'],function(f_m,f_n,f_o,f_p){var f_q=function(f_r,f_s){
m.setToolTip(m.addChild(f_r,f_p,{clickToSelect:f__,clickToDeselect:f__,classNamingForStates:''})).wire('Changed.selected',f_s||f_b.nop)},f_t=function(f_u,f_v){var f_w=m.children[f_u]||m.addChild(f_u,f_p);
f_w.wire('Click',function(){m.fire(f_v)});m.setToolTip(f_w);},f_x=function(){if(m.f_g){var f_y=m.f_y,f_z=m.model.getVisibleAreas(m+''),f_A=f_b.isArray(f_z)?f_z.length:0,f_B= -1,f_C=f_a;for(;++f_B<f_A;){
if(f_z[f_B]==f_y){f_C=f__;break;}}if(!f_C&&m.f_i){var f_D=m.f_i.getViewAreas(),f_E=f_b.isArray(f_D)?f_D.length:0,f_F,f_G,f_H=m+'',f_I=m.model,f_u;for(f_B=f_E;--f_B>=0;){f_G=f_D[f_B].area;f_u=f_G.getName();
if(f_G&&f_b.isIn(f_z,f_u)&&f_G.getChildObjects().length)f_F=f_u;}if(!f_F){f_F=f_I.getPrimaryArea(f_H);if(!f_F){var f_J=f_I.getVisibleAreas(f_H);if(f_b.isArray(f_J))f_F=f_J[0];}}m.set({f_y:f_F});}}},f_K=function(){
f_k.marquee.displayNode('',!!(m.f_g&&m.children.viewSelector.get('tentativeValue')==m+''))};f_q('toggleArtView',function(){m.f_L()});f_q('toggleGrid',function(){m.refresh()});f_t('undo','Undo');f_t('redo','Redo');
m.wire('Changed.value',function(){f_k.toggleArtView.set({selected:f_a});m.set({f_M:m+''});f_x();});m.children.viewSelector.wire({'Changed.tentativeValue':f_K,'Changed.value':f_K});m.set({f_M:m+''});m.model.wire(
'Realviews Info Updated',function(){m.children.toggleArtView.get('selected')&&m.f_L();f_x();});m.addChild('marquee',f_m,{constrain:f_a,dragRestTime:500,handleCssClass:m.f_N,rotateCssClass:m.f_O,handlesAlign:{
northWest:[1,1],north:[.5,1],northEast:[0,1],west:[1,.5],east:[0,.5],southWest:[1,0],south:[.5,0],southEast:[0,0]},minWidth:2,minHeight:2,built:f_a,left:-1000,top:-1000,width:1,height:1}).wire({'Changed.creatingNew':function(){
var f_P=f_k.marquee,f_Q=f_P.get('creatingNew');if(!f_Q&&m.isWired){var f_R=f_P.get('top'),f_S=f_P.get('left'),f_T=f_P.get('width'),f_U=f_P.get('height'),f_V=m.f_V.itemWidgets,f_B=f_b.isArray(f_V)?f_V.length:0,
f_W,f_X;m.f_V.selectNone();for(;--f_B>=0;){f_W=f_V[f_B];if(!f_W.get('model').isLocked()){f_X=f_W.getCoords();f_c.doRectanglesOverlap(f_S,f_R,f_T,f_U,f_X.left,f_X.top,f_X.width,f_X.height)&&f_W.set({selected:f__})
;}}m.f_V.get('totalSelected')||m.f_Y?m.f_Z():m.set({f_Y:undefined});}else if(f_Q){f_P.set({aspectRatio:null});}},'Changed.inDrag':function(){m.set({f_0:!f_k.marquee.get('inDrag')})},'Drag Done':function(){
var f_P=f_k.marquee;if(!f_P.get('creatingNew')&& !m.f_1){var f_2=f_P.get('rotation'),f_3=m.get('maxDim'),f_4=m.get('requestedMaxDim'),f_5=Uize.isNumber(f_3)&&Uize.isNumber(f_4),f_6=function(f_7){return f_5?f_7/f_3*f_4:f_7
};f_2?m.fire({name:'Rotate',rotation:f_P.get('rotation')* -1}):m.fire({name:'Bounds Changed',top:f_6(f_P.get('top')),left:f_6(f_P.get('left')),width:f_6(f_P.get('width')),height:f_6(f_P.get('height'))
})}}});(m.f_V=m.addChild('designObjects',f_n,{itemWidgetClass:ZazzleWww.DesignObjectHotspot,makeNewlyAddedSelected:f_a})).wire({'Item Selected':function(f_8){m.f_Z();m.fire({name:'Hotspot Selected',hotspot:f_8.itemWidget})
}});m.isWired&&f_b.callOn(f_k,'insertOrWireUi');m.f_l=f__;});}};f_j.f_L=function(){var m=this,f_9=m.children.toggleArtView.get('selected')?m.model.getPrimaryViewInfo(m.f_y,'design'):null;m.set({f_M:f_9?f_9.name:m+''});
m.children.toggleGrid.set('selected',!!f_9);};f_j.f_$_=function(){this.isWired&&this.children.toggleArtView&&this.showNode('artViewLegend',!!this.children.toggleArtView.get('selected'))};f_j.f_Z=function(){
var m=this,f_Y=m.f_Y;if(m.isWired){var f___=m.f_V.getSelected(),f_a_=f___.length==1&&f___[0].get('model'),f_b_=f_a_&&(f_a_ instanceof zazzle.rlv.DesignText||f_a_.getProperty('fillmode')!='none'),f_c_=f_Y&& !f_b.isEmpty(f_Y),
f_P=m.children.marquee,f_3=m.get('maxDim'),f_4=m.get('requestedMaxDim'),f_5=Uize.isNumber(f_3)&&Uize.isNumber(f_4),f_6=function(f_7){return f_5?f_7/f_4*f_3:f_7};f_P.set({rotation:0,left:f_c_?f_6(f_Y.left): -1000,
top:f_c_?f_6(f_Y.top): -1000,width:f_c_&&(f_Y.width+1)!=f_Y.width?f_6(f_Y.width):0,height:f_c_&&(f_Y.height+1)!=f_Y.height?f_6(f_Y.height):0,aspectRatio:f_c_&& !f_b_?f_Y.width/f_Y.height:null});}};f_j.getCurrentViewInfo=function(){
var m=this,f_k=m.children;return f_k.toggleArtView&&f_k.toggleArtView.get('selected')?m.model.getPrimaryViewInfo(m.f_y,'design'):f_$.doMy(m,'getCurrentViewInfo');};f_j.getUrlBase=function(){return this.f_g?this.get('urls').designRlvBase:f_$.doMy(this,'getUrlBase')
};f_j.getRealviewParams=function(f_d_){var m=this,f_e_=f_$.doMy(m,'getRealviewParams');if(m.f_g){var f_k=m.children,f_f_=function(f_r){var f_w=f_k[f_r];return f_w&&f_w.get('selected');},f_g_=f_f_('toggleArtView')
;return f_b.copyInto(f_e_,{design:m.get('designId')},!f_f_('toggleGrid')?{hide:'bleed,safe,visibleMask'}:f_g_?null:{area_grid:'1'},f_d_&&f_g_?m.model.getDesignViewInfo(m.f_y):null,{wm:m.get(f_g_?'watermarkDesign':'watermarkProduct')}
)}else return f_e_;};f_j.setHotspotState=function(f_h_,f_i_){var m=this,f_j_=m.f_f[f_i_.getName()];f_j_&&f_j_.set({over:f_h_=='over'});};f_j.select=function(f_k_,f_Y,f_l_){var m=this,f_B=f_k_.length,
f_f=m.f_f,f_m_,f_n_=f_l_!==f_a;for(;--f_B>=0;){f_m_=f_f[f_k_[f_B].getName()];f_m_&&f_m_.set({selected:f_n_});}m.set({f_Y:f_Y});};f_j.syncDesignObjects=function(f_o_,f_p_,f_Y){var m=this,f_q_=f_o_.length,
f_B= -1,f_r_=[],f_V=m.f_V,f_3=m.get('maxDim'),f_i=m.f_i,f_f={},f_s_,f_W;if(!m.f_1){m.f_1=f__;f_V.remove(f_V.itemWidgets);for(;++f_B<f_q_;){f_W=f_o_[f_B];f_s_=f_W.name;f_r_.push({html:(m.f_t_||(m.f_t_=f_b.Template.compile(
m.web('hotspotTemplate').html(),{openerToken:'[%',closerToken:'%]'})))({itemWidgetName:f_s_}),properties:{id:f_s_},model:f_W,maxDim:f_3,selected:f_s_ in f_p_,cssClassBase:m.f_u_,cssClassActive:m.f_v_,
cssClassOver:m.f_w_});}for(var f_x_=f_V.add(f_r_),f_y_= -1,f_z_=f_x_.length,f_A_,f_B_={'Changed.over':function(f_8){var f_C_=f_8.source;m.fire({name:'Hotspot '+(f_C_.get('over')?'Over':'Out'),hotspot:f_C_})
},'Changed.selected':function(f_8){var f_C_=f_8.source;if(!f_C_.get('selected')){m.fire({name:'Hotspot Unselected',hotspot:f_8.source});m.f_Z();}},'Click Selected':function(f_8){m.children.marquee.initiateDrag(f_8.domEvent)
}};++f_y_<f_z_;){f_A_=f_x_[f_y_];f_A_.wire(f_B_);f_A_.updateModelView(f_i);f_f[f_A_.get('properties').id]=f_A_;}m.f_f=f_f;m.set({f_Y:f_Y});m.updateUi();m.f_1=f_a;}};f_j.updateModelView=function(f_D_){
var m=this,f_V=m.f_V;m.set({f_i:f_D_});f_V&&f_V.forAll(function(f_m_){f_m_.updateModelView(f_D_);});};f_j.updateUi=function(){var m=this;if(m.isWired){var f_k=m.children,f_g=m.f_g;for(var f_E_ in{toggleButtonStrip:1,toggleArtView:1,toggleGrid:1,undo:1,redo:1,marquee:1}){
var f_F_=f_k[f_E_];f_F_&&f_F_.displayNode('',f_g);}m.displayNode('dropzone',f_g);f_d.setState(m.getNode(),['',m.f_G_],f_g);if(f_g){m.f_$_();m.f_Z();}f_$.doMy(m,'updateUi');}};f_j.wireUi=function(){var m=this;
if(!m.isWired){var f_H_=m.getNode('viewPortShell'),f_I_,f_J_=function(f_K_){clearTimeout(f_I_);f_d.setState(f_H_,['',m.f_L_],f_K_);};m.wireNode(f_H_,{mouseover:function(){f_J_(f__)},mouseout:function(){f_I_=setTimeout(f_J_,750)}
});m.callInherited('wireNodeForDataTransfer')(m,m.getNode('dropzone'),m.get('urls').upload,function(f_M_){f_M_.length&&m.fire({name:'Add',properties:f_M_})});f_$.doMy(m,'wireUi');}};f_e.stateProperties({
f_M:'activeView',f_y:{name:'area',onChange:function(){var m=this;if(m.model){if(!f_b.isIn(m.model.getVisibleAreas(m+''),m.f_y)){var f_N_=m.model.getPrimaryViewInfo(m.f_y,'product');if(f_N_)m.set({value:f_N_.name});
else{}}if(m.children.toggleArtView.get('selected'))m.f_L();}}},f_Y:{name:'bounds',value:{},onChange:f_j.f_Z},f_O_:{name:'canRedo',onChange:function(){var f_P_=this.children.redo;f_P_&&f_P_.set({enabled:!this.f_O_?f_a:'inherit'})
},value:f_a},f_0:{name:'canSave',value:f__},f_Q_:{name:'canUndo',onChange:function(){var f_R_=this.children.undo;f_R_&&f_R_.set({enabled:!this.f_Q_?f_a:'inherit'})},value:f_a},f_v_:'cssClassHotspotActive',
f_u_:'cssClassHotspotBase',f_w_:'cssClassHotspotOver',f_G_:'cssClassIsDesigning',f_N:'cssClassMarqueeHandle',f_O:'cssClassRotateHandle',f_L_:'cssClassViewPortShellOver',f_S_:{name:'hasDesignUi',conformer:function(f_T_,f_U_){
return f_U_||f_T_},value:f_a},f_g:{name:'isDesigning',value:f_a},f_k_:{value:[]},f_i:'modelView',f_V_:{value:[]},f_W_:{onChange:f_j.f_Z}});return f_e;}});
Uize.module({name:'Uize.Widget.Resizer',required:['Uize.Node','Uize.Widget.Drag'],builder:function(d_$){'use strict';var d__=true,d_a=false,d_b=Uize.Node,d_c=d_b.isIe,d_d=d_c&&document.compatMode!='CSS1Compat',
d_e={northWest:[0,0],north:[.5,0],northEast:[1,0],west:[0,.5],move:['both','both'],east:[1,.5],southWest:[0,1],south:[.5,1],southEast:[1,1]};function d_f(m,d_g,d_h){var d_i=d_h[d_g];return d_i!=.5&&(d_i=='both'|| !(d_g?m.d_j:m.d_k));
}function d_l(){var m=this;if(m.isWired){for(var d_m in d_e){var d_h=d_e[d_m];m.children[d_m].set({enabled:d_f(m,0,d_h)||d_f(m,1,d_h)?'inherit':d_a});}}}function d_n(m){if(m.isWired&& !(m.d_o=m.d_p)){
var d_q=d_b.getDimensions(m.getNode('shell'));if(d_q.width&&d_q.height)m.d_o=[0,0,d_q.width-1,d_q.height-1];}}function d_r(){var m=this;d_n(m);var d_o=m.d_o;if(d_o){m.d_s=[d_o[2]-d_o[0]+1,d_o[3]-d_o[1]+1];
d_t.call(m);}}function d_t(){var m=this;if(m.isWired&&(!m.d_u||m.d_v)){d_n(m);if(m.d_o){var d_w=m.d_w,d_o=m.d_o,d_s=m.d_s,d_x=m.d_x,d_y=m.d_y,d_z=m.d_z,d_A=m.d_A,d_B,d_C,d_D=m.d_D;if(d_D!=null){d_B=d_z;
d_C=d_A;}else{d_B=Uize.constrain(d_z,m.d_E,d_w?d_s[0]:Infinity);d_C=Uize.constrain(d_A,m.d_F,d_w?d_s[1]:Infinity);}var d_G=d_w?Uize.constrain(d_x,d_o[0],d_o[2]-d_B+1):d_x,d_H=d_w?Uize.constrain(d_y,d_o[1],d_o[3]-d_C+1):d_y
;if(d_G!=d_x||d_H!=d_y||d_B!=d_z||d_C!=d_A)m.set({d_x:d_G,d_y:d_H,d_z:d_B,d_A:d_C});}}}var d_I='updateUi',d_J=[d_I,d_l],d_K=[d_t,d_I];return d_$.subclass({alphastructor:function(){this.d_L={};},instanceMethods:{
setPositionDuringDrag:function(d_x,d_y,d_z,d_A){var m=this;if(d_x!=m.d_x||d_y!=m.d_y||d_z!=m.d_z||d_A!=m.d_A){m.set({left:d_x,top:d_y,width:d_z,height:d_A});m.fire('Position Changed');}},getCoords:function(){
var m=this;return{left:m.d_x,top:m.d_y,width:m.d_z,height:m.d_A};},initiateDrag:function(d_M){this.children.move.initiate(d_M)},updateUi:function(){var m=this;if(m.isWired){var d_N=d__;Uize.forEach(m.d_O,
function d_P(d_Q){var d_R=m.getNode(d_Q);if(d_R){var d_S=function(d_T){return parseInt(d_b.getStyle(d_R,'border'+d_T+'Width'))||0;},d_U=Math.max(m.d_z-(d_d?d_S('Left')+d_S('Right'):0),0),d_V=Math.max(m.d_A-(d_d?d_S('Top')+d_S('Bottom'):0),0)
;if(d_c)d_U==m.d_L[d_Q]?m.displayNode('jiggler',m.d_W= !m.d_W):(m.d_L[d_Q]=d_U);d_b.setStyle(d_R,{left:m.d_x,top:m.d_y,width:d_U,height:d_V});if(Uize.isNumber(m.d_X)&&d_N){var d_X=m.d_X,d_Y=d_X?'rotate('+Math.round(m.d_X)+'deg)':'',
d_Z=d_X?(m.d_x+d_U/2)+'px '+(m.d_y+d_V/2)+'px':'';m.setNodeStyle('',{mozTransformOrigin:d_Z,webkitTransformOrigin:d_Z,oTransformOrigin:d_Z,msTransformOrigin:d_Z,transformOrigin:d_Z,mozTransform:d_Y,webkitTransform:d_Y,
msTransform:d_Y,oTransform:d_Y,transform:d_Y});d_N=d_a;}}});}},wireUi:function(){var m=this;if(!m.isWired){var d_o,d_0,d_h,d_1,d_2=Uize.Widget.Drag,d_3=function(d_m){d_h=d_e[d_m];var d_4=m.addChild(d_m,
d_2,{cursor:d_m=='move'?d_m:d_m.charAt(0)+(d_m.match(/[A-Z]|$/))[0]+'-resize',dragRestTime:m.d_5,node:m.getNode(d_m),resizerInfo:{d_m:d_m,d_h:d_h}});d_4.wire({'Before Drag Start':function(d_6){m.fire(d_6)},
'Drag Start':function(d_6){m.d_7=d_6.source;m.set({d_u:d__});d_r.call(m);d_o=m.d_o;d_0=[d_o[2]/2,d_o[3]/2];d_1=[m.d_x,m.d_y,m.d_x+m.d_z-1,m.d_y+m.d_A-1];m.fire(d_6);},'Drag Update':function(){var d_D=m.d_D,
d_8=m.d_7.resizerInfo,d_h=d_8.d_h,d_9=d_h.concat(),d_$_=d_1.concat(),d___=function(d_g){if(d_f(m,d_g,d_h)){var d_i=d_h[d_g],d_a_=d_4.eventDeltaPos[d_g];if(d_i=='both'){if(m.d_w)d_a_=Uize.constrain(d_a_,
d_o[d_g]-d_$_[d_g],d_o[d_g+2]-d_$_[d_g+2]);d_$_[d_g]+=d_a_;d_$_[d_g+2]+=d_a_;}else{var d_b_=d_g+d_i*2;d_$_[d_b_]+=d_a_;if(m.d_w)d_$_[d_b_]=Uize.constrain(d_$_[d_b_],d_o[d_g],d_o[d_g+2]);if(d_D==null&&d_$_[d_g]>d_$_[d_g+2]){
var d_c_=d_$_[d_g];d_$_[d_g]=d_$_[d_g+2];d_$_[d_g+2]=d_c_;d_9[d_g]=1-d_9[d_g];}}}};d___(0);d___(1);var d_d_=[Math.max(d_$_[2]-d_$_[0]+1,m.d_E),Math.max(d_$_[3]-d_$_[1]+1,m.d_F)],d_e_=[(d_$_[0]+d_$_[2])/2,
(d_$_[1]+d_$_[3])/2];if(d_D!=null){if(d_d_[0]/d_d_[1]!=d_D){var d_f_=[d_d_[1]*d_D,d_d_[0]/d_D],d_g_=function(d_g,d_h_){d_d_[d_g]=d_f_[d_g];if(m.d_w){d_d_[d_g]=Math.min(d_d_[d_g],d_h_);d_d_[1-d_g]=d_d_[d_g]*Math.pow(d_D,d_g*2-1)
;}},d_i_=function(d_g){d_g_(d_g,(d_e_[d_g]<d_0[d_g]?(d_e_[d_g]+.5):d_o[d_g+2]-d_e_[d_g])*2);},d_j_=function(d_g){d_g_(d_g,(d_h[d_g]?d_o[d_g+2]-d_$_[d_g]:d_$_[d_g+2])+1);};if(d_h[0]==.5){d_i_(0);}else if(d_h[1]==.5){
d_i_(1);}else if(d_d_[1]*d_f_[0]>d_d_[0]*d_f_[1]){d_j_(0);}else{d_j_(1);}}var d_k_=function(d_g){if(!d_h[d_g]){d_$_[d_g]=d_$_[d_g+2]-d_d_[d_g]+1;}else if(d_h[d_g]==.5){d_$_[d_g]=d_e_[d_g]-(d_d_[d_g]-1)/2;
}};d_k_(0);d_k_(1);}m.set({activeHandleEffectivePointIdX:d_9[0],activeHandleEffectivePointIdY:d_9[1]});m.setPositionDuringDrag(d_$_[0],d_$_[1],d_d_[0],d_d_[1]);},'Drag Rest':function(d_6){m.fire(d_6)},
'Drag Done':function(d_6){m.set({d_u:d_a});m.fire(d_6);m.set({d_v:d_a});m.updateUi();}});};for(var d_m in d_e)d_3(d_m);d_l.call(m);if(d_c){var d_Q=m.getNode(m.d_O[0]);if(d_Q){var d_l_=document.createElement('div');
d_l_.id=m.get('idPrefix')+'-jiggler';d_b.setStyle(d_l_,{position:'absolute'});d_Q.appendChild(d_l_);}}d_$.doMy(m,'wireUi');d_r.call(m);}}},stateProperties:{d_m_:'activeHandleEffectivePointIdX',d_n_:'activeHandleEffectivePointIdY',
d_O:{name:'areaNodes',value:['']},d_D:{name:'aspectRatio',onChange:d_I,value:null},d_w:{name:'constrain',value:d__,onChange:d_t},d_p:{name:'constrainBounds',value:null,onChange:d_r},d_v:{name:'creatingNew',
value:d_a},d_5:{name:'dragRestTime',onChange:function(){Uize.callOn(this.children,'set',[{dragRestTime:this.d_5}])},value:250},d_k:{name:'fixedX',onChange:d_J,value:d_a},d_j:{name:'fixedY',onChange:d_J,
value:d_a},d_A:{name:'height',onChange:d_K,value:200},d_u:{name:'inDrag',value:d_a},d_x:{name:'left',onChange:d_K,value:0},d_F:{name:'minHeight',value:10,onChange:d_t},d_E:{name:'minWidth',value:10,onChange:d_t
},d_X:{name:'rotation',onChange:d_K},d_y:{name:'top',onChange:d_K,value:0},d_z:{name:'width',onChange:d_K,value:200}},staticProperties:{pointIdsMap:d_e}});}});
Uize.module({name:'Uize.Widget.Resizer.Marquee',required:'Uize.Node',builder:function(e_$){'use strict';var e__=true,e_a=false,e_b=Uize.Node,e_c=[.5,.5],e_d={};function e_e(m){if(m.isWired){var e_f=m.get('inDrag'),
e_g=m.get('creatingNew'),e_h=m.get('fixedX'),e_i=m.get('fixedY'),e_j=m.get('activeHandleEffectivePointIdX'),e_k=m.get('activeHandleEffectivePointIdY'),e_l=m.Class.pointIdsMap;for(var e_m in e_l){if(e_m!='move'){
var e_n=e_l[e_m];m.displayNode(e_m,(!e_g&&(!e_h||e_n[0]==.5)&&(!e_i||e_n[1]==.5)&&(!m.e_o|| !e_f||(e_n[0]==e_j&&e_n[1]==e_k))));}}}}function e_p(m){if(m.isWired){var e_q=m.get('left'),e_r=m.get('top'),
e_s=m.get('width')-1,e_t=m.get('height')-1,e_l=m.Class.pointIdsMap,e_u=m.e_u||e_d;for(var e_m in e_l){if(e_m!='move'){var e_n=e_l[e_m],e_v=m.getNode(e_m),e_w=e_b.getDimensions(e_v),e_x=e_u[e_m]||e_c;
e_b.setStyle(e_v,{left:e_q+e_n[0]*e_s-(e_w.width-1)*e_x[0],top:e_r+e_n[1]*e_t-(e_w.height-1)*e_x[1]});}}}}function e_y(m){var e_z= !!m.e_z;if(m.isWired&&e_z){var e_A=m.getNode('rotate');m.displayNode(e_A,e_z);
m.children.rotate.set({node:e_A});}}return e_$.subclass({alphastructor:function(){var m=this;function e_B(){e_e(m);e_p(m);}m.wire({'Changed.inDrag':e_B,'Changed.creatingNew':e_B,'Changed.fixedX':e_B,
'Changed.fixedY':e_B,'Changed.activeHandleEffectivePointIdX':e_B,'Changed.activeHandleEffectivePointIdY':e_B});},instanceMethods:{updateUi:function(){var m=this;if(m.isWired){e_$.doMy(m,'updateUi');e_p(m);
e_y(m);}},wireUi:function(){var m=this;if(!m.isWired){if(m.e_C){var e_D=m.getNode('shell'),e_E=function(e_F){if(m.get('enabledInherited')){e_F||(e_F=event);var e_m=m.get('aspectRatio')==null?'northWest':'southEast',
e_G=e_b.getCoords(e_D),e_H=e_b.getEventAbsPos(e_F);m.set({creatingNew:e__});m.setPositionDuringDrag(e_H.left-e_G.left,e_H.top-e_G.top,m.get('minWidth'),m.get('minHeight'));return m.children[e_m].initiate(e_F);
}};e_b.setStyle(e_D,{cursor:'crosshair'});m.wireNode(e_D,{mousedown:e_E,touchstart:e_E});}e_$.doMy(m,'wireUi');e_e(m);}}},stateProperties:{e_z:{name:'canRotate',onChange:function(){var m=this;if(m.e_z&& !m.children.rotate)
Uize.require('Uize.Widget.Drag',function(e_I){var e_J,e_K,e_L,e_M;m.set({rotation:0});m.addChild('rotate',e_I).wire({'Before Drag Start':function(e_F){var e_N=e_b.getCoords(m.getNode('rotate')),e_O=e_b.getCoords(m.getNode(m.get('areaNodes')[0]))
;e_J=m.get('rotation');e_K=e_O.x+e_O.width/2;e_L=e_O.y+e_O.height/2;e_M=Math.atan(Math.abs((e_L-(e_N.y+e_N.height/2))/((e_N.x+e_N.width/2)-e_K)))*180/Math.PI;if(e_N.x<e_K)e_M=180-e_M;if(e_N.y>e_L)e_M*= -1;
m.set({inDrag:e__});m.fire(e_F);},'Drag Update':function(e_F){if(!m.e_P){m.e_P=e__;var e_Q=e_F.source.get('eventPos'),e_R=Math.atan(Math.abs((e_L-e_Q[1])/(e_Q[0]-e_K)));if(e_Q[0]<e_K)e_R=Math.PI-e_R;
if(e_Q[1]>e_L)e_R*= -1;m.set({rotation:e_J+e_M+e_R* -180/Math.PI});m.e_P=e_a;}},'Drag Done':function(e_F){m.set({inDrag:e_a});m.fire(e_F);}});e_y(m);});else e_y(m);}},e_u:'handlesAlign',e_S:'handleCssClass',
e_o:{name:'hideOtherHandlesInDrag',value:e__},e_T:'rotateCssClass',e_C:{name:'shellLive',value:e__}},set:{areaNodes:['move','border'],html:{process:function(input){function e_U(e_m){return('<img id="'+input.idPrefix+'-'+e_m+'" src="'+input.blankGif+'"'+(input.handleCssClass?(' class="'+input.handleCssClass+'"'):'')+' style="position:absolute; z-index:1000; display:none;'+(input.handleCssClass?'':' width:19px; height:19px; background:#888; border:1px solid #fff; opacity:.5; filter:alpha(opacity=50);')+'"/>'
);}return('<div id="'+input.idPrefix+'-border" style="position:absolute; left:0px; top:0px; width:200px; height:200px; border:1px solid #000; background:url('+input.blankGif+'); z-index:999;">'+'<a href="javascript://" id="'+input.idPrefix+'-rotate"'+(input.rotateCssClass?(' class="'+input.rotateCssClass+'"'):'')+' style="display:none;position:absolute;'+(input.rotateCssClass?'':'right:-30px;top:-30px;width:18px;height:18px;background:#000')+';"></a>'+
'</div>'+'<a id="'+input.idPrefix+'-move" href="javascript://" style="display:block; position:absolute; left:0px; top:0px; width:200px; height:200px; border:1px dashed #fff; z-index:1000; background:url('+input.blankGif+');"></a>'+
e_U('northWest')+e_U('north')+e_U('northEast')+e_U('west')+e_U('east')+e_U('southWest')+e_U('south')+e_U('southEast'));}},nodeMap:{shell:''}}});}});
Uize.module({name:'ZazzleWww.DesignObjectHotspot',superclass:'Uize.Widget.CollectionItem',builder:function(e_$){'use strict';var e__=true,e_a=false,e_b=null,e_c;var e_d=e_$.subclass(),e_e=e_d.prototype
;e_e.getCoords=function(){var m=this,e_f=m.e_f,e_g=m.e_g,e_h=m.e_h,e_i=e_h&&e_h.opts?e_h.opts.max_dim:e_c,e_j;if(e_f&&e_g&&e_h){var e_k=e_f.getBounds(e_h),e_l=e_k[0].y,e_m=e_k[0].x,e_n=Uize.isNumber(e_g)&&Uize.isNumber(e_i),
e_o=function(e_p){return e_n?e_p/e_i*e_g:e_p};e_j={top:e_o(e_l),left:e_o(e_m),width:e_o(e_k[1].x-e_m),height:e_o(e_k[1].y-e_l)}}return e_j||{};};e_e.updateModelView=function(e_q){this.set({e_h:e_q});
this.e_r();};e_e.wireUi=function(){var m=this;if(!m.isWired){m.wireNode('',{mousedown:function(e_s){m.e_f.isLocked()||m.fire({name:'Click Selected',domEvent:e_s,forceToggle:!!m.get('selected')});e_s.cancelBubble=e__;
return e_a;}});e_$.doMy(m,'wireUi');}};e_e.updateUi=function(){var m=this;if(m.isWired){m.e_r();e_$.doMy(m,'updateUi');}};e_e.e_r=function(){var m=this;m.isWired&&m.setNodeStyle('',m.getCoords())};e_d.stateProperties({
e_f:{name:'model',onChange:e_e.e_r},e_g:{name:'maxDim',onChange:e_e.e_r,value:700},e_h:{}});return e_d;}});
Uize.module({name:'Zazzle.ProductOptionMetaInfo',superclass:'Zazzle.Widget',builder:function(e_$){'use strict';var e__=e_$.subclass(),e_a=e__.prototype;e_a.e_b=function(){var m=this,e_c=m.e_c;if(m.isWired){
m.web().display(e_c&&m.e_d);if(e_c&&m.e_d){var e_d=m.e_d||{},e_e=function(e_f,e_g,e_h,e_i){e_i=e_i||e_f[e_h];m.web(e_g+Uize.capFirstChar(e_h)).display(!!e_i).html(e_i);};for(var e_g= -1;++e_g<e_c.length;){
var e_j=e_c[e_g],e_f=e_d[e_j],e_k=e_f&&(e_f.description||e_f.summary);m.web(e_g+'').display(!!e_k);if(e_k){e_e(e_f,e_g,'displayName');e_e(e_f,e_g,'description',e_k);}}}}};e_a.updateUi=function(){var m=this;
if(m.isWired){m.e_b();e_$.doMy(m,'updateUi');}};e__.stateProperties({e_c:'attributes',e_l:'value',e_d:{name:'valueDetails',onChange:e_a.e_b}});return e__;}});
Uize.module({name:'Uize.Widget.FormWarnings',required:'Uize.Template',builder:function(d_$){'use strict';var d__=false,d_a=Uize,d_b=function(d_c){var m=this,d_d=m.d_d;if(d_d&&d_d.length){if(!d_c)d_c=d_d;
else if(!d_a.isArray(d_c))d_c=[d_c];var d_e={};for(var d_f= -1;++d_f>d_c.length;){var d_g=d_c[d_f];d_e[d_g.get('idPrefix')]=d_g;}for(var d_h= -1;++d_h<d_d.length;){var d_i=d_d[d_h],d_j=d_i.get('idPrefix')
;d_e[d_j]&&d_i.unwire(m.d_k[d_j]);}}},d_l=function(){var m=this,d_m=m.d_m;if(m.isWired){m.setNodeInnerHtml('toggleCollapsed',m.localize(d_m?'showLinkText':'hideLinkText'));m.displayNode('warnings',!d_m);
}},d_n=function(){var m=this;if(m.isWired&&m.d_o){var d_p=[],d_q=0;while(true){var d_r='message'+d_q,d_s=m.getNode(d_r);m.flushNodeCache(d_r);if(d_s)m.unwireNode(d_s,'click');else break;d_q++;}(function d_t(d_u){
for(var d_v= -1;++d_v<d_u.length;){var d_w=d_u[d_v],d_x=d_w.get('warningMessage');if(d_w.get('isValid')==d__){if(d_w.isForm)d_t(d_w.getFormElement());else if(d_x)d_p.push(d_w);}}})(m.d_d);m.setNodeInnerHtml(
'warnings',m.d_o({warningElements:d_p}));d_a.forEach(d_p,function(d_y,d_v){function d_z(d_A){d_y.set({focused:d_A})}m.wireNode('message'+d_v,{mouseover:function(){d_z(true)},mouseout:function(){d_z(d__)}
});});}};return d_$.subclass({alphastructor:function(){this.d_k={};this.d_d=[];},instanceMethods:{d_b:d_b,d_l:d_l,d_n:d_n,d_B:function(d_i){var m=this;function d_n(){m.d_n()}var d_C={'Changed.warningShown':d_n,
'Changed.warningMessage':d_n};d_i.wire(d_C);m.d_k[d_i.get('idPrefix')]=d_C;},addWatchedElements:function(d_D){var m=this,d_d=m.d_d||[],d_E=d_a.isArray(d_D)?d_D:[d_D],d_F=d_E.length,d_v= -1;for(;++d_v<d_F;){
var d_i=d_E[d_v];d_d.push(d_i);m.d_B(d_i);}m.d_d=d_d;m.fire('Changed.watchedElements');},removeWatchedElements:d_b,updateUi:function(){var m=this;if(m.isWired){m.d_n();m.d_l();d_$.doMy(m,'updateUi');
}},wireUi:function(){var m=this;if(!m.isWired){var d_G=m.getNode('template');if(d_G)m.d_o=d_a.Template.compile(d_G.innerHTML,{openerToken:'[%',closerToken:'%]'});m.wireNode('toggleCollapsed','click',function(){m.toggle('collapsed')});
d_$.doMy(m,'wireUi');}}},stateProperties:{d_m:{name:'collapsed',onChange:d_l,value:d__},d_H:{name:'shown',onChange:function(){var m=this,d_H=m.d_H===true;if(m.isWired){m.displayNode('',d_H);d_H&&m.d_n();
}},value:d__},d_d:{name:'watchedElements',conformer:function(d_I){this.d_b(this.d_d);return d_I;},onChange:function(){var m=this;d_a.forEach(m.d_d,function(d_i){m.d_B(d_i)});m.d_n();}}}});}});
Uize.module({name:'Zazzle.RatingContinuous',superclass:'Uize.Widget',builder:function(d_$){'use strict';var d__=d_$.subclass(),d_a=d__.prototype;d_a.updateUi=function(){var m=this;if(m.isWired){var d_b= +m.d_c,
d_d=Math.floor(d_b),d_e=d_b-d_d;for(var d_f=0;d_f<m.d_g;d_f++){m.setNodeStyle('star'+d_f,{width:(d_f<d_d?100:(d_f==d_d?Math.round(d_e*100):0))+'%'});m.setNodeProperties('shell'+d_f,{title:m.d_h});}d_$.doMy(m,'updateUi');
}};d__.stateProperties({d_c:{name:'value',onChange:d_a.updateUi},d_g:'outOf',d_h:'tooltip'});return d__;}});
Uize.module({name:'Zazzle.OverallReviewRating',superclass:'Uize.Widget',required:'Zazzle.RatingContinuous',builder:function(d_$){'use strict';var d__=true,d_a=false,d_b=null,d_c=Uize;var d_d=d_$.subclass(
d_b,function(){this.addChild('rating',Zazzle.RatingContinuous);}),d_e=d_d.prototype;d_e.wireUi=function(){var m=this;if(!m.isWired){m.wireNode('detailLabel','click',function(){if(m.d_f=='MoreReviewsDialog'){
var d_g='OnProductType',d_h=m.d_i,d_j=d_a,d_k;if(m.d_l=='OnProduct'&&m.d_m>0){d_g='OnProduct';d_h=m.localize('moreReviewsTitle',{product:m.d_n});}d_k=d_g=='OnProductType'?'Good':'Low';m.callInherited('useDialog')({
component:{name:'Zazzle.Dialog.MoreReviews',params:{reviewsSet:d_g,pd:m.d_o,qualifiedType:m.d_p,unqualifiedType:m.d_q,productAttributes:m.d_r,isPublic:m.d_s,privateView:m.d_t,reviewQuality:d_k}},widgetProperties:{
parent:m,name:'moreReviews',title:d_h}});}else if(m.d_f=='ReviewHash'){Uize.require('Uize.Fx.Scroll',function(d_u){d_u.scrollToNode(m.d_v);m.fire({name:'Track Event',bubble:d__,extra:{ax:'scrollreviews',
pd:m.d_o}});});}else if(m.d_f=='ReviewForm'){m.callInherited('ensureLoggedIn')({callback:function(d_w){m.ajax({serviceUrl:'/svc/product/productreviews/canreview',mbr:m.getInherited('user').id,pt:m.d_q,
atts:m.d_r},function(d_x){var d_y=d_x.data;m.d_z=d_y.hasOthers;m.d_A=d_y.goToForm;m.d_B=d_y.reviewUrl;if(m.d_A){location.href=m.d_B;}else{var d_C=m.localize('message')+'<br /><br />';m.d_z&&(d_C+='<a href="'+m.get('urls').productsToReviewUrl+'">'+m.localize('linkMessage')+'</a>');
m.inform({title:m.localize('title'),message:d_C,state:'info'});}});}});}});d_$.doMy(m,'wireUi');}};d_e.reset=function(){var m=this;if(m.isWired){m.d_k='Low';m.ajax({serviceUrl:'/svc/product/productreviews/readptpdreviews',
pg:1,ps:5,callerId:m.getInherited('user').id,pd:m.d_o,pt:m.d_p,atts:m.d_r,isPublic:m.d_s,privateView:m.d_t,minRating:0},{cache:'memory',callbackSuccess:function(d_y){if(d_y.success){var d_x=d_y.data,
d_D=d_x.pdResults,d_E=d_x.ptResults;m.d_m=d_D.numResults;m.d_F=d_E.numResults;m.d_G=d_D.avgRating;m.d_H=d_E.avgRating;m.d_I=d_D.avgRatingDisplay;m.d_J=d_E.avgRatingDisplay;m.d_i=d_E.similarReviewsTitle;
m.d_K();}}});}};d_e.d_K=function(){var m=this;if(m.isWired){m.d_L=0;if(m.d_l=='OnProduct'){m.d_L=m.d_m;}else if(m.d_l=='OnProductType'){m.d_L=m.d_F;}m.d_M=0;m.d_N='0';if(m.d_l=='OnProduct'){m.d_M=m.d_G;
m.d_N=m.d_I;if(!(m.d_m>0)&&m.d_O=='ShowFilledPtStars'){m.d_M=m.d_H;m.d_N=m.d_J;}}else if(m.d_l=='OnProductType'){m.d_M=m.d_H;m.d_N=m.d_J;}var d_P=m.d_M>0?m.localize('xStarsTooltip',{num:m.d_N}):m.localize('noReviewsTooltip')
;m.children.rating.set({tooltip:d_P,value:m.d_M});if(m.d_l=='OnProduct'){if(m.d_F==0&&m.d_m==0){m.d_f='ReviewForm';}else{m.d_f=m.d_Q=='MoreReviewsDialog'?'MoreReviewsDialog':'ReviewHash';}}else if(m.d_l=='OnProductType'){
if(m.d_F>0){m.d_f=m.d_Q=='MoreReviewsDialog'?'MoreReviewsDialog':'ReviewHash';}else{m.d_f='ReviewForm';}}var d_R='';d_R+=(m.d_S&&m.d_f!='ReviewForm'&&m.d_M>0)?m.d_N+'  ':'';d_R+='<a id="'+m.get('idPrefix')+'-reviewLabel" href="javascript://">';
if(m.d_f=='ReviewForm')d_R+=m.localize('writeAReview');else if((m.d_f=='ReviewHash'||m.d_f=='MoreReviewsDialog')&&m.d_m==0&&m.d_l=='OnProduct'&&m.d_O=='ShowFilledPtStars'){d_R+=m.localize(m.d_T?'xReviewsForStyle':'xReviews',{num:m.d_F});
m.d_k='Good';}else if((m.d_f=='ReviewHash'||m.d_f=='MoreReviewsDialog')&&m.d_l=='OnProductType'){d_R+=m.localize(m.d_T?'xReviewsForStyle':'xReviews',{num:m.d_F});m.d_k='Good';}else if((m.d_f=='ReviewHash'||m.d_f=='MoreReviewsDialog')&&m.d_m==0){
d_R+=m.localize(m.d_T?'xReviewsForStyle':'readOtherReviews',{num:m.d_F});m.d_k='Good';}else if((m.d_f=='ReviewHash'||m.d_f=='MoreReviewsDialog')&&m.d_l=='OnProduct')d_R+=m.localize('xReviews',{num:m.d_L});
else if((m.d_f=='ReviewHash'||m.d_f=='MoreReviewsDialog')&&m.d_l=='OnProductType')d_R+=m.localize(m.d_T?'xReviewsForStyle':'xReviews',{num:m.d_L});d_R+='</a>';m.setNodeInnerHtml('detailLabel',d_R);if(m.d_O=='DisplayNone'&&m.d_l=='OnProduct'&&m.d_m==0)
m.displayNode('',d_a);else if(m.d_O=='DisplayNone'&&m.d_l=='OnProduct'&&m.d_m>0)m.displayNode('',d__);if(m.d_U=='DisplayNone'&&m.d_l=='OnProductType'&&m.d_F==0)m.displayNode('',d_a);else if(m.d_U=='DisplayNone'&&m.d_l=='OnProductType'&&m.d_F>0)
m.displayNode('',d__);}};d_d.stateProperties({d_r:{name:'attributes',onChange:d_e.reset},d_z:'canReviewItems',d_A:'canReviewThis',d_f:'detailAction',d_V:'displayName',d_s:'isPublic',d_O:'noPdReviewsFallbackAction',
d_U:'noReviewsFallbackAction',d_Q:'hasReviewsDetailAction',d_F:'numPtReviews',d_m:'numPdReviews',d_L:'numReviews',d_W:'outOf',d_t:'privateView',d_X:{name:'productTypeDisplayName',value:''},d_B:'reviewFormUrl',
d_k:'reviewQuality',d_l:'reviewsSet',d_o:'rootId',d_p:'qualifiedType',d_v:'scrollToNodeId',d_S:'showValue',d_i:'similarReviewsTitle',d_n:'productTitle',d_q:'unqualifiedType',d_T:'useStyleText',d_G:'valuePdReviews',
d_H:'valuePtReviews',d_I:'valueDisplayPdReviews',d_J:'valueDisplayPtReviews',d_M:'value',d_N:'valueDisplay'});return d_d;}});
Uize.module({name:'Uize.Widget.FormElements',required:'Uize.Widget.FormElement',builder:function(d_$){'use strict';var d__=d_$.subclass();d__.prototype.addChild=function(d_a,d_b,d_c){var m=this,d_d=m.parent,
d_e=d_$.doMy(m,'addChild',[d_a,d_b||Uize.Widget.FormElement,Uize.copyInto({value:d_d?(m.parent.get('value')||{})[d_a]:null},d_c)]);m.fire({name:'Element Added',element:d_e});return d_e;};return d__;}
});
Uize.module({name:'Uize.Widget.Committer',required:'Uize.Widget.Button',builder:function(d_$){'use strict';var d__=true,d_a=false;function d_b(m){if(m.d_c)clearTimeout(m.d_c);}function d_d(m,d_e){var d_f=m.d_f,
d_g=m.d_g,d_h=m.get(d_e+'Values'),d_i;for(var d_j in d_g){var d_k=d_f[d_j];d_k.instance.set(d_k.name,d_h&&d_h[d_j]!=d_i?d_h[d_j]:'');}}function d_l(m){var d_m=d__,d_n=d__,d_o=d_a,d_p=d_a,d_g=m.d_g,d_q=m.d_q,
d_r=m.d_r,d_f=m.d_f;for(var d_j in d_g){var d_s=d_f[d_j].instance;if(!m.d_t||d_s.get('enabledInherited')!==d_a){var d_u=d_q[d_j];if(!d_o)d_o=d_u!==d_g[d_j];if(!d_p)d_p=d_u!==d_r[d_j];if(d_n)d_n=d_u==''
;if(d_m)d_m=d_s.get('isValid')===d__;}}m.set({d_n:d_n,d_m:d_m,d_o:d_o,d_p:d_p,d_v:d_o&&d_m});}function d_w(m,d_j,d_k){var d_x=d_k.instance,d_y=d_k.name;function d_z(){d_l(m)}d_x.wire('Changed.'+d_y,function(){
m.d_q[d_j]=d_x.get(d_y);m.fire('Changed.uncommittedValues');d_l(m);if(m.d_v&&m.d_A){d_b(m);m.d_c=setTimeout(function(){m.commit()},m.d_A);}});d_x.wire({'Changed.isValid':d_z,'Changed.enabledInherited':d_z
});}return d_$.subclass({alphastructor:function(){var m=this,d_B=Uize.Widget.Button.addChildButton;m.d_c;m.d_C=d_B.call(m,'commit',function(){m.commit()});m.d_D=d_B.call(m,'clearAll',function(){m.clearAll()})
;m.d_E=d_B.call(m,'restoreInitial',function(){m.restoreInitial()});m.d_F=d_B.call(m,'restorePrevious',function(){m.restorePrevious()});},instanceMethods:{clearAll:function(){d_d(this,'clear')},commit:function(){
var m=this;d_b(m);if(m.d_v){m.set({d_g:Uize.copy(m.d_q)});m.fire('Commit');d_l(m);}},addWatchedProperties:function(d_G){var d_H= -1,d_I=d_G?d_G.length:0,m=this,d_g={},d_q={},d_r={},d_J={};for(;++d_H<d_I;){
var d_K=d_G[d_H];if(d_K){var d_L=d_K.alias,d_M=d_K.name,d_s=d_K.instance,d_k={instance:d_s,name:d_M};d_J[d_L]=d_k;d_w(m,d_L,d_k);d_g[d_L]=d_q[d_L]=d_r[d_L]=d_s.get(d_M);}}Uize.copyInto(m.d_f||(m.d_f={}),d_J);
m.set({d_g:Uize.copy(m.d_g,d_g),d_q:Uize.copy(m.d_q,d_q),d_r:Uize.copy(m.d_r,d_r)});d_l(m);m.fire({name:'Watched Properties Added',properties:d_J});},removeWatchedProperties:function(d_N){var d_H= -1,
d_O={},d_P=d_N?d_N.length:0,m=this,d_g=m.d_g,d_r=m.d_r,d_q=m.d_q,d_f=m.d_f;for(;++d_H<d_P;){var d_j=d_N[d_H],d_k=d_f[d_j];if(d_k){var d_x=d_k.instance;d_x.unwire('Changed.isValid');d_x.unwire('Changed.enabledInherited');
d_x.unwire('Changed.'+d_k.name);delete d_f[d_j];delete d_g[d_j];delete d_q[d_j];delete d_r[d_j];d_O[d_j]=d_k;}}d_l(m);m.fire({name:'Watched Properties Removed',properties:d_O});},restoreInitial:function(){d_d(this,'initial')},
restorePrevious:function(){d_d(this,'committed')}},stateProperties:{d_n:{name:'allClear',onChange:function(){this.d_D.set({enabled:this.d_n?d_a:'inherit'});},value:d_a},d_m:{name:'allValid',value:d_a
},d_p:{name:'anyNotInitial',onChange:function(){this.d_E.set({enabled:this.d_p?'inherit':d_a});},value:d_a},d_o:{name:'anyNotCommitted',onChange:function(){this.d_F.set({enabled:this.d_o?'inherit':d_a});
},value:d_a},d_A:'autoCommitDelay',d_g:{name:'committedValues',value:{}},d_t:{name:'ignoreDisabled',onChange:function(){d_l(this)},value:d_a},d_r:{name:'initialValues',value:{}},d_v:{name:'readyToCommit',
onChange:function(){this.d_C.set({enabled:this.d_v?'inherit':d_a});},value:d_a},d_q:{name:'uncommittedValues',value:{}},d_f:{name:'watchedProperties',onChange:function(){var m=this,d_f=m.d_f,d_g={},d_q={},
d_r={};if(d_f)for(var d_j in d_f){var d_k=d_f[d_j];d_g[d_j]=d_q[d_j]=d_r[d_j]=d_k.instance.get(d_k.name);d_w(m,d_j,d_k);}m.set({d_g:d_g,d_r:d_r,d_q:d_q});d_l(m);}}}});}});
Uize.module({name:'Uize.Data.Compare',builder:function(){'use strict';var c_$=Uize.Data;return Uize.package({identical:c_$.identical,conjoined:c_$.conjoined,clones:c_$.clones,intersection:c_$.intersection
});}});
Uize.module({name:'Uize.Widget.Form',required:['Uize.Widget.FormElements','Uize.Widget.FormElement','Uize.Widget.Committer','Uize.Widget.FormWarnings','Uize.Widget.Button','Uize.Node','Uize.Dom.Event',
'Uize.Data.Compare','Uize.Widget.mDeclarativeChildren','Uize.Widget.mEventBindings'],builder:function(d_$){'use strict';var d__=true,d_a=false,d_b=null,d_c,d_d=Uize,d_e=d_d.Widget,d_f=d_d.Data.Compare.identical,
d_g='never',d_h='valueChanged',d_i='validated',d_j='finished',d_k='validatedAfterFirstFinish',d_l=function(){var m=this,d_m=m.d_m,d_n=m.d_o(),d_p=m.d_q;m.set({d_q:m.d_r&&m.d_s==d_a&&(d_n?d_n.get('warningShown')
:(m.d_t&&(d_m==d_i||(d_m==d_j&&(m.d_u||d_p))||(d_m==d_k&&(m.d_v||d_p)))))});},d_w=function(){this.d_w('restoreInitial')},d_x=function(){this.set({d_y:d__,d_u:d__,d_z:!this.d_A});},d_B=function(){var m=this;
if(m.isWired){m.setNodeProperties('form',{action:m.d_C,enctype:m.d_D,method:m.d_E,target:m.d_F});}},d_G=function(){this.set({d_A:this.d_z&&this.d_s})},d_H=function(){var m=this,d_I=m.d_I,d_q=m.d_q;if(m.isWired){
if(d_I){d_I.set({shown:d_q});if(d_q&&m.isWired){m.displayNode('serverWarnings',d_a);if(m.d_J){var d_K=d_I.getNode();d_K&&Uize.require('Uize.Fx.Scroll',function(d_L){d_L.scrollToNode(d_K)});}}}}},d_M=function(){
var m=this,d_N=m.d_N;m.set({d_O:d_d.copy(m.d_O,d_N.get('committedValues'),d_N.get('uncommittedValues'))});},d_P=function(){this.set({d_s:this.d_N.get('allValid')})};return d_$.subclass({mixins:[d_e.mDeclarativeChildren,d_e.mEventBindings],
alphastructor:function(){this.isForm=this.d_Q=d__;},children:{committer:{widgetClass:d_e.Committer,ignoreDisabled:d__},elements:d_e.FormElements,formWarnings:d_e.FormWarnings,submit:d_e.Button},omegastructor:function(){
var m=this,d_R=m.children,d_S=m.d_S=d_R.elements,d_T=d_S.children,d_U=d_S.addedChildren,d_V=function(d_W){var d_X=d_T[d_W];d_X.wire({'Changed.isDirtyInherited':function(d_Y){d_Y.newValue&&m.set({d_y:d__});
},Ok:function(){m.d_x()},'Changed.focused':function(d_Y){if(!d_Y.newValue)m.d_Z(function(d_0,d_W,d_1){if(!d_1){var d_2=d_0.getNodeValue('input');d_2!==d_c&&d_0.valueOf()!=d_2&&d_0.get('placeholder')!=d_2
&&d_0.set({value:d_2});}});else m.set({d_z:d_a});},'Changed.tentativeValue':function(){m.set({d_z:d_a});m.set({d_3:d_d.copy(m.d_3,d_d.pairUp(d_X.get('name'),d_X.get('tentativeValue')))});}});if(d_X.isForm){
d_X.set({d_4:d_a});d_X.wire('Changed.isSubmitting',function(d_Y){d_Y.newValue&&m.d_x()});}m.d_I.addWatchedElements(d_X);m.d_N.addWatchedProperties([{alias:d_X.get('name'),instance:d_X,name:'value'}]);
},d_5=function(d_6){d_d.forEach(d_6,function(d_7,d_W){d_7&&d_V(d_W);});};m.d_N=d_R.committer;m.d_I=d_R.formWarnings;d_5(d_U.get());d_S.addedChildren.wire('Changed.*',function(d_Y){d_5(d_Y.properties)}
);m.d_8=d__;},instanceMethods:{d_9:function(d_W,d_$_,d___){return this.d_S.addChild(d_W,d_$_,d___);},d_l:d_l,d_Z:function(d_a_){if(this.d_S){var d_S=this.d_S.children;for(var d_W in d_S){var d_0=d_S[d_W];
if(d_a_(d_0,d_0.get('name'),d_0.isForm)===d_a)break;}}},d_o:function(){var d_b_=this.parent,d_n;if(d_b_&&d_b_.parent){d_n=d_b_.parent;if(!d_n.isForm)d_n=d_b;}return d_n;},d_w:function(d_c_){var m=this;
m.set({d_v:d_a,d_z:d_a,d_y:'inherit'});m.d_Z(function(d_0){d_0.restore()});m.d_N[d_c_]();},d_x:d_x,d_B:d_B,d_M:d_M,d_H:d_H,d_P:d_P,addForm:function(d_d_,d_e_,d_f_){return this.d_9(d_d_,d_e_||d_e.Form,d_f_);
},addFormElement:function(d_g_,d_h_,d_i_){return this.d_9(d_g_,d_h_||d_e.FormElement,d_i_);},checkIsEmpty:function(){var d_S=this.d_S.children,d_j_=d__;if(d_S){for(var d_W in d_S){if(!d_S[d_W].get('isEmpty')){
d_j_=d_a;break;}}}return d_j_;},checkWarningShown:d_l,clear:function(){this.d_w('clearAll')},getFormElement:function(d_W){var d_k_;if(this.d_S){var d_T=this.d_S.children;d_k_=d_W==d_c?d_d.values(d_T)
:d_T[d_W];}return d_k_;},removeFormElement:function(d_W){var m=this,d_O=m.d_O,d_S=m.d_S,d_N=m.d_N,d_I=m.d_I,d_0=m.getFormElement(d_W),d_l_=d_d.isArray(d_0)?d_0:[d_0];d_d.forEach(d_l_,function(d_m_){if(d_m_){
var d_W=d_m_.get('name');delete d_O[d_W];d_N.removeWatchedProperties([d_W]);d_I.removeWatchedElements(d_m_);d_m_.removeUi();d_S.removeChild(d_m_);}});},reset:d_w,restore:d_w,submit:d_x,updateUi:function(){
var m=this;if(m.isWired){m.d_B();m.d_H();m.d_Z(function(d_0){d_0.updateUi()});d_$.doMy(m,'updateUi');}},validate:d_P,wireUi:function(){var m=this;if(!m.isWired){var d_n_=m.getNode('form');if(d_n_){var d_o_=function(d_p_){
return d_p_==d_b;};if(d_o_(m.d_C))m.d_C=d_n_.action;if(d_o_(m.d_D))m.d_D=d_n_.enctype;if(d_o_(m.d_E))m.d_E=d_n_.method;if(d_o_(m.d_F))m.d_F=d_n_.target;m.wireNode(d_n_,'submit',function(d_Y){d_d.Dom.Event.abort(d_Y);
m.d_x();});}d_$.doMy(m,'wireUi');m.d_M();m.d_P();}}},stateProperties:{d_C:{name:'action',onChange:d_B},d_D:{name:'enctype',onChange:d_B},d_j_:{name:'isEmpty',value:d__},d_y:{name:'isDirty',onChange:function(){
var m=this,d_n=m.d_o(),d_y=m.d_y=='inherit'?(d_n?d_n.get('isDirtyInherited'):d_a):m.d_y;m.set({d_t:d_y});},value:'inherit'},d_t:{name:'isDirtyInherited',onChange:d_l,value:d_a},d_u:{name:'isFinished',
onChange:[function(){var m=this;if(m.d_u){m.d_q_==d_j&&m.d_P();!m.d_v&&m.d_8&&m.set({d_v:d__});}else m.set({d_v:d_a});},d_l],value:d__},d_z:{name:'isSubmitting',onChange:[function(){var m=this;m.d_z&&m.d_N
&&m.d_N.commit();},d_l,d_G],value:d_a},d_s:{name:'isValid',onChange:[function(){var m=this;m.d_s==d_a&&m.set({d_z:d_a});},d_l,d_G],value:d_a},d_E:{name:'method',onChange:d_B},d_A:{name:'okToSubmit',onChange:function(){
var m=this;if(m.d_A&&m.d_4){var d_n_=m.getNode('form');d_n_&&d_n_.submit();}},value:d_a},d_J:{name:'scrollToWarnings',value:d__},d_F:{name:'target',onChange:d_B},d_3:{name:'tentativeValue',conformer:function(d_3){
return d_f(d_3,this.d_3)?this.d_3:d_3;},value:d_b},d_4:{name:'useNormalSubmit',value:d__},d_q_:{name:'validateWhen',value:d_h},d_O:{name:'value',conformer:function(d_O){return d_f(d_O,this.d_O)?this.d_O:d_O;
},onChange:function(){var m=this;m.set({d_3:d_d.clone(m.d_O)});if(m.d_S){var d_S=m.d_S.children,d_O=m.d_O||{};for(var d_r_ in d_O){var d_0=d_S[d_r_];d_0&&d_0.set({value:d_O[d_r_]});}m.set({d_z:d_a,d_u:d_a,
d_j_:m.checkIsEmpty()});m.d_q_==d_h&&m.d_P();}}},d_s_:{name:'warningAllowed',onChange:function(){var m=this,d_n=m.d_o(),d_s_=m.d_s_=='inherit'?(d_n?d_n.get('warningAllowedInherited'):d__):m.d_s_;m.set({d_r:d_s_});
},value:'inherit'},d_r:{name:'warningAllowedInherited',onChange:d_l,value:d_a},d_q:{name:'warningShown',onChange:[function(){var m=this;m.d_Z(function(d_0){d_0.checkWarningShown()});},d_H],value:d_a},
d_m:{name:'warningShownWhen',onChange:d_l,value:d_k},d_v:{onChange:d_l,value:d_a}},eventBindings:{committer:{'Changed.committedValues':d_M,'Changed.uncommittedValues':d_M,'Changed.allValid':d_P},'submit:Click':function(){this.d_x()}
}});}});
Uize.module('Zazzle.Util');
Uize.module({name:'Zazzle.Util.ProductAttributes',builder:function(){'use strict';return Uize.package({shrinkValues:function(c_$,c__,c_a){var c_b=c_$.length;if(c__!=undefined&&c__<c_b){var c_c=[],c_d=c__,
c_e=false,c_f= -1,c_g;for(var c_h= -1;++c_h<c_b;){var c_i=c_$[c_h];if(c_i.name==c_a){c_f=c_h;c_g=c_i;break;}}if(c_f>=c__&&c_d>0&&c_g){c_c.push(c_g);c_d--;c_e=true;}for(c_h=0;c_h<c_d&&c_h<c_b;c_h++){if(c_f!=c_h|| !c_e)
c_c.push(c_$[c_h]);}c_$=c_c;}return c_$;}});}});
Uize.module({name:'Zazzle.ProductAttributeUi',superclass:'Uize.Widget.FormElement',required:['Uize.Url','Uize.Json','Zazzle.Util.ProductAttributes','Uize.Widget.mWeb'],builder:function(e_$){'use strict';
var e__=true,e_a=false,e_b=Uize,e_c,e_d=function(){var m=this,e_e=m.e_e,e_f=m.children.picker;if(e_e&&m.e_g){var e_h=e_e.values,e_i=e_b.clone(e_h),e_j=function(e_k){var e_l;if(e_k!=e_c&&e_i)e_l=e_b.findRecord(e_i,{name:e_k})
||e_b.findRecord(e_i,{name:e_e.defaultValue})||(e_i.length?e_i[0]:e_c);return e_l;};var e_m=m.valueOf(),e_n=e_j(e_m),e_o=e_n?e_n.valueDetails:e_c,e_p=e_o!==e_c;if(e_p)m.set({e_o:e_o});var e_q=e_b.copyInto(
{value:e_o?e_o.name:e_m},e_p?{valueDetails:e_o}:e_c);e_f?e_f.set(e_b.copyInto({inputWidgetProperties:{values:Zazzle.Util.ProductAttributes.shrinkValues(e_i,m.e_r,e_m),allValues:e_h}},e_q)):m.set(e_q)
;}},e_s=function(){var m=this,e_e=m.e_e,e_f=m.children.picker;if(m.isWired&&e_e&&e_f){var e_t=e_e.values;if(e_t!=e_c){var e_u=e_t.length;m.web().display(m.e_v<e_u);e_f.set({count:e_u});}}};return e_$.subclass({
mixins:e_b.Widget.mWeb,omegastructor:function(){var m=this,e_f=m.e_w?m.addChild('picker',m.e_w,m.e_x):null,e_y=e_a,e_z=function(e_A){return m.getInherited(e_A)},e_B=function(e_C){return Uize.Url.toParams(e_C)}
;m.e_g=e__;m.e_d();e_f&&e_f.wire({'Changed.value':function(){e_y=e__;m.set({value:e_f.valueOf()});e_y=e_a;},'Changed.valueDetails':function(){m.set({e_o:e_f.get('valueDetails')});},'Changed.focused':function(){
m.set({focused:e_f.get('focused')});},'Changed.tentativeValue':function(){m.set({tentativeValue:e_f.get('tentativeValue')});}});m.wire({'Changed.value':function(){var e_m=m.valueOf();e_f&&e_f.set({value:e_m})
;if(m.e_e&&e_m&&(!m.e_n||m.e_n.name!=e_m)){var e_n=e_b.findRecord(m.e_e.values,{name:e_m});m.set(e_b.copyInto({e_n:e_n},e_n?{valueDetails:e_n.valueDetails}:null));}m.fire({name:'Value Changed',allowRefresh:!e_y
});},'Changed.valueDetails':function(){e_f&&e_f.set({valueDetails:m.e_o})},'Launch Full Dialog':function(e_D){var e_E=e_z('productType'),e_F=m.get('elementName');m.callInherited('useDialog')({component:{
name:'Zazzle.Dialog.ProductAttributeUi',params:{pt:e_E,op:e_F,pd:e_z('productId')||e_E,experience:e_z('experience'),section:e_z('section'),ta:e_B(e_z('templateParams')),attributeDependencyInfo:e_b.Json.to(e_z('dependencyGraph'),'miniStrict'),
mu:e_z('markup'),sf:e_z('skuFilter'),skuFilterUseType:e_z('skuFilterUseType'),po:e_B(e_z('productOption')),view:e_z('view'),accd:e_z('accessoryId'),ppd:e_z('parentProductId'),patt:e_B(e_z('parentProductOption')),
ver:e_z('version')}},widgetProperties:{name:'productAttributeUiDialog',value:m.valueOf(),productType:m.e_E,attributeName:e_F,pickerWidgetProperties:{filter:e_D.filter},title:e_D.label},submitHandler:function(e_G,e_H){
setTimeout(function(){e_G&& !e_H.keepOpen&&m.set(Uize.copyInto({value:e_G.value},e_G.valueDetails!==e_c?{e_o:e_G.valueDetails}:e_c));},0);}});},'Help Clicked':function(){if(m.e_I){m.callInherited('launchPopup')({
url:m.e_I,name:'helpPopup'});}else{var e_E=e_z('productType');m.callInherited('useDialog')({component:{name:'Zazzle.Dialog.ProductAttributeHelp',params:{pt:e_E,op:m.get('elementName'),pd:e_z('productId')||e_E,
po:Uize.Url.toParams(e_z('productOption'))}},widgetProperties:{name:'attributeHelpDialog'}});}}});},instanceMethods:{e_d:e_d,e_s:e_s,updateUi:function(){var m=this;if(m.isWired){var e_J=m.children.picker;
m.e_s();e_J&&e_J.updateUi();e_$.doMy(m,'updateUi');}}},stateProperties:{e_e:{name:'attributeInfo',onChange:[e_s,e_d]},e_F:'attributeName',e_K:'defaultValue',e_L:'forceSelection',e_I:'helpUrl',e_v:{name:'hideUiWhen',
onChange:e_s,value:0},e_w:'pickerWidgetClass',e_x:{name:'pickerWidgetProperties',onChange:function(){var e_f=this.children.picker;e_f&&e_f.set(this.e_x);}},e_r:'quantity',e_o:'valueDetails'}});}});
Uize.module({name:'Zazzle.ProductAttributesUi',superclass:'Uize.Widget.Form',required:['Zazzle.ProductAttributeUi','Uize.Widget.Button','Uize.Node.Classes'],builder:function(e_$){'use strict';var e__=true,
e_a=false,e_b=Uize,e_c=e_b.Node.Classes,e_d;var e_e=e_$.subclass(null,function(){var m=this,e_f=Zazzle.ProductAttributeUi;e_b.forEach(m.e_g,function(e_h,e_i){var e_j=m.addFormElement('attributeUi'+e_h,
e_f);e_j.wire('Changed.value',function(){!m.e_k&&m.fire({name:'Attribute Value Changed',attributeName:e_i,value:e_j.valueOf(),bubble:e__})});});m.addChild('toggleUiCollapsed',e_b.Widget.Button).wire(
'Click',function(){m.toggle('uiCollapsed')});m.wire({'Attributes Updated':function(e_l){var e_m=e_l.productOption,e_n=e_l.attributesInfo,e_g=m.e_g;m.set({e_k:e__});e_b.forEach(e_l.changedAttributes,function(e_i){
var e_h=e_g[e_i],e_o=m.e_p(e_h);if(e_h!=e_d)e_o.set({value:!e_o.get('forceSelection')||e_o.valueOf()!=null?e_m[e_i]:null,attributeInfo:e_n[e_i]});});m.set({e_k:e_a});},Highlight:function(e_l){if(m.isWired){
var e_q=function(){e_c.addClass(m.getNode(),m.e_r)},e_s=function(){e_c.removeClass(m.getNode(),m.e_r)},e_t=e_l.mode||'Click';({Over:e_q,Out:e_s,Click:function(){e_q();setTimeout(e_s,500);}})[e_t]();}
}});}),e_u=e_e.prototype;e_u.e_p=function(e_v){return this.getFormElement('attributeUi'+e_v)};e_u.e_w=function(){var m=this;if(m.isWired){var e_g=m.e_g;for(var e_i in e_g)m.e_p(e_g[e_i]).updateUi();}
};e_u.e_x=function(){var m=this,e_y=m.e_z;if(m.isWired){m.children.toggleUiCollapsed.set({text:e_y?'+':'&minus;'});m.displayNode('attributes',!e_y);!e_y&&m.e_w();e_c.setState(m.getNode(''),m.e_A,e_y);
}};e_u.updateUi=function(){var m=this;if(m.isWired){m.e_w();m.e_x();e_$.doMy(m,'updateUi');}};e_u.wireUi=function(){var m=this;if(!m.isWired){m.wireNode('title','click',function(){m.toggle('uiCollapsed')}
);e_$.doMy(m,'wireUi');}};e_e.stateProperties({e_g:'attributes',e_r:'cssClassHighlight',e_A:'cssClassCollapsed',e_z:{name:'uiCollapsed',onChange:e_u.e_x,value:e_a},e_k:{name:'updating',onChange:function(){this.set({busy:this.e_k?e__:'inherit'})}
}});return e_e;}});
Uize.module({name:'Zazzle.ProductConfiguratorSectionUi',superclass:'Uize.Widget.Form',required:['Zazzle.ProductAttributesUi','Uize.Widget.Button','Uize.Url','Uize.Data','Uize.Json','Uize.Node.Classes'],
builder:function(e_$){var e__=null,e_a=Uize,e_b=0.1;var e_c=e_$.subclass(null,function(){var m=this,e_d=Zazzle.ProductAttributesUi;e_a.forEach(m.e_e,function(e_f){m.addForm('attributesUi'+e_f,e_d)});
function e_g(e_h,e_i){m.fire({name:'Attribute Value Changed',attributeName:e_h,value:e_i,bubble:true})}m.e_j('toggleUiCollapsed',function(){m.toggle('uiCollapsed')});m.e_j('applyDownsell',function(){e_g(m.e_k,m.e_l)}
);m.e_j('applyUpsell',function(){e_g(m.e_k,m.e_m)});m.wire('Attributes Updated',function(e_n){m.once('!updatingLayout',function(){for(var e_f= -1;++e_f<m.e_e;)m.e_o(e_f).fire(e_n);});if(m.isWired&&m.e_k){
var e_k=m.e_k,e_p=e_n.productOption[e_k],e_q=e_n.attributesInfo[e_k],e_r=e_q.values,e_s=e_q.upsellInfo,e_t=e_s.lowest.name!=e_p?e_a.findRecord(e_r,{name:e_s.lowest.name}):e__,e_u= !e_t&&e_s.higher.name!=e_p
?e_a.findRecord(e_r,{name:e_s.higher.name}):e__;m.displayNode('downsellMessage',e_t);if(e_t){m.setNodeInnerHtml('downsellMessagePriceDiff',e_s.lowest.displayPriceDiff);m.setNodeInnerHtml('downsellMessageTitle',e_t.valueDetails.displayName);
m.e_l=e_s.lowest.name;}m.displayNode('upsellMessage',e_u);if(e_u){m.setNodeInnerHtml('upsellMessagePriceDiff',e_s.higher.displayPriceDiff);m.setNodeInnerHtml('upsellMessageTitle',e_u.valueDetails.displayName);
m.e_m=e_s.higher.name;}m.displayNode('upsellUi',e_t||e_u);}});}),e_v=e_c.prototype;e_v.e_j=e_a.Widget.Button.addChildButton;e_v.e_w=function(){var m=this,e_x=function(e_y){return m.getInherited(e_y)},
e_z=e_a.Url.toParams,e_A=e_x('productType');return{pt:e_A,pd:e_x('productId')||e_A,experience:e_x('experience'),section:e_x('section'),ta:e_z(e_x('templateParams')),attributeDependencyInfo:e_a.Json.to(e_x('dependencyGraph'),'miniStrict'),
mu:e_x('markup'),sf:e_x('skuFilter'),skuFilterUseType:e_x('skuFilterUseType'),po:e_z(e_x('productOption')),view:e_x('view'),accd:e_x('accessoryId'),ppd:e_x('parentProductId'),patt:e_z(e_x('parentProductOption'))
};};e_v.e_B=function(e_C){return this.removeFormElement('attributesUi'+e_C)};e_v.e_D=function(){var m=this;if(m.isWired){for(var e_C= -1;++e_C<m.e_e;)m.e_o(e_C).set({uiCollapsed:m.e_E});}};e_v.e_F=function(){
var m=this,e_G=m.e_E,e_H=m.children;if(m.isWired){if(m.getNode('title')){e_H.toggleUiCollapsed.set({text:e_G?'+':'&minus;'});e_H.elements.displayNode('',!e_G);}e_a.Node.Classes.setState(m.getNode(''),m.e_I,e_G);
m.e_D();}};e_v.getAttributesUi=e_v.e_o=function(e_C){return this.getFormElement('attributesUi'+e_C)};e_v.updateUi=function(){var m=this;if(m.isWired){m.e_F();e_$.doMy(m,'updateUi');}};e_v.wireUi=function(){
var m=this;if(!m.isWired){m.wireNode('title','click',function(){m.toggle('uiCollapsed')});e_$.doMy(m,'wireUi');}};e_c.stateProperties({e_l:'downsellValue',e_J:{name:'experience',conformer:function(e_i){
this.e_K=this.e_J;return e_i;},onChange:function(){var m=this,e_J=m.e_J;if(m.isWired){m.set({e_L:true});m.ajax({service:'product/ppl/getlayout',productType:m.getInherited('productType'),productId:m.getInherited('productId'),
experience:e_J,section:m.e_M,version:e_b},function(e_N){var e_O=m.getInherited('variations'),e_P=m.e_w(),e_Q=m.e_Q[e_J]=e_N.data;if((e_O&&e_O[e_J])|| !e_a.Data.identical(e_Q,m.e_Q[m.e_K])){var e_R=m.children.elements.get('idPrefix'),
e_S=e_Q.length,e_T=function(e_U){m.callInherited('loadHtmlIntoNode')({node:m.getNode('attributesUiShell'),injectMode:'inner bottom'},e_a.copyInto({cp:'Zazzle.ProductAttributesUi',idPrefix:e_R+'_attributesUi'+e_U,
layout:e_a.Json.to(e_Q[e_U],'miniStrict'),ver:e_b},e_P),{cache:'memory',callback:function(){e_U==e_S-1&&m.set({e_e:e_S,e_L:false})}})};for(var e_C=m.e_e;--e_C>=0;)m.e_B(e_C);m.set({e_e:0});m.setNodeInnerHtml('attributesUiShell','');
e_a.forEach(e_S,e_T);}else{m.set({e_L:false});}});}},value:'None'},e_Q:'layout',e_e:{name:'numAttributesUi',value:0},e_M:{name:'section',value:'PrimaryUi'},e_E:{name:'uiCollapsed',onChange:e_v.e_F,value:false
},e_k:'upsellAttribute',e_m:'upsellValue',e_I:'cssClassCollapsed',e_L:{name:'updatingLayout',value:false}});return e_c;}});
Uize.module({name:'Zazzle.ProductQuantitySelector',superclass:'Zazzle.Droplist.ComboBox',builder:function(k_$){'use strict';var k__='None',k_a='Match',k_b='All';var k_c=k_$.subclass(null,function(){var m=this;
m.wire('Changed.value',function(){m.k_d()});}),k_e=k_c.prototype;k_e.k_f=function(){var m=this,k_g=m.k_g;if(m.k_h&&k_g!=k__){var k_h=m.k_h,k_i=m.get('values'),k_j=k_i.length,k_k=[];if(k_h.length){var
 k_l=k_h.length,k_m=0,k_n=0,k_o=m.k_o;while(k_m<k_j||k_n<k_l){var k_p=k_i[k_m],k_q=k_p&&k_p.name||null,k_r=k_h[k_n];if(!k_r||(k_p&&k_q<k_r.min)){k_k.push(k_p);k_m++;}else{var k_s=k_r.min,k_t=k_s+'';if(k_k.length&&k_g==k_b){
var k_u=k_k.pop();if(k_u.valueDetails.importantInfo||(k_s-(k_s*k_o))>k_u.name)k_k.push(k_u);}if(k_g!=k_a||(k_p&&k_q==k_s))k_k.push({name:k_t,valueDetails:{value:k_t,displayName:k_t,importantInfo:m.localize(
k_r.disc.indexOf('%')> -1?'quantitySelectorDiscountMsgPct':'quantitySelectorDiscountMsgAmt',{discount:k_r.disc})}});k_n++;if(k_p&&(k_p.importantInfo||(k_q-(k_q*k_o))<k_s))k_m++;}}}else{for(var k_v= -1;++k_v<k_j;){
var k_w=k_i[k_v].name;k_k.push({name:k_w,valueDetails:{value:k_w,displayName:k_w}});}}m.set({values:k_k});}};k_e.k_d=function(){var m=this;if(m.isWired){var k_x=m.localize(+m==1?'unitLabelSingular':'unitLabelPlural',
{number:m.k_y});k_x&&m.setNodeInnerHtml('unitLabel',k_x);m.setNodeStyle('unitLabelShell',{display:k_x?'inline':'none'});}};k_e.fireOkOnEnter=Uize.returnFalse;k_e.valueConformer=function(k_p){k_p=k_$.doMy(this,'valueConformer',[k_p]);
return this.getProvider('replaceFullWidthNumbers')?this.callInherited('replaceFullWidthNumbers')(k_p):k_p;};k_e.updateUi=function(){var m=this;if(m.isWired){m.k_d();m.k_f();k_$.doMy(m,'updateUi');}};
k_c.stateProperties({k_o:{name:'closenessThreshold',onChange:k_e.k_f,value:0.25},k_h:{name:'discounts',onChange:k_e.k_f},k_g:{name:'includeDiscounts',value:k_b},k_y:{name:'quantityMultiplier',onChange:k_e.k_d,
value:1}});return k_c;}});
Uize.module({name:'Uize.Widget.Flip',required:'Uize.Fade',builder:function(d_$){'use strict';return d_$.subclass({alphastructor:function(){this.d__='idle';this.fade=Uize.Fade({duration:400});},instanceMethods:{
changeContent:function(d_a,d_b){var m=this;if(d_a!=m.d_c){m.d_c=d_a;m.d__='out';m.set({d_b:d_b});m.fade.start({startValue:0,endValue:m.d_b=='down'?0-m.d_d:m.d_d-0,curve:Uize.Fade.celeration(1,0)});}},
wireUi:function(){var m=this;if(!m.isWired){var d_e=m.getNode();m.fade.wire({'Changed.value':function(){m.setNodeStyle('',{top:Math.round(m.fade)})},Done:function(){if(m.d__=='out'){m.setNodeInnerHtml(d_e,m.d_c);
m.fade.set({startValue:m.d_b=='down'?m.d_d-0:0-m.d_d,endValue:0,curve:Uize.Fade.celeration(0,1)});m.d__='in';m.fade.start();m.fire('Content Changed');}else if(m.d__=='in'){m.d__='idle';m.fire('Updated');
}}});if(d_e)m.d_c=d_e.innerHTML;d_$.doMy(m,'wireUi');}}},stateProperties:{d_b:{name:'direction',value:'down'},d_d:{name:'offset',value:'20'}}});}});
Uize.module({name:'Zazzle.ProductConfiguratorSectionUi.PurchaseUi',required:['Zazzle.ProductQuantitySelector','Uize.Widget.Flip','Uize.Url','Uize.Json','Uize.Util.PropertyAdapter','Uize.Widget.mWeb'],builder:function(f_$){
'use strict';var f__=null,f_a=Uize;var f_b=f_$.subclass(f__,function(){var m=this,f_c=m.addFormElement('quantity',Zazzle.ProductQuantitySelector);m.addChild('price',f_a.Widget.Flip,{offset:32});function f_d(){m.f_d()}
new f_a.Util.PropertyAdapter({propertyA:{instance:f_c,property:'value'},propertyB:{instance:m,property:'quantity'}});f_c.wire('Changed.quantityMultiplier',function(){m.f_e()});m.wire({'Attributes Updated':
function(f_f){f_d();m.ajax({service:'product/volumedisc/get',pt:m.getInherited('productType'),ea:f_a.Url.toParams(f_a.copy(m.getInherited('productOption'),m.getInherited('designAttributes')))},{cache:'memory',
callbackSuccess:function(f_g){f_c.set({discounts:f_g.success?f_g.data:[]});}});m.set({f_h:f_f.inStock});f_c.set('quantityMultiplier',f_f.quantityMultiplier);},'Price Check':f_d});}),f_i=f_b.prototype
;f_b.mixins(f_a.Widget.mWeb);f_i.f_j=function(){var m=this;if(m.isWired){var f_k=m.f_h==false&& !m.f_l;m.web('oosOverlay').display(f_k);m.children.submit.set({enabled:f_k?false:'inherit'});}};f_i.f_e=function(){
var m=this;m.isWired&&m.web('perUnitLabel').html(m.localize('perUnitLabel',{number:m.getFormElement('quantity').get('quantityMultiplier')}));};f_i.f_d=function(){var m=this;if(m.isWired){var f_m=function(f_n){return m.getInherited(f_n)},
f_o=m.children,f_p=f_m('productId'),f_q=f_m('designId');m.ajax({service:'price',data:f_a.Json.to({products:[f_a.copyInto({pt:f_m('productType'),qty:+m.f_r,atts:f_a.Url.toParams(f_a.copy(f_m('productOption'),
f_m('designAttributes')))},f_p?{pd:f_p}:f__,f_q?{dz:f_q}:f__)]})},{cache:'memory',callbackSuccess:function(f_s){m.set({priceInfo:f_s});if(f_s.error!='invalid'){var f_t=m.f_t,f_u=f_s.unitPriceAdj,f_v=f_s.totalPrice,
f_w=f_t?m.f_x:m.f_y,f_z=f_t?f_v:f_u,f_A=f_t&&f_v!=f_u,f_B= !!f_s.priceDigitizing;f_o.price.changeContent(f_s[f_t?'dispTotalPrice':'dispUnitPriceAdj']+(f_B?'*':''),typeof f_w!='number'||f_z>f_w?'up':'down'
);m.web('priceOriginal').html(f_s[f_t?'dispTotalPriceUnadj':'dispUnitPrice']);m.web('unitPriceMessage').html(m.localize('unitPriceMessage',{price:f_s.dispUnitPriceAdj,unitLabel:m.localize('perUnitLabel',{number:m.getFormElement('quantity').get('quantityMultiplier')})
}));m.web('priceOriginal').display(f_t?f_s.totalPriceUnadj!=f_v:f_s.unitPrice!=f_u);m.web('perUnitLabel').display(!f_A);m.web('unitPriceMessage').display(f_A);m.web('conversionFeeShell').display(f_B);
m.f_y=f_u;m.f_x=f_v;}}});}};f_i.updateUi=function(){var m=this;if(m.isWired){m.f_d();m.f_e();m.f_j();f_$.doMy(m,'updateUi');}};f_i.wireUi=function(){var m=this;if(!m.isWired){m.web('conversionFeeLink').click(
function(){if(m.f_s){var f_s=m.f_s,f_C=f_s.digitizing;m.callInherited('useDialog')({component:{name:'ZazzleWww.Dialog.ConversionFee',params:{productPrice:f_s.totalPrice/100.0,qty:+m.f_r,digitizingTotal:f_s.priceDigitizing,
conversionsText:f_C?f_a.Json.to(f_C,'mini'):''}},widgetProperties:{name:'conversionFeeDialog',mode:'alertCustom',state:'info'}});}});f_$.doMy(m,'wireUi');}};f_b.stateProperties({f_h:{onChange:f_i.f_j
},f_l:{name:'allowOos',onChange:f_i.f_j,value:false},f_s:'priceInfo',f_r:{name:'quantity',onChange:f_i.f_d},f_t:{name:'showTotalPricing',onChange:f_i.f_d,value:false}});return f_b;}});
Uize.module({name:'Zazzle.ProductAttributesModel',superclass:'Uize.Class',required:['Uize.Comm.Ajax','Uize.Json','Uize.Data'],builder:function(c_$){'use strict';var c__=true,c_a=false,c_b=null,c_c=Uize
;var c_d=c_$.subclass(function(){this.c_e=c__;this.c_f=new c_c.Comm.Ajax;},function(){var m=this;m.c_g=[m.c_h];m.c_i=0;m.c_j=0;m.c_e=c_a;}),c_k=c_d.prototype;c_k.c_l=function(c_m){var m=this;if(!m.c_e&&m.c_f){
var c_n=m.c_o();clearTimeout(m.c_p);m.c_p=setTimeout(function(){m.set({c_q:c__});m.c_f.request({url:[m.c_r.get,{model:c_c.Json.to(c_n,'miniStrict'),r:m.c_j}],cache:'memory',requestMethod:'POST',returnType:'json',
callback:function(c_s){var c_t=c_s.data;m.c_e=c__;m.set(c_t);m.c_e=c_a;m.c_i++;m.c_g.length=m.c_i;m.c_g.push(m.c_h);m.set({c_q:c_a});m.fire({name:'Attributes Info Updated',attributes:c_c.keys(c_t.attributesInfo),
priceChanged:c__,priceDiffs:c_t.priceDiffs,componentPriceDiffs:c_t.componentPriceDiffs});c_m&&c_m();}});},m.c_u);}};c_k.c_o=function(){var c_v=this.get(),c_n={};for(var c_w in c_v){var c_x=c_v[c_w];if(c_x!=c_b)
c_n[c_w]=c_x;}c_n.productOption=c_c.copy(c_n.productOption,c_n.designAttributes);delete c_n.serviceUrls;delete c_n.attributesInfo;delete c_n.designAttributes;delete c_n.requestDelay;delete c_n.busy;return c_n;
};c_k.setAttributeValue=function(c_y,c_z){var m=this,c_A;if(m.c_h[c_y]!==c_A){var c_n=m.c_o();c_n.productOption=c_c.copy(c_n.productOption,c_c.pairUp(c_y,c_z));m.c_f.request({url:[m.c_r.validate,{model:c_c.Json.to(c_n,'miniStrict')
}],cache:'memory',requestMethod:'POST',returnType:'json',callback:function(c_s){var c_h=c_s.data.productOption,c_B={},c_C;if(c_h){for(c_C in c_h){if(!c_C.indexOf('design.')){c_B[c_C]=c_h[c_C];delete c_h[c_C];
}}}m.set({productOption:c_h,supportedAreas:c_s.data.supportedAreas,designAttributes:c_B});}});}};c_k.undo=function(){var m=this;if(m.c_i>0){m.c_i--;m.set({c_h:m.c_g[m.c_i--]});}};c_k.update=c_k.c_D=function(c_m){
this.c_j++;this.c_l(c_m);};function c_l(){this.c_l()}function c_E(c_F,c_G){return c_c.Data.identical(c_F,c_G)?c_G:c_F;}c_d.stateProperties({c_H:{name:'accessoryId',onChange:c_l},c_I:'attributesInfo',
c_q:{name:'busy',value:c_a},c_J:{name:'dependencyGraph',conformer:c_E,onChange:c_l},c_B:{name:'designAttributes',conformer:c_E,onChange:c_l,value:{}},c_K:{name:'includeDesignInThumbnail',onChange:c_l,
value:c_a},c_L:'inStock',c_M:{name:'markup',onChange:c_l},c_N:{name:'originalPricing',onChange:c_l},c_O:'oosList',c_P:{name:'parentProductId',onChange:c_l},c_Q:{name:'parentProductOption',onChange:c_l
},c_e:'preventServiceCall',c_R:{name:'productId',onChange:c_l},c_h:{name:'productOption',conformer:c_E,onChange:c_l},c_S:{name:'productType',onChange:c_l},c_T:'quantityMultiplier',c_u:{name:'requestDelay',
value:150},c_r:'serviceUrls',c_U:{name:'skuFilter',onChange:c_l},c_V:{name:'skuFilterUseType',onChange:c_l},c_W:'supportedAreas',c_X:{name:'templateParams',onChange:c_l},c_Y:{name:'view',onChange:c_l
}});return c_d;}});
Uize.module({name:'Zazzle.ProductConfiguratorUi',superclass:'Uize.Widget.Form',required:['Zazzle.ProductConfiguratorSectionUi','Zazzle.ProductConfiguratorSectionUi.PurchaseUi','Zazzle.ProductAttributesModel',
'Uize.Util.Coupler','Uize.Data'],builder:function(e_$){'use strict';var e__=Uize;var e_a=e_$.subclass(null,function(){var m=this,e_b=Zazzle.ProductConfiguratorSectionUi,e_c=['accessoryId','dependencyGraph',
'designAttributes','markup','parentProductId','parentProductOption','productId','productOption','productType','skuFilter','skuFilterUseType','supportedAreas','templateParams','view'],e_d=m.addForm('primaryUi',e_b.PrimaryUi),
e_e=m.addForm('purchaseUi',e_b.PurchaseUi),e_f=m.e_f=m.model=new Zazzle.ProductAttributesModel(e__.copyInto({serviceUrls:m.e_g,includeDesignInThumbnail:m.e_h=='ProductConfiguration'&&m.e_i!='0'},m.get(e_c)
)),e_j=new e__.Util.Coupler({instances:[m,e_f],properties:e_c,coupled:m.isWired});e_f.wire({'Attributes Info Updated':function(e_k){var e_l=e__.copyInto({name:'Attributes Updated',changedAttributes:e_k.attributes,
productOption:e__.copy(m.e_m,e_f.get('productOption')),priceChanged:e_k.priceChanged},e_f.get(['attributesInfo','inStock','quantityMultiplier']));e_d.fire(e_l);e_e.fire(e_l);},'Changed.busy':function(){m.set({busy:e_f.get('busy')?true:'inherit'})}
});m.wire({'Attribute Value Changed':function(e_k){e_k.bubble=false;e_f.setAttributeValue(e_k.attributeName,e_k.value);},'Annotation Event':e_d,'Changed.wired':function(){e_f.set('preventServiceCall',true);
e_j.set('coupled',m.isWired);e_f.set('preventServiceCall',false);}});new e__.Util.Coupler({instances:[e_e,m],properties:['quantity']});e_e.children.submit.wire('Click',m);});function e_n(e_o){var m=this,
e_h=m.e_h;m.e_f&&m.e_f.set({experience:e_h,includeDesignInThumbnail:e_h!='ProductDesign'&& !!+m.e_i,productId:m.e_i});if('experience'in e_o){var e_p={experience:e_h},e_d=m.getFormElement('primaryUi'),
e_e=m.getFormElement('purchaseUi');e_d&&e_d.set(e_p);e_e&&e_e.set(e_p);}}function e_q(){var m=this,e_r=e__.copy(m.e_s,m.e_m),e_m={},e_s={},e_t;for(e_t in e_r)(e_t.indexOf('design.')?e_s:e_m)[e_t]=e_r[e_t];
m.set({e_m:e_u(e_m,m.e_m),e_s:e_u(e_s,m.e_s)});}function e_u(e_v,e_w){return e__.Data.identical(e_v,e_w)?e_w:e_v}e_a.stateProperties({e_x:'accessoryId',e_y:'dependencyGraph',e_h:{name:'experience',onChange:e_n,
value:'None'},e_m:{name:'designAttributes',conformer:e_u,onChange:[e_q,function(){var e_z=this.children.elements,e_e=e_z?e_z.children.purchaseUi:undefined;e_e&& !e__.isEmpty(this.e_m)&&e_e.fire('Price Check');
}],value:{}},e_A:'markup',e_g:{name:'modelServiceUrls',onChange:function(){this.e_f&&this.e_f.set({serviceUrls:this.e_g})}},e_B:'parentProductId',e_C:'parentProductOption',e_i:{name:'productId',onChange:e_n
},e_s:{name:'productOption',conformer:e_u,onChange:e_q},e_D:'productType',e_E:'quantity',e_F:'skuFilter',e_G:'skuFilterUseType',e_H:'supportedAreas',e_I:{name:'templateParams',conformer:e_u},e_J:'view'
});e_a.set({useNormalSubmit:false});return e_a;}});
Uize.module({name:'Zazzle.ProductUi',superclass:'Zazzle.Widget',required:['Zazzle.ProductConfiguratorUi','Zazzle.ProductViewUi','Zazzle.ProductOptionMetaInfo','Uize.Util.Coupler','Uize.Util.PropertyAdapter',
'Uize.Data','Uize.Widget.FormWarnings'],builder:function(z_$){'use strict';var z__=true,z_a=false,z_b=null,z_c=Uize,z_d=Zazzle,z_e;Uize.module({name:'Zazzle.FormWarningsWatchedElement',superclass:'Uize.Widget',
builder:function(z_$){var z_f=z_$.subclass();z_f.stateProperties({z_g:'isValid',z_h:'warningMessage',z_i:'warningShown'});return z_f;}});var z_f=z_$.subclass(z_b,function(){var m=this,z_j=z_c.Util,z_k=z_c.Util.Coupler,
z_l=m.addChild('view',m.z_m||z_d.ProductViewUi,{designAreas:m.z_n['design.areas']}),z_o=m.addChild('configurator',z_d.ProductConfiguratorUi),z_p=m.addChild('metaInfo',z_d.ProductOptionMetaInfo),z_q=m.addChild(
'formWarnings',z_c.Widget.FormWarnings,{watchedElements:[]}),z_r=['parentProductId','parentProductOption','productId','productOption','productType','templateParams'];m.z_s={};new z_k({instances:[z_o,m],
properties:z_r.concat(['accessoryId','designAttributes','experience','markup','quantity','view'])});new z_k({instances:[z_l,m],properties:z_r});new z_j.PropertyAdapter({propertyA:{instance:z_l,property:'value'
},propertyB:{instance:m,property:'view'}});function z_t(){m.z_u()}z_o.wire({Click:function(){m.z_v(function(z_w,z_x){z_w!==z_a&&m.fire({name:'Submit',data:z_x});});},'Changed.isValid':function(){z_t();
m.z_y();}});z_o.model.wire({'Changed.attributesInfo':function(z_z){var z_A=z_o.get('productOption'),z_B={},z_C=z_z.newValue;if(z_C){for(var z_D in z_A){var z_E=z_C[z_D];if(z_E){var z_F=z_c.findRecord(
z_E.values,{name:z_A[z_D]});if(z_F)z_B[z_D]=z_F.valueDetails;}}z_p.set({value:z_c.clone(z_A),valueDetails:z_B});}},'Changed.productOption':function(){m.testConfiguration()}});z_t();z_l.wire('Annotation Event',
function(z_z){var z_G=z_z.data;z_G.type=='option'&&z_o.fire({name:'Annotation Event',annotation:z_G,type:z_z.type});});}),z_H=z_f.prototype;var z_I=function(z_J,z_K){z_J&&z_J.apply(this,z_K)};z_H.z_v=function(z_J){this.beforeFinishAction('buy',z_J)};
z_H.z_y=function(z_J){var m=this,z_q=m.children.formWarnings,z_s=m.z_s,z_L=z_q.get('watchedElements'),z_M=m.get('idPrefix'),z_N=[],z_O=z_d.FormWarningsWatchedElement;z_c.forEach(z_s,function(z_P,z_Q){
var z_R=new z_O({idPrefix:z_M+'_'+z_Q,isValid:z_a,warningMessage:z_P.z_S}),z_T=z_P.z_U;if(z_T){z_R.z_V=new z_c.Util.Coupler({instances:[z_T,z_R],properties:['focused','isValid','warningMessage','warningShown']
});}else z_R.wire('Changed.focused',function(z_z){m.fire({name:'Focus Warning',constraint:z_P.z_W,focused:z_z.source.get('focused'),sourceEvent:z_z});});z_N.push(z_R);});var z_i= !z_c.isEmpty(z_N);z_q.set({watchedElements:z_N});
z_c.callOn(z_N,'set',[{warningShown:z_i}]);z_q.set({shown:z_i});for(var z_X= -1;++z_X<z_L.length;){var z_Y=z_L[z_X];delete z_Y.z_V;z_Y.kill();}z_I(z_J,[z_s]);};z_H.z_Z=function(z_0){var m=this;if(m.isWired){
var z_1=m.web('left'),z_2=m.web('extraProductTitleShell').css('display')!='none';if(!z_0){var z_3=m.children,z_l=z_3.view,z_4=m.web(z_l.getNode('mainViewShell')),z_5=m.web(z_l.children.scrolly);z_4.contentWidth('');
z_4.contentWidth(z_4.width()-((z_5.offset(m.getNode()).top+z_5.height())-m.web(m.z_6||window).height()));z_l.updateUi();}if((z_2&& !m.z_7)||(!z_2&&m.z_7)){z_c.require('Uize.Web.xDom',function(){var z_8=m.web('right'),
z_9=m.children.configurator.getFormElement('purchaseUi');if(z_2&& !m.z_7){m.z_7=z__;m.web('metaInfoShell').detach().each(function(){z_8[0].appendChild(this)});m.web(z_9.getNode('priceDisplay')).detach().each(
function(){var z_$_=z_9.getNode('buttons');z_$_.parentNode.insertBefore(this,z_$_);});}else if(!z_2&&m.z_7){m.z_7=z_a;m.web('metaInfoShell').detach().each(function(){z_1[0].appendChild(this)});m.web(z_9.getNode('priceDisplay')).detach().each(
function(){z_9.getNode('titleAndPrice').appendChild(this);});}});}m.fire('Responsive Sizing');}};z_H.z_u=function(){var m=this,z_3=m.children,z_o=z_3.configurator,z___=m.z___;m.z_s={};m.z_a_&&(function z_b_(z_c_){
for(var z_X= -1;++z_X<z_c_.length;){var z_d_=z_c_[z_X],z_e_=z_d_.get('warningMessage');if(z_d_.get('isValid')==z_a){if(z_d_.isForm)z_b_(z_d_.getFormElement());else if(z_e_){var z_f_=z_d_.get('elementName');
m.z_s[z_f_]={z_f_:z_f_,z_g_:'nobuy',z_S:z_e_,z_U:z_d_};}}}})([z_o]);if(z___){var z_h_=m.z_h_,z_i_=m.z_j_,z_k_={};if(!z_c.isArray(z___))z___=[z___];for(var z_l_= -1;++z_l_<z___.length;){var z_W=z___[z_l_],
z_m_=z_W.type;if(z_m_!='none'&&(!z_h_||z_h_['constraint_'+z_m_])&& !z_k_[z_m_]){m.z_s[z_m_]={z_f_:z_m_,z_g_:z_i_&&z_W.level==='nopost'?'nobuy':z_W.level,z_S:m.localize('constraint_'+z_m_),z_U:m.getConstraintFormElement(z_W),
z_W:z_W};z_k_[z_m_]=z__;}}}};z_H.beforeFinishAction=function(z_n_,z_J){var m=this;m.z_a_=z__;m.z_u();m.z_y(function(z_s){function z_o_(z_p_){z_p_?m.ensureAllOptionsSelected(function(z_w){z_w!==z_a?m.finalize(z_J)
:z_I(z_J,[z_a]);}):z_I(z_J,[z_a]);}if(z_c.isEmpty(z_s))z_o_(z__);else{var z_q_=z_a,z_r_=0,z_s_=function(){var z_t_=[];for(var z_Q in z_s)z_t_.push('<p><span class="error">'+z_s[z_Q].z_S+'</span></p>')
;return z_t_.join('');};for(var z_Q in z_s){var z_P=z_s[z_Q];if(!z_q_&&z_P.z_g_=='no'+z_n_)z_q_=z_P;z_r_++;}z_q_?z_o_(z_a):m.confirm({state:'warning',message:'<p>'+m.localize('finishActionWarningMessage')+'</p>'
+z_s_()+'<p>'+m.localize('finishActionWarningClosing')+'</p>',callback:z_o_});}});};z_H.ensureAllOptionsSelected=function(z_J){z_I(z_J,[this.children.configurator.get('isValid')]);};z_H.finalize=function(z_J){
z_I(z_J,[z__,{productId:this.z_u_}]);};z_H.getConstraintFormElement=function(z_W){return z_b;};z_H.getProductInfo=function(){var m=this;return{productType:m.z_v_,productId:m.z_u_,title:m.z_w_,productOption:z_c.clone(m.z_x_),
designAttributes:z_c.clone(m.z_n),view:m.z_y_,quantity:m.z_z_,templateParams:m.z_A_,realview:m.children.view.children.mainView+''};};z_H.getProductParams=function(z_B_){var m=this,z_x_=m.z_x_,z_C_=m.z_C_,
z_y_=m.z_y_,z_n=m.z_n,z_D_={};if(z_B_&& !z_c.isEmpty(z_C_)){for(var z_D in z_x_)if(z_x_[z_D]!=z_C_[z_D])z_D_[z_D]=z_x_[z_D];if(z_y_!=z_C_.view)z_D_.view=z_y_;for(var z_E_ in z_n)if(z_n[z_E_]!=z_C_[z_E_])
z_D_[z_E_]=z_n[z_E_];}else z_D_=z_c.copyInto({view:z_y_},z_x_,z_n);return z_D_;};z_H.productize=function(z_J){this.finalize(z_J);};z_H.setConstraints=function(z___,z_F_){var m=this,z_G_=[];if(z___){var z_h_=m.z_h_;
if(!z_c.isArray(z___))z_H_=[z___];for(var z_l_= -1;++z_l_<z___.length;){var z_W=z___[z_l_],z_m_=z_W.type;if(z_m_!='none'&&(!z_h_||z_h_['constraint_'+z_m_]))z_G_.push(z_W);}}m.z___=z_G_;function z_I_(){
m.z_u();m.z_y();}z_F_?z_F_(m.z___,z_I_):z_I_();};z_H.testConfiguration=function(z_F_){var m=this;z_c.require('Uize.Xml',function(z_J_){m.ajax({serviceUrl:m.getInherited('env').rlvNetService+'edit',readonly:z__,
rvtype:'none'},{cache:'never',contentType:'text/xml',data:'<edit version="1"><params '+z_J_.toAttributes(z_c.copy(m.get('productId')?{pid:m.get('productId')}:undefined,m.get('designId')?{id:m.get('designId')}:undefined,
m.getProductParams(z__)))+' /></edit>',callbackSuccess:function(z_K_){m.set({z_L_:z_K_});if(z_K_&&z_K_.changed){var z_M_=z_K_.design?z_K_.design.attributes:z_b;if(z_M_){var z_N_=z_c.Url.fromParams(z_M_)['design.areas'],
z_O_=m.z_n['design.areas'];z_N_!==z_O_&&m.set({z_n:z_c.copyInto({},{areas:z_N_})});}}m.setConstraints(z_K_.design&&z_K_.design.constraints,z_F_);}});});};z_H.updateUi=function(){var m=this;if(m.isWired){
var z_3=m.children,z_P_=m.web(z_3.view.children.mainView),z_Q_=function(){var z_R_=function(z_0){clearInterval(z_S_);m.z_Z(z_0);};if(z_P_.height()>=z_P_.width())z_R_();else if(++z_T_>=200)z_R_(z__);},
z_T_= -1,z_S_=setInterval(z_Q_,100);z_Q_();for(var z_U_ in{view:1,configurator:1,metaInfo:1})z_3[z_U_].updateUi();z_$.doMy(m,'updateUi');}};z_H.wireUi=function(){var m=this;if(!m.isWired){m.web(window).resize(function(){m.z_Z()},500);
z_$.doMy(m,'wireUi');m.z_u();var z_3=m.children;!z_3.metaInfo.get('valueDetails')&&z_3.configurator.model.update();}};var z_V_=function(){var m=this;m.set({z_A:z_c.copyInto({},m.z_x_,{view:m.z_y_},m.z_n
)});},z_W_=function(z_X_){var z_Y_={},z_n={},z_x_={},z_y_=z_b,z_Z_;for(z_Z_ in z_X_){if(z_Z_==='view')z_y_=z_X_[z_Z_];else(z_Z_.indexOf('design.')?z_x_:z_n)[z_Z_]=z_X_[z_Z_];}return{z_n:z_n,z_x_:z_x_,
z_y_:z_y_};},z_0_=function(z_X_){var z_1_=z_W_(z_X_);this.set(z_c.copyInto({z_n:z_2_(z_1_.z_n,this.z_n),z_x_:z_2_(z_1_.z_x_,this.z_x_)},z_1_.view?{z_y_:z_1_.view}:z_e));},z_2_=function(z_3_,z_4_){return z_c.Data.identical(z_3_,z_4_)?z_4_:z_3_;
};z_f.stateProperties({z_5_:'accessoryId',z_h_:'constraintsToTest',z_j_:'constraintNoPostIsNoBuy',z_n:{name:'designAttributes',conformer:z_2_,onChange:[function(){z_0_.call(this,z_c.copyInto({},this.z_x_,this.z_n));
},z_V_,function(){var z_y_=this.children.view;z_y_&&this.z_n&&z_y_.set({designAreas:this.z_n['design.areas']});}],value:{}},z_6_:'designId',z_7_:{name:'experience',value:'None'},z_t_:'markup',z_6:'offsetParent',
z_C_:'originalProductAttributes',z_8_:'parentProductId',z_9_:'parentProductOption',z_u_:'productId',z_x_:{name:'productOption',conformer:function(z_A){return z_c.Data.identical(z_A,this.z_x_)?this.z_x_:z_A},
onChange:[function(){z_0_.call(this,z_c.copyInto({},this.z_n,this.z_x_));},z_V_]},z_v_:'productType',z_z_:'quantity',z_A_:'templateParams',z_L_:'templateEditResp',z_$a:'skuFilter',z__a:'skuFilterUseType',
z_w_:'title',z_A:{name:'value',onChange:function(){z_0_.call(this,z_c.copyInto({},this.z_A))}},z_y_:{name:'view',onChange:z_V_},z_m:'viewWidgetClass'});return z_f;}});
Uize.module('Zazzle.Widgets');
Uize.module('Zazzle.Widgets.Doublecheck');
Uize.module({name:'Zazzle.Widgets.Doublecheck.mDoublecheckFlow',required:['Uize.Url','Uize.Json','Uize.Widget.mWeb','Zazzle.DesignModel'],builder:function(){'use strict';function d_$(d__,d_a){var d_b={};
for(var d_c in d__){var val=d__[d_c];if(d_a(val)){d_b[d_c]=val;}}return d_b;}function d_d(obj){if(obj===null)return"null";if(typeof obj!=="object")return""+obj;var KVPs=[];for(var d_c in obj){KVPs.push({d_c:d_c,Value:d_d(obj[d_c])});
}KVPs.sort(function(a,b){return a.d_c-b.d_c;});return Uize.Json.to(KVPs);}function d_e(d_f,d_g){var d_h={};var d_i=d_f.properties;for(var ix=0;ix<d_i.length;ix++){var d_j=d_i[ix];d_h[d_j.name]=d_j.value;
}var obj={};obj.Name=d_f.name;obj.Value=d_h["value"];obj.IsLocked=d_h["locked"]==="true";obj.TemplateName=d_f.urlkey||"";if(obj.TemplateName){var d_k=d_g[obj.TemplateName];if(!d_k){console.warn("Cannot find template for childObject: "+obj.Name+" templateName: "+obj.TemplateName);
}else{obj.DisplayName=d_k.title;obj.Unmodified= !d_k.applied;}}return obj;}function d_l(area,d_g){var Texts=[];var objs=area.getChildObjects();for(var ix=0;ix<objs.length;ix++){var obj=objs[ix];if(obj.constructor.name==="DesignText"){
Texts.push(d_e(obj,d_g));}}var obj={};obj.Texts=Texts;obj.Name=area.getName();obj.IsBlank=objs.length===0;obj.GroupName=area.groupName;obj.BleedProblems=area.insideBleed;obj.SafeProblems=area.outsideSafe;
return obj;}function d_m(d_n){var obj={};obj.GroupName=d_n;obj.IsBlank=true;return obj;}function d_o(d_p,d_q,d_r){var d_s=d_r;var d_t=d_p.getTemplates();for(var ix=0;ix<d_t.length;ix++){var d_k=d_t[ix];
d_s[d_k.urlkey]=d_k;}if(d_q){for(var d_c in d_q){var d_u=d_q[d_c];if(d_s[d_c]){d_s[d_c].value=d_u;continue;}var d_k={title:'',applied:true,value:d_q[d_c],urlkey:d_c.substring(2)};d_s[d_c.substring(2)]=d_k;
}}var d_v=d_s;var d_w={};var d_x=d_p.getAreas();for(var ix=0;ix<d_x.length;ix++){var d_y=d_x[ix];d_w[d_y.getName()]=d_y;}var d_z=d_p.getAttributes()["design.areas"];var d_A=d_z.split(/[\]|\[|,]/g);for(var ix=d_A.length-1;ix>=0;ix--){
if(!d_A[ix]){d_A.splice(ix,1);}}var d_B={};for(var ix=0;ix<d_A.length;ix++){var d_C=d_A[ix];var area=d_w[d_C];if(!area){console.error("Could not find area for areaName: "+d_C);continue;}var d_D=d_l(area,d_v);
d_B[d_D.GroupName]=d_D;}var d_E=d_p.missingAreaGroups;for(var ix=0;ix<d_E.length;ix++){var d_n=d_E[ix];d_B[d_n]=d_m(d_n);}var d_F=[];for(var key in d_B){d_F.push(d_B[key]);}return d_F;}var d_G={DialogCheckSides:{
name:'DialogCheckSides',inDesignView:true,hide:'bleed,safe,visible',width:50,shouldShow:function(d_H){return!Uize.isEmpty(d_H);},getAssociatedData:function(d_I){var d_J=[];for(var ix=0;ix<d_I.length;ix++){
var d_D=d_I[ix];if(d_D.IsBlank){d_J.push(d_D.GroupName);}}return d_J;}},DialogCheckTemplates:{name:'DialogCheckTemplates',inDesignView:true,hide:'bleed,safe,visible',width:40,shouldShow:function(d_H){
return!Uize.isEmpty(d_H);},getAssociatedData:function(d_I){var d_K={};for(var ix=0;ix<d_I.length;ix++){var d_D=d_I[ix];var d_L=d_$(d_D.Texts,function(text){return text.Unmodified;});if(!Uize.isEmpty(d_L)){
d_K[d_D.Name]=d_L;}}return d_K;}},DialogCheckBleed:{name:'DialogCheckBleed',inDesignView:true,width:50,shouldShow:function(d_H){return!Uize.isEmpty(d_H);},getAssociatedData:function(d_I){var d_M={};for(var ix=0;ix<d_I.length;ix++){
var d_D=d_I[ix];var d_N={};if(!Uize.isEmpty(d_D.BleedProblems)){d_N.BleedProblems=d_D.BleedProblems;}if(!Uize.isEmpty(d_D.SafeProblems)){d_N.SafeProblems=d_D.SafeProblems;}if(!Uize.isEmpty(d_N)){d_M[d_D.Name]=d_N;
}}return d_M;}},DialogCheckSpelling:{name:'DialogCheckSpelling',inDesignView:true,hide:'bleed,safe,visible',width:40,shouldShow:function(d_H){return!Uize.isEmpty(d_H);},getAssociatedData:function(d_I,d_O){
var d_P={};for(var ix=0;ix<d_I.length;ix++){var d_D=d_I[ix];var d_g={};var d_Q=d_$(d_D.Texts,function(text){return!text.IsLocked||text.TemplateName;});if(!Uize.isEmpty(d_Q)){d_P[d_D.Name]=d_Q;}}var d_g=[];
for(var paramName in d_O){if(paramName.indexOf("t_")===0){var paramObj={};paramObj[paramName]=d_O[paramName];d_g.push(paramObj);}}if(!Uize.isEmpty(d_g)){d_P.d_g=d_g;}return d_P;}}};var d_R={};var d_S={
DialogCheckSides:'A',DialogCheckTemplates:'B',DialogCheckBleed:'C',DialogCheckSpelling:'D',d_T:'E',d_U:'F',d_V:'G',d_W:'H',d_X:'J',d_Y:'K'};var d_Z=[];var d_0=true;return function(d_1){d_1.declare({mixins:Uize.Widget.mWeb,
staticMethods:{clearDoublecheckCache:function(){d_R={};}},instanceMethods:{preStartDoublecheckFlow:function(d_2,d_p,d_3){var m=this;if(localStorage&&localStorage["dontreallypostforsale"]){var d_4=d_3;
d_3=function(justdoit){alert("Did action: "+d_2+" "+justdoit);d_4(false);};}d_5(d_6);function d_6(d_7,d_8){if(!d_p){d_3(true);return;}var d_9=[];if(m.get('moreSidesCostExtra')){d_9.push('DialogCheckSides');
}if(d_7){d_9.push('DialogCheckBleed');}m.startDoublecheckFlow(d_p,d_9,d_2==="post",function(){d_3(true)},function(){d_3(false)},d_8);}function d_5(d_3){if(d_p){d_3();return;}var d_8=m.get('templateParams');
if(!d_8){d_p=null;d_3();return;}var d_$_=d_3;d_3=function(){d_$_(true,d_8);};var d___=m.get('templateEditResp');if(d___){var upToDate=true;var respTemplatesObj={};var respTemplates=d___.design.d_g||[];
for(var ix=0;ix<respTemplates.length;ix++){var d_k=respTemplates[ix];if(d_k.type!==2)continue;respTemplatesObj["t_"+d_k.urlkey]=d_k;}for(var d_c in d_8){if(d_c.lastIndexOf("_txt")!==d_c.length-4){continue;
}if(!respTemplatesObj[d_c]){upToDate=false;break;}}if(upToDate){d_p=new zazzle.rlv.ZDesign(m.get('productOption'));d_p.updateWithResponse(d___);d_3();return;}}var opts=Uize.clone(m.getProductParams(true));
opts.pid=m.get('productId');var model=new zazzle.rlv.ZDesign(opts);model.addDesignListener(function(stuff){if(stuff.type=="error")throw stuff;d_p=model;d_3();});model.update();}},startDoublecheckFlow:function(
d_p,d_9,d_a_,d_b_,d_c_,d_q){var m=this;if(d_0){d_0=false;m.web(window).unload(function(){d_Z.push(d_S.d_Y);m.fire({name:'Track Event',extra:{ax:'doublecheck',params:Uize.Json.to(d_Z)}});});}if(d_a_){
d_Z.push(d_S.d_T);}else{d_Z.push(d_S.d_U);}var d_d_=['DialogCheckSides','DialogCheckTemplates','DialogCheckBleed','DialogCheckSpelling'];if(d_a_){d_d_.splice(1,1);}var d_e_=[];for(var ix=0;ix<d_d_.length;ix++){
var d_f_=d_d_[ix];if(d_9.indexOf(d_f_)>=0)continue;d_e_.push(d_G[d_f_]);}var d_s={};var d_F=d_o(d_p,d_q,d_s);var d_O={};function d_g_(d_h_){var d_i_={};for(var d_c in d_h_){var t=d_h_[d_c];d_i_["t_"+t.urlkey]=t.value;
}return Uize.Url.toParams(d_i_);}d_O.dz=d_p.getOpts().id||d_p.getId();d_O.pd=d_p.getOpts().pid;d_O.ta=d_g_(d_s);var d_j_=d_p.getOpts();var d_k_=Uize.clone(d_j_);delete d_k_.id;delete d_k_.pid;delete d_k_.dz;
delete d_k_.pd;if(Uize.isEmpty(d_k_)){d_j_=null;}else{d_O.po=Uize.Url.toParams(d_j_);}for(var ix=d_e_.length-1;ix>=0;ix--){var d_l_=d_e_[ix];var name=d_l_.name;var d_H=d_l_.getAssociatedData(d_F,d_O);
if(localStorage&&localStorage.getItem("showAllDoubleCheckDialogs")){continue;}if(d_d(d_H)===d_R[name]){if(localStorage&&localStorage.doublecheckTest){console.log("Skipping "+name+" with:\n"+JSON.stringify(d_H,"","\t"));
}d_e_.splice(ix,1);}else if(!d_l_.shouldShow(d_H)){if(localStorage&&localStorage.doublecheckTest){console.log("Skipping cached "+name+" with:\n"+JSON.stringify(d_H,"","\t"));}d_e_.splice(ix,1);}}var d_m_=0;
for(var ix=0;ix<d_e_.length;ix++){var d_n_=d_e_[ix].width;if(d_n_>d_m_){d_m_=d_n_;}}d_O.CheckDesignData=Uize.Json.to(d_F);if(localStorage&&localStorage.doublecheckTest){console.log("Starting flow with"
+"\n"+JSON.stringify(d_O,"","\t")+"\n\n"+JSON.stringify(d_F,"","\t"));}d_o_();function d_o_(){if(d_e_.length===0){if(d_a_){d_Z.push(d_S.d_V);}else{d_Z.push(d_S.d_W);}d_b_&&d_b_();return;}var d_l_=d_e_.shift();
var name=d_l_.name;d_O.InDesignView=d_l_.inDesignView;d_O.Hide=d_l_.hide;if(localStorage&&localStorage.doublecheckTest){var d_H=d_l_.getAssociatedData(d_F,d_O);console.log("Showing "+name+" with:"+"\n"+JSON.stringify(d_O,"","\t")
+"\n-->\n"+JSON.stringify(d_H,"","\t"));}var namePath='Zazzle.Widgets.Dialog.Doublecheck.'+name;d_Z.push(d_S[name]);m.callInherited('useDialog')({component:{name:namePath,params:d_O},widgetProperties:{
name:name,width:d_m_+'em'},widgetEventHandlers:{'Ok':function(){d_R[name]=d_d(d_H);d_o_();},'Cancel':function(){d_c_();},'Error':function(d_X){console.error(d_X);d_Z.push(d_S.d_X);d_o_();}}});}}}});};
}});
Uize.module({name:'ZazzleWww.ProductUi',superclass:'Zazzle.ProductUi',required:['Uize.Util.Coupler','ZazzleWww.ProductViewUi','Zazzle.Widgets.Doublecheck.mDoublecheckFlow','Uize.Node.Classes','Uize.Widget.Fleeting',
'Uize.Widget','Uize.Url'],builder:function(f_$){'use strict';var f__=Uize,f_a=f__.Widget,f_b=f__.Node.Classes,f_c=ZazzleWww,f_d=true,f_e=false,f_f=null,f_g;var f_h=f_$.subclass(f_f,function(){var m=this,
f_i=m.children,f_j=f_i.configurator,f_k=f_i.view,f_l=function(){m.f_m=f_e;m.f_n=f_d;m.f_o();},f_p=m.addChild('lastSavedFleeting',f_a.Fleeting,{lifeSpan:3000});new f__.Util.Coupler({instances:[m,f_k],
properties:['isDesigning','designId']});new f__.Util.Coupler({instances:[m,f_j],properties:['supportedAreas']});f_k.wire('Annotation Event',function(f_q){if(f_q.type=='Click'){var f_r=f_q.data;f_r.type=='area'
&&m.set({isDesigning:f_d,area:f_r.areaName});}});m.f_s('save',function(){m.callInherited('ensureLoggedIn')({callback:function(){m.fire('Save');f_p.set({shown:f_d});}})});m.f_s('publish',function(){m.f_t&&
m.callInherited('ensureLoggedIn')({callback:function(){var f_u=m.f_v;m.f_w=f_d;m.set({f_v:f_e});m.beforeFinishAction('post',function(f_x){if(f_x&&f_j.get('isValid')&& !m.f_y){var f_z=m.getInherited('env').params;
m.children.publish.set({enabled:f_e});location.href=f__.Url.resolve([m.getInherited('urls').postDesign,{pt:m.get('productType'),istmp:m.f_A.isTemplate(),rpd:m.f_B,cmid:f_z.cmid||f_f,rcmid:f_z.rcmid||f_f,
gl:f_z.gl||f_f,cg:f_z.cg||f_f,ifr:f_z.ifr||f_f,tag:f_z.tag},m.children.view.getRealviewParams(),m.getProductParams()]);}else{m.f_w=f_e;m.set({f_v:f_u});}});}})});m.f_s('share',function(){var f_C=m.get('designId');
m.callInherited('ensureLoggedIn')({callback:function(){var f_D=f_k+'';m.fire('Save');m.callInherited('showShareDialog')({dialogProperties:{emailParams:{rlvBase:m.get('urls').rlvBase,useRealviewService:f_d,
design:{id:f_C,pending:f_d,type:m.get('productType'),params:f__.copyInto(f__.clone(m.get('productOption')),{dv:f_k.get('cacheDefeat')})},showImage:f_d,url:{svcRelativeLink:'email/sendproductemail',params:{dz:f_C,papid:m.get('productId')}
},view:f_D,realviewParams:f_k.model.getViewInfo(f_D).realviewParams}},showEmailThis:f_d,showImageBox:f_d});}});});m.f_s('help',function(){m.callInherited('launchPopup')({url:m.get('urls').help})});m.f_s(
'toggleDesignUi',function(){m.toggle('designUiCollapsed')});m.wire({'Focus Warning':function(f_q){f_i.designUi&&f_i.designUi.focusWarning(f_q.constraint,f_q.focused)},'Changed.designId':function(){var
 f_E=m.f_E,f_C=m.get('designId');if(f_E&&f_E.getId()!==f_C){var f_F=m.f_A,f_G=f_F?f_F.get('isControlling'):f_e;f_F&&f_G&&f_F.set({isControlling:f_e});m.f_H(f_d);f_F&&f_F.set({isControlling:f_G});}},'Changed.isDesigning':function(){
m.f_I?f_l():m.updateUi()}});if(m.f_m){var f_J=m.addChild('templateFields',Zazzle.TemplateFieldsUi);f_J.wire('Values Set',function(){m.set({templateParams:f__.copy(m.f_K,f_J.getValues(f_d))});m.testConfiguration(
function(f_L,f_M){var f_N=f_J.getFormElement(),f_O={},f_P;for(var f_Q= -1;++f_Q<f_L.length;){f_P=f_L[f_Q];if(f_P.urlkeys){var f_R=f_P.urlkeys.split(',');for(var f_S= -1;++f_S<f_R.length;)f_O[f_R[f_S]]=f_P
;}}for(var f_T= -1;++f_T<f_N.length;){var f_U=f_N[f_T],f_V=f_U.get('elementName');(f_P=f_O[f_V])?f_U.set({isValid:false,warningMessage:m.localize('constraint_'+f_P.type)}):f_U.set({isValid:f_d});}var f_W=f__.isEmpty(f_O);
f_J.set({isValid:f_W,warningShown:!f_W});m.set({f_y:!f_W});f_M();});});m.addChild('toggleTemplateFieldsUi',f__.Widget.Button).wire('Click',function(){m.toggle('templateFieldsUiCollapsed')});}m.f_I&&f_l();
}),f_X=f_h.prototype;f_h.mixins([Zazzle.Widgets.Doublecheck.mDoublecheckFlow]);f_X.f_H=function(f_Y){var m=this,f_Z=m.get('productId'),f_C=m.get('designId');m.set({f_E:zazzle.rlv.createZDesign(f__.copyInto(
f_Z?{pid:f_Z,max_dim:m.children.view.get('requestedMaxDim')}:f_C?{id:f_C}:{pdt:m.get('productType')},f_Y?f_f:m.get('productOption')))});return m.f_E;};f_X.f_s=f_a.Button.addChildButton;f_X.getConstraintFormElement=function(f_P){
return(this.f_m&&f_P.urlkeys?this.children.templateFields.getTemplateFieldFormElement(f_P.urlkeys.split(',')[0]):f_$.doMy(this,'getConstraintFormElement',[f_P]))};f_X.getProductInfo=function(){return f__.copyInto(
f_$.doMy(this,'getProductInfo'),{designId:this.get('designId')})};f_X.getProductParams=function(f_0){var m=this,f_1=f_$.doMy(this,'getProductParams',[f_0]);if(m.f_I){var f_2=m.f_A.getDesignAttributes();
f_1=f__.copyInto(f_1,{dz:m.get('designId')},f_2&&'design.areas'in f_2?{'design.areas':f_2['design.areas']}:f_g);}if(m.f_m){f_1=f__.copyInto(f_1,this.children.templateFields.getValues(f_d,f_0));}return f_1
};f_X.beforeFinishAction=function(f_3,f_4){var m=this;if(document.activeElement){document.activeElement.blur();}var f_5=function(f_6){if(m.DoubleCheckParty_AllDialogs){if(!f_6){f_4(f_6);return;}m.preStartDoublecheckFlow(
f_3,m.f_E,f_4);}else{if(m.f_I&&m.f_7&&f_3==='buy'){m.callInherited('useDialog')({component:{name:'ZazzleWww.Dialog.PreFinish',params:{pt:m.get('productType'),warningType:'review',isAddToCart:f_d,po:f__.Url.toParams(
f__.copyInto({},m.get('productOption'),m.get('designAttributes'))),dz:m.get('designId'),dv:m.children.view.get('cacheDefeat')}},widgetClassName:'ZazzleWww.DialogPreFinish',widgetProperties:{name:'preFinishDialog'},
submitHandler:function(){f_4(f_6)}});}else f_4(f_6);}};f_$.doMy(m,'beforeFinishAction',[f_3,f_5]);};f_X.finalize=function(f_4){var m=this,f_8=function(){f_$.doMy(m,'finalize',[f_4])};m.f_I?m.fire({name:'Finish',callback:f_8})
:f_8();};f_X.productize=function(f_4){var m=this;f_$.doMy(m,'productize',[function(f_9){var f_I=m.f_I,f_m=m.f_m,f_J=m.children.templateFields,f_$_=function(f___){f_4&&f_4(f_9,{productId:(f___&&f___.productId)||m.get('productId'),
designId:(f___&&f___.designId)||m.get('designId')})};if(f_9&&(f_I||(f_m&&m.f_a_&&f_J.hasDeviantParams()))){m.ajax({service:'create/productize',pd:m.get('productId'),dz:f_I?m.get('designId'):f_f,pt:m.get('productType'),
tl:f_I?m.get('title'):f_f,ea:f__.Url.toParams(f__.copyInto({},m.get('productOption'),m.get('designAttributes'))),ta:f_m?f__.Url.toParams(f__.copy(m.get('templateParams'),f_J.getValues(f_d,f_d))):f_f},
function(f_b_){m.set(f__.copyInto({f_I:f_e},f_b_.productId?{productId:f_b_.productId}:f_g));f_9= !!f_b_.success;f_$_(f_b_);});}else f_$_()}]);};f_X.testConfiguration=function(f_c_){!this.f_I&&f_$.doMy(this,'testConfiguration',[f_c_])
};f_X.f_o=function(){var m=this,f_d_=function(f_e_){m.callInherited('displayLoadingOverlay')(f_e_,{parent:m})};!m.f_f_&&m.isWired&&f_d_(f_d);f__.require(['ZazzleWww.ProductDesignController','Zazzle.SelectedDesignObjectsModel',
'Zazzle.DesignModel'],function(f_g_,f_h_){var f_Z=m.get('productId'),f_C=m.get('designId'),f_E=m.f_H(),f_i_=new f_h_,f_i=m.children,f_j_=f_i.designUi,f_k=f_i.view,f_A,f_k_=m.get('productOption'),f_l_,
f_9=function(){if(m.f_A){m.f_A.set({isControlling:f_e});m.f_A.get('selectedDesignObjectsModel').clear();}(f_A=m.f_A=new f_g_({productUi:m,productConfiguratorUi:f_i.configurator,productViewUi:f_k,designUi:f_j_,
designModel:f_E,selectedDesignObjectsModel:f_i_,enableAutoSave:f_d,defaultObjectProperties:m.f_m_,defaultText:m.f_n_,defaultImageId:m.f_o_,launchGetStarted:m.f_p_,maxDim:f_i.view.get('maxDim'),requestedMaxDim:f_i.view.get('requestedMaxDim'),
isFanMerch:m.f_q_,fanMerchLogo:m.f_r_})).wire({'Changed.canPublish':function(){f_i.publish.set({enabled:f_A.get('canPublish')});},'Changed.isSaving':function(){f_i.save.set({enabled:f_A.get('isSaving')?f_e:'inherit'})
},'Handle Constraints':function(f_q){var f_L=f_q.constraints,f_s_=f__.isArray(f_L)?f_L.length:0,f_t_= -1;for(;++f_t_<f_s_;)f_j_.setConstraint(f_L[f_t_]);m.setConstraints(f_L,function(f_u_,f_4){m.set({f_y:!f__.isEmpty(f_u_)});
f_4&&f_4();});},'Handle Unsupported Areas':function(f_q){var f_v_=f_q.unsupportedAreas;if(!m.f_w_)m.f_w_=Uize.Template.compile(m.getNode('unsupportedAreasMarkup').innerHTML,{openerToken:'[%',closerToken:'%]'
});m.confirm({state:'warning',message:m.localize('areaGroupUnsupportedWarning',{areaList:m.f_w_({names:f_v_}).replace(/\n/g,'')}),yesHandler:f_q.yesHandler,noHandler:f_q.noHandler});},'Launch Get Started':function(){
m.f_x_();m.set({f_p_:f_e});},Message:function(f_q){m.inform({state:f_q.state,message:m.localize.apply(m,f_q.messageArguments)})}});m.set({f_B:m.get('productId'),experience:'ProductDesign'});m.callInherited('loadHtmlIntoNode')(
{node:m.getNode('designUi'),alwaysReplace:f_e},{cp:'ZazzleWww.DesignUi',pt:m.get('productType'),pd:m.get('productId'),showAddImageButton:m.f_y_,allowTiling:m.f_z_,idPrefix:m.childId('designUi')},function(){
if(m.isWired){f_A.set({designUi:f_j_=f_i.designUi});f_j_.set({model:f_E,selectedDesignObjectsModel:f_i_,dialogMooringNode:f_k.getNode(),dialogOffsetX:f_k.get('maxDim')});f_j_.wireUi();m.updateUi();f_A.wire(
'zDesign Initialized',function(){f_d_(f_e)});f_A.set({isControlling:f_d});}m.set({f_f_:f_d});});};for(f_l_ in f_k_){if(!f_l_.indexOf('design.'))delete f_k_[f_l_];}if(!(m.f_A_&&m.f_A_.length))m.ajax({
service:'product/productareas/get',pt:m.get('productType')},{cache:'memory',callback:function(f_B_){if(f_B_.success){m.set(f_B_.data);f_9();}}});else f_9();});};f_X.f_C_=function(){var m=this,f_D_=m.f_E_,
f_i=m.children,f_j_=f_i.designUi;if(m.isWired){f_i.toggleDesignUi.set({text:f_D_?'+':'&minus;'});m.displayNode('designUi',!f_D_);f_b.setState(m.getNode('designShell'),m.f_F_,f_D_);!f_D_&&f_j_&&f_j_.updateUi()
;}};f_X.f_G_=function(){var m=this,f_D_=m.f_H_,f_i=m.children;if(m.isWired){if(m.f_m){f_i.toggleTemplateFieldsUi.set({text:f_D_?'+':'&minus;'});m.displayNode('templatesFieldsUi',!f_D_);f_b.setState(m.getNode('templatesFieldsShell'),m.f_F_,f_D_);
!f_D_&&f_i.templateFields.updateUi();}}};f_X.f_x_=function(){var m=this;m.callInherited('useDialog')({component:{name:'ZazzleWww.GetStartedDialogUi',params:{pd:m.get('productType')}},widgetProperties:{
name:'getStartedDialog',mooringNode:m.children.configurator.getNode(),offsetX:-50},submitHandler:function(f___){m.fire({name:'Submit Get Started',data:f___})}});};f_X.wireUi=function(){var m=this;if(!m.isWired){
m.wireNode('templateTitle','click',function(){m.toggle('templateFieldsUiCollapsed')});m.wireNode('designUiTitle','click',function(){m.toggle('designUiCollapsed')});f_$.doMy(m,'wireUi');if(m.f_f_&&m.f_I)
m.f_A.set({isControlling:f_d});}};f_X.updateUi=function(){var m=this;if(m.isWired){var f_I= !!m.f_I;m.displayNode('designShell',f_I);m.displayNode('actionButtons',f_I);m.displayNode('templatesFieldsShell',m.f_m&& !m.f_n);
m.f_C_();m.f_G_();f_$.doMy(m,'updateUi');}};f_h.stateProperties({f_I_:'area',f_J_:'areaGroup',f_A_:'areaGroups',f_K_:{name:'autoSaveDelay',value:30000},f_t:{name:'canPublish',value:f_e},f_m_:'defaultObjectProperties',
f_n_:'defaultText',f_o_:'defaultImageId',f_r_:'fanMerchLogo',f_v:{name:'finishOnFinalize',value:f_d},f_L_:{name:'hideCloseButton',value:f_e},f_y:{name:'hasConstraints',value:f_e},f_M_:{name:'hasNewDesignTemplate',
value:f_e},f_n:'hideTemplateFieldsUi',f_m:'includeTemplateFieldsUi',f_I:{name:'isDesigning',value:f_e},f_q_:'isFanMerch',f_p_:'launchGetStarted',f_a_:{name:'productizeOnFinalize',value:f_d},f_7:{name:'reviewBeforePurchase',
value:f_e},f_y_:{name:'showAddImageButton',value:f_d},f_z_:{name:'allowTiling',value:f_d},f_N_:'supportedAreas',f_E_:{name:'designUiCollapsed',onChange:f_X.f_C_,value:f_e},f_H_:{name:'templateFieldsUiCollapsed',
onChange:f_X.f_G_,value:f_e},f_w:{name:'isPosting',value:f_e},f_F_:'cssClassCollapsed',f_E:{onChange:function(){var m=this,f_j_=m.children.designUi,f_E=m.f_E,f_A=m.f_A;f_j_&&f_j_.set({model:f_E});f_A&&f_A.set({designModel:f_E});
}},f_f_:{conformer:function(f_O_,f_P_){return f_O_||f_P_},value:f_e},f_B:{conformer:function(f_P_,f_O_){return f_O_||f_P_}},f_A:{}});f_h.set({viewWidgetClass:f_c.ProductViewUi});return f_h;}});
Uize.module({name:'ZazzleWww.ProductDesignController',superclass:'Uize.Class',required:['Uize.Util.Coupler','Uize.Util.PropertyAdapter','Zazzle.DesignModel','Uize.Template'],builder:function(c_$){'use strict';
var c__=true,c_a=false,c_b=null,c_c,c_d=Uize,c_e=c_d.Util.Coupler,c_f=c_d.Util.PropertyAdapter,c_g=c_d.Data,c_h=zazzle.rlv;var c_i={text:{text:1,zttext:1},image:{image:1,spimage:1,ztimage:1},embroidery:{
ztimage:1,zttext:1}};var c_j=c_$.subclass(function(){var m=this;m.c_k={};m.c_l={};m.c_m=[];m.c_n=[];m.c_o=[];},function(){var m=this;(function c_p(){setTimeout(function(){if(m.c_q){m.save();m.c_r.children.lastSavedFleeting.set({shown:c__});
}c_p();},m.c_s)})();}),c_t=c_j.prototype;c_t.c_u=function(){return'designObject'+ ++this.c_v};c_t.c_w=function(c_x){var c_y=this.c_y,c_z;if(c_y)(function c_A(){if(c_y.getState()==c_h.DesignState.WAITINGFORSERVER){
if(c_z){clearTimeout(c_z);}c_z=setTimeout(c_A,0);}else c_x();})();};c_t.c_B=function(c_C){var m=this,c_y=m.c_y;if(c_y){if(m.c_z){clearTimeout(m.c_z);delete m.c_z;}m.c_D++;m.c_z=setTimeout(function(){
c_y&&c_y.update();c_C&&c_C();},100);}};c_t.c_E=function(c_F){return this.c_y?this.c_y.getArea(c_F||this.c_G):c_c};c_t.c_H=function(){var m=this,c_y=m.c_y,c_I=m.c_I,c_J=m.c_J,c_K;if(c_y&&c_I){c_K=c_y.getView({view:c_I.get('activeView'),max_dim:m.c_L});
m.set({c_K:c_K});c_y.setActiveView(c_K);c_I&&c_I.updateModelView(c_K);if(c_J){if(c_K===c_J.get('view'))c_J.updateBounds();else c_J.set('view',c_K);}}};c_t.c_M=function(){var m=this;if(m.c_K){m.c_K.opts.max_dim=m.c_L;
m.c_K.setNeedsGridRefresh(c__);}if(m.c_J)m.c_J.updateBounds();if(m.c_y){m.c_y.opts.max_dim=m.c_L;m.c_y.setDirty();m.c_B();}};c_t.c_N=function(c_O,c_P,c_Q){var c_k=this.c_k,c_R=function(){c_k[c_O]=c_a
};if(!c_k[c_O]){c_k[c_O]=c__;c_P(c_R);}else{c_d.isFunction(c_Q)&&c_Q(c_R)}};c_t.c_S=function(c_O,c_x){!this.c_k[c_O]&&c_x()};c_t.isTemplate=function(){return!!(this.c_y&&this.c_y.getTemplates().length)
};c_t.c_T=function(){var m=this,c_U=m.c_E();if(c_U)m.c_N('synchronize',function(c_C){var c_V=c_U.getChildObjects(),c_J=m.c_J,c_W;if(c_J){c_J.sync(c_V);c_W=c_J.getDictionary();if(!m.c_X&&c_V.length&&c_d.isEmpty(c_W))
c_J.add(c_V[0]);m.c_Y&&m.c_Y.syncDesignObjects(c_V,m.c_l,c_W);m.c_I&&m.c_I.syncDesignObjects(c_V,c_W,c_J.get('bounds'));}c_C();});};c_t.c_Z=function(){var m=this,c_0=m.c_0,c_1=c_0.length,c_2,c_3,c_4=m.c_G,
c_G=m.c_E(),c_5=c__,c_6=m.c_6,c_7=c_6?c_6.getName():'',c_8;for(;--c_1>=0;){c_2=c_0[c_1];c_3=c_2?c_2.areas:null;if(c_3&&c_4 in c_3){c_8=c_6&&c_6.getFill();if(c_6&&(c_6.getChildObjects().length||(c_8&&(c_8.fillcolor||c_8.strokecolor)))&&c_7 in c_3){
m.c_6.setName(c_4);c_5=c_a;}m.set({c_2:c_2.name});c_2.lastArea=c_4;break;}}if(c_5){var c_J=m.c_J;c_J&&c_J.clear();m.c_T();if(c_J){var c_9=c_G?c_G.getChildObjects():c_c;c_9&&c_9.length&&c_J.add(c_9[0]);
}}m.c_B();};c_t.c_$_=function(c___){!c_d.isArray(c___)&&(c___=[c___]);var m=this,c_a_=c___.length,c_1= -1,c_0=m.c_0,c_b_=c_0.length,c_c_,c_2,c_d_=[];for(;++c_1<c_a_;){for(c_c_=c_b_;--c_c_>=0;){c_2=c_0[c_c_];
if(c___[c_1]in c_2.areas){c_d_.push(c_2);break;}}}return c_d_;};c_t.c_e_=function(){var m=this,c_f_=m.c_f_,c_2=m.c_2,c_y=m.c_y;if(c_d.isArray(c_f_)&&c_y){var c_0=m.c_0,c_b_=c_0.length,c_1= -1,c_g_=c_f_.length,
c_h_=[],c_i_=[],c_j_,c_G=m.c_G,c_k_=c_a,c_l_,c_m_,c_n_,c_o_,c_U,c_p_;for(;++c_1<c_g_;){c_l_=c_f_[c_1];for(c_n_=c_b_;--c_n_>=0;){c_m_=c_0[c_n_];if(c_l_ in c_m_.areas){c_o_={displayName:c_m_.areas[c_l_].displayName||
c_m_.displayName||c_m_.name};c_i_.push({name:c_m_.name,valueDetails:c_o_});if(!c_2)c_2=c_m_.name;if(c_m_.name==c_2){c_h_.push({name:c_l_,valueDetails:c_o_});if(!c_k_){c_U=m.c_E(c_l_);c_p_=c_U&&c_U.getFill();
c_k_=(c_U&&c_U.getChildObjects().length)||(c_p_&&(c_p_.fillcolor||c_p_.strokecolor));if(c_k_||c_G==c_l_|| !c_j_){c_j_=c_l_;}}}break;}}}m.c_Y&&m.c_Y.set(Uize.copyInto({areaGroups:c_i_,areas:c_h_},c_j_?{area:c_j_}:c_c
));}};c_t.c_q_=function(){var m=this,c_2=m.c_2;if(m.c_y){m.c_e_();m.c_r_();if(!m.c_s_||c_2 in m.c_s_){var c_t_=c_d.Data.findRecords(m.c_0,{name:c_2})[0];c_t_&&m.c_Y&&m.c_Y.set({areaGroupDisplayName:c_t_.displayName||c_2
});}}};c_t.c_u_=function(c_2){var m=this,c_t_=Uize.Data.findRecords(m.c_0,{name:c_2})[0],c_O;if(c_t_){var c_v_=c_t_.lastArea,c_f_=m.c_f_,c_g_=Uize.isArray(c_f_)?c_f_.length:0,c_1= -1,c_l_,c_3=c_t_.areas
;for(;++c_1<c_g_;){c_l_=c_f_[c_1];if(c_v_==c_l_){c_O=c_v_;break;}else if(!c_O&&c_l_ in c_3)c_O=c_l_;}}return c_O?Uize.copyInto({name:c_O},c_t_.areas[c_O]):c_c;};c_t.c_r_=function(){var m=this;if(m.c_Y){
var c_2=m.c_2,c_0=m.c_0,c_1=c_0.length,c_w_=[],c_x_,c_y_;for(;--c_1>=0;){c_y_=c_0[c_1];c_y_.name!=c_2&&(c_x_=m.c_u_(c_y_.name))&&c_w_.push({name:c_x_.name,displayName:c_x_.displayName||c_y_.displayName
});}m.c_Y.set({transferableAreas:c_w_});}};c_t.c_z_=function(){var m=this,c_G=m.c_G;if(m.c_I)m.c_I.set({area:c_G});if(m.c_y){m.c_Z();m.c_6=m.c_E(c_G);m.c_r_()}};c_t.c_A_=function(){var m=this,c_r=m.c_r,
c_B_=m.c_B_,c_I=m.c_I,c_Y=m.c_Y,c_J=m.c_J,c_y=m.c_y,c_l=m.c_l,c_C_=function(c_D_){m.c_S('synchronize',function(){var c_E_=c_D_.properties,c_F_=[],c_G_=m.c_H_,c_U=m.c_E(),c_I_;if(c_U&&c_E_&&c_d.isArray(c_E_)&&c_E_.length){
c_d.forEach(c_E_,function(c_J_){var c_K_=c_J_.type,c_L_=c_K_ in c_i.text?'text':c_K_ in c_i.image?'image':'',c_O,c_M_,c_N_,c_O_;c_L_==='image'&&(c_l[c_J_.id.toLowerCase()]=c_J_.title||c_J_.id.toLowerCase())
;if(c_L_){c_I_=c_G_[c_L_];c_O=m.c_u();if(c_L_==='image'){if(m.c_P_)m.c_y.opts.t_coverimage_iid=c_J_.id;else c_M_=c_U.addImage(c_O,c_J_.id);}else{if(m.c_P_)m.c_y.opts.t_covertext_txt=c_J_.title;else c_M_=c_U.addText(c_O,c_J_.title);
}if(c_M_){for(c_N_ in c_I_){c_O_=c_I_[c_N_];c_O_&&c_N_!=='fontheight'&&c_M_.setProperty(c_N_,c_O_);}c_J_.autosize&&c_M_.scale('autosize',1);c_F_.push(c_M_);}else m.c_y.setDirty();}});if(c_F_.length&&c_J){
c_J.clear();c_J.add(c_F_);}if(m.c_P_){m.c_y.opts.t__smart=true;m.c_y.opts.t_coverlogo_iid=m.c_Q_;m.c_y.opts.t__pickoption=false;}m.c_B(function(){m.set('isFanMerch',false);c_d.forEach(['t__smart','t_coverlogo_iid','t_coverimage_iid','t_covertext_txt','t__pickoption'],function(c_R_){
delete m.c_y.opts[c_R_];});});}})};if(c_J)c_J.wire(m.c_S_={Added:function(c_D_){m.c_N('addingSelected',function(c_T_){m.c_N('synchronize',function(c_U_){c_I&&c_I.select(c_D_.objects,c_D_.bounds);c_Y&&c_Y.select(c_D_.objects,c_D_.bounds);
c_T_();c_U_();},function(){c_T_()})},function(c_V_){c_V_()})},Removed:function(c_D_){m.c_N('synchronize',function(c_C){c_I&&c_I.select(c_D_.objects,c_D_.bounds,c_a);c_Y&&c_Y.select(c_D_.objects,c_a);
c_C();})},'Changed.numLocked':function(){c_Y&&c_Y.set({numLocked:c_J.get('numLocked')});},'Changed.mode':function(){c_Y&&c_Y.set({mode:c_J.get('mode')})}});if(c_I){m.set({c_W_:c_I.get('maxDim'),c_L:c_I.get('requestedMaxDim')});
c_I.wire(m.c_X_={'Changed.activeView':function(){if(c_y){c_d.copyInto(c_y.opts,{view:c_I.get('activeView')});m.c_K&&m.c_K.setNeedsGridRefresh(c__);c_y.setDirty();m.c_B();}},'Changed.area':function(){
var c_Y_=c_I.get('area'),c_G=m.c_G,c_2=m.c_2,c_Z_=m.c_$_(c_Y_)[0].name;if(c_Z_!==c_2)m.set({c_2:c_Z_});else if(c_G!==c_Y_){if(c_y){var c_U=m.c_E(c_G);if(c_U){var c_0_=c_U.getFill();if(!(c_U.getChildObjects().length||(c_0_&&(c_0_.fillcolor||c_0_.fillcolor))))
m.set({c_G:c_G});}}else m.set({c_G:c_G});}},'Changed.maxDim':function(){m.set({c_W_:c_I.get('maxDim')})},'Changed.requestedMaxDim':function(){m.set({c_L:c_I.get('requestedMaxDim')});},'Hotspot Over':function(c_D_){
c_Y&&c_Y.setDesignObjectState('over',c_D_.hotspot.get('model'))},'Hotspot Out':function(c_D_){c_Y&&c_Y.setDesignObjectState('out',c_D_.hotspot.get('model'))},'Hotspot Selected':function(c_D_){c_J&&c_J.add(c_D_.hotspot.get('model'))
},'Hotspot Unselected':function(c_D_){c_J&&c_J.remove(c_D_.hotspot.get('model'))},Add:c_C_,'Bounds Changed':function(c_D_){m.c_S('synchronize',function(){var c_K=m.c_K,c_U=m.c_E();if(c_J&&c_K){var c_1_=c_J.get('bounds'),
c_W=c_J.getSelected(),c_2_=Math.round(c_1_.left),c_3_=Math.round(c_1_.top),c_4_=Math.round(c_1_.width),c_5_=Math.round(c_1_.height),c_6_=Math.round(c_D_.top),c_7_=Math.round(c_D_.left),c_8_=Math.round(c_D_.width),
c_9_=Math.round(c_D_.height),c_$a=(c_7_+c_8_/2)-(c_2_+c_4_/2),c__a=(c_6_+c_9_/2)-(c_3_+c_5_/2),c_aa=Math.round(c_8_/c_4_*Math.pow(10,7))/Math.pow(10,7),c_ba=Math.round(c_9_/c_5_*Math.pow(10,7))/Math.pow(10,7),
c_ca=(Math.round(c_aa*100)/100!=1||Math.round(c_ba*100)/100!=1)&&(c_4_!=c_8_||c_5_!=c_9_),c_da=c_ca||Math.round(c_$a*100)/100||Math.round(c__a*100)/100,c_ea;c_ca&&c_U&&c_U.scale(c_W,c_aa,c_ba);if(c_da&&c_W.length){
c_ea=c_W[0].getBounds(c_K)[0];c_K.getViewArea(m.c_G).moveScreenSpace(c_W,c_2_+c_4_/2,c_3_+c_5_/2,c_$a,c__a);}(c_da||c_ca)&&m.c_B();}})},Rotate:function(c_D_){m.c_S('synchronize',function(){var c_U=m.c_E();
if(c_U&&c_J){c_U.rotate(c_J.getSelected(),c_D_.rotation,!!c_D_.isAbsolute);m.c_B();}})},Track:function(c_D_){m.c_S('synchronize',function(){m.c_m.push(c_D_.code)})},Undo:function(){m.c_S('synchronize',
function(){if(c_y){c_y.undo();m.c_w(function(){m.c_fa=c__});m.c_B();}})},Redo:function(){m.c_S('synchronize',function(){if(c_y){c_y.redo();m.c_B();}});}});}if(c_Y){c_Y.wire(m.c_ga={'Design Object UI Over':function(c_D_){
c_I&&c_I.setHotspotState('over',c_D_.designObjectUi.get('model'))},'Design Object UI Out':function(c_D_){c_I&&c_I.setHotspotState('out',c_D_.designObjectUi.get('model'))},'Design Object UI Selected':function(c_D_){
c_J&&c_J.add(c_D_.designObjectUi.get('model'));},'Design Object UI Unselected':function(c_D_){c_J&&c_J.remove(c_D_.designObjectUi.get('model'))},Add:c_C_,Align:function(c_D_){m.c_S('synchronize',function(){
if(c_J){var c_ha=c_D_.align;c_d.forEach(c_J.getSelected({type:'text'}),function(c_J_){c_J_.setAlign(c_ha)});m.c_B();}})},'Background Changed':function(c_D_){m.c_S('synchronize',function(){var c_U=m.c_E();
if(c_U){var c_p_=c_U.getFill();c_U.setFill(new c_h.DesignFill(c__,c_D_.bg,(c_p_&&c_p_.strokecolor)||'',(c_p_&&c_p_.strokewidth)));m.c_B();}})},'Border Changed':function(c_D_){m.c_S('synchronize',function(){
var c_U=m.c_E();if(c_U){var c_p_=c_U.getFill();c_U.setFill(new c_h.DesignFill(!!(c_p_&&c_p_.solid),(c_p_&&c_p_.fillcolor)||'',c_D_.border,+c_D_.strokewidth));m.c_B();}})},Clear:function(){if(m.c_ia)return;
m.c_S('synchronize',function(){var c_U=m.c_E();if(c_U){c_U.cut(c_U.getChildObjects());m.c_B();}})},'Color Changed':function(c_D_){m.c_S('synchronize',function(){if(c_J){var c_ja=c_D_.color;c_d.forEach(
c_J.getSelected({type:'text'}),function(c_J_){c_J_.setProperty('color',c_ja)});m.c_B();}})},Copy:function(){var c_U=m.c_E();if(c_U&&c_J){c_U.copy(c_J.getSelected());m.c_B();}},Cut:function(){var c_U=m.c_E();
if(c_U&&c_J){c_U.cut(c_J.getSelected());m.c_B();}},Edit:function(c_D_){if(c_J){var c_ka=c_D_.text,c_O_=c_ka||c_D_.id;if(c_O_){c_d.forEach(c_J.getSelected({type:c_ka?'text':'image'}),function(c_J_){c_ka?
c_J_.setValue(c_O_):c_J_.setImageid(c_O_)});m.c_B();}}},Fill:function(){m.c_S('synchronize',function(){var c_U=m.c_E();if(c_U&&c_J){c_U.layout(c_J.getSelected({type:'image'}),'fill',[new c_h.DesignProperty('fillto','bleed'),
new c_h.DesignProperty('group',c__)]);m.c_B();}})},Fit:function(){m.c_S('synchronize',function(){var c_U=m.c_E();if(c_U&&c_J){c_U.layout(c_J.getSelected({type:'image'}),'fit',[new c_h.DesignProperty('fillto','bleed'),
new c_h.DesignProperty('group',c__)]);m.c_B();}})},'Font Face Changed':function(c_D_){m.c_S('synchronize',function(){if(c_J){var c_la=c_D_.face;if(c_la){c_d.forEach(c_J.getSelected({type:'text'}),function(c_J_){
c_J_.setProperty('face',c_la)});m.c_B();}}})},'Font Height Changed':function(c_D_){m.c_S('synchronize',function(){if(c_J){var c_ma=c_D_.fontheight;c_d.forEach(c_J.getSelected({type:'text'}),function(c_J_){c_J_.setProperty('height',c_ma*10)}
);m.c_B();}})},Paste:function(){var c_U=m.c_E();c_U&&c_U.paste();m.c_B();},Reordered:function(c_D_){var c_U=m.c_E();if(c_U&&c_J){var c_na=c_D_.reorderedModels||c_J.getSelected(),c_oa=c_D_.above;c_U.reorderAbove(
c_na,c_oa);m.c_B();}},Lock:function(c_D_){m.c_S('synchronize',function(){if(c_J){var c_pa=c_D_.isLocked;c_d.forEach(c_J.getSelected({locked:c__}),function(c_J_){c_J_.setProperty('locked',c_pa)});m.c_B();
}})},Move:function(c_D_){m.c_S('synchronize',function(){var c_U=m.c_E(),c_K=m.c_K;if(c_K&&c_U){var c_qa=c_D_.space,c_ra=c_D_.x,c_sa=c_D_.y,c_ta=c_D_.dx,c_ua=c_D_.dy,c_W=c_J.getSelected();if(c_D_.snap){
for(var c_va in{center:1,vcenter:1,hcenter:1,top:1,bottom:1,left:1,right:1})if(c_D_[c_va])c_U.layout(c_W,'align',[new c_h.DesignProperty('align',c_va),new c_h.DesignProperty('alignto',c_D_.alignto||'design'),
new c_h.DesignProperty('group','group'in c_D_?c_D_.group:c__)]);}else{c_qa==='screen'?c_K.moveScreenSpace(c_W,c_ra,c_sa,c_ta,c_ua):c_qa==='design'?c_U.moveDesignSpace(c_W,c_ra,c_sa,c_ta,c_ua):c_U.moveObjectSpace(c_W,c_ra,c_sa,c_ta,c_ua)
;}m.c_B();}})},'Path Changed':function(c_D_){m.c_S('synchronize',function(){var c_wa=c_h.DesignTextPath[c_D_.path.toUpperCase()];c_d.forEach(c_J.getSelected({type:'text'}),function(c_J_){c_J_.setPath(c_wa)}
);m.c_B();})},'Radius Changed':function(c_D_){m.c_S('synchronize',function(){var c_xa=c_D_.radius;c_d.forEach(c_J.getSelected({type:'text'}),function(c_J_){c_J_.setArc(c_xa)});m.c_B();})},RecolorImage:function(c_D_){
c_d.forEach(c_J.getSelected({type:'image'}),function(c_J_){c_J_.setProperty('colors',c_D_.colors)});m.c_B();},Remove:function(c_D_){m.c_S('synchronize',function(){var c_U=m.c_E();if(c_J&&c_U){var c_9=c_D_.designObjects||c_J.getSelected()
;if(c_9.length){c_U.remove(c_9);m.c_B();}}})},Rotate:function(c_D_){m.c_S('synchronize',function(){var c_U=m.c_E();if(c_U&&c_J){c_U.rotate(c_J.getSelected(),c_D_.rotation,!!c_D_.isAbsolute);m.c_B();}
})},Scale:function(c_D_){m.c_S('synchronize',function(){var c_U=m.c_E();if(c_U&&c_J){var c_ya=c_D_.direction,c_za=1+(c_ya==='+'|| -1)*(c_D_.accelerate?.3:(c_D_.decelerate?.01:.1));c_U.scale(c_J.getSelected({type:'image'}),
c_za,c_za);m.c_B();}})},'Set As Transparent':function(c_D_){m.c_S('synchronize',function(){if(c_J){var c_Aa=c_D_.isTransparent;c_d.forEach(c_J.getSelected({type:'image'}),function(c_J_){c_J_.setProperty('whitetransparent',c_Aa)
});m.c_B();}})},'Set Template':function(c_D_){m.c_S('synchronize',function(){if(c_J){var c_Ba=c_D_.isTemplate,c_Ca=c_D_.urlkey,c_Da=c_D_.title,c_Ea=c_D_.ppshow,c_Fa=c_D_.fitMode;c_d.forEach(c_J.getSelected(),
function(c_J_){if(c_Ba)c_J_.setTemplate(c_Ca,c_Da,c_Ea);else c_J_.removeTemplate();c_J_ instanceof c_h.DesignImage&&c_J_.setProperty('fillmode',c_Ba?c_Fa:'none');});m.c_B();}})},Space:function(c_D_){
m.c_S('synchronize',function(){var c_U=m.c_E();if(c_U&&c_J){c_U.layout(c_J.getSelected(),c_D_.horizontal?'horz':'vert');m.c_B();}})},Tile:function(c_D_){m.c_S('synchronize',function(){var c_Ga=c_D_.tile?'tile':'',
c_Ha=c_a;c_d.forEach(c_J.getSelected({type:'image'}),function(c_J_){var c_Ia=c_J_.getProperty('layout');if(c_Ia||(!c_Ia&&c_Ga)){c_J_.setProperty('layout',c_Ga);c_Ha=c__;}});if(c_Ha)m.c_B();});},Track:function(c_D_){
m.c_S('synchronize',function(){m.c_m.push(c_D_.code)})},Transfer:function(c_D_){var c_U=m.c_E();if(c_J&&c_U){c_U.transfer(c_J.getSelected(),c_D_.area);m.set({c_G:c_D_.area});m.c_B();}},'Update Default Design Object Properties':function(c_D_){
m.set({c_H_:c_d.mergeInto(m.c_H_,c_D_.newDefaults)})},Undo:function(){m.c_S('synchronize',function(){if(c_y){c_y.undo();m.c_w(function(){m.c_fa=c__});m.c_B();}})},Redo:function(){m.c_S('synchronize',
function(){if(c_y){c_y.redo();m.c_B();}})}});}if(c_r){var c_Ja=function(c_E_){if(c_y){c_d.copyInto(c_y.opts,c_E_);c_y.setDirty();m.c_B();}};c_r.wire(m.c_Ka={'Changed.areaGroups':function(){m.set({c_0:c_r.get('areaGroups')})
},'Changed.productOption':function(){c_Ja(c_d.copyInto({},c_r.get('productOption'),c_r.get('designAttributes')))},'Changed.templateParams':function(){c_Ja(c_r.get('templateParams'))},Finish:function(c_D_){
if(c_y){c_I&&c_d.copyInto(c_y.opts,{view:c_I+''});m.c_w(function(){var c_La= !!c_r.get('isPosting');if(c_r.get('finishOnFinalize'))c_y.finish(c_La);else c_y.save();m.c_Ma=function(){m.set({c_Na:c__});
m.c_m.length&&(c_La|| !(Math.round(Math.random()*10)%10))&&c_r.fire({name:'Track Event',bubble:c__,extra:{ax:'dtool',a:m.c_m.join('').substring(0,1500),pdt:c_r.get('productType'),post:+c_La}});c_d.isFunction(c_D_.callback)&&c_D_.callback();
};});m.c_B();}},'Submit Get Started':function(c_D_){var c_Oa=c_D_.data.templateFields,c_Pa=c_d.isArray(c_Oa)?c_Oa.length:0,c_1= -1,c_Qa,c_K_,c_O_,c_E_=[],c_Ra=c_Y&&c_Y.get('process')==='stitch',c_Sa,
c_Ta=[];for(;++c_1<c_Pa;){c_Qa=c_Oa[c_1];c_K_=c_Qa.type,c_Sa=c_K_==='image';c_O_=c_Qa.value;if(c_O_){c_E_.push(c_d.copyInto({type:c_K_},c_Sa?{id:c_O_,autosize:c__}:{title:c_O_}));c_Ra&&c_Sa&&c_Ta.push(c_O_);
}}if(c_Ra&&c_Ta.length>0){c_Y.filterAddImages(c_Ta,function(c_Ua){c_Ua&&c_Ua.length&&c_C_({properties:c_E_});});}else c_C_({properties:c_E_});},Save:function(){m.save()}});m.set({c_0:c_r.get('areaGroups'),
c_Va:c_r.get('templateParams'),c_Wa:c_r.get('designAttributes')});!c_d.isEmpty(c_r.get('templateParams'))&&c_r.set('templateParams',{});}var c_Xa=function(c_Ya){for(var c_O in c_Ya)return c_O;},c_n=m.c_n,
c_o=m.c_o;if(c_r){c_o.push(new c_e({instances:[c_r,m],properties:['launchGetStarted']}));c_n.push(new c_f({propertyA:{instance:c_r,property:'hasNewDesignTemplate'},propertyB:{instance:m,property:c_Xa({c_Za:1})
}}));c_n.push(new c_f({propertyA:{instance:c_r,property:'area'},propertyB:{instance:m,property:c_Xa({c_G:1})}}));c_n.push(new c_f({propertyA:{instance:c_r,property:'areaGroup'},propertyB:{instance:m,
property:c_Xa({c_2:1})}}));c_n.push(new c_f({propertyA:{instance:c_r,property:'productOption'},propertyB:{instance:m,property:c_Xa({c_0a:1})}}));c_n.push(new c_f({propertyA:{instance:c_r,property:'designId'
},propertyB:{instance:m,property:c_Xa({c_1a:1})}}));c_n.push(new c_f({propertyA:{instance:c_r,property:'designAttributes'},propertyB:{instance:m,property:c_Xa({c_Wa:1})}}));c_n.push(new c_f({propertyA:{
instance:c_r,property:'supportedAreas'},propertyB:{instance:m,property:c_Xa({c_f_:1})}}));if(c_I){c_o.push(new c_e({instances:[c_r,c_I],properties:['designId']}));m.c_2a={};m.c_2a['Changed.'+c_Xa({c_Wa:1})]=function(){
c_I.set({designAreas:m.c_Wa['design.areas']})};m.wire(m.c_2a);}if(c_Y)c_o.push(new c_e({instances:[c_r,c_Y],properties:['area','areaGroup']}));}m.c_e_();if(c_y){c_y.addDesignListener(m.c_3a=function(c_D_){m.c_4a(c_D_)});
c_y.useDesignSpace(c__);m.c_H();c_d.copyInto(c_y.opts,m.c_0a,m.c_Wa,m.c_Va);m.c_B();}};c_t.c_5a=function(){var m=this,c_n=m.c_n,c_o=m.c_o,c_1;if(m.c_J&&m.c_S_){m.c_J.unwire(m.c_S_);m.c_S_=c_c;}if(m.c_I&&m.c_X_){
m.c_I.unwire(m.c_X_);m.c_X_=c_c;Uize.isFunction(m.c_2a)&&m.unwire(m.c_2a);}if(m.c_Y&&m.c_ga){m.c_Y.unwire(m.c_ga);m.c_ga=c_c;}if(m.c_r&&m.c_Ka){m.c_r.unwire(m.c_Ka);m.c_Ka=c_c;}for(c_1=c_o.length;--c_1>=0;)
c_o[c_1].set({coupled:c_a,instances:c_c,properties:c_c});for(c_1=c_n.length;--c_1>=0;)c_n[c_1].set({connected:c_a,propertyA:c_c,propertyB:c_c,valueAdapter:c_c});m.set({c_n:[],c_o:[]});if(m.c_y&&m.c_3a){
m.c_y.removeDesignListener(m.c_3a);m.c_3a=c_c;}};c_t.c_6a=function(){if(this.c_7a){this.c_5a();this.c_A_();}};c_t.c_4a=function(c_D_){var m=this,c_y=m.c_y;if(c_D_.success){if(c_d.isFunction(m.c_Ma)){
m.c_Ma();delete m.c_Ma;}else{if(m.c_Va){var c_Va=m.c_Va,c_8a;for(c_8a in c_Va)if(c_8a in c_y.opts)delete c_y.opts[c_8a];m.set({c_Va:c_b});}var c_Wa=c_d.clone(c_y.getAttributes()),c_9a=m.c_Wa,c_0a=m.c_0a,
c_$b,c__b={},c_ab,c_bb=m.c_1a;delete c_Wa.view;delete c_Wa.context;delete c_Wa.title;for(c_$b in c_0a){c_ab= !c_$b.indexOf('design.');c_$b in c_Wa&& !c_ab&&(c__b[c_$b]=c_Wa[c_$b]);if(!c_ab)delete c_Wa[c_$b];
}c__b=c_d.copyInto(c_d.clone(c_0a),c__b);if(c_g.identical(c__b,c_0a)){if(!m.c_cb)m.c_cb={};var c_db=m.c_cb,c_eb=m.c_$_(m.c_f_),c_fb={},c_gb=c_eb.length,c_0=m.c_0,c_hb=[],c_ib,c_jb=function(){var c_kb={},
c_lb=c_y.getAreas(),c_mb=c_lb.length,c_nb=c_mb,c_ob,c_U,c_m_;for(;--c_nb>=0;){c_U=c_lb[c_nb];if(c_U.getChildObjects().length){c_ob=c_U.getName();c_m_=m.c_$_(c_ob)[0];c_kb[c_m_.name]={c_pb:c_m_,c_G:c_ob
};}}m.c_cb=c_kb;m.set(c_d.copyInto({c_1a:c_y.getId()},c_g.identical(c_Wa,c_9a)?c_c:{c_Wa:c_Wa}));m.c_H();m.c_Y&&m.c_Y.set({canPaste:c_y.canPaste(),canUndo:c_y.isUndoable(),canRedo:c_y.isRedoable(),templates:c_y.getTemplates()
});var c_qb=m.c_2,c_2=Uize.Data.findRecords(c_0,{name:c_qb})[0],c_3=c_2?c_2.areas:c_c,c_rb={},c_sb,c_tb,c_ub;if(c_3){for(c_nb=c_mb;--c_nb>=0;){c_sb=c_lb[c_nb];c_tb=c_sb.getName();if(c_tb in c_3){var c_0_=c_sb.getFill();
c_0_&&(c_0_.fillcolor||c_0_.strokecolor)&&(c_rb[c_tb]=1);if(c_sb.getChildObjects().length){m.set({c_G:c_tb});c_ub=c_c;break;}}}}if(!Uize.isEmpty(c_rb)&& !(m.c_G in c_rb)){for(var c_vb in c_rb){m.set({c_G:c_vb});
break;}}m.c_T();m.fire({name:'Handle Constraints',constraints:c_y.getConstraints()});m.c_I&&m.c_I.set({canUndo:c_y.isUndoable(),canRedo:c_y.isRedoable()});if(!m.c_X||m.c_D>1){m.c_wb=c__;var c_I=m.c_I;
if(c_I){var c_xb=c_I.get('cacheDefeat');c_I.set('cacheDefeat',c_xb?c_xb+1:Uize.now());}}m.c_r&&m.c_r.set({canPublish:!!c_y.canPublish()});if(!m.c_yb){var c_zb=c_mb,c_Ab=m.c_Ab,c_Bb=m.c_Bb,c_Cb= -1,c_Db,
c_f_=m.c_f_,c_G=m.c_G,c_Eb,c_Fb,c_Gb,c_Hb,c_Ib;m.c_yb=c__;if(c_Ab||c_Bb){c_Ab&&c_G.addText(m.c_u(),c_Ab);c_Bb&&c_G.addImage(m.c_u(),c_Bb);m.c_B();}else if(m.c_Jb)m.fire('Launch Get Started');if(m.c_Kb|| !m.c_Za){
for(;--c_zb>=0;){c_sb=c_lb[c_zb];for(c_Eb=c_sb.getChildObjects(),c_Fb=c_Eb.length;--c_Fb>=0;){c_Ib=c_Eb[c_Fb];c_Gb=c_Eb[c_Fb].getName();if(!c_Gb.indexOf('designObject')){c_Hb= +c_Gb.replace('designObject','');
if(c_d.isNumber(c_Hb))c_Cb=Math.max(c_Cb,c_Hb);}if(!c_Fb&& !c_Db)c_Db=c_sb;}if(c_sb.getName()===m.c_G)m.set({c_6:c_sb});}}if(c_Db){var c_F=c_Db.getName();if(m.c_G==c_F)m.c_z_();else m.set({c_G:c_Db.getName()});
}else if(c_d.isArray(c_f_)&&c_f_.length)m.set({c_G:c_d.isIn(c_f_,c_G)?c_G:c_f_[0]});if(c_Hb!= -1)m.c_v=c_Cb;if(c_bb===m.c_1a&&m.c_I&& !m.c_I.model.get('realviewsInfo'))m.c_I.model.update();m.fire('zDesign Initialized');
}if(m.c_6&&m.c_Y){var c_0_=m.c_6.getFill(),c_Y=m.c_Y,c_Lb={type:c_0_?(c_0_.solid?'bg':'border'):c_b,fillcolor:c_0_?c_0_.fillcolor:'',strokecolor:c_0_?c_0_.strokecolor:'',strokewidth:c_0_?c_0_.strokewidth:''
};!c_g.identical(c_Lb,c_Y.get('areaFillProperties'))&&c_Y.set('areaFillProperties',c_Lb);}};if(!m.c_fa){for(;--c_gb>=0;)c_fb[c_eb[c_gb].name]=1;for(c_ib in c_db){if(!(c_ib in c_fb))c_hb.push(c_db[c_ib]);
}}else m.c_fa=c_a;if(c_hb.length){var c_Mb=[],c_Nb= -1,c_Ob=c_hb.length,c_Pb;for(;++c_Nb<c_Ob;){c_Pb=c_hb[c_Nb];c_Mb.push(c_Pb.c_pb.areas[c_Pb.c_G].displayName||c_Pb.c_G);}m.fire({name:'Handle Unsupported Areas',
unsupportedAreas:c_Mb,yesHandler:c_jb,noHandler:function(){c_y.undo();m.c_w(function(){m.c_fa=c__});m.c_B();}});}else c_jb();}else m.set({c_0a:c__b,c_Wa:c_g.identical(c_Wa,c_9a)?c_9a:c_Wa});}m.c_Qb=0;
}else{var c_Rb;switch(c_D_.design.serverResult.Code){case 301:c_Rb='imagePermissionsError';break;case 302:c_Rb='customizeError';break;case 11108:if((m.c_Qb||0)<5){m.c_Qb=(m.c_Qb||0)+1;m.c_y.setDirty();
m.c_B();}break;default:c_Rb='rlvnetError'}c_Rb&&m.fire({name:'Message',messageArguments:[c_Rb],state:'error'});}m.set({c_X:c_a,c_D:0});};c_t.save=function(){var m=this;if(m.c_y&& !m.c_Na&& !m.c_X&&m.c_wb&&
(!m.c_I||m.c_I.get('canSave'))&&(!m.c_Y||m.c_Y.get('canSave'))){m.set({c_X:c__});m.c_y.save();m.c_B();m.set({c_wb:c_a});}};c_t.getDesignAttributes=function(){return this.c_y?this.c_y.getAttributes():c_c
};c_j.stateProperties({c_7a:{name:'isControlling',onChange:function(){this.c_7a?this.c_A_():this.c_5a()},value:c_a},c_r:{name:'productUi',onChange:c_t.c_6a},c_B_:{name:'productConfiguratorUi',onChange:c_t.c_6a
},c_I:{name:'productViewUi',onChange:c_t.c_6a},c_Sb:{name:'templateUi',onChange:c_t.c_6a},c_Y:{name:'designUi',onChange:c_t.c_6a},c_J:{name:'selectedDesignObjectsModel',onChange:c_t.c_6a},c_y:{name:'designModel',
onChange:c_t.c_6a},c_Tb:{name:'areasModel',onChange:c_t.c_6a},c_s:{name:'autoSaveDelay',value:30000},c_q:{name:'enableAutoSave',value:c_a},c_H_:'defaultObjectProperties',c_Ab:'defaultText',c_Bb:'defaultImageId',
c_Na:{name:'isFinished',value:c_a},c_X:{name:'isSaving',value:c_a},c_Ub:{name:'hasConstraints',value:c_a},c_Jb:'launchGetStarted',c_P_:'isFanMerch',c_Q_:'fanMerchLogo',c_G:{onChange:c_t.c_z_},c_2:{onChange:c_t.c_q_,
conformer:function(c_Vb,c_Wb){return!this.c_s_||c_Vb in this.c_s_?c_Vb:c_Wb}},c_0:{onChange:c_t.c_e_},c_s_:{},c_o:{},c_6:{},c_Wa:{},c_1a:{},c_K:{},c_v:{value:-1},c_Za:{value:c_a},c_wb:{},c_l:{},c_Va:{
},c_yb:{value:c_a},c_k:{},c_D:{value:0},c_0a:{},c_n:{},c_2a:{},c_f_:{onChange:c_t.c_e_},c_W_:{},c_L:{onChange:c_t.c_M},c_m:{}});return c_j;}});
Uize.module({name:'Zazzle.SelectedDesignObjectsModel',superclass:'Uize.Class',builder:function(c_$){'use strict';var c__=c_$.subclass(function(){var m=this;m.c_a={};m.c_b=[];m.c_c=[];m.c_d=[];m.c_e=[];
}),c_f=c__.prototype;c_f.c_g=function(){this.set({c_h:this.c_h+1})};c_f.getSelected=function(c_i){var m=this;if(!c_i)return m.c_c;var c_a=m.c_a,c_j=c_i.name,c_b=m.c_b,c_k=c_i.type==='text'?zazzle.rlv.DesignText:
c_i.type==='image'?zazzle.rlv.DesignImage:undefined;if(c_k&&c_i.locked){for(var c_l=c_b.length,c_m= -1,c_n=[],c_o;++c_m>c_l;){c_o=c_b[c_m];c_o instanceof c_k&&c_n.push(c_o);}return c_n;}return c_j in c_a?
c_a[c_j].c_p:c_i.locked?c_b:c_k===zazzle.rlv.DesignText?m.c_d:m.c_e;};c_f.getDictionary=function(){return this.c_a};c_f.add=function(c_q){Uize.isArray(c_q)||(c_q=[c_q]);var m=this,c_m= -1,c_r=c_q.length,
c_a=m.c_a,c_b=m.c_b,c_c=m.c_c,c_d=m.c_d,c_e=m.c_e,c_s=m.c_s,c_t=m.c_t,c_u=zazzle.rlv.DesignImage,c_v,c_w,c_x,c_y,c_z,c_A;for(;++c_m<c_r;){c_v=c_q[c_m];c_x=c_v.isLocked();c_A=c_v.getName();c_y=c_a[c_v.getName()];
if(c_y){if(c_y===c_v)continue;else{m.remove(c_y.c_p,true);if(c_x)c_t--;c_s=c_d.length&&c_e.length?'combined':c_d.length?'text':c_e.length?'image':'';}}c_y=c_a[c_v.getName()]={c_p:c_v,c_B:c_b.length};
c_b.push(c_v);if(!c_x){c_y.c_C=c_c.length;c_c.push(c_v);}else c_t++;if(c_v instanceof c_u){c_y.c_D=c_e.length;c_e.push(c_v);c_w='image';}else{c_y.c_E=c_d.length;c_d.push(c_v);c_w='text';}c_s= !c_s||c_w===c_s?c_w:'combined';
}m.set({c_s:c_s,c_t:c_t});m.c_F();m.c_g();m.fire({name:'Added',objects:c_q,bounds:m.c_G,allBounds:m.c_H});};c_f.remove=function(c_I,c_J){Uize.isArray(c_I)||(c_I=[c_I]);var m=this,c_a=m.c_a,c_m= -1,c_K=c_I.length,
c_t=m.c_t,c_b=m.c_b,c_c=m.c_c,c_d=m.c_d,c_e=m.c_e,c_u=zazzle.rlv.DesignImage,c_v,c_y,c_j,c_s,c_w,c_L,c_M,c_N,c_O,c_z;for(;++c_m<c_K;){c_v=c_I[c_m];c_j=c_v.getName();c_y=c_a[c_j];if(c_y){for(c_L=c_b.length
;--c_L>=0;){c_M=c_b[c_L];if(c_M.getName()===c_j){c_b.splice(c_L,1);break;}}if(!c_v.isLocked()){for(c_L=c_c.length;--c_L>=0;){c_M=c_c[c_L];if(c_M.getName()===c_j){c_c.splice(c_L,1);break;}}}else c_t--;
for(c_z=c_v instanceof c_u,c_L=c_z?c_e.length:c_d.length,c_O=c_z?c_e:c_d;--c_L>=0;){c_M=c_O[c_L];if(c_M.getName()===c_j){c_O.splice(c_L,1);break;}}delete m.c_a[c_j];}}if(!c_J){c_s=c_d.length&&c_e.length?
'combined':c_d.length?'text':c_e.length?'image':'';m.set({c_s:c_s,c_t:c_t});m.c_F();m.c_g();m.fire({name:'Removed',objects:c_I,bounds:m.c_G,allBounds:m.c_H});}};c_f.sync=function(c_P){var m=this,c_m=Uize.isArray(c_P)?c_P.length:0,
c_a=m.c_a,c_Q={},c_R=[],c_S=[],c_T=[],c_U=[],c_t=0,c_u=zazzle.rlv.DesignImage,c_v,c_V,c_A,c_j,c_s;for(;--c_m>=0;){c_v=c_P[c_m];c_A=c_v.getName();if(c_A in c_a){c_V=c_Q[c_A]={c_p:c_v,c_B:c_R.length};c_R.push(c_v);
if(!c_v.isLocked()){c_V.c_C=c_S.length;c_S.push(c_v);}else c_t++;if(c_v instanceof c_u){c_V.c_D=c_U.length;c_U.push(c_v);}else{c_V.c_E=c_T.length;c_T.push(c_v);}}}m.c_a=c_Q;m.c_b=c_R;m.c_c=c_S;m.c_d=c_T;
m.c_e=c_U;c_s=c_T.length&&c_U.length?'combined':c_T.length?'text':c_U.length?'image':'';m.set({c_s:c_s,c_t:c_t});m.c_F();m.c_g();};c_f.updateBounds=c_f.c_F=function(){var m=this,c_W=m.c_b,c_m=c_W.length,
c_X=[Infinity,Infinity],c_Y=[Infinity,Infinity],c_Z=[-Infinity,-Infinity],c_0=[-Infinity,-Infinity],c_1,c_2,c_3,c_4,c_j;for(;--c_m>=0;){c_1=c_W[c_m];c_2=c_1.getBounds(m.c_5);if(c_2.length){c_3=c_2[0];
c_4=c_2[1];if(!c_1.isLocked()){c_X[0]=Math.min(c_X[0],c_3.y);c_Y[0]=Math.min(c_Y[0],c_3.x);c_0[0]=Math.max(c_0[0],c_4.x);c_Z[0]=Math.max(c_Z[0],c_4.y);}c_X[1]=Math.min(c_X[1],c_3.y);c_Y[1]=Math.min(c_Y[1],c_3.x);
c_0[1]=Math.max(c_0[1],c_4.x);c_Z[1]=Math.max(c_Z[1],c_4.y);}}m.set({c_H:c_X[1]===Infinity||c_Y[1]===Infinity||c_Z[1]=== -Infinity||c_0[1]=== -Infinity?{}:{top:c_X[1],left:c_Y[1],width:c_0[1]-c_Y[1],
height:c_Z[1]-c_X[1]},c_G:c_X[0]===Infinity||c_Y[0]===Infinity||c_Z[0]=== -Infinity||c_0[0]=== -Infinity?{}:{top:c_X[0],left:c_Y[0],width:c_0[0]-c_Y[0],height:c_Z[0]-c_X[0]}});};c_f.clear=function(){
var m=this;m.c_a={};m.c_b=[];m.c_c=[];m.c_d=[];m.c_e=[];m.set({c_H:{},c_G:{},c_s:undefined,c_t:0});m.c_g();m.fire('Cleared');};c__.stateProperties({c_H:{name:'allBounds',value:{}},c_G:{name:'bounds',
value:{}},c_s:'mode',c_t:{name:'numLocked',value:0},c_h:{name:'rev',value:0},c_5:{name:'view',onChange:c_f.c_F}});return c__;}});
Uize.module({name:'Uize.Dom.VirtualEvent',required:'Uize.Dom.Basics',builder:function(){'use strict';var c_$={};function c__(c_a){return c_a.toLowerCase().replace(/\s+/g,'');}return Uize.package({resolve:function(c_a){
var c_b=c_a.indexOf('('),c_c=Uize.eval('(['+c_a.slice(c_b+1,-1)+'])');return(c_$[c_a=c_a.slice(0,c_b)]||c_$[c__(c_a)]).apply(0,c_c);},getCached:function(c_a,c_d){return(c_$[c_a]||(c_$[c_a]={virtualDomEvent:c_a,
wire:c_d}))},register:function(c_a,c_e){return c_$[c_a]=c_$[c__(c_a)]=c_e;}});}});
Uize.module('Uize.Dom.VirtualEvents');
Uize.module({name:'Uize.Dom.VirtualEvents.Remain',required:['Uize.Dom.Basics','Uize.Dom.VirtualEvent'],builder:function(){'use strict';var d_$=function(){},d__=true,d_a=false,d_b=Uize.Dom.Basics,d_c=Uize.Dom.VirtualEvent
;d_$.makeRemainInStateEventMaker=function(d_d,d_e,d_f,d_g,d_h,d_i){return d_c.register(d_d,function(d_j){d_j=Uize.toNumber(d_j,d_e);return d_c.getCached(d_d+'('+d_j+')',function(d_k,d_l,d_m){function d_n(d_o,d_p){
if(Uize.isArray(d_o)){for(var d_q=d_o.length;--d_q> -1;)d_b.wire(d_k,d_o[d_q],d_p,d_m);}else{d_b.wire(d_k,d_o,d_p,d_m);}}var d_r={},d_s=d_a,d_t,d_u=function(){d_t=clearTimeout(d_t)};d_n(d_f,function(d_v){
d_h!==d_a&&d_u();if(!d_t&&(!d_s||d_i!==d_a)){Uize.copyInto(d_r,d_v);d_t=setTimeout(function(){d_s=d__;d_l.call(d_k,d_r);},d_j);}});d_n(d_g,function(){d_s=d_a;d_u();});});});};function d_w(d_d){d_$[d_d]=d_$.makeRemainInStateEventMaker.apply(0,arguments);
}d_w('keyRemainDown',500,'keydown','keyup',d_a);d_w('keyRemainUp',500,'keyup','keydown');d_w('mouseRemainDown',500,'mousedown',['mouseup','mouseout']);d_w('mouseRemainOut',500,'mouseout','mouseover');
d_w('mouseRemainOver',500,['mouseover','mousemove'],['mouseout','mousedown'],d_a);d_w('mouseRemainUp',500,'mouseup','mousedown');d_w('mouseRest',500,['mouseover','mousemove'],['mouseout','mousedown'],d__,d_a
);d_w('remainBlurred',500,'blur','focus');d_w('remainFocused',500,'focus','blur');return d_$;}});
Uize.module({name:'Uize.Widget.CollectionItem.Zooming',required:['Uize.Node','Uize.Dom.VirtualEvents.Remain','Uize.Fade'],builder:function(e_$){'use strict';var e__=true,e_a=false,e_b=Uize.Node;function e_c(e_d,e_e){
var e_f='border'+Uize.capFirstChar(e_e);return(e_b.getStyle(e_d,e_f+'Style')=='none'?0: +e_b.getStyle(e_d,e_f+'Width').replace(/px/i,'')||0);}function e_g(m){var e_h=m.e_h;return Uize.isFunction(e_h)?e_h.call(m):e_h;
}function e_i(){this.set({e_j:this.e_k&&this.e_l>1&& !!this.e_h});}function e_m(){this.set({e_n:this.e_k&&this.e_o});}function e_p(){var m=this;m.set({e_q:(m.get('over')||m.e_k)&&m.e_l>1&& !!m.e_h});
};function e_r(){this.set({e_s:this.e_k&& !this.e_o});}function e_t(){var m=this,e_u=m.isWired?m.getNode('previewZoom'):e_a;m.set({e_o:e_u&&e_u.Uize_Widget_CollectionItem_Zooming_src==e_g(m)});}function e_v(m,e_w,e_x){
if(m.isWired){var e_y=e_w=='previewZoom';if(e_x){var e_z=m.getNode('preview');m.e_A=e_b.getCoords(m.getNode('previewShell')||(e_z?e_z.parentNode:null));var e_B=m.e_B=e_b.getDimensions(e_z);e_B.width-=
e_c(e_z,'left')+e_c(e_z,'right');e_B.height-=e_c(e_z,'top')+e_c(e_z,'bottom');var e_C=e_z.parentNode;e_b.setStyle(e_C,{overflow:'hidden',height:e_C.offsetHeight-e_c(e_C,'top')-e_c(e_C,'bottom')});if(!m.getNode(e_w)){
m.flushNodeCache(e_w);var e_u=e_z.cloneNode(e__);e_b.setProperties(e_u,{id:m.get('idPrefix')+'-'+e_w,title:''});e_b.setStyle(e_u,{left:0,top:0,border:'none',width:e_B.width,height:e_B.height,position:'absolute',
backgroundImage:''});e_z.parentNode.appendChild(e_u);(e_y?e_D:e_E).call(m);e_w=='previewZoom'&&m.wireNode(e_w,'load',function(){e_t.call(m)});}}m.displayNode(e_w,e_x);if(e_x){var e_F=e_y?e_g(m):m.e_G,
e_d=m.getNode(e_w);e_F!=e_d.Uize_Widget_CollectionItem_Zooming_src&&e_F!=e_d.src&&m.setNodeProperties(e_d,{src:e_F,Uize_Widget_CollectionItem_Zooming_src:e_F});}}}function e_H(m){m.isWired&&m.e_G&&m.setNodeProperties('preview',{src:m.e_G});
}function e_I(){var m=this;if(m.isWired&&((m.e_q&&m.e_s)||(m.e_j&&m.e_n))){var e_J={},e_K=function(e_L){var e_M=e_L?'height':'width';e_J[e_L?'top':'left']=m.get(e_L?'alignY':'alignX')*(m.e_A[e_M]-(e_J[e_M]=
m.e_B[e_M]*m.e_N));};e_K(0);e_K(1);m.setNodeStyle(m.e_n?'previewZoom':'previewZoomLowRes',e_J);}}function e_O(m,e_w,e_P){if(m.isWired){e_P&&e_I.call(m);m.showNode(e_w,e_P);}}function e_E(){e_O(this,'previewZoomLowRes',this.e_s);
}function e_D(){e_O(this,'previewZoom',this.e_n);}return e_$.subclass({omegastructor:function(){var m=this;m.wire('Changed.over',function(e_Q){if(!e_Q.newValue){m.isWired&&m.unwireNode(document.documentElement,'mousemove');
m.set({inUse:e_a});}e_p.call(m);});},instanceMethods:{updateUi:function(){e_H(this);e_$.doMy(this,'updateUi');},wireUi:function(){var m=this;if(!m.isWired){var e_z=m.getNode('preview'),e_R=m.getNode('previewShell')||(e_z?e_z.parentNode:null)
;m.e_G||m.set({e_G:e_z.src});m.wireNode(e_R,Uize.Dom.VirtualEvents.Remain.mouseRest(150),function(){if(!m.get('over'))return;if(m.e_l>1){m.set({inUse:e__});var e_S=function(){var e_T=e_b.getEventAbsPos(),
e_U=m.e_U;function e_V(e_L){return(Uize.constrain((e_T[e_L?'top':'left']-(m.e_A[e_L?'y':'x']+e_U))/(m.e_A[e_L?'height':'width']-e_U*2),0,1))}m.e_A&&m.set({e_W:e_V(0),e_X:e_V(1)});};e_S();m.wireNode(document.documentElement,'mousemove',e_S);
}});e_$.doMy(m,'wireUi');}}},stateProperties:{e_W:{name:'alignX',onChange:e_I,value:0},e_X:{name:'alignY',onChange:e_I,value:0},e_U:{name:'deadMargin',value:20},e_N:{name:'displayedZoomPower',onChange:e_I,
value:1},e_k:{name:'inUse',onChange:[e_m,e_i,e_r,e_p,function(){var m=this;if(m.isWired){if(m.e_k){var e_h=e_g(m);if(e_h){if(m.e_l>1){m.e_Y=e__;m.e_Z||(m.e_Z=Uize.Fade()).wire('Changed.value',function(e_Q){m.set({e_N:e_Q.newValue})}
);m.e_Z.start(Uize.copyInto({startValue:1,endValue:m.e_l},m.e_0));}else{m.setNodeProperties('preview',{src:e_h});}m.set({e_1:e__});}}else{if(m.e_Y){m.e_Z.stop();m.set({e_N:1});m.e_Y=e_a;}else{e_H(m);
}m.set({e_1:e_a});}}}],value:e_a},e_G:{name:'previewUrl',onChange:[e_t,function(){e_H(this)}]},e_h:{name:'previewZoomUrl',onChange:[e_i,e_p]},e_1:{name:'showingPreview',value:e_a},e_l:{name:'zoomPower',
onChange:[e_i,e_p],value:1},e_0:{name:'zoomFadeProperties',value:{duration:600,curve:Uize.Fade.celeration(0,1)}},e_o:{onChange:[e_m,e_r],value:e_a},e_j:{onChange:function(){e_v(this,'previewZoom',this.e_j);
},value:e_a},e_n:{onChange:e_D,value:e_a},e_q:{onChange:function(){e_v(this,'previewZoomLowRes',this.e_q);},value:e_a},e_s:{onChange:e_E,value:e__}}});}});
Uize.module({name:'Zazzle.GridCell',superclass:'Uize.Widget.CollectionItem.Zooming',required:['Uize.Node.Classes','Uize.Url','Zazzle.Checkbox'],builder:function(f_$){'use strict';var f__=null;var f_a=f_$.subclass(
f__,function(){var m=this,f_b=m.f_c&&m.addChild('selected',Zazzle.Checkbox);f_b&&(new Uize.Util.PropertyAdapter({propertyA:{instance:m,property:'selected'},propertyB:{instance:f_b,property:'value'}})
);m.wire('Changed.showingPreview',function(){var f_d=m.getNode('previewZoom'),f_e=m.getNode('previewZoomLowRes');if(f_d)Uize.Node.Classes.addClass(f_d,m.f_f);if(f_e)Uize.Node.Classes.addClass(f_e,m.f_f);
});});f_a.set({cssClassActive:'selected',cssClassOver:'over',cssClassImage:'realviewImage',cssClassImageOver:'realviewImageHover',previewZoomUrl:function(){var m=this,f_g=f__,f_h=m.get('previewUrl'),
f_i=m.get('zoomPower');if(f_i>1)f_g=f_a.setUrlMaxDim(f_h,f_a.getUrlMaxDim(f_h)*f_i);return f_g;},zoomPower:2.5});var f_j=/(max_dim=)(\d+)(.*)/,f_k=/(_)(\d+)(\.[^\.]*(\?|#|$))/;f_a.getUrlMaxDim=function(f_l){
var f_m=f_l.match(f_j)||f_l.match(f_k);if(f_m&&f_m.length>1)return f_m[2];else return'1';};f_a.setUrlMaxDim=function(f_l,f_n){var f_o;function f_p(f_q,f_r,f_s,f_t){f_o=true;return f_r+Math.min(Math.round(f_n),2000)+f_t;
}var f_g=f_l.replace(f_j,f_p);if(!f_o)f_g=f_l.replace(f_k,f_p);return f_g;};f_a.stateProperties({f_c:'showSelectUi',f_f:'cssClassPreviewZoom'});return f_a;}});
Uize.module({name:'Zazzle.GridCell.Product',required:['Uize.Url','Uize.Node','Uize.Node.Classes'],builder:function(g_$){'use strict';var g__=true,g_a=false,g_b=null,g_c=Uize,g_d=g_c.Url,g_e=g_c.Node,g_f=g_e.Classes
;var g_g=g_$.subclass(g_b,function(){var m=this,g_h=m.get('properties'),g_i;m.g_i=g_i=m.get('productType')||g_h.pt||g_h.pdt;if(m.getNode()){m.g_j=m.getNode('preview').src;m.g_k=g_h.pid||g_h.pd;m.g_l=g_h.un;
var g_m=m.g_m=g_h.views,g_n=m.g_n=g_h.multiviews;if(g_n){m.g_o= -1;for(var g_p=0;g_p<g_n.length;++g_p){if(g_n[g_p].isCurrent){m.g_o=g_p;break;}}m.g_o== -1&&(m.g_n=undefined);}else if(g_m&&g_i!='zazzle_shirt'){
m.g_o=0;if(g_i=='zazzle_calendar'){m.g_m=['cover'];for(var g_q= -1;++g_q<g_m;)m.g_m.push('page_'+g_q);m.g_m.push('back');}else{if(g_i=='zazzle_card'){m.g_r=g_m[1];g_m=g_m[0];}if(typeof g_m=='string'){
m.g_m=g_i=='zazzle_ornament'?(g_m.indexOf('angle0')?['angle0',g_m]:[g_m,'angle180']):g_c.clone(g_s[g_i]);while(m.g_o<m.g_m.length&&m.g_m[m.g_o]!=g_m)++m.g_o;m.g_o==m.g_m.length&&m.g_m.push(g_m);}}}var g_t=function(){
var g_u=m.getNode(m.g_v),g_w=g_e.getCoords(g_u),g_x=m.getNode('hoverContentInsert'),g_y=g_e.getCoords(g_x),g_z=g_e.getDocumentScrollElement(),g_A=g_z.scrollTop,g_B=g_y.top-g_A,g_C=(g_A+g_e.getCoords(window).height)-g_y.bottom,
g_D='auto',g_E='auto';g_D=(g_w.width-g_y.width)/2;g_E=(g_w.height-g_y.height)/2;var g_F=(g_B+g_E)<0,g_G=(g_C-g_E)<0;if(g_F)g_E= -1*g_B;else if(g_G)g_E=g_C;g_e.setStyle(g_x,{position:'absolute',left:g_D,
top:g_E});};var g_H=function(){g_e.setStyle(m.getNode('hoverContentInsert'),{position:'absolute',left:0,top:0});};m.wire('Changed.hover',function(){var g_u=m.getNode(),g_I='lowRes';if(m.g_J&&m.g_K&&m.g_L){
var g_M='hovered',g_N=g_d.fromParams(m.g_L),g_O=g_N.childControlName,g_P=g_d.fromParams(g_N.childWidgetProperties),g_Q=g_c.copyInto(g_P,{cp:g_O,itemData:g_d.toParams({pd:m.get('productId'),att:g_d.toParams(g_h.att)
}),idPrefix:m.get('idPrefix')+'_'+g_M,lowResImageUrl:m.get('previewUrl')}),g_R=function(){g_f.setState(m.getNode(),m.g_S,g__);g_H();g_t();};if(!m.getNode('hoverContentInsert')){g_e.injectHtml(m.getNode(m.g_v),'<div id="'+m.get('idPrefix')+'-hoverContentInsert" class="'+m.g_T+'"></div>','inner bottom');
m.flushNodeCache('hoverContentInsert');}if(!m.children[g_M]){m.callInherited('loadHtmlIntoNode')({node:m.getNode('hoverContentInsert')},g_Q,{cache:'memory',callback:function(g_U){if(m.g_K){g_R();m.fire('Hover Loaded');
}}});}else if(m.g_K){g_R();}}else{g_f.setState(m.getNode(),m.g_S,g_a);g_H();}});}}),g_V=g_g.prototype;var g_W=['front','back'],g_s={zazzle_envelope:['angle0','angle180','angle180_2'],zazzle_binder:['angle45_outside_spinefront','angle0_outside_front','angle45_outside_front','angle0_outside_back','angle45_outside_spineback','angle0_outside_spine','angle0_outside_full'],
zazzle_invitation:g_W,zazzle_mug:['0','270','90'],zazzle_kedsshoe:['outside','front','inside','back'],zazzle_card:['front','inside2','inside1','back'],zazzle_postcard:g_W,zazzle_profilecard:g_W,zazzle_photocard:g_W,
zazzle_flyer:g_W,zazzle_rackcard:g_W},g_X={front:'viewFront',back:'viewBack',angle0:'viewFront',angle0_2:'viewFront',angle0_outside_front:'viewFront',angle0_outside_full:'viewFull',angle0_outside_spine:'viewSpine',
angle0_outside_back:'viewBack',angle45:'viewFrontRight',angle45_outside_front:'viewFront',angle45_outside_back:'viewBack',angle45_outside_spinefront:'viewFront',angle45_outside_spineback:'viewBack',angle90:'viewLeft',
angle180:'viewBack',angle180_2:'viewBack',angle270:'viewRight',angle315:'viewFrontLeft',cover:'viewCover',calendar:'viewMonth',inside1horz:'viewInsideTop',inside2horz:'viewInsideBottom',inside1vert:'viewInsideLeft',
inside2vert:'viewInsideRight',90:'viewBack',0:'viewCenter',270:'viewLeft',shoetop:'viewUpper',shoeoutside:'viewOutsideQuarter',shoeoutsidefront:'viewOutsideFront',shoefront:'viewTongue',shoeinsidefront:'viewInsideFront',
shoeinside:'viewInsideQuarter',shoeback:'viewHeel'};g_V.g_Y=function(g_Z){var m=this,g_0=m.getNode('nextviewLink'),g_n=m.g_n,g_m=m.g_m,g_i=m.g_i,g_1=parseInt(g_e.getStyle(g_0,'borderWidth').replace('px')),
g_2=g_e.getDimensions(g_0),g_3=Math.max(g_2.height||0,g_2.width||0)-(g_1*2),g_4=g_e.getDimensions(m.getNode('preview')),g_5=Math.max(g_4.width||0,g_4.height||0),g_j=m.g_j,g_q=(m.g_o+1)%(g_n||g_m).length,
g_6=g_n?g_n[g_q]:g_m[g_q],g_7=g_n?g_d.resolve(g_6.url,{max_dim:g_Z?g_5:(g_3>=0?g_3:0)}):g_d.resolve(g_j,g_c.copyInto(g_i=='zazzle_mug'?{lon:g_6}:{view:g_6},{max_dim:g_5}));if(g_n){var g_8=g_d.fromParams(g_j),
g_9;for(g_9 in g_8)if(g_9.indexOf('t_'))delete g_8[g_9];g_7=g_d.resolve(g_7,g_8);}g_Z?(m.g_o=g_q):(g_7=g_n?g_7:g_g.setUrlMaxDim(g_7,g_3));return g_7;};g_V.g_$_=function(){var m=this,g_0=m.getNode('nextviewLink'),
g_n=m.g_n,g_m=m.g_m,g_i=m.g_i,g___=function(g_p){return(g_p&&g_p.title)||m.localize(g_X[g_p]);},g_q=(m.g_o+1)%(g_n||g_m).length,g_p=g_n?g_n[g_q]:g_m[g_q],g_a_;if(g_i=='zazzle_calendar'){g_a_=g_p.indexOf('page')!=0?g___(g_p):g___('calendar').replace('{0}',g_q).replace('{1}',g_m.length-2);
}else{if(g_i=='zazzle_ornament')g_p=g_q==0?'angle0':'angle180';else if(g_i=='zazzle_kedsshoe')g_p='shoe'+g_p;else if(g_p=='inside1'||g_p=='inside2')g_p+=m.g_r;g_a_=g___(g_p);}if(g_0){g_0.style.backgroundImage='url("'+m.g_Y()+'")';
g_0.title=m.localize('clickToView',g_a_);}};g_V.updateNextView=function(){var m=this,g_0=m.getNode('nextviewLink');if(m.isWired){m.set({previewUrl:m.g_Y(g__)});m.g_$_();g_0&&g_0.blur();}};g_V.initNextViewLink=function(){
var m=this;if(!m.g_b_){var g_0=m.getNode('nextviewLink'),g_n=m.g_n,g_m=m.g_m,g_c_=((g_n&&g_n.length>1)||(g_m&&g_m.length))&&g_0;m.displayNode(g_0,g__);m.g_$_();m.wireNode(g_0,'click',function(){m.updateNextView();
m.g_d_('multiview');});m.wire('Changed.previewUrl',function(){m.g_j=m.getNode('preview').src;m.g_$_();});m.wire('Changed.showingPreview',function(){var g_e_= !m.get('showingPreview');g_c_&&m.showNode(g_0,g_e_)
;});}m.g_b_=true;};g_V.wireUi=function(){var m=this;if(!m.isWired&&m.getNode('')){var g_m=m.g_m,g_n=m.g_n,g_c_=((g_n&&g_n.length>1)||(g_m&&g_m.length))&&m.getNode('nextviewLink'),g_f_=m.getInherited('env'),
g_Q=g_f_.params,g_g_=function(){var g_h_=(m.parent.storeContext)?m.parent.storeContext+'/products/styles/pd-'+m.g_k:'pd/styles/pd-'+m.g_k;location.href=g_d.resolve(g_f_.www+g_h_,{dp:g_Q.gp?g_b:g_Q.dp||'',
qs:g_Q.qs||'',tl:m.getInherited('searchTitle')||''});},g_i_=function(){var g_j_=g_f_.www+(m.parent.storeContext?m.parent.storeContext+'/':'')+'gifts';location.href=g_d.resolve(g_j_,{gp:m.g_k});};m.wireNode(
'contributorLink','click',function(){location.href=g_f_.www+m.g_l});m.wireNode('storeLink','click',function(){location.href=g_f_.www+(m.getInherited('storeLinksToStores')?'':'gifts/ch-')+m.g_l;});m.wireNode('moreStylesLink','click',function(){g_g_();});
m.wireNode('moreStylesLink2','click',function(){g_g_();});m.wireNode('moreProductsLink','click',function(){g_i_();});m.wireNode('moreProductsLink2','click',function(){g_i_();});m.wireNode('','mouseover',function(){
});m.wire('Changed.showingPreview',function(){var g_e_= !m.get('showingPreview');m.showNode('productTypeIcon',g_e_);});if(g_c_&&m.g_k_){m.initNextViewLink();}m.wire('Init Nextview',function(){if(g_c_)
m.initNextViewLink();});m.wire('Changed.displayedZoomPower',function(){if(m.get('displayedZoomPower')==m.get('zoomPower'))!m.g_l_&&(m.g_l_=new Date);else if(m.g_l_){m.g_d_('zoom',new Date-m.g_l_);m.g_l_=undefined;
}});g_$.doMy(m,'wireUi');}};g_V.g_d_=g_V.fireTrackEvent=function(g_m_,g_n_){this.fire({name:'Track Event',bubble:g__,extra:{idPrefix:this.get('idPrefix'),pd:this.g_k,ax:g_m_,ts:g_n_}})};g_g.stateProperties({
g_o_:'seen',g_k:'productId',g_k_:{name:'initNextviewOnLoad',value:g__},g_L:'hoverItemReferenceWidget',g_J:{name:'isHoverable',onChange:function(){var m=this;if(m.g_J){m.wireNode(m.g_v,'mouseRest(200)',function(){m.set({g_K:g__})});
m.wireNode(m.g_v,'mouseout',function(g_p_){m.set({g_K:g_a})});}else{m.unwireNode(m.g_v,'mouseRest(200)');m.unwireNode(m.g_v,'mouseout');}}},g_K:{name:'hover',conformer:function(g_q_){return this.g_J&&g_q_}
},g_v:{name:'hoverableNode',value:''},g_r_:{name:'useStoreLinks',value:g_a},g_S:{name:'cssClassHovering',value:'hovering'},g_T:{name:'cssClassHoverContentInsert',value:'hoverContentInsert'}});return g_g;
}});
Uize.module('Zazzle.Collection');
Uize.module({name:'Zazzle.Collection.Products',superclass:'Uize.Widget.Collection.Dynamic',builder:function(f_$){'use strict';return f_$.subclass();}});
Uize.module({name:'Zazzle.Results',superclass:'Zazzle.Widget',required:'Uize.Node',builder:function(e_$){'use strict';var e__=Uize,e_a=e__.Node,e_b=true,e_c=false,e_d=null,e_e;var e_f=e_$.subclass(e_d,
function(){var m=this,e_g=m.e_g,e_h=m.e_h,e_i=e__.Util,e_j=e_i.Coupler,e_k=e_i.PropertyAdapter,e_l=e__.Widget.Button,e_m=Zazzle,e_n=e_m.Pagination,e_o=e_g&&m.addChild('paginationTop',e_n),e_p=e_h&&m.addChild('paginationBottom',e_n)
;m.addChild('collection',m.e_q,m.e_r);m.e_s=m.e_t;m.e_u=[];m.e_v=0;e_o&&e_p&&new e_j({instances:[e_o,e_p],properties:['classSelected','numResults','pageSize','value']});if(e_o){new e_k({propertyA:{instance:m,
property:'page'},propertyB:{instance:e_o,property:'value'}});new e_k({propertyA:{instance:m,property:'pageSize'},propertyB:{instance:e_o,property:'pageSize'}});new e_k({propertyA:{instance:m,property:'numResults'
},propertyB:{instance:e_o,property:'numResults'}});}if(m.e_w){var e_x=e_m.Droplist,e_y=e_g&&m.e_z&&m.addChild('pageSizeTop',e_x),e_A=e_h&&m.e_z&&m.addChild('pageSizeBottom',e_x),e_B=e_g&&m.e_C&&m.addChild('sortTop',e_x),
e_D=e_h&&m.e_C&&m.addChild('sortBottom',e_x),e_E=e_g&&m.e_F&&m.addChild('infiniteScrollTop',e_l,{clickToSelect:e_b,clickToDeselect:e_b}),e_G=e_h&&m.e_F&&m.addChild('infiniteScrollBottom',e_l,{clickToSelect:e_b,clickToDeselect:e_b}),
e_H=m.e_F&&m.addChild('showMoreResults',e_l);if(e_y){e_A&&new e_j({instances:[e_y,e_A],properties:['value','values']});new e_k({propertyA:{instance:m,property:'pageSize'},propertyB:{instance:e_y,property:'value'
},valueAdapter:{aToB:function(e_I){return e_I+''},bToA:function(e_I){return+e_I}}});}if(e_B){e_D&&new e_j({instances:[e_B,e_D],properties:['value','values']});new e_k({propertyA:{instance:m,property:'sort'
},propertyB:{instance:e_B,property:'value'}});}if(e_E){e_G&&new e_i.Coupler({instances:[e_E,e_G],properties:['selected']});new e_i.PropertyAdapter({propertyA:{instance:m,property:'infiniteScroll'},propertyB:{
instance:e_E,property:'selected'}});}e_H&&e_H.wire('Click',function(){if(m.isWired){m.displayNode('showMoreResults',e_c);e_o&&e_o.displayNode('',e_c);}m.set({page:m.e_t+1});});m.e_J=e_c;}}),e_K=e_f.prototype
;e_K.e_L=function(e_M){var e_L=e_c;if(this.e_N&&e_M)for(var e_O in this.getScrollableProperties())if(e_M[e_O]!=e_e){e_L=e_b;break;}return e_L;};e_K.e_P=function(e_Q){return this.children.collection.getNode('itemsContainer'+(e_Q?'2':''))
};e_K.e_R=function(e_t){var m=this;e_t=e_t==e_e?1:e_t;if(m.isWired){m.e_t==e_t?m.e_S():m.set({e_t:e_t});}};e_K.e_T=function(e_U,e_V){var m=this;if(m.isWired&&m.e_W){m.callInherited('displayLoadingOverlay')(
e_U,{parent:m,node:e_V?m.getNode('infiniteScrollLoad'):e_d});m.displayNode('infiniteScrollLoad',e_V&&e_U);}};e_K.e_X=function(){this.e_Y=(this.e_Y||0)+1};e_K.e_S=function(e_V){var m=this;if(m.isWired&&m.e_w&& !m.e_Z){
!e_V&&(m.e_J= !m.e_J);var e_0=m.children,e_1=e_0.collection,e_2=m.e_2,e_3,e_t=m.e_t,e_s=m.e_s,e_4=e_t-e_s,e_5=m.e_5,e_6=e_4&&m.e_6,e_7=(e_t-1)*e_5,e_8=(e_t*e_5)-1,e_9=e_1.itemWidgets.length,e_$_=e_8-e_7+1,
e___=e_1.getNode(),e_a_=e_1.getNode('items'),e_b_=e___.style,e_c_=e___?{height:e_b_.height,overflow:e_b_.overflow}:{},e_d_=e_1.getNodeStyle(e_a_,'overflow');e_6&&e_1.setNodeStyle(e_a_,{overflow:'hidden'})
;var e_e_=e_a.getDimensions(e___),e_f_=m.e_P(m.e_J),e_g_=m.e_P(!m.e_J),e_h_=e_c,e_i_=0;if(e_0.sortTop){var e_j_=e_0.sortTop.get('values');for(var e_k_=0;e_k_<e_j_.length;e_k_++){var e_l_=e_j_[e_k_];e_l_.name==e_2&&
(e_3=e_l_.valueDetails);}}var e_m_=function(e_n_){m.callInherited('loadHtmlIntoNode')({node:e_f_,injectMode:'inner bottom'},e__.copyInto({service:m.e_w,serviceCaller:m.get('idPrefix'),idPrefix:m.get('idPrefix'),
itemNo:e_n_,itemReferenceWidget:m.e_o_,itemWidgetNamePrefix:e_1.get('itemWidgetNamePrefix'),collectionReferenceWidget:m.e_p_,itemRootNodeCssClass:e_1.get('itemRootNodeCssClass'),rev:m.e_Y,ps:m.e_5},e_3?e_3.attributes:{st:e_2},
m.getServiceParams()),{cache:'memory',beforeInject:function(e_q_,e_r_){if(!e_h_&&e___){e_1.setNodeStyle(e___,{height:e_e_.height,overflow:'hidden'});e_h_=e_b;m.beforeAddNewItems();!e_6&&m.displayNode(e_f_);
!e_V&& !e_6&&m.displayNode(e_g_,e_c);m.e_T(e_c,e_V);if(m.e_s_&&m.e_t_&&e_V&&(m.e_u_>=m.e_v_||((m.e_t-1)%Math.floor(m.e_v_/m.e_u_))==0)){var e_w_='pageBreak'+m.e_v++,e_x_=Math.floor(((m.e_t-1)/Math.floor(m.e_v_/m.e_u_))+1)
;m.injectNodeHtml(e_f_,'<div id=\"'+m.get('idPrefix')+'-'+e_w_+'\" class=\"hrsingle '+m.e_y_+'\"><span class=\"'+m.e_z_+'\">'+m.localize('page',{page:e_x_})+'</span></div>','inner bottom');m.e_u.push(e_w_);
}}e_q_();},callback:function(){var e_A_='$'+m.get('idPrefix'),e_B_=window[e_A_];if(e_B_){m.set(e_B_);e_$_=Math.min(m.e_C_,e_t*e_5)-e_7;window[e_A_]=e_e;m.fire('Updated Data');}if(++e_i_==e_$_||(!e_$_&& !(e_i_-1))){
var e_D_=e_1.getNode('clearDiv'+(m.e_J?'2':''));if(e_D_){e_a.remove(e_D_);e_f_.appendChild(e_D_);}e_1.setNodeStyle(e___,e_c_);if(!e_V){var e_E_=function(){e_6&&e_1.setNodeStyle(e_a_,{overflow:e_d_});
var e_F_=e_1.itemWidgets,e_G_=[];for(var e_H_= -1;++e_H_<e_9;)e_G_.push(e_F_[e_H_]);e_1.remove(e_G_);if(m.e_s_&&m.e_t_){m.removeNode(m.e_u);e__.emptyOut(m.e_u);}};if(e_6){e__.require(['Uize.Fade','Uize.Curve'],
function(e_I_,e_J_){var e_K_=e_e_.width*(e_4>0?1: -1),e_L_=new e_I_({startValue:e_K_,endValue:0,duration:e_6,curve:e_J_.easeOutCircular()});e_L_.wire({Start:function(){m.setNodeStyle(e_g_,{left:0,position:'absolute',
top:0});m.setNodeStyle(e_f_,{display:'block',left:+e_L_,position:'relative'});},'Changed.value':function(){var e_I= +e_L_;m.setNodeStyle(e_f_,{left:e_I});m.setNodeStyle(e_g_,{left:e_I-e_K_});},Done:function(){
m.setNodeStyle(e_g_,{display:'none',position:''});m.setNodeStyle(e_f_,{position:''});e_E_();m.set({e_Z:e_c});e_L_=e_d;}});e_L_.start();});}else e_E_();}if(!e_6){m.set({e_Z:e_c});}m.e_s_&&m.e_M_();}}}
);};if(e_7<=e_8){m.e_T(e_b,e_V);m.set({e_Z:e_b});var e_N_=function(){for(var e_n_=e_7;e_n_<=e_8;e_n_++)e_m_(e_n_);};if(m.e_O_)e_N_();else Uize.require('Uize.Fx.Scroll',function(e_P_){e_P_.scrollToNode(m.getNode(),{callback:e_N_})}
);}else e_1.set({items:[]});}m.e_s=m.e_t;};e_K.e_Q_=function(){var m=this;if(m.isWired){var e_0=m.children,e_o=m.children.paginationTop,e_C_=m.e_C_,e_5=m.e_5,e_R_=e_C_>1,e_S_= !m.e_s_,e_T_=function(e_U_,e_V_){
var e_W_=e_0[e_U_];e_W_&&e_W_.displayNode('',e_V_);};e_T_('sortTop',e_R_);e_T_('sortBottom',e_R_);e_T_('pageSizeTop',e_S_);e_T_('pageSizeBottom',e_S_);e_T_('paginationTop',e_S_);e_T_('paginationBottom',e_S_);
var e_X_= !e_S_&&((m.e_t-1)%m.e_Y_==(m.e_Y_-1))&&(m.e_t*e_5<m.e_Z_)&&(m.e_t*e_5<e_C_);m.displayNode('top',e_R_||m.e_0_);m.displayNode('bottom',e_R_&&(e_S_||e_X_));m.displayNode('collection',e_C_);m.displayNode('noResults',!e_C_);
m.displayNode('showMoreResults',e_X_);m.set({infiniteScrollButtonDisplay:e_X_});}};e_K.e_M_=function(){var m=this;if(m.isWired&&m.e_s_){var e_1_=m.children.collection.itemWidgets,e_2_=e_1_?e_1_.length:0,
e_3_=(m.e_5*.25).toFixed(),e_4_=e_2_>e_3_?e_1_[e_2_-e_3_]:e_d,e_5_=e_2_>0?e_1_[e_2_-1]:e_d,e_6_=(m.e_t*m.e_5<m.e_Z_)&&(m.e_t*m.e_5<m.e_C_);if(!m.e_Z&&e_6_&&((m.e_t-1)%m.e_Y_)!=(m.e_Y_-1)&&(e_4_&&e_a.getCoords(e_4_.getNode()).percentSeen>10
||e_5_&&e_a.getCoords(e_5_.getNode()).percentSeen>10)){m.children.paginationTop.displayNode('',e_c);m.set({page:m.e_t+1});}}};e_K.beforeAddNewItems=function(){};e_K.afterAddNewItems=function(){};e_K.getScrollableProperties=function(){
return{page:1,pageSize:1,sort:1}};e_K.getServiceParams=function(){return{}};e_K.reset=function(){var m=this;m.e_X();m.e_R();};e_K.updateResults=function(e_M){var m=this;e_M=e_M||{};e_M.page==e_e&&m.e_t!=1
&&(e_M.page=1);if(e_M.page&&m.e_t!=e_M.page)m.set(e_M);else{var e_V=m.e_s_&&e_M.page!=e_e&&e__.keys(e_M).length==1;m.e_O_=e_V|| !m.e_L(e_M);m.e_S(e_V);m.e_O_=e_c;}};e_K.updateUi=function(){var m=this;
if(m.isWired){m.children.collection.forAll(function(e_7_){e_7_.updateUi()});m.e_Q_();e_$.doMy(m,'updateUi');}};e_K.wireUi=function(){var m=this,e_E=m.children.infiniteScrollTop;if(!m.isWired){m.displayNode(
m.e_P(e_b),e_c);m.children.collection.wire('Items Removed',function(e_8_){if(e_8_.byUser){!m.e_w&&m.set({e_C_:m.e_C_-e_8_.totalRemoved});m.e_X();m.e_R((m.e_t-1)*m.e_5<m.e_C_?m.e_t:Math.max(m.e_t-1,1)
);}});e_a.wire(window,{scroll:function(){m.e_M_()},load:function(){m.e_M_()}});e_$.doMy(m,'wireUi');e_E&&m.callInherited('wireTooltip')(e_E.getNode(),function(){return m.e_s_?m.localize('showNumResults',{num:m.e_v_?m.e_v_:m.e_5}):m.localize('showAllResults');
});m.e_9_&&m.updateResults();}};var e_$a='updateResults';e_f.stateProperties({e_0_:{name:'alwaysShowTop',value:e_c},e_6:'animatePagination',e_9_:'clientSideLoaded',e_p_:'collectionReferenceWidget',e_q:'collectionWidgetClass',
e_r:'collectionWidgetProperties',e_h:'includeBottomBar',e_z:'includePageSizesUi',e_C:'includeSortsUi',e_F:'includeInfiniteScrollUi',e_g:'includeTopBar',e_s_:{name:'infiniteScroll',onChange:[e_K.e_Q_,
function(){var m=this;if(m.e_s_){m.e_v_=m.get('pageSize');m.set({page:1,pageSize:m.e_u_});}else{m.set({page:1,pageSize:m.e_v_?m.e_v_:m.e_5});}}]},e__a:{name:'infiniteScrollButtonDisplay',value:e_c},e_Y_:{
name:'infiniteScrollButtonInterval',value:3},e_t_:{name:'infiniteScrollPageDisplay',value:e_c},e_z_:'pageBreakCssClassName',e_y_:'pageBreakHrCssClassName',e_u_:{name:'infiniteScrollPageSize',value:18
},e_o_:'itemReferenceWidget',e_Z_:{name:'maxResults',value:540},e_C_:{name:'numResults',onChange:e_K.e_Q_},e_v_:'oldPageSize',e_t:{name:'page',onChange:e_$a,value:1},e_5:{name:'pageSize',onChange:e_$a,
value:20},e_aa:'scrollToTargetNodeId',e_N:{name:'scrollToTop',value:e_b},e_ba:{name:'showJumpPagination',value:e_b},e_2:{name:'sort',onChange:e_$a},e_Z:{name:'updating',onChange:function(){var m=this;
m.set({busy:m.e_Z?e_b:'inherit'});!m.e_Z&&m.e_s_&&m.e_Q_();},value:e_c},e_w:'serviceUrl',e_W:{name:'useLoadingOverlay',value:e_b}});return e_f;}});
Uize.module({name:'Zazzle.Results.Cell',required:'Uize.Widget.Collection',builder:function(f_$){'use strict';var f__=false;var f_a=f_$.subclass(null,function(){var m=this;if(m.f_b&&m.get('serviceUrl')){
var f_c=Uize,f_d=f_c.Widget.Options,f_e=f_c.Util,f_f=m.addChild('viewModeTop',f_d),f_g=m.addChild('viewModeBottom',f_d);new f_e.Coupler({instances:[f_f,f_g],properties:['value','values']});new f_e.PropertyAdapter({
propertyA:{instance:m,property:'viewMode'},propertyB:{instance:f_f,property:'value'}});}}),f_h=f_a.prototype;f_h.getScrollableProperties=function(){return Uize.copyInto({viewMode:1},f_$.doMy(this,'getScrollableProperties')
);};f_h.beforeAddNewItems=function(){var m=this,f_i=m.children,f_j=f_i.collection,f_k=f_i.viewModeTop;f_$.doMy(m,'beforeAddNewItems');if(f_k){var f_l=Uize.findRecord(f_k.get('values'),{name:m.f_m});f_j.set({itemWidgetClass:f_l.itemWidgetClass});
f_j.isWired&&Uize.Node.Classes.setState(f_j.getNode(),[f_j.get('cssClassGrid'),f_j.get('cssClassList')],Uize.findRecord(f_k.get('values'),{name:m.f_m}).viewMode=='List');}};f_h.getServiceParams=function(){
var m=this,f_k=m.children.viewModeTop,f_n=f_k&&f_k.get('values');return Uize.copyInto(f_$.doMy(m,'getServiceParams'),{collectionViewMode:f_n&&Uize.findRecord(f_n,{name:m.f_m}).viewMode});};f_h.updateResults=function(f_o){
f_o=f_o||{};var m=this,f_p='viewMode'in f_o;if(f_p){var f_k=m.children.viewModeTop;if(f_k){var f_n=f_k.get('values');f_n&&m.set({itemReferenceWidget:Uize.findRecord(f_n,{name:m.f_m}).itemReferenceWidget
});}}f_$.doMy(m,'updateResults',[Uize.copy(f_o,f_p&&Uize.keys(f_o).length==1?{page:m.get('infiniteScroll')?1:m.get('page')}:null)]);};f_h.wireUi=function(){var m=this,f_f=m.children.viewModeTop;if(!m.isWired){
f_$.doMy(m,'wireUi');f_f&&f_f.forAll(function(f_q){m.callInherited('wireTooltip')(f_q.getNode());});}};f_a.set({collectionWidgetClass:Uize.Widget.Collection});f_a.stateProperties({f_b:{name:'includeViewModes',
value:f__},f_m:{name:'viewMode',onChange:'updateResults'}});return f_a;}});
Uize.module({name:'Zazzle.Results.Products',superclass:'Zazzle.Results.Cell',required:'Zazzle.Collection.Products',builder:function(g_$){'use strict';var g__=g_$.subclass();g__.set({collectionWidgetClass:Zazzle.Collection.Products
});return g__;}});
Uize.module({name:'Zazzle.RatingBars',superclass:'Uize.Widget',builder:function(d_$){'use strict';var d__=null;var d_a=d_$.subclass(),d_b=d_a.prototype;d_b.draw=function(){var m=this;for(var d_c=0;d_c<m.d_d;d_c++){
m.d_e[d_c]=m.d_f>0?m.d_g[d_c]/m.d_f*m.d_h:0;m.setNodeValue('title'+d_c,m.d_i[d_c]);m.setNodeStyle('bar'+d_c,{width:m.d_e[d_c]+'px'});m.setNodeValue('detail'+d_c,m.d_j[d_c]);}};d_b.wireUi=function(){var m=this;
if(!m.isWired){d_$.doMy(m,'wireUi');}};d_a.stateProperties({d_k:'barHeight',d_h:'barWidth',d_l:'barSpacing',d_g:{name:'values',onChange:d_b.draw},d_f:'totalValue',d_j:'detailLabels',d_i:'titleLabels',
d_d:'numBars',d_e:'fillA'});return d_a;}});
Uize.module({name:'Zazzle.ReviewSummary',superclass:'Zazzle.Widget',required:['Zazzle.RatingContinuous','Zazzle.RatingBars'],builder:function(e_$){var e__,e_a=true,e_b=false,e_c=null,e_d=Uize;var e_e=e_$.subclass(
e_c,function(){var m=this;m.addChild('rating',Zazzle.RatingContinuous);m.addChild('ratingBars',Zazzle.RatingBars);}),e_f=e_e.prototype;e_f.e_g=function(){var m=this;if(m.isWired){var e_h='',e_i='',e_j='',
e_k='';m.children.rating.set({value:m.e_l});e_h=m.e_m;e_i=m.localize('xReviews',{num:m.e_n});m.setNodeInnerHtml('ratingLabel',e_h);m.setNodeInnerHtml('ratingLabelInner',e_i);e_j=m.localize('percentRecommend',{number:m.e_o});
m.setNodeInnerHtml('percentRecommend',e_j);m.e_p&&(e_k=m.localize('recommendedFor',{occasion:m.e_p}));m.setNodeInnerHtml('recommendedFor',e_k);m.children.ratingBars.set({detailLabels:m.e_q,values:m.e_r,
totalValue:m.e_n});m.web('ratingStars').display(m.e_n>0);m.web('recommendText').display(m.e_n>0);m.web('noReviews').display(m.e_n==0);}};e_f.reset=function(){var m=this;if(m.isWired){m.ajax({serviceUrl:'/svc/product/productreviews/'+(!m.e_s?'readreviews':'readptpdreviews'),
type:!m.e_s?m.e_t:null,pg:1,ps:5,callerId:m.getInherited('user').id,pd:m.e_u,pt:m.e_v,atts:m.e_w,isPublic:m.e_x,privateView:m.e_y,minRating:0},{cache:'memory',callbackSuccess:function(e_z){var e_A=e_z.data,
e_B;if(m.e_s){e_B=m.e_t=='OnProduct'?e_A.pdResults:e_A.ptResults;}else{e_B=e_A.results;}if(e_B!=e__){m.e_n=e_B.numResults;m.e_l=e_B.avgRating;m.e_m=e_B.avgRatingDisplay;m.e_p=e_B.mostRecommendedFor;m.e_r=e_B.ratingBreakdown;
m.e_q=e_B.ratingBreakdownDetail;m.e_o=e_B.percentRecommended;m.e_g();}}});}};e_f.wireUi=function(){var m=this;if(!m.isWired){m.wireNode('writeAReview','click',function(){m.callInherited('ensureLoggedIn')({
callback:function(e_C){m.ajax({serviceUrl:'/svc/product/productreviews/canreview',mbr:m.getInherited('user').id,pd:m.e_u,pt:m.e_D,atts:m.e_w},function(e_A){var e_z=e_A.data;m.e_E=e_z.hasOthers;m.e_F=e_z.goToForm;
m.e_G=e_z.reviewUrl;if(m.e_F){location.href=m.e_G;}else{var e_H=m.localize('message')+'<br /><br />';m.e_E&&(e_H+='<a href="'+m.get('urls').productsToReviewUrl+'">'+m.localize('linkMessage')+'</a>');
m.inform({title:m.localize('title'),message:e_H,state:'info'});}});}});});m.wireNode('ratingLabelInnerLink','click',function(){e_d.require('Uize.Fx.Scroll',function(e_I){e_I.scrollToNode(m.e_J);});});
e_$.doMy(m,'wireUi');}};e_e.stateProperties({e_s:{name:'ajaxBoth',value:e_b},e_w:{name:'attributes',onChange:e_f.reset},e_l:'avgRating',e_m:'avgRatingDisplay',e_E:'canReviewItems',e_F:'canReviewThis',
e_x:'isPublic',e_p:'mostRecommendedFor',e_o:'percentRecommended',e_y:'privateView',e_v:'qualifiedType',e_r:'ratingBreakdown',e_q:'ratingBreakdownDetail',e_u:'rootId',e_G:'reviewFormUrl',e_K:'reviewQuality',
e_t:'reviewsSet',e_J:'scrollToNodeId',e_n:'totalReviews',e_D:'unqualifiedType',e_L:'value'});return e_e;}});
Uize.module({name:'Zazzle.JumpPagination',superclass:'Uize.Widget.Form',required:'Uize.Widget.FormElement.Text',builder:function(e_$){'use strict';var e__=e_$.subclass(null,function(){this.e_a=this.addFormElement('page',Uize.Widget.FormElement.Text)
}),e_b=e__.prototype;e_b.e_c=function(){return this.e_d?Infinity:Math.ceil(this.e_e/this.e_f)};e_b.e_g=function(){this.isWired&&this.displayNode('',this.e_c()>1)};e_b.e_h=function(){var m=this,e_a=m.e_a
;if(e_a){var e_i=e_a.get('validator')||[],e_j=Uize.findRecord(e_i,{type:'Range'}),e_k= !!e_j,e_l=m.e_c();e_j=Uize.copyInto(e_j||{},{type:'Range',min:1,max:e_l,func:function(e_m){return e_m>=1&&e_m<=e_l},
msg:m.localize(m.e_d?'minRangeWarning':'fullRangeWarning',{minValue:1,maxValue:e_l})});if(!e_k)e_i.push(e_j);e_a.validate();}};e_b.updateUi=function(){var m=this;if(m.isWired){m.e_g();e_$.doMy(m,'updateUi');
}};e__.stateProperties({e_d:{name:'isFuzzyNumResults',onChange:[e_b.e_h,e_b.e_g]},e_e:{name:'numResults',onChange:[e_b.e_h,e_b.e_g]},e_f:{name:'pageSize',onChange:[e_b.e_h,e_b.e_g]}});return e__;}});

Uize.module({name:'Uize.Widget.Pagination',required:['Uize.Widget.Button','Uize.Node','Uize.Dom.Classes','Uize.Url'],builder:function(d_$){'use strict';function d__(d_a){var d_b=d_a+'',d_c=d_b.length,d_d=[]
;for(var d_e=0;++d_e<=d_c;){d_d.unshift(d_b.charAt(d_c-d_e));!(d_e%3)&&d_e<d_c&&d_d.unshift(',');}return d_d.join('');}function d_f(m,d_g,d_h){return Uize.Widget.Button.addChildButton.call(m,d_g,d_h);
}function d_i(m){return Math.ceil(m.d_j/m.d_k)}function d_l(m){var d_m=m.d_m,d_n=m.d_n,d_o=d_i(m),d_p=1+(m.d_q&&d_m>1),d_r=d_o-(m.d_s&&d_m<d_o),d_t=Math.ceil(d_n/2),d_u=d_m-d_t+1,d_v=d_m+(d_n-d_t);return(
d_u>=d_p&&d_v<=d_r?d_u:d_u>=d_p?Math.max(d_p,d_r-d_n+1):d_p);}function d_w(m,d_x){m.set({d_m:d_x})}function d_y(){var m=this,d_z=m.children,d_m=m.d_m,d_o=d_i(m),d_A=d_o>1,d_j=m.d_j;if(m.isWired&&m.getNode()){
m.displayNode('displayShell',d_j>0);m.displayNode('paginationShell',d_A);m.setNodeInnerHtml('displayShell',m.localize('displayInfo',{number:d__((d_m-1)*m.d_k+1),toNumber:d__(Math.min(d_j,d_m*m.d_k)),
total:m.localize('numResultsDisplay',{numResults:d__(d_j)})||d__(d_j)}));m.setNodeInnerHtml('pageDisplay',m.localize('pageDisplayInfo',{page:d__(d_m),totalPages:d__(m.localize('numResultsDisplay',{numResults:d_o})||d_o)
}));if(d_A){var d_B=function(d_C,d_D){d_z[d_C]&&d_z[d_C].displayNode('',d_D);},d_E=function(d_C,d_x){d_z[d_C]&&d_z[d_C].set({text:d__(d_x)});};d_B('prev',d_m>1);d_B('next',d_m<d_o);m.d_F&&d_E('first',1);
d_B('first',d_m>1);d_B('last',d_m<d_o);m.d_F&&d_E('last',d_o);var d_G=d_l(m);m.displayNode('less',d_G>(1+m.d_q));m.displayNode('more',(d_G+m.d_n)<(d_o-m.d_s));for(var d_H= -1;++d_H<m.d_n;){var d_I='page'+d_H,
d_J=d_z[d_I].getNode(),d_x=d_G+d_H,d_K=d_x==d_m;d_E(d_I,d_K?m.localize('selectedPage',{page:d_x})||d_x:d_x);d_B(d_I,d_x==d_m||d_x<=(d_o-m.d_s));Uize.Dom.Classes.setState(d_J,m.d_L,d_K);}}}}return d_$.subclass({
omegastructor:function(){var m=this;d_f(m,'prev',function(){d_w(m,m.d_m-1)});d_f(m,'next',function(){d_w(m,m.d_m+1)});},instanceMethods:{updateUi:function(){var m=this;if(m.isWired){d_y.call(m);d_$.doMy(m,'updateUi');
}},wireUi:function(){var m=this;if(!m.isWired){var d_M=function(d_N){return!!Uize.Node.getById(m.get('idPrefix')+'_'+d_N)},d_O=function(d_H){d_f(m,'page'+d_H,function(){d_w(m,d_l(m)+d_H)});};m.d_q=d_M('first');
m.d_s=d_M('last');m.d_n= -1;while(d_M('page'+ ++m.d_n));m.d_q&&d_f(m,'first',function(){d_w(m,1)});m.d_s&&d_f(m,'last',function(){d_w(m,d_i(m))});for(var d_H= -1;++d_H<m.d_n;)d_O(d_H);d_$.doMy(m,'wireUi');
}}},stateProperties:{d_L:{name:'classSelected',value:'selected'},d_j:{name:'numResults',onChange:d_y},d_k:{name:'pageSize',conformer:function(d_P){return d_P?d_P:30},onChange:d_y,value:30},d_F:{name:'setEdgeButtons',
value:true},d_Q:{name:'thousandsSeparator',onChange:d_y,value:','},d_R:'urlAnchor',d_S:'urlBase',d_T:{name:'urlParam',value:'pg'},d_m:{name:'value',conformer:function(d_U){var d_o=d_i(this);return d_U?(!d_o||d_U<d_o?Math.floor(d_U):d_o):1;
},onChange:[function(){var m=this;if(m.d_S&&m.isWired)location.href=Uize.Url.resolve(m.d_S,Uize.pairUp(m.d_T,m.d_m));},d_y],value:1}}});}});
Uize.module({name:'Zazzle.Pagination',superclass:'Uize.Widget.Pagination',required:['Zazzle.JumpPagination','Uize.Util.Coupler','Uize.Util.PropertyAdapter'],builder:function(e_$){'use strict';var e__=e_$.subclass(
null,function(){var m=this,e_a=m.addChild('jumpPagination',Zazzle.JumpPagination),e_b=new Uize.Util.PropertyAdapter({propertyA:m,propertyB:e_a,valueAdapter:{aToB:function(e_c){return{page:e_c}},bToA:function(e_c){return e_c.page}
},connected:e_a.get('isValid')});e_a.wire('Changed.isValid',function(){e_b.set({connected:e_a.get('isValid')})});new Uize.Util.Coupler({instances:[m,e_a],properties:['numResults','pageSize','isFuzzyNumResults']
});});e__.prototype.wireUi=function(){var m=this;if(!m.isWired){e_$.doMy(m,'wireUi');var e_d=m.children;Uize.forEach(['first','prev','next','last'],function(e_e){var e_f=e_d[e_e];e_f&&m.callInherited('wireTooltip')(e_f.getNode())
;});}};e__.stateProperties({e_g:{name:'isFuzzyNumResults',value:false}});return e__;}});
Uize.module('Zazzle.CollectionItem');
Uize.module({name:'Zazzle.CollectionItem.Review',superclass:'Uize.Widget.CollectionItem',required:['Zazzle.RatingContinuous','Zazzle.SeeMoreUi','Uize.Widget.mWeb'],builder:function(e_$){var e__=false,e_a=true
;var e_b=e_$.subclass(null,function(){var m=this;m.addChild('rating',Zazzle.RatingContinuous);m.addChild('review',Zazzle.SeeMoreUi);}),e_c=e_b.prototype;e_b.mixins(Uize.Widget.mWeb);e_c.e_d=function(e_e){
var m=this;m.callInherited('ensureLoggedIn')({callback:function(){m.e_f=m.getInherited('user').id;m.ajax({serviceUrl:'/svc/product/productreviews/updatehelpfulness',ax:'UpdateHelpfulness',mbr:m.e_f,rid:m.e_g,
helpful:e_e},function(e_h){if(e_h.success){m.web('helpfulYes').setClassState(m.e_i,e_e);m.web('helpfulNo').setClassState(m.e_i,!e_e);m.e_e=e_e?1:0;}});}});};e_c.e_j=function(){var m=this;m.callInherited('ensureLoggedIn')({
callback:function(){m.e_f=m.getInherited('user').id;m.ajax({serviceUrl:'/svc/product/productreviews/flagreview',mbr:m.e_f,rid:m.e_g},function(e_h){if(e_h.success){m.web('violationLink').setClassState(m.e_i,e_a);
}});}});};e_c.updateUi=function(){var m=this,e_k=m.children,e_l=e_k.rating,e_m=e_k.review;if(m.isWired){e_l&&e_l.updateUi();e_m&&e_m.updateUi();e_$.doMy(m,'updateUi');}};e_c.wireUi=function(){var m=this;
if(!m.isWired){m.wireNode('helpfulYes','click',function(){m.e_d(e_a);});m.wireNode('helpfulNo','click',function(){m.e_d(e__);});m.wireNode('violationLink','click',function(){m.confirm({title:m.localize('violationTitle'),
message:m.localize('violationMessage'),okText:m.localize('yes'),cancelText:m.localize('no'),yesHandler:function(){m.e_j();}});});m.callInherited('wireTooltip')({node:m.getNode('helpfulYes')});m.callInherited('wireTooltip')({node:m.getNode('helpfulNo')});
m.callInherited('wireTooltip')({node:m.getNode('violationLink')});e_$.doMy(m,'wireUi');m.updateUi();}};e_b.stateProperties({e_e:'helpful',e_f:{name:'memberId',value:0},e_g:'reviewId',e_n:'memberIconUrl',
e_i:'cssClassActionSelected'});return e_b;}});
Uize.module({name:'Zazzle.Collection.Reviews',superclass:'Uize.Widget.Collection.Dynamic',required:['Zazzle.CollectionItem.Review'],builder:function(f_$){var f__=f_$.subclass(null,function(){var m=this;
m.wire({'Items Changed':function(){m.f_a()},Remove:function(f_b){if(f_b.byUser){f_b.handled=true;var f_c=f_b.itemWidgets,f_d=f_c[0].get('memberId'),f_e=f_c[0].get('reviewId');m.ajax({serviceUrl:'/svc/product/productreviews/removereview',
rid:f_e,mbr:f_d},function(f_f){!f_f.success?m.inform({message:m.localize('removeItemError')}):f_b.finishRemove(f_c,f_b.byUser);});}}});}),f_g=f__.prototype;f_g.f_a=function(){var m=this;if(m.isWired){
var f_h=m.get('totalItems')>0;m.displayNode('items',f_h);m.displayNode('noReviews',!f_h);}};f_g.updateUi=function(){var m=this;if(m.isWired){m.f_a();f_$.doMy(m,'updateUi');}};f_g.wireUi=function(){var m=this;
if(!m.isWired){m.wireNode('writeAReview','click',function(){m.callInherited('ensureLoggedIn')({callback:function(f_i){m.ajax({serviceUrl:'/svc/product/productreviews/canreview',mbr:m.getInherited('user').id,
pt:m.f_j,pd:m.f_k},function(f_l){var f_f=f_l.data;m.f_m=f_f.hasOthers;m.f_n=f_f.goToForm;m.f_o=f_f.reviewUrl;if(m.f_n){location.href=m.f_o;}else{var f_p=m.localize('message')+'<br /><br />';m.f_m&&(f_p+='<a href="'+m.get('urls').productsToReviewUrl+'">'+m.localize('linkMessage')+'</a>');
m.inform({title:m.localize('title'),message:f_p,state:'info'});}});}});});f_$.doMy(m,'wireUi');}};f__.stateProperties({f_m:'canReviewItems',f_n:'canReviewThis',f_j:'productType',f_o:'reviewFormUrl',f_k:'rootId'
});f__.set({itemWidgetClass:Zazzle.CollectionItem.Review});return f__;}});
Uize.module({name:'Zazzle.Results.Reviews',superclass:'Zazzle.Results',required:'Zazzle.Collection.Reviews',builder:function(f_$){var f__=f_$.subclass(),f_a=f__.prototype;f_a.getServiceParams=function(){
var m=this;return Uize.copyInto(f_$.doMy(m,'getServiceParams'),{ax:m.f_b,useCache:true,rpd:m.f_c,pt:m.f_d,callerId:m.f_e,mbr:m.f_f,att:m.f_g,voting:m.f_h,isPublic:m.f_i,privateView:m.f_j,reviewQuality:m.f_k,
minRating:m.f_l});};var f_m='updateResults';f__.stateProperties({f_n:{name:'ajaxBoth',value:false},f_g:{name:'attributes',onChange:f_m},f_e:{name:'callerId',value:0},f_o:'imageBackgroundColor',f_p:{name:'memberId',
onChange:f_m},f_l:'minRating',f_c:{name:'rootId',onChange:f_m},f_d:{name:'qualifiedType',onChange:f_m},f_b:{name:'reviewsSet',onChange:f_m,value:'OnProductType'},f_f:'reviewerId',f_i:'isPublic',f_j:'privateView',
f_k:'reviewQuality',f_q:'similarReviewsTitle',f_r:'testHash'});f__.set({collectionWidgetClass:Zazzle.Collection.Reviews});return f__;}});
Uize.module({name:'ZazzleWww.EmailSignupForm',superclass:'Uize.Widget',builder:function(d_$){'use strict';var d__=d_$.subclass();d__.prototype.wireUi=function(){var m=this;if(!m.isWired){var d_a=m.getNode('email'),
d_b=m.getNodeValue(d_a),d_c=function(){var d_d=m.getNode('form'),d_e='emailSignupWindow';if(d_d){m.callInherited('launchPopup')({url:d_d.action,name:d_e,resizable:true,scrollbars:true,width:465,innerWidth:465,
height:400,innerHeight:400});d_d.target=d_e;d_d.submit();}return false;};m.wireNode('form','submit',function(){d_c()});m.wireNode('submit','click',function(){d_c()});m.wireNode(d_a,{focus:function(){
if(m.getNodeValue(d_a)==d_b)m.setNodeValue(d_a,'')},blur:function(){if(!m.getNodeValue(d_a))m.setNodeValue(d_a,d_b)}});d_$.doMy(m,'updateUi');}};return d__;}});
Uize.module({name:'Zazzle.Palette',superclass:'Uize.Widget.Dialog',required:'Uize.Widget.mWeb',builder:function(e_$){'use strict';var e__={Above:0,Below:1,Left:2,Right:3},e_a=function(){var m=this;m.isWired
&&m.e_b!=null&&m.web('contents').html(m.e_b);},e_c=function(){var m=this;m.isWired&&m.web().setClassState([m.e_d,m.e_e,m.e_f,m.e_g],e__[m.e_h]);};return e_$.subclass({mixins:Uize.Widget.mWeb,omegastructor:function(){
var m=this,e_i=function(e_j){m.web().opacity(e_j?1:0)};m.wire({'After Show':function(){e_i(true)},'After Hide':function(){e_i(false)}});},instanceMethods:{e_a:e_a,e_c:e_c,updateUiPositionIfShown:function(){
var m=this;if(m.isWired&&m.get('shown')){var e_k=m.get('mooringNode'),e_l=m.get('offsetX');if(e_k&&e_l=='adjacent'&&e_l==m.get('offsetY')){var e_m=e__[m.e_h],e_n=m.web(),e_o=e_n.dimensions(),e_p=e_o.width,
e_q=e_o.height,e_r=m.web(e_k),e_s=e_r.dimensions(),e_t=e_s.width,e_u=e_s.height,e_v=e_r.coords(),e_w=e_v.left,e_x=e_v.top;if(e_t&&e_u){if(!e_m){e_w+=e_t/2-e_p/2;e_x-=e_q;}else if(e_m==1){e_w+=e_t/2-e_p/2;
e_x+=e_u;}else if(e_m==2){e_w-=e_p;e_x+=e_u/2-e_q/2;}else if(e_m==3){e_w+=e_t;e_x+=e_u/2-e_q/2;}e_n.css({left:e_w,top:e_x});}else m.set({shown:false});}else e_$.doMy(m,'updateUiPositionIfShown');}},updateUi:function(){
var m=this;if(m.isWired){m.e_a();m.e_c();m.updateUiPositionIfShown();e_$.doMy(m,'updateUi');}}},stateProperties:{e_d:'cssClassDirectionAbove',e_e:'cssClassDirectionBelow',e_f:'cssClassDirectionLeft',
e_g:'cssClassDirectionRight',e_b:{name:'contents',onChange:e_a},e_h:{name:'direction',onChange:[e_c,'updateUiPositionIfShown'],value:'Below'}},set:{offsetX:'adjacent',offsetY:'adjacent'}});}});
Uize.module({name:'ZazzleWww.ZazzleFooter',superclass:'Zazzle.Widget',required:['Zazzle.Palette','ZazzleWww.EmailSignupForm'],builder:function(e_$){'use strict';var e__=true,e_a=false,e_b=null;var e_c=e_$.subclass(
e_b,function(){var m=this;m.addChild('i18nPalette',Zazzle.Palette,{mooringNode:m.getNode('i18nLink'),dismissOnShieldClick:e__});m.addChild('emailSignup',ZazzleWww.EmailSignupForm);m.wireNode('viewFullSite','click',function(){
m.ajax({service:'mobilesetfullwidth',ax:'true'},{callbackSuccess:function(e_d){location.href=location.href;}});});m.wireNode('viewMobileSite','click',function(){m.ajax({service:'mobilesetfullwidth',ax:'false'
},{callbackSuccess:function(e_d){location.href=location.href;}});});}),e_e=e_c.prototype;e_e.wireUi=function(){var m=this;if(!m.isWired){var e_f=m.children.i18nPalette;if(e_f){m.web('i18nLink').click(function(){
e_f.set('shown',!e_f.get('shown'));});}e_$.doMy(m,'wireUi');}};e_c.stateProperties({});return e_c;}});
Uize.module({name:'ZazzleWww.Pixel',superclass:'Uize.Widget',required:['Uize.Node'],builder:function(d_$){var d__=d_$.subclass(null,function(){var m=this;if(m.d_a){Uize.Node.wire(window,'load',function(){
m.d_a&&setTimeout(function(){m.getNode('pixel').src=m.d_a;},10);});}if(m.d_b){var d_c=document.createElement('iframe'),d_d=document.getElementsByTagName('script');(d_c.frameElement||d_c).style.cssText="width: 0; height: 0; border: 0";
d_d=d_d[d_d.length-1];d_d.parentNode.insertBefore(d_c,d_d);var d_e=d_c.contentWindow.document;with(d_e){open().c=function(){s=this.createElement('script');s.src=m.d_b;this.body.appendChild(s);};write('<body onload=document.c();>');
close();}}}),d_f=d__.prototype;d__.stateProperties({d_a:{name:'pixelUrl',value:null},d_b:{name:'scriptUrl',value:null}});return d__;}});
Uize.module('Uize.Array');
Uize.module({name:'Uize.Array.Join',builder:function(){'use strict';return Uize.package({hugJoin:function(c_$,c__,c_a,c_b){return(c_$.length?(''+c__+c_$.join(''+c_a+(c_b!=undefined?c_b:'')+c__)+c_a):''
);}});}});
Uize.module({name:'Uize.Str.Camel',builder:function(){'use strict';return Uize.package({to:function(c_$,c__){return((Uize.isArray(c_$)?c_$.join(' '):c_$).toLowerCase().replace(/^\W+/,'').replace(/\W+$/,''
).replace(c__?/(^|\W+)./g:/\W+./g,function(c_a){return c_a.slice(-1).toUpperCase()}));}});}});
Uize.module({name:'Uize.Str.Has',builder:function(){'use strict';function c_$(c__,c_a,c_b){if(!c_a)return true;var c_c=c__.length,c_d=c_a.length,c_e=c_b?c_c-c_d:0,c_f=c_e+c_d-1;return(c_d<=c_c&&c__.charCodeAt(c_e)==c_a.charCodeAt(0)&&
(c_d==1||(c__.charCodeAt(c_f)==c_a.charCodeAt(c_d-1)&&(c_d==2||(c_d==c_c?c_a==c__:c_b?c__.indexOf(c_a,c_e)==c_e:c__.lastIndexOf(c_a,c_f)==0)))));}return Uize.package({has:function(c__,c_a){return(c_a.length<=c__.length&&
(c_$(c__,c_a)||c_$(c__,c_a,true)||c__.indexOf(c_a)> -1));},hasSuffix:function(c__,c_a){return c_$(c__,c_a,true);},hasPrefix:c_$});}});
Uize.module({name:'Uize.Str.Limit',builder:function(){'use strict';var c_$;return Uize.package({joinUsingSuffixPriority:function(c__,c_a,c_b){var c_c=c_a.length;return(c_b<c_c?c_a.substr(0,c_b):c_b==c_c
?c_a:c_$(c__,c_b-c_c)+c_a);},limitLength:c_$=function(c_d,c_b){var c_e='...',c_f=c_e.length;return(c_b<1?'':c_b<=c_f?c_d.slice(0,c_b):c_d.length>c_b?(c_d.substr(0,c_b-c_f)+c_e):c_d);}});}});
Uize.module({name:'Uize.Str.Repeat',builder:function(){'use strict';var c_$=[],c__,c_a,c_b;function c_c(c_d){if(!c_a)c_a=(c__='          '.replace(/ /g,'          ')).length;if(c_d>c_a)c_a=(c__=c_b(c__,Math.floor(c_d/c_a))+
c__.substr(0,c_d%c_a)).length;return c__.substr(0,c_d);}return Uize.package({repeat:c_b=function(c_e,c_f){if(c_f<1|| !c_e)return'';if(c_f==1)return c_e;if(c_e==' ')return c_c(c_f);c_$.length=c_f+1;return c_$.join(c_e);
}});}});
Uize.module({name:'Uize.String',required:['Uize.Array.Join','Uize.Str.Camel','Uize.Str.Has','Uize.Str.Limit','Uize.Str.Repeat','Uize.Str.Split','Uize.Str.Trim'],builder:function(){'use strict';var b_$=Uize.Str,
b__=b_$.Has,b_a=b_$.Limit,b_b=b_$.Split,b_c=b_$.Trim;return Uize.package({hugJoin:Uize.Array.Join.hugJoin,limitLength:b_a.limitLength,joinUsingSuffixPriority:b_a.joinUsingSuffixPriority,contains:b__.has,
startsWith:b__.hasPrefix,endsWith:b__.hasSuffix,toCamel:b_$.Camel.to,repeat:b_$.Repeat.repeat,split:b_b.split,splitInTwo:b_b.splitInTwo,hasPadding:b_c.hasPadding,trim:b_c.trim,trimLeft:b_c.trimLeft,trimRight:b_c.trimRight
});}});
Uize.module({name:'Uize.Web.xDom',required:'Uize.Dom.Basics',builder:function(c_$){'use strict';var c__=true,c_a=Uize,c_b=c_a.Dom.Basics,c_c=c_$.prototype;var c_d=function(c_e,c_f,c_g){var c_h=function(c_i){
var c_j=c_i.childNodes,c_k=c_j.length-1,c_l=c_i.parentNode;for(;c_k>0;c_k--)c_h(c_j[c_k]);if(c_g||c_i!=c_e){c_i.nodeType==1&&c_b.unwire(c_i);(c_l==c_e||(c_g&&(c_i==c_e)))&&c_b.remove(c_i);}};c_f&&c_h(c_e);
c_e.innerHTML='';},c_m=c_$.isMatch;var c_n=function(c_o,c_p){c_c[c_o]=function(c_q){return c_$(c_q)[c_p](this);};},c_r=function(c_s,c_t){c_c[c_s]=function(){var m=this,c_u=m.length;c_a.forEach(arguments,
function(c_v){m.handleSetAction(c_v,function(c_i,c_w){c_a.forEach(c_a.isList(c_w)?c_w:[c_w],function(c_x){c_u==1&&c_b.isNode(c_x)&&c_b.remove(c_x);c_b.injectHtml(c_i,c_x,c_t);});});});return m;};};c_r('after','outer bottom');
c_r('append');c_n('appendTo','append');c_r('before','outer top');c_n('insertAfter','after');c_n('insertBefore','before');c_r('prepend','inner top');c_n('prependTo','prepend');c_n('replaceAll','replaceWith');
c_r('replaceWith','outer replace');c_c.detach=function(c_y){return this.each(function(){c_m(this,c_y)&&c_b.remove(this)});};c_c.empty=function(){return this.each(function(){c_d(this,c__)});};c_c.remove=function(c_y){
return this.each(function(){c_m(this,c_y)&&c_d(this,c__,c__)});};}});
Uize.module({name:'Uize.Widget.Page',required:'Uize.Dom.Basics',builder:function(d_$){'use strict';var d__=true,d_a=false,d_b=null,d_c,d_d=Uize,d_e=d_d.Dom.Basics,d_f={yes:1,on:1,1:1,'true':1};function d_g(d_h){
return(d_d.isFunction(d_h)&&d_h)||(d_h&&d_h.callback)||Object;}function d_i(m,d_j,d_k,d_l){m.useDialog({component:m.d_m.component,widgetClassName:m.d_m.widgetClassName||'Uize.Widget.Dialog.Confirm',widgetProperties:{
name:'confirmDialog',title:d_l.title||'',message:(d_l.message+'').replace(/\n/g,'<br/>'),mode:d_j,state:d_l.state||d_k,okText:d_l.okText||d_b,cancelText:d_l.cancelText||d_b,mooringNode:d_l.mooringNode||d_b,
offsetX:d_l.offsetX||d_b,offsetY:d_l.offsetY||d_b},submitHandler:function(d_n){var d_o=d_l.callback||(d_n?d_l.yesHandler:d_l.noHandler);d_o&&d_o(d_n);}});}function d_p(m,d_q){d_q=d_q||Object;var d_r=m.get('idPrefix'),
d_s=window;var d_t={},d_u=d_a,d_v='$'+d_r+'_',d_w=d_v.length,d_x;for(var d_y in d_s){if(d_y.charAt(0)=='$'&&d_y.substr(0,d_w)==d_v&&typeof(d_x=d_s[d_y])=='object'&&d_x&&d_x.widgetClass){d_u=d__;for(var
 d_z= -1,d_A=d_t,d_B=d_y.substr(d_w).split('_'),d_C,d_D=d_B.length;++d_z<d_D;){var d_E=d_A[d_C=d_B[d_z]];if(d_z<d_D-1){d_A=(d_E||(d_E=d_A[d_C]={})).children||(d_E.children={});}else{d_E?d_d.mergeInto(d_E,d_x)
:(d_A[d_C]=d_x);d_s[d_y]=d_c;}}}}if(d_u){var d_F=function(d_G,d_H){function d_I(d_J,d_K,d_L){var d_M=d_L.children,d_N=d_G(d_J,d_K,d_L);d_M&&d_O(d_N,d_M);d_H&&d_H(d_N);}function d_O(d_J,d_P){for(var d_K in d_P)
d_I(d_J,d_K,d_P[d_K]);}d_O(m,d_t);};var d_Q={},d_R=[];d_F(function(d_J,d_K,d_L){var d_S=d_L.widgetClass;if(d_S&& !d_Q[d_S]){d_Q[d_S]=1;d_R.push(d_S);}});d_d.require(d_R,function(){m.set({children:d_t});
d_F(function(d_J,d_K,d_L){var d_N=d_J.children[d_K];if(!d_N){var d_S=d_d.getModuleByName(d_L.widgetClass)||d_d.Widget;d_N=d_K.charCodeAt(0)==36&&d_K.charCodeAt(1)==36?d_S.spawn(d_L,d_J):d_J.addChild(d_K,d_S)
;}return d_N;},m.isWired&&function(d_N){d_d.callOn(d_N,'insertOrWireUi')});d_q();});}else{d_q();}}return d_$.subclass({omegastructor:function(){this.wireDeferredLinks&&this.wireDeferredLinks()},instanceMethods:{
loadHtmlIntoNode:function(d_T,d_U,d_V){var m=this,d_W=d_T.rootNodeId,d_q=d_g(d_V);if(typeof d_V!=='object'){d_V={};}d_V.callback=function(d_X){function d_Y(){var d_Z=document.body,d_0=d_T.node!=undefined
?m.getNode(d_T.node):(d_W?d_e.getById(d_W+'-shell'):d_b)||d_Z;d_e.injectHtml(d_0,d_X,d_T.injectMode||(d_0==d_Z?'inner bottom':'inner replace'));setTimeout(function(){d_p(m,d_q)},0);}if(d_V.beforeInject){
d_V.beforeInject(d_Y,d_X);}else{d_Y();}};d_V.errorCallback=d_V.errorCallback||function(){};d_T.alwaysReplace===d_a&&d_W&&d_e.getById(d_W)?d_q():m.loadHtml(d_U,d_V);},performAjax:function(){},flushAjaxCache:function(
){},useDialog:function(d_l){var m=this,d_1=d_d.copy(m.d_2,d_l.widgetProperties),d_3=d_1.parent||m,d_4=d_1.name,d_5=d_3.children[d_4],d_6=d_l.component,d_7=m.d_7=m.d_7||{},d_8;if(d_6){var d_W=d_1.idPrefix||(d_3.get('idPrefix')+'_'+d_4)
;d_8={name:d_6.name,node:d_6.rootNode,rootNodeId:d_W,params:d_d.copyInto({idPrefix:d_W},d_6.params)};}function d_9(){setTimeout(function(){function d_$_(d___,d_a_){var d_o=d_l[d___];d_o&&d_o.apply(0,d_a_);
}function d_b_(d_c_){var d_a_=[d_c_];d_$_(d_c_.name.toLowerCase()+'Handler',d_a_);d_$_('dismissHandler',d_a_);}function d_d_(d_c_){var d_e_=d_c_.name;d_$_(d_e_,[d_c_]);m.fire({name:'Dialog '+d_e_,dialogWidget:d_c_.source
});}d_5.set({shown:d_a});d_5.unwire(d_5.eventHandlersForUseDialog||{});d_5.eventHandlersForUseDialog=d_d.copyInto({'Submission Complete':function(d_c_){d_$_('submitHandler',[d_c_.result,d_c_])},Close:d_b_,
Cancel:d_b_,'Before Show':d_d_,'After Show':d_d_,'Before Hide':d_d_,'After Hide':d_d_},d_l.widgetEventHandlers);d_5.wire(d_5.eventHandlersForUseDialog);d_5.set(d_1);d_5.set({shown:d__});},0);}function d_f_(){
function d_g_(){var d_h_=d_l.widgetClassName;d_d.require(d_h_,function(d_i_){(d_5=d_3.children[d_4])?d_5.set(d_1):(d_5=d_3.addChild(d_4,d_i_,d_1));d_5.Page_componentProfile=d_8;d_5.insertOrWireUi();d_9(d_j_?'refetched':'initial');
d_7[d_4]=d_a;});}function d_k_(d_l_){d_7[d_4]=d_a;if(d_l.widgetEventHandlers.Error){d_l.widgetEventHandlers.Error(d_l_);}else if(d_l.widgetEventHandlers.Cancel){d_l.widgetEventHandlers.Cancel(error);
}else{console.error('Error when loading dialog',d_l_);}}if(!d_7[d_4]){d_7[d_4]=d__;var d_j_=d_8&& !!d_5;if(d_j_){d_5.removeUi();d_3.removeChild(d_4);}d_8?m.loadHtmlIntoNode({node:d_8.node,rootNodeId:d_8.rootNodeId,
injectMode:'inner bottom',alwaysReplace:d_a},d_d.copyInto({cp:d_8.name},d_8.params),{cache:'memory',callback:d_g_,errorCallback:d_k_}):d_g_();}}if(d_5){if(d_5.Page_componentProfile==d_8)d_9('subsequent');
else{d_d.require('Uize.Data.Compare',function(d_m_){d_m_.identical(d_5.Page_componentProfile,d_8)?d_9('subsequent'):d_f_()});}}else{d_f_()}},wireUi:function(){var m=this;if(!m.isWired){d_p(m);d_$.doMy(m,'wireUi');
}},loadHtml:function(d_U,d_h){d_g(d_h)('');},showConfirm:function(d_l){d_i(this,'confirm','confirm',d_l);},showInform:function(d_l){d_i(this,'alert','info',d_l);}},dualContextMethods:{launchPopup:function(d_l){
if(!d_l)d_l={};if(d_l.width==d_c)d_l.width=850;if(d_l.height==d_c)d_l.height=600;var d_n_=window.screen;if(d_l.left==d_c)d_l.left=Math.max((d_n_.width-d_l.width-10)>>1,0);if(d_l.top==d_c)d_l.top=Math.max((d_n_.height-d_l.height-40)>>1,0)
;function d_o_(d_p_){return d_p_+'='+d_l[d_p_];}function d_q_(d_p_,d_r_){return(d_p_+'='+(d_f[d_l[d_p_]==d_c?d_r_:d_l[d_p_]+'']?'yes':'no'));}var d_s_=window.open(d_l.url||'',d_l.name==d_c?'popupWindow':d_l.name,
[d_o_('width'),d_o_('height'),d_o_('top'),d_o_('left'),d_q_('toolbar',0),d_q_('location',0),d_q_('directories',0),d_q_('status',0),d_q_('menubar',0),d_q_('scrollbars',1),d_q_('resizable',1)].join(',')
);d_s_&&d_s_.focus();return d_s_;}},stateProperties:{d_m:{name:'confirmDialog',value:{}},d_2:'dialogProperties'},set:{idPrefix:'page'}});}});
Uize.module({name:'Uize.Widget.Page.xDeferredLinks',required:'Uize.Dom.Basics',builder:function(e_$){'use strict';e_$.prototype.wireDeferredLinks=function(){var m=this,e__=m.deferredLinks,e_a=e__.length,
e_b=0;(function e_c(){function e_d(e_e){var e_f=Uize.Dom.Basics.getById(e_e[0]),e_g=e_e[1];if(typeof e_g=='string')m.setNodeProperties(e_f,{href:e_g});else m.wireNode(e_f,'click',function(){m.launchPopup(
Uize.copyInto({url:e_g.href,name:e_g.target},e_g.popupParams))});}for(var e_h=Math.min(e_a,e_b+m.linkBatchSize);e_b<e_h;e_b++)e_d(e__[e_b]);if(e_b<e_a)setTimeout(e_c,0);})();};e_$.stateProperties({deferredLinks:{
name:'deferredLinks',value:[]},linkBatchSize:{name:'linkBatchSize',value:25}});}});
Uize.module({name:'Uize.Dom.VirtualEvents.ModClick',required:['Uize.Dom.Basics','Uize.Dom.VirtualEvent'],builder:function(){'use strict';var d_$=function(){},d__=true,d_a=false,d_b=Uize.Dom.Basics,d_c=Uize.Dom.VirtualEvent
;function d_d(d_e,d_f,d_g){var d_h=(d_e?'Shift':'')+(d_f?'Ctrl':'')+(d_g?'Alt':'')+'Click';d_$[d_h=d_h.charAt(0).toLowerCase()+d_h.slice(1)]=d_c.register(d_h,function(){return d_c.getCached(d_h+'()',
function(d_i,d_j,d_k){d_b.wire(d_i,'click',function(d_l){d_l.shiftKey==d_e&&d_l.ctrlKey==d_f&&d_l.altKey==d_g&& !d_l.metaKey&&d_j.call(d_i,d_l);},d_k);});});}d_d(d_a,d_a,d_a);d_d(d__,d_a,d_a);d_d(d_a,d__,d_a);
d_d(d_a,d_a,d__);d_d(d_a,d__,d__);d_d(d__,d__,d_a);d_d(d__,d_a,d__);d_d(d__,d__,d__);return d_$;}});
Uize.module({name:'Uize.Node.VirtualEvent',required:['Uize.Dom.VirtualEvent','Uize.Dom.VirtualEvents.ModClick','Uize.Dom.VirtualEvents.Remain'],builder:function(){'use strict';var c_$=Uize,c__=c_$.Dom,
c_a=c__.VirtualEvents;return c_$.package(c_$.copy(c__.VirtualEvent,c_a.ModClick,c_a.Remain));}});
Uize.module({name:'Zazzle.Page',superclass:'Uize.Widget.Page',required:['Uize.Url','Uize.Node','Uize.Data','Uize.Comm.Ajax','Uize.Widget.Page.xDeferredLinks','Uize.Node.VirtualEvent','Uize.Widget.mWeb',
'Uize.Dom.Event'],builder:function(e_$){'use strict';var e__=true,e_a=false,e_b=null,e_c=Uize,e_d=e_c.Node,e_e=e_c.Url,e_f=e_c.copyInto;var e_g=e_$.subclass(e_b,function(){var m=this,e_h=e_a;if(!m.e_i)
m.e_i=new e_c.Comm.Ajax;window.onerror=function(e_j,e_k,e_l){var e_m=m.e_m;if(!e_h){e_h=e__;m.ajax({service:'logjs',msg:e_j,url:e_k,ln:e_l,ts:new Date-e_m.clientStartTime});}return!e_m.showErrors;};}
),e_n=e_g.prototype;e_g.mixins(e_c.Widget.mWeb);e_n.loadHtml=function(e_o,e_p){var m=this,e_q=m.e_q,e_r=m.get('env').service+(e_o.service||'getcontrol'),e_s=e_o.serviceCaller,e_t=e_d.getById('globalContent')
;if(typeof e_p!='object'|| !e_p)e_p={callback:e_p};m.e_u=e_a;m.e_q=(e_q&&e_q.e_v==e_r&&e_q.e_s==e_s)?e_q:{e_v:e_r,e_s:e_s,batchingAgent:{buildRequest:function(e_w){var e_x={url:[e_r,{comm_mode:'ajax',
output:'js',js:e_c.keys(e_c.getModuleByName('*')).join('|'),css:e_c.keys(m.get('modules').css).join('|'),ax:'batch'}],returnType:'json',requestMethod:'POST',cache:e_p.cache||'browser'},e_y=e_w.length,
e_z= -1,e_A={};for(;++e_z<e_y;)e_A['breq'+e_z]=e_e.toParams(e_w[e_z].htmlParams);e_x.url.push(e_A);return e_x;},responseParser:function(e_B){var e_C=[],e_D=e_B.responseJson,e_E;for(e_E in e_D)e_C.push(e_D[e_E])
;return e_C;}}};var e_F=e_p.errorCallback||function(error){console.error("ERROR in loadHtml, add an errorCallback.",error);};m.e_i.queueRequest({url:[e_r,e_o,{comm_mode:'ajax',output:'js',js:e_c.keys(e_c.getModuleByName('*')).join('|'),
css:e_c.keys(m.get('modules').css).join('|')}],htmlParams:e_o,returnType:'json',requestMethod:'POST',cache:e_p.cache,callback:function(e_G){var e_D=e_G.responseJson||e_G,e_H=e_D.dependencyModules,e_I=e_D.dependencyData
;if(e_D.success){var e_J=function(e_K,e_L){var e_M=e_I[e_K];e_M&&e_d.injectHtml(e_L||document.body,e_M,'inner bottom');e_c.copyInto(m.e_N[e_K],e_c.lookup(e_H[e_K],e_a));};e_J('js');e_J('css',e_t);Uize.require(
e_H.js,function(){(e_p.callback||Object)(e_D.controlData)});}else{e_F(e_D);}},errorCallback:e_F,batchingAgent:m.e_q.batchingAgent});m.e_u=e__;setTimeout(function(){m.e_u&&m.e_i.useQueue();},0);};e_n.performAjax=function(e_O,e_P){
e_P=Uize.isFunction(e_P)?{callback:e_P}:e_P||{};this.e_i.request({url:[e_O.serviceUrl?e_O.serviceUrl:this.get('env').service+e_O.service,{comm_mode:'ajax',output:'js'},e_O,{service:e_b,serviceUrl:e_b}
],returnType:e_P.returnType||'json',requestMethod:e_P.requestMethod||'POST',cache:'cache'in e_P?e_P.cache:'browser',data:e_P.data,contentType:e_P.contentType,callback:e_P.callbackSuccess||e_P.callback,
batchingAgent:e_P.batchingAgent||e_a});};e_n.flushAjaxCache=function(e_Q){arguments.length?this.e_i.flushCache(e_Q):this.e_i.flushCache();};e_n.getUrl=function(){return location.href;};e_n.prompt=function(e_R){
e_R.callback(prompt(e_R.message,e_R.inputText));};e_n.wireTooltip=function(e_S,e_T){var m=this,e_U=e_c.isPlainObject(e_S),e_V=e_U?e_S:{},e_W=e_V.widget,e_X= !e_U?e_S:e_V.node,e_j=e_T||e_V.message,e_Y
;if(e_W||e_X){var e_Z=e_V.callback,e_0,e_1,e_2,e_3=function(e_4){e_Z&&e_Z(e_4)},e_5=function(){clearTimeout(e_1);e_0&&e_0.set({shown:false});e_0=e_2;e_3(e_a);},e_4=function(){var e_6=e_c.isFunction(e_j)?e_j():e_j;
if(e_6||e_V.component){e_0=e_b;m.useDialog({component:e_V.component||{name:'Zazzle.Palette'},widgetProperties:e_f({name:'globalTooltip',mooringNode:e_X||(e_W&&e_W.getNode()),contents:e_6,offsetX:'adjacent',
offsetY:'adjacent',direction:e_V.direction||'Below'},e_V.widgetProperties),'Before Show':function(e_7){var e_8=e_7.source,e_9=e_V.hideTimeout;if(e_9==e_2)e_9=5000;if(e_0===e_2){e_8.set({shown:e_a});e_5();
}else{e_0=e_8;e_3(e__);if(e_9)e_1=setTimeout(e_5,e_9);}}});}},e_$_;if(e_W){var e___=e_V.propertyName||'value',e_a_=e_V.evalFunc;e_$_=e_c.pairUp('Changed.'+e___,function(){var e_b_=e_W.get(e___);(e_a_?e_a_(e_b_): !!e_b_)
?e_4():e_5();});e_W.wire(e_$_);e_Y=function(){e_5();e_W.unwire(e_$_);};}else if(e_X){var e_c_=m.web(e_X=e_d.getById(e_X));if(!e_c_.supportsTouch){if(!e_j){e_j=e_c_.property('title');e_c_.property('title','');
}e_$_=e_f({mouseout:e_5},e_c.pairUp('mouseRest('+(e_V.restTime==e_2?500:e_V.restTime)+')',e_4));e_c_.wire(e_$_);e_Y=function(){e_5();e_c_.unwire(e_$_);};}}}return e_Y;};e_n.wireUi=function(){var m=this;
if(!m.isWired){e_$.doMy(m,'wireUi');var e_d_=function(e){Uize.Dom.Event.preventDefault(e);};m.wireNode(document.body,{'dragenter':e_d_,'dragover':e_d_,'drop':e_d_});var e_e_=m.e_e_;!e_c.isEmpty(e_e_)
&&m.e_f_&&setTimeout(function(){e_d.injectHtml(document.body,'<iframe id="page-prefetchIframe" style="position:absolute;visibility:hidden;bottom:0"></iframe>','inner bottom');var e_g_=m.getNode('prefetchIframe');
try{var e_h_=e_g_.contentDocument||e_g_.contentWindow.document,e_i_=['<ht'+'ml><he'+'ad></he'+'ad><bo'+'dy>'],e_j_=function(e_k_,e_l_){if(e_k_)for(var e_m_= -1;++e_m_<e_k_.length;)e_i_.push(e_l_.replace('#',e_k_[e_m_])
);};e_j_(e_e_.css,'<link href="#" type="text/css" rel="stylesheet" />');e_j_(e_e_.js,'<script src="#" type="text/javascript"><\/script>');e_j_(e_e_.images,'<img src="#" />');e_h_.open();e_h_.write(e_i_.join('\n')+'</b'+'ody></ht'+'ml>');
e_h_.close();}catch(e_n_){}},m.e_f_);}};function e_o_(e_Z){e_c.require('Zazzle.PageUtils',e_Z)}function e_p_(e_q_){e_n[e_q_]=function(){var m=this,e_r_=arguments;e_o_(function(e_s_){e_s_[e_q_].apply(0,[m].concat(Array.prototype.slice.call(e_r_)));
});};}e_p_('displayLoadingOverlay');e_p_('getCookie');e_p_('openIframeDialog');e_p_('setCookie');e_p_('wireContextMenu');e_p_('wireNodeForDataTransfer');e_p_('useMediaBrowser');e_g.getParent=e_n.getParent=function(){
try{var e_t_=parent.domain;}catch(e_n_){document.domain=location.hostname.replace(/^[^.]+./,'');}return parent;};e_g.stateProperties({e_i:'commObject',e_u_:{name:'dialogMooringNode',value:'main'},e_m:{
name:'env',value:{}},e_N:'modules',e_R:{name:'params',value:{}},e_f_:{name:'prefetchDelay',value:2000},e_e_:{name:'prefetchUrls',value:{}},e_k_:{name:'urls',value:{}},e_v_:{name:'user',value:{}}});e_g.set({
confirmDialog:{component:{name:'Zazzle.Dialog.Confirm'}}});return e_g;}});
Uize.module({name:'ZazzleWww.Page',superclass:'Zazzle.Page',required:['Uize.Url','Uize.Node','Uize.String','ZazzleWww.ZazzleHeader','Uize.Web.xDom'],builder:function(f_$){'use strict';var f__=true,f_a=false,
f_b=null,f_c,f_d=Uize,f_e=f_d.copyInto,f_f=f_d.Node,f_g=f_d.Url,f_h=f_d.String,f_i=ZazzleWww;var f_j=f_$.subclass(f_b,function(){var m=this;m.addChild('zazzleHeader',f_i.ZazzleHeader);if(m.f_k&&top.location!=self.location){
var f_l=self.location.href;top.location=m.f_m?f_g.resolve(f_l,{shareThis:true}):f_l;}m.addChild('returnToPrevious',f_d.Widget.Button).wire('Click',function(){window.history.go(-1)});m.wire('Track Event',
function(f_n){var f_o=m.get('env'),f_p=m.get('tracking');if(m.isWired&&f_p){var f_q=m.getNode('imagePixel'),f_r=f_n.extra;if(!f_q){f_q=f_f.getById(m.get('idPrefix')+'-imagePixel');f_q&&m.set({nodeMap:f_e(
m.get('nodeMap')||{},{imagePixel:f_q})});}f_q&&m.setNodeValue(f_q,f_g.resolve(f_p.url,f_d.copyInto({rnd:f_g.getCacheDefeatStr(),ts:f_o?(new Date-f_o.clientStartTime):f_c,idPrefix:f_n.source.get('idPrefix')
},typeof f_r!='object'?{extra:f_r}:f_r)));}});}),f_s=f_j.prototype;f_s.isLoggedIn=function(f_t){var f_u=this.get('user');return f_u.isLoggedIn||(f_t?f_u.llid!=0:f_a);};f_s.useMediaBrowser=function(f_v,f_w,f_x){
var m=this,f_y=m.get('env').mediaBrowserUiVersion||1,f_z={uploadVideo:f_a};if(f_y>1){f_$.doMy(m,'useMediaBrowser',[f_d.copyInto({controlName:'ZazzleWww.Dialog.MediaBrowser2',name:'mediaBrowserDialog'},f_v,f_z),f_w,f_x]);
}else{m.useDialog({component:{name:'ZazzleWww.MediaBrowser'},widgetProperties:f_e({name:'mediaBrowser',sources:['MyComputer','MyZazzleImages'],selectedSource:'MyComputer',imageType:'all'},m.get('user').isLoggedIn?{selectedSource:'MyZazzleImages'}:f_b,
f_A=='flickr'?{sources:['MyComputer','MyZazzleImages',f_A],selectedSource:f_A}:f_b,{tf:f_v&&f_v.imageType=='ztimage'?'stitch':'print'},f_v,{okText:f_b}),submitHandler:f_w,dismissHandler:f_x});}};f_s.goToLogin=function(f_B){
location.href=f_g.resolve(this.get('env').login,{lru:f_B||this.getUrl()});};f_s.wwwSearchPag=function(f_C,f_D){var m=this,f_o=m.get('env'),f_E=f_o.allDepartmentsSuffix,f_F=f_o.www+(f_D||f_E),f_G=0,f_H=f_C.st
;if(f_H=='date_created')delete f_C.sp;if(f_F.indexOf('awards')<0){delete f_C.at;delete f_C.day;if(f_H=='award')delete f_C.st;}else{delete f_C.pt;}var f_I={cn:'0',ch:'',dp:0,st:'popularity',sd:'desc',ps:'',pt:'all',cg:'0',pce:'0',pcr:'0',gp:'0',sp:'0',pr:'','do':'',pg:'1',awt:'',sr:'0',pst:'0',sfd:'true'};
for(var f_J in f_I){if(f_C[f_J]&&f_C[f_J]==f_I[f_J])delete f_C[f_J];}if(f_C.qs)f_C.qs=encodeURI(f_C.qs.replace(/[  *\/]/g,'+').replace(/[\.\?#]/g,''));if(f_F.indexOf(f_E)>=0){f_F=m.get('env').www+(f_C.qs?f_C.qs:'')
+(f_h.endsWith(f_C.qs,f_E)?'':('+'+f_E));for(var f_K in{dp:0,cg:0,pcr:0,pce:0,sr:0,awt:0,ccs:0,ccpid:0,hastxt:0,hasphoto:0,txtcvg:0,pst:0,st:0,at:0,sp:0,sd:0,cn:0,ch:0,'do':0,pr:0,pg:0,ps:0,day:0,hs:0,vm:0,sfd:0})
if(f_C[f_K])f_F+=(f_G++ ?'&':'?')+f_K+'='+encodeURI(f_C[f_K]);}else{for(var f_K in{qs:0,hs:0})if(f_C[f_K])f_F+='/'+f_K+'-'+encodeURI(f_C[f_K]);for(var f_K in{dp:0,cg:0,pcr:0,pce:0,sr:0,awt:0,pt:0,ccs:0,ccpid:0,cciid:0,hastxt:0,hasphoto:0,txtcvg:0,pst:0,st:0,at:0,sp:0,sd:0,cn:0,ch:0,gp:0,'do':0,pr:0,pg:0,ps:0,day:0,vm:0,sfd:0})
if(f_C[f_K])f_F+=(f_G++ ?'&':'?')+f_K+'='+encodeURI(f_C[f_K]);}return f_F;};f_s.replaceFullWidthNumbers=function(f_L){if(f_L&&(/[\uff10-\uff19]/g).test(f_L)){f_L=f_L.replace(/\uff10/g,'0');f_L=f_L.replace(/\uff11/g,'1');
f_L=f_L.replace(/\uff12/g,'2');f_L=f_L.replace(/\uff13/g,'3');f_L=f_L.replace(/\uff14/g,'4');f_L=f_L.replace(/\uff15/g,'5');f_L=f_L.replace(/\uff16/g,'6');f_L=f_L.replace(/\uff17/g,'7');f_L=f_L.replace(/\uff18/g,'8');
f_L=f_L.replace(/\uff19/g,'9');f_L=f_L.replace(/[\u3002\uff0e]/g,'.');}return f_L;};f_s.screenIsSmall=function(){return this.web(window).width()<this.f_M;};f_s.wireUi=function(){var m=this;if(!m.isWired){
m.f_N&&m.web(window).load(function(){f_O(function(){f_i.PageUtils.trackPageLoad(m)});});m.web('changeMaturity').click(function(){m.useDialog({component:{name:'ZazzleWww.ChangeContentFilterDialog',params:{
mbr:m.get('user').id}},widgetProperties:{name:'changeContentFilterDialog'},submitHandler:function(){location.href=location.href}});});if(m.f_P&& !Uize.isNully(m.f_P)&& !m.children.emailSignupDialog){
m.useDialog({component:{name:'ZazzleWww.Dialog.Form.EmailSignup',params:{hasRectangularBackground:m.f_P==='rectangle'}},widgetProperties:{name:'emailSignupDialog'}});}var f_Q=m.children.zazzleHeader;
if(f_Q.get('compatibilityMode')===f_a){var f_R=m.getNode('sideMenus'),f_S=m.web(f_Q.getNode('offCanvasLeftContent')),f_T=m.web(f_Q.getNode('offCanvasRightContent')),f_U=m.web('shield'),f_V=m.web('leftSlider'),
f_W=m.web('rightSlider'),f_X=m.web(),f_Y=0,f_Z=0,f_0=0,f_1=0,f_2=0,f_3=0,f_4=f_a,f_5=navigator.platform[0]==='i',f_6=Uize.Node.isIe,f_7=f_X.supportsCss('transform'),f_8=f_X.supportsCss('transition'),
f_9=f_a,f_$_=function(f___,f_a_,f_b_){if(f___){f_X.css(f___,f_a_);f_V.css(f___,f_b_||f_a_);f_W.css(f___,f_b_||f_a_);}},f_c_=function(f_d_,f_e_){var f_f_=function(f_g_){return'translate3d('+f_g_+((f_g_&&f_d.isNumber(f_g_))
?'px':'')+', 0, 0)';};f_$_(f_7,f_f_(f_d_),f_e_&&f_f_(f_e_));if(f_d_==0){f_S.display(false);f_T.display(false);}},f_h_=function(){f_Q.retrieveCartItems()},f_i_=function(f_j_){m.web((f_j_?'right':'left')+'Slider').wire({
touchstart:function(f_n){f_j_&&f_h_();f_S.display(!f_j_);f_T.display(f_j_);f_U.display();var f_k_=f_n.touches[0];f_Y=f_Z=f_k_.clientX;f_0=f_1=f_k_.clientY;f_$_(f_8,'');f_n.preventDefault();},touchmove:function(f_n){
var f_l_=f_Z,f_k_=f_n.touches[0];f_Z=f_k_.clientX;f_1=f_k_.clientY;f_4=f_l_<f_Z;if(f_5){var f_m_=(f_j_?f_3:f_2)+(f_Z-f_Y),f_n_=0.8*m.web(window).width();f_c_(f_j_?f_d.constrain(f_m_,-f_n_,0):f_d.constrain(f_m_,0,f_n_)
);}f_n.preventDefault();},touchend:function(f_n){var f_o_=f_4!==f_j_,f_p_=f_j_?f_3:f_2,f_q_=Math.abs(f_Z-f_Y),f_r_=Math.abs(f_1-f_0),f_n_=m.web(window).width()*0.8;if(f_q_<10&&f_r_<10)f_o_= !f_p_;if(f_q_<f_r_&&f_p_===f_2)
f_o_=f_a;f_$_(f_8,'all 0.2s ease-out');if(f_j_)f_o_?f_c_('-80%',f_3= -f_n_):f_c_(f_3=0);else f_o_?f_c_('80%',f_2=f_n_):f_c_(f_2=0);f_V.setClassState('big-slider',f_o_);f_W.setClassState('big-slider',f_o_);
f_U.hide();f_n.preventDefault();},mousedown:function(){var f_s_=function(f_g_){if(f_6){f_X.css('left',f_g_);f_V.css('marginLeft',f_g_);f_W.css('marginRight',-f_g_);}};f_j_&&f_h_();f_S.display(!f_j_);
f_T.display(f_j_);f_X.css(f_8,'all 0.2s ease-out');if(f_9){f_c_(0);f_s_(0);}else{var f_t_=m.web(window).width()*0.8*(f_j_? -1:1);f_c_((f_j_?'-':'')+'80%',f_t_);f_s_(f_t_);}f_9= !f_9;f_V.setClassState('big-slider',f_9);
f_W.setClassState('big-slider',f_9);}});};if(f_R){if(f_S.length){f_S.detach();f_R.appendChild(f_S[0]);}if(f_T.length){f_T.detach();f_R.appendChild(f_T[0]);}}f_i_(f_a);f_i_(f__);}f_$.doMy(m,'wireUi');
var f_u_=["\x63\x6F\x6E\x73\x6F\x6C\x65","\x75\x6E\x64\x65\x66\x69\x6E\x65\x64","\x57\x61\x6E\x74\x20\x74\x6F\x20\x77\x6F\x72\x6B\x20\x6F\x6E\x20\x5A\x61\x7A\x7A\x6C\x65\x27\x73\x20\x55\x49\x3F\x20\x52\x75\x6E\x20\x6A\x6F\x62\x73\x2E\x61\x70\x70\x6C\x79\x28\x29","\x6C\x6F\x67","\x6A\x6F\x62\x73","\x61\x70\x70\x6C\x79","\x54\x72\x61\x63\x6B\x20\x45\x76\x65\x6E\x74","\x6A\x6F\x62\x73\x2E\x61\x70\x70\x6C\x79","\x66\x69\x72\x65","\x67\x65\x74\x4E\x6F\x64\x65","\x2E","\x2B","\x72\x65\x70\x6C\x61\x63\x65","\x67\x65\x74\x54\x69\x6D\x65","\x43\x6F\x6E\x67\x72\x61\x74\x73\x21","\x59\x6F\x75\x20\x6B\x6E\x6F\x77\x20\x79\x6F\x75\x72\x20\x4A\x61\x76\x61\x73\x63\x72\x69\x70\x74\x21\x20\x47\x69\x76\x65\x20\x75\x73\x20\x61\x20\x73\x68\x6F\x75\x74\x20\x61\x74\x20\x3C\x61\x20\x68\x72\x65\x66\x3D\x22\x6D\x61\x69\x6C\x74\x6F\x3A\x31\x33\x33\x37\x75\x69\x40\x7A\x61\x7A\x7A\x6C\x65\x2E\x63\x6F\x6D\x3F\x53\x75\x62\x6A\x65\x63\x74\x3D\x5A\x55\x49\x20\x70\x6F\x73\x69\x74\x69\x6F\x6E\x26\x42\x6F\x64\x79\x3D\x4D\x79\x20\x63\x6F\x64\x65\x20\x69\x73\x20","\x2E\x22\x3E\x31\x33\x33\x37\x75\x69\x40\x7A\x61\x7A\x7A\x6C\x65\x2E\x63\x6F\x6D\x3C\x2F\x61\x3E\x2E\x20\x4D\x61\x6B\x65\x20\x73\x75\x72\x65\x20\x74\x6F\x20\x69\x6E\x63\x6C\x75\x64\x65\x20\x22","\x22\x20\x69\x6E\x20\x79\x6F\x75\x72\x20\x65\x6D\x61\x69\x6C\x2E","\x69\x6E\x66\x6F\x72\x6D","\x4E\x69\x63\x65\x2E","\x4E\x6F\x74\x20\x71\x75\x69\x74\x65\x20\x72\x69\x67\x68\x74\x2E","\x59\x6F\x75\x20\x74\x68\x6F\x75\x67\x68\x74\x20\x69\x74\x20\x77\x61\x73\x20\x74\x68\x61\x74\x20\x73\x69\x6D\x70\x6C\x65\x3F\x20\x52\x75\x6E\x20\x74\x68\x69\x73\x20\x66\x75\x6E\x63\x74\x69\x6F\x6E\x20\x69\x6E\x20\x74\x68\x65\x20\x63\x6F\x6E\x74\x65\x78\x74\x20\x6F\x66\x20\x74\x68\x65\x20\x23\x70\x61\x67\x65\x20\x44\x4F\x4D\x20\x6E\x6F\x64\x65\x2E"];setTimeout(function(){if(typeof window[f_u_[0]]!=f_u_[1]){console[f_u_[3]](f_u_[2]);};window[f_u_[4]]=new function(){this[f_u_[5]]=function(){m[f_u_[8]]({name:f_u_[6],bubble:true,extra:{ax:f_u_[7]}});if(this==m[f_u_[9]]()){var f_v_=((new Date())[f_u_[13]]().toString()/42/1000).toString()[f_u_[12]](f_u_[10],f_u_[11]);m[f_u_[18]]({title:f_u_[14],message:f_u_[15]+f_v_+f_u_[16]+f_v_+f_u_[17]});return f_u_[19];}else{if(this!=window[f_u_[4]]){return f_u_[20];}else{return f_u_[21];};};};};},2000);
}};var f_O=function(f_w_){f_d.require('ZazzleWww.PageUtils',f_w_)},f_x_=function(f_y_){f_s[f_y_]=function(){var m=this,f_z_=arguments;f_O(function(f_A_){f_A_[f_y_].apply(0,[m].concat(Array.prototype.slice.call(f_z_)));
});};};f_x_('animateStitch');f_x_('enableProfile');f_x_('ensureLoggedIn');f_x_('shareLink');f_x_('showShareDialog');f_x_('useProductUiDialog');f_x_('validateContent');f_j.stateProperties({f_k:'framebust',
f_m:'imageSearchReferred',f_P:'interstitialPromo',f_B_:'loadingOverlay',f_C_:{name:'realviewBgColor',value:'ffffff'},f_M:{name:'screenBreakPoint',value:768},f_p:'tracking',f_N:'trackClientPerformance'
});return f_j;}});
Uize.module({name:'ZazzleWww.Page.ProductUi',required:['ZazzleWww.ProductUi','Uize.Url','Uize.Widget.Button'],builder:function(g_$){'use strict';var g__=Uize,g_a=g__.Url,g_b=true,g_c=null;var g_d=g_$.subclass(
g_c,function(){var m=this,g_e=m.addChild('productUi',m.g_f||ZazzleWww.ProductUi),g_g=m.addChild('customize',g__.Widget.Button);g_e.wire('Submit',function(g_h){m.handleAddToCart(g_h.data)});g_g.wire('Click',
function(){var g_i=m.get('urls').customizeIt;if(m.g_j)g_e.set({isDesigning:true});else if(g_i)location.href=g_a.resolve(g_i,g__.copyInto({qty:g_e.get('quantity')},g_e.getProductParams(true)))});g_e.once('isDesigning',function(){
m.web('customizeItButtonWrapper').hide();});}),g_k=g_d.prototype;g_k.getUrl=function(){return g_a.resolve(g_$.doMy(this,'getUrl'),{gl:this.g_l},this.children.productUi.getProductParams(true))};g_k.handleAddToCart=function(g_m){
var m=this,g_e=m.children.productUi,g_n=(g_m&&g_m.productId)||g_e.get('productId'),g_o=g_e.get('designId');if(g_o)g_n=g_c;else if(g_n)g_o=g_c;location.href=g_a.resolve(m.get('urls').addToCart,{multi:true,
product:g_a.toParams(Uize.copyInto({pt:g_e.get('productType'),pd:g_n,dz:g_o,qty:g_e.get('quantity'),tl:m.g_p||g_e.get('title')},g_e.valueOf()))});};g_k.wireUi=function(){var m=this;if(!m.isWired){if(m.g_q){
var g_r=false;m.web(window).wireOnce('scroll',function(){g_r=g_b});setTimeout(function(){!g_r&&g__.require('Uize.Fx.Scroll',function(g_s){g_s.scrollToNode(m.children.productUi.getNode(),{fullVisibility:g_b}
)});},2000);}g_$.doMy(m,'wireUi');}};g_d.stateProperties({g_p:'addToCartTitleOverride',g_j:'inlineCustomize',g_f:'productUiWidgetClass',g_q:'scrollIntoView',g_l:'skinnedStore'});return g_d;}});
Uize.module({name:'ZazzleWww.Page.ProductUi.Main',required:['ZazzleWww.AccessoriesUi','Zazzle.ProductValueMessagingUi','Uize.Url','Uize.Widget.Button'],builder:function(h_$){'use strict';var h__=true,h_a=false,
h_b=null,h_c=Uize,h_d=h_c.Url,h_e=Zazzle,h_f=ZazzleWww;var h_g=h_$.subclass(h_b,function(){var m=this,h_h=m.children.productUi,h_i=m.h_i,h_j=h_h.get('quantity'),h_k=m.addChild('accessoriesUi',h_f.AccessoriesUi,{quantity:h_j}),
h_l=m.addChild('accessoriesUiMore',h_f.AccessoriesUi,{quantity:h_j}),h_m=m.addChild('valueMessaging',h_e.ProductValueMessagingUi),h_n=h_i&&m.addChild('overallRatingPurchaseUi',h_e.OverallReviewRating),
h_o=h_i&&m.addChild('productTypeReviews',h_e.Results.Reviews,{ajaxBoth:h__}),h_p=h_i&&m.addChild('productTypeReviewsSummary',h_e.ReviewSummary,{ajaxBoth:h__});h_h.wire({'Changed.productOption':function(){
var h_q=h_h.get('productOption'),h_r={attributes:h_q},h_s=h_d.toParams(h_q);h_m.set({productOption:h_q});h_k.set(h_r);h_l.set(h_r);h_c.forEach([h_n,h_o,h_p],function(h_t){h_t&&h_t.set({attributes:h_s})}
);},'Changed.quantity':function(){var h_r={quantity:h_h.get('quantity')};h_k.set(h_r);h_l.set(h_r);},'Changed.templateParams':function(){var h_u={templateParams:h_h.get('templateParams')};h_k.set(h_u);
h_l.set(h_u);},'Responsive Sizing':function(){var h_v=m.web(h_h.getNode('extraProductTitleShell')).css('display')!='none';if((h_v&& !m.h_w)||(!h_v&&m.h_w)){h_c.require('Uize.Web.xDom',function(){if(h_v&& !m.h_w){
m.h_w=h__;m.web(h_m).after(m.getNode('sharePod'));m.web('main').append(m.getNode('recommendationsShell'));h_n&&m.web(h_h.getNode('extraProductTitleShell')).append(h_n.getNode());m.set({h_x:h__,h_y:h__
});h_m.updateUi();}else if(!h_v&&m.h_w){m.h_w=h_a;m.web('accessoriesUi').before(m.getNode('sharePod'));m.web('reviewsShell').before(m.getNode('recommendationsShell'));h_n&&m.web(h_h.children.configurator.getFormElement('purchaseUi').getNode('titleShell')).append(h_n.getNode())
;m.set({h_x:h_a,h_y:h_a});h_m.updateUi();}});}},'Changed.hasConstraints':function(){m.h_z()}});var h_A=function(h_B,h_C){var h_D={productId:h_C?null:h_B};h_C&&h_h.set({isDesigning:true});h_k.set(h_D);
h_l.set(h_D);},h_E=function(h_F){h_F.wire({'Changed.values':function(){m.h_z()},'Accessory Added':function(h_G){if(h_G.bundleId)location.href=m.get('env').www+h_G.bundleId;else if(m.h_H)h_A(h_G.parentProductId,m.h_H);
},'Before Add':function(h_G){m.h_H=h_h.get('isDesigning');h_G.handled=true;h_h.productize(function(h_I,h_J){if(h_I){var h_B=h_J.productId;h_F.set({productId:h_B});h_G.handler&&h_G.handler(h_B);}else m.inform({
state:'error',message:m.localize('productizeFailedAccessory')});});},'Cancel Add':function(h_G){h_A(h_G.parentProductId,m.h_H);}});};h_E(h_k);h_E(h_l);m.addChild('toggleAccessoriesUi',h_c.Widget.Button).wire(
'Click',function(){m.toggle('accessoriesUiCollapsed')});h_o&&h_o.wire({'Changed.numResults':function(){m.h_K()},'Changed.similarReviewsTitle':function(){m.isWired&&m.web('productTypeReviewsTitle').html(h_o.get('similarReviewsTitle'));
}});}),h_L=h_g.prototype;h_L.h_z=function(){var m=this,h_M=m.children,h_h=h_M.productUi;if(m.isWired){var h_N=function(h_O){var h_k=h_M[h_O],h_P=h_k.get('values').length;m.web(h_O).display(h_P);h_P&&h_k.set('enabled',h_h.get('hasConstraints')?h_a:'inherit')
;};h_N('accessoriesUi');h_N('accessoriesUiMore');}};h_L.h_Q=function(){var m=this,h_R=m.h_S;if(m.isWired){m.web('accessoriesUi').setClassState(m.h_T,h_R);m.web(m.children.accessoriesUi).display(!h_R);
}};h_L.h_U=function(){var m=this,h_R=m.h_x;if(m.isWired){m.web('designInfoShell').setClassState(m.h_T,h_R);m.web('designInfo').display(!h_R);}};h_L.h_K=function(){var m=this;if(m.isWired){var h_o=m.children.productTypeReviews;
h_o&&m.web('productTypeReviews').display(h_o.get('numResults')>0);}};h_L.h_V=function(){var m=this,h_R=m.h_y;if(m.isWired){m.web('productTypeReviews').setClassState(m.h_T,h_R);m.web('reviewsContent').display(!h_R);
}};h_L.getUrl=function(){return h_d.resolve(h_$.doMy(this,'getUrl'),{gl:this.h_W},this.children.productUi.getProductParams(true));};h_L.updateUi=function(){var m=this;if(m.isWired){m.h_z();m.h_Q();m.h_U();
m.h_K();h_$.doMy(m,'updateUi');}};h_L.wireUi=function(){var m=this;if(!m.isWired){var h_X=function(h_Y,h_Z){m.web(h_Y).click(function(){m.toggle(h_Z)});};h_X('accessoriesUiTitle','accessoriesUiCollapsed');
h_X('designInfoTitle','designInfoCollapsed');h_X('reviewTitle','reviewsCollapsed');h_$.doMy(m,'wireUi');}};h_g.stateProperties({h_S:{name:'accessoriesUiCollapsed',onChange:h_L.h_Q,value:h_a},h_T:'cssClassCollapsed',
h_x:{name:'designInfoCollapsed',onChange:h_L.h_U,value:h_a},h_0:'qualifiedType',h_y:{name:'reviewsCollapsed',onChange:h_L.h_V,value:h_a},h_i:'showReviews'});return h_g;}});
Uize.module({name:'ZazzleWww.Page.ProductUi.Main.DesignToolCombined',required:'Uize.Url',builder:function(i_$){var i__=null;var i_a=i_$.subclass();i_a.prototype.getUrl=function(){return Uize.Url.resolve(
this.get('urls').designTool,Uize.copyInto(Uize.Url.fromParams(i_$.doMy(this,'getUrl'),{favorQuery:false}),{pd:i__,pt:i__,dz:this.children.productUi.get('designId')}))};i_a.prototype.wireUi=function(){
var m=this;if(!m.isWired){var i_b=m.children.productUi,i_c=m.web('beenHere'),i_d=m.web('lastLocationSearch'),i_e=m.web('lastInProgressProductDesignId'),i_f=location.search,i_g=m.web(i_b.getNode('extraProductTitleShell')).css('display')!='none'
;if(i_f!=i_d.value()||i_c.value()!=1){i_c.value(1);i_d.value(i_f);}else i_b.set({designId:i_e.value(),launchGetStarted:false});i_b.wire('Changed.designId',function(){i_e.value(i_b.get('designId'))});
if(i_g)i_b.set({launchGetStarted:false});i_$.doMy(m,'wireUi');}};return i_a;}});
